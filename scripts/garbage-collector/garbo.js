"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = function(cb, mod) {
  return function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
};
var __export = function(target, all2) {
  for (var name in all2)
    __defProp(target, name, { get: all2[name], enumerable: true });
};
var __copyProps = function(to, from, except, desc) {
  if (from && typeof from === "object" || typeof from === "function")
    for (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {
      key = keys[i];
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: function(k) {
          return from[k];
        }.bind(null, key), enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
  return to;
};
var __toESM = function(mod, isNodeMode, target) {
  return target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  );
};
var __toCommonJS = function(mod) {
  return __copyProps(__defProp({}, "__esModule", { value: true }), mod);
};

// node_modules/html-entities/lib/named-references.js
var require_named_references = __commonJS({
  "node_modules/html-entities/lib/named-references.js": function(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.bodyRegExps = {
      xml: /&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,
      html4: /&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,
      html5: /&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g
    };
    exports.namedReferences = {
      xml: {
        entities: {
          "&lt;": "<",
          "&gt;": ">",
          "&quot;": '"',
          "&apos;": "'",
          "&amp;": "&"
        },
        characters: {
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&apos;",
          "&": "&amp;"
        }
      },
      html4: {
        entities: {
          "&apos;": "'",
          "&nbsp": "\xA0",
          "&nbsp;": "\xA0",
          "&iexcl": "\xA1",
          "&iexcl;": "\xA1",
          "&cent": "\xA2",
          "&cent;": "\xA2",
          "&pound": "\xA3",
          "&pound;": "\xA3",
          "&curren": "\xA4",
          "&curren;": "\xA4",
          "&yen": "\xA5",
          "&yen;": "\xA5",
          "&brvbar": "\xA6",
          "&brvbar;": "\xA6",
          "&sect": "\xA7",
          "&sect;": "\xA7",
          "&uml": "\xA8",
          "&uml;": "\xA8",
          "&copy": "\xA9",
          "&copy;": "\xA9",
          "&ordf": "\xAA",
          "&ordf;": "\xAA",
          "&laquo": "\xAB",
          "&laquo;": "\xAB",
          "&not": "\xAC",
          "&not;": "\xAC",
          "&shy": "\xAD",
          "&shy;": "\xAD",
          "&reg": "\xAE",
          "&reg;": "\xAE",
          "&macr": "\xAF",
          "&macr;": "\xAF",
          "&deg": "\xB0",
          "&deg;": "\xB0",
          "&plusmn": "\xB1",
          "&plusmn;": "\xB1",
          "&sup2": "\xB2",
          "&sup2;": "\xB2",
          "&sup3": "\xB3",
          "&sup3;": "\xB3",
          "&acute": "\xB4",
          "&acute;": "\xB4",
          "&micro": "\xB5",
          "&micro;": "\xB5",
          "&para": "\xB6",
          "&para;": "\xB6",
          "&middot": "\xB7",
          "&middot;": "\xB7",
          "&cedil": "\xB8",
          "&cedil;": "\xB8",
          "&sup1": "\xB9",
          "&sup1;": "\xB9",
          "&ordm": "\xBA",
          "&ordm;": "\xBA",
          "&raquo": "\xBB",
          "&raquo;": "\xBB",
          "&frac14": "\xBC",
          "&frac14;": "\xBC",
          "&frac12": "\xBD",
          "&frac12;": "\xBD",
          "&frac34": "\xBE",
          "&frac34;": "\xBE",
          "&iquest": "\xBF",
          "&iquest;": "\xBF",
          "&Agrave": "\xC0",
          "&Agrave;": "\xC0",
          "&Aacute": "\xC1",
          "&Aacute;": "\xC1",
          "&Acirc": "\xC2",
          "&Acirc;": "\xC2",
          "&Atilde": "\xC3",
          "&Atilde;": "\xC3",
          "&Auml": "\xC4",
          "&Auml;": "\xC4",
          "&Aring": "\xC5",
          "&Aring;": "\xC5",
          "&AElig": "\xC6",
          "&AElig;": "\xC6",
          "&Ccedil": "\xC7",
          "&Ccedil;": "\xC7",
          "&Egrave": "\xC8",
          "&Egrave;": "\xC8",
          "&Eacute": "\xC9",
          "&Eacute;": "\xC9",
          "&Ecirc": "\xCA",
          "&Ecirc;": "\xCA",
          "&Euml": "\xCB",
          "&Euml;": "\xCB",
          "&Igrave": "\xCC",
          "&Igrave;": "\xCC",
          "&Iacute": "\xCD",
          "&Iacute;": "\xCD",
          "&Icirc": "\xCE",
          "&Icirc;": "\xCE",
          "&Iuml": "\xCF",
          "&Iuml;": "\xCF",
          "&ETH": "\xD0",
          "&ETH;": "\xD0",
          "&Ntilde": "\xD1",
          "&Ntilde;": "\xD1",
          "&Ograve": "\xD2",
          "&Ograve;": "\xD2",
          "&Oacute": "\xD3",
          "&Oacute;": "\xD3",
          "&Ocirc": "\xD4",
          "&Ocirc;": "\xD4",
          "&Otilde": "\xD5",
          "&Otilde;": "\xD5",
          "&Ouml": "\xD6",
          "&Ouml;": "\xD6",
          "&times": "\xD7",
          "&times;": "\xD7",
          "&Oslash": "\xD8",
          "&Oslash;": "\xD8",
          "&Ugrave": "\xD9",
          "&Ugrave;": "\xD9",
          "&Uacute": "\xDA",
          "&Uacute;": "\xDA",
          "&Ucirc": "\xDB",
          "&Ucirc;": "\xDB",
          "&Uuml": "\xDC",
          "&Uuml;": "\xDC",
          "&Yacute": "\xDD",
          "&Yacute;": "\xDD",
          "&THORN": "\xDE",
          "&THORN;": "\xDE",
          "&szlig": "\xDF",
          "&szlig;": "\xDF",
          "&agrave": "\xE0",
          "&agrave;": "\xE0",
          "&aacute": "\xE1",
          "&aacute;": "\xE1",
          "&acirc": "\xE2",
          "&acirc;": "\xE2",
          "&atilde": "\xE3",
          "&atilde;": "\xE3",
          "&auml": "\xE4",
          "&auml;": "\xE4",
          "&aring": "\xE5",
          "&aring;": "\xE5",
          "&aelig": "\xE6",
          "&aelig;": "\xE6",
          "&ccedil": "\xE7",
          "&ccedil;": "\xE7",
          "&egrave": "\xE8",
          "&egrave;": "\xE8",
          "&eacute": "\xE9",
          "&eacute;": "\xE9",
          "&ecirc": "\xEA",
          "&ecirc;": "\xEA",
          "&euml": "\xEB",
          "&euml;": "\xEB",
          "&igrave": "\xEC",
          "&igrave;": "\xEC",
          "&iacute": "\xED",
          "&iacute;": "\xED",
          "&icirc": "\xEE",
          "&icirc;": "\xEE",
          "&iuml": "\xEF",
          "&iuml;": "\xEF",
          "&eth": "\xF0",
          "&eth;": "\xF0",
          "&ntilde": "\xF1",
          "&ntilde;": "\xF1",
          "&ograve": "\xF2",
          "&ograve;": "\xF2",
          "&oacute": "\xF3",
          "&oacute;": "\xF3",
          "&ocirc": "\xF4",
          "&ocirc;": "\xF4",
          "&otilde": "\xF5",
          "&otilde;": "\xF5",
          "&ouml": "\xF6",
          "&ouml;": "\xF6",
          "&divide": "\xF7",
          "&divide;": "\xF7",
          "&oslash": "\xF8",
          "&oslash;": "\xF8",
          "&ugrave": "\xF9",
          "&ugrave;": "\xF9",
          "&uacute": "\xFA",
          "&uacute;": "\xFA",
          "&ucirc": "\xFB",
          "&ucirc;": "\xFB",
          "&uuml": "\xFC",
          "&uuml;": "\xFC",
          "&yacute": "\xFD",
          "&yacute;": "\xFD",
          "&thorn": "\xFE",
          "&thorn;": "\xFE",
          "&yuml": "\xFF",
          "&yuml;": "\xFF",
          "&quot": '"',
          "&quot;": '"',
          "&amp": "&",
          "&amp;": "&",
          "&lt": "<",
          "&lt;": "<",
          "&gt": ">",
          "&gt;": ">",
          "&OElig;": "\u0152",
          "&oelig;": "\u0153",
          "&Scaron;": "\u0160",
          "&scaron;": "\u0161",
          "&Yuml;": "\u0178",
          "&circ;": "\u02C6",
          "&tilde;": "\u02DC",
          "&ensp;": "\u2002",
          "&emsp;": "\u2003",
          "&thinsp;": "\u2009",
          "&zwnj;": "\u200C",
          "&zwj;": "\u200D",
          "&lrm;": "\u200E",
          "&rlm;": "\u200F",
          "&ndash;": "\u2013",
          "&mdash;": "\u2014",
          "&lsquo;": "\u2018",
          "&rsquo;": "\u2019",
          "&sbquo;": "\u201A",
          "&ldquo;": "\u201C",
          "&rdquo;": "\u201D",
          "&bdquo;": "\u201E",
          "&dagger;": "\u2020",
          "&Dagger;": "\u2021",
          "&permil;": "\u2030",
          "&lsaquo;": "\u2039",
          "&rsaquo;": "\u203A",
          "&euro;": "\u20AC",
          "&fnof;": "\u0192",
          "&Alpha;": "\u0391",
          "&Beta;": "\u0392",
          "&Gamma;": "\u0393",
          "&Delta;": "\u0394",
          "&Epsilon;": "\u0395",
          "&Zeta;": "\u0396",
          "&Eta;": "\u0397",
          "&Theta;": "\u0398",
          "&Iota;": "\u0399",
          "&Kappa;": "\u039A",
          "&Lambda;": "\u039B",
          "&Mu;": "\u039C",
          "&Nu;": "\u039D",
          "&Xi;": "\u039E",
          "&Omicron;": "\u039F",
          "&Pi;": "\u03A0",
          "&Rho;": "\u03A1",
          "&Sigma;": "\u03A3",
          "&Tau;": "\u03A4",
          "&Upsilon;": "\u03A5",
          "&Phi;": "\u03A6",
          "&Chi;": "\u03A7",
          "&Psi;": "\u03A8",
          "&Omega;": "\u03A9",
          "&alpha;": "\u03B1",
          "&beta;": "\u03B2",
          "&gamma;": "\u03B3",
          "&delta;": "\u03B4",
          "&epsilon;": "\u03B5",
          "&zeta;": "\u03B6",
          "&eta;": "\u03B7",
          "&theta;": "\u03B8",
          "&iota;": "\u03B9",
          "&kappa;": "\u03BA",
          "&lambda;": "\u03BB",
          "&mu;": "\u03BC",
          "&nu;": "\u03BD",
          "&xi;": "\u03BE",
          "&omicron;": "\u03BF",
          "&pi;": "\u03C0",
          "&rho;": "\u03C1",
          "&sigmaf;": "\u03C2",
          "&sigma;": "\u03C3",
          "&tau;": "\u03C4",
          "&upsilon;": "\u03C5",
          "&phi;": "\u03C6",
          "&chi;": "\u03C7",
          "&psi;": "\u03C8",
          "&omega;": "\u03C9",
          "&thetasym;": "\u03D1",
          "&upsih;": "\u03D2",
          "&piv;": "\u03D6",
          "&bull;": "\u2022",
          "&hellip;": "\u2026",
          "&prime;": "\u2032",
          "&Prime;": "\u2033",
          "&oline;": "\u203E",
          "&frasl;": "\u2044",
          "&weierp;": "\u2118",
          "&image;": "\u2111",
          "&real;": "\u211C",
          "&trade;": "\u2122",
          "&alefsym;": "\u2135",
          "&larr;": "\u2190",
          "&uarr;": "\u2191",
          "&rarr;": "\u2192",
          "&darr;": "\u2193",
          "&harr;": "\u2194",
          "&crarr;": "\u21B5",
          "&lArr;": "\u21D0",
          "&uArr;": "\u21D1",
          "&rArr;": "\u21D2",
          "&dArr;": "\u21D3",
          "&hArr;": "\u21D4",
          "&forall;": "\u2200",
          "&part;": "\u2202",
          "&exist;": "\u2203",
          "&empty;": "\u2205",
          "&nabla;": "\u2207",
          "&isin;": "\u2208",
          "&notin;": "\u2209",
          "&ni;": "\u220B",
          "&prod;": "\u220F",
          "&sum;": "\u2211",
          "&minus;": "\u2212",
          "&lowast;": "\u2217",
          "&radic;": "\u221A",
          "&prop;": "\u221D",
          "&infin;": "\u221E",
          "&ang;": "\u2220",
          "&and;": "\u2227",
          "&or;": "\u2228",
          "&cap;": "\u2229",
          "&cup;": "\u222A",
          "&int;": "\u222B",
          "&there4;": "\u2234",
          "&sim;": "\u223C",
          "&cong;": "\u2245",
          "&asymp;": "\u2248",
          "&ne;": "\u2260",
          "&equiv;": "\u2261",
          "&le;": "\u2264",
          "&ge;": "\u2265",
          "&sub;": "\u2282",
          "&sup;": "\u2283",
          "&nsub;": "\u2284",
          "&sube;": "\u2286",
          "&supe;": "\u2287",
          "&oplus;": "\u2295",
          "&otimes;": "\u2297",
          "&perp;": "\u22A5",
          "&sdot;": "\u22C5",
          "&lceil;": "\u2308",
          "&rceil;": "\u2309",
          "&lfloor;": "\u230A",
          "&rfloor;": "\u230B",
          "&lang;": "\u2329",
          "&rang;": "\u232A",
          "&loz;": "\u25CA",
          "&spades;": "\u2660",
          "&clubs;": "\u2663",
          "&hearts;": "\u2665",
          "&diams;": "\u2666"
        },
        characters: {
          "'": "&apos;",
          "\xA0": "&nbsp;",
          "\xA1": "&iexcl;",
          "\xA2": "&cent;",
          "\xA3": "&pound;",
          "\xA4": "&curren;",
          "\xA5": "&yen;",
          "\xA6": "&brvbar;",
          "\xA7": "&sect;",
          "\xA8": "&uml;",
          "\xA9": "&copy;",
          "\xAA": "&ordf;",
          "\xAB": "&laquo;",
          "\xAC": "&not;",
          "\xAD": "&shy;",
          "\xAE": "&reg;",
          "\xAF": "&macr;",
          "\xB0": "&deg;",
          "\xB1": "&plusmn;",
          "\xB2": "&sup2;",
          "\xB3": "&sup3;",
          "\xB4": "&acute;",
          "\xB5": "&micro;",
          "\xB6": "&para;",
          "\xB7": "&middot;",
          "\xB8": "&cedil;",
          "\xB9": "&sup1;",
          "\xBA": "&ordm;",
          "\xBB": "&raquo;",
          "\xBC": "&frac14;",
          "\xBD": "&frac12;",
          "\xBE": "&frac34;",
          "\xBF": "&iquest;",
          "\xC0": "&Agrave;",
          "\xC1": "&Aacute;",
          "\xC2": "&Acirc;",
          "\xC3": "&Atilde;",
          "\xC4": "&Auml;",
          "\xC5": "&Aring;",
          "\xC6": "&AElig;",
          "\xC7": "&Ccedil;",
          "\xC8": "&Egrave;",
          "\xC9": "&Eacute;",
          "\xCA": "&Ecirc;",
          "\xCB": "&Euml;",
          "\xCC": "&Igrave;",
          "\xCD": "&Iacute;",
          "\xCE": "&Icirc;",
          "\xCF": "&Iuml;",
          "\xD0": "&ETH;",
          "\xD1": "&Ntilde;",
          "\xD2": "&Ograve;",
          "\xD3": "&Oacute;",
          "\xD4": "&Ocirc;",
          "\xD5": "&Otilde;",
          "\xD6": "&Ouml;",
          "\xD7": "&times;",
          "\xD8": "&Oslash;",
          "\xD9": "&Ugrave;",
          "\xDA": "&Uacute;",
          "\xDB": "&Ucirc;",
          "\xDC": "&Uuml;",
          "\xDD": "&Yacute;",
          "\xDE": "&THORN;",
          "\xDF": "&szlig;",
          "\xE0": "&agrave;",
          "\xE1": "&aacute;",
          "\xE2": "&acirc;",
          "\xE3": "&atilde;",
          "\xE4": "&auml;",
          "\xE5": "&aring;",
          "\xE6": "&aelig;",
          "\xE7": "&ccedil;",
          "\xE8": "&egrave;",
          "\xE9": "&eacute;",
          "\xEA": "&ecirc;",
          "\xEB": "&euml;",
          "\xEC": "&igrave;",
          "\xED": "&iacute;",
          "\xEE": "&icirc;",
          "\xEF": "&iuml;",
          "\xF0": "&eth;",
          "\xF1": "&ntilde;",
          "\xF2": "&ograve;",
          "\xF3": "&oacute;",
          "\xF4": "&ocirc;",
          "\xF5": "&otilde;",
          "\xF6": "&ouml;",
          "\xF7": "&divide;",
          "\xF8": "&oslash;",
          "\xF9": "&ugrave;",
          "\xFA": "&uacute;",
          "\xFB": "&ucirc;",
          "\xFC": "&uuml;",
          "\xFD": "&yacute;",
          "\xFE": "&thorn;",
          "\xFF": "&yuml;",
          '"': "&quot;",
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          "\u0152": "&OElig;",
          "\u0153": "&oelig;",
          "\u0160": "&Scaron;",
          "\u0161": "&scaron;",
          "\u0178": "&Yuml;",
          "\u02C6": "&circ;",
          "\u02DC": "&tilde;",
          "\u2002": "&ensp;",
          "\u2003": "&emsp;",
          "\u2009": "&thinsp;",
          "\u200C": "&zwnj;",
          "\u200D": "&zwj;",
          "\u200E": "&lrm;",
          "\u200F": "&rlm;",
          "\u2013": "&ndash;",
          "\u2014": "&mdash;",
          "\u2018": "&lsquo;",
          "\u2019": "&rsquo;",
          "\u201A": "&sbquo;",
          "\u201C": "&ldquo;",
          "\u201D": "&rdquo;",
          "\u201E": "&bdquo;",
          "\u2020": "&dagger;",
          "\u2021": "&Dagger;",
          "\u2030": "&permil;",
          "\u2039": "&lsaquo;",
          "\u203A": "&rsaquo;",
          "\u20AC": "&euro;",
          "\u0192": "&fnof;",
          "\u0391": "&Alpha;",
          "\u0392": "&Beta;",
          "\u0393": "&Gamma;",
          "\u0394": "&Delta;",
          "\u0395": "&Epsilon;",
          "\u0396": "&Zeta;",
          "\u0397": "&Eta;",
          "\u0398": "&Theta;",
          "\u0399": "&Iota;",
          "\u039A": "&Kappa;",
          "\u039B": "&Lambda;",
          "\u039C": "&Mu;",
          "\u039D": "&Nu;",
          "\u039E": "&Xi;",
          "\u039F": "&Omicron;",
          "\u03A0": "&Pi;",
          "\u03A1": "&Rho;",
          "\u03A3": "&Sigma;",
          "\u03A4": "&Tau;",
          "\u03A5": "&Upsilon;",
          "\u03A6": "&Phi;",
          "\u03A7": "&Chi;",
          "\u03A8": "&Psi;",
          "\u03A9": "&Omega;",
          "\u03B1": "&alpha;",
          "\u03B2": "&beta;",
          "\u03B3": "&gamma;",
          "\u03B4": "&delta;",
          "\u03B5": "&epsilon;",
          "\u03B6": "&zeta;",
          "\u03B7": "&eta;",
          "\u03B8": "&theta;",
          "\u03B9": "&iota;",
          "\u03BA": "&kappa;",
          "\u03BB": "&lambda;",
          "\u03BC": "&mu;",
          "\u03BD": "&nu;",
          "\u03BE": "&xi;",
          "\u03BF": "&omicron;",
          "\u03C0": "&pi;",
          "\u03C1": "&rho;",
          "\u03C2": "&sigmaf;",
          "\u03C3": "&sigma;",
          "\u03C4": "&tau;",
          "\u03C5": "&upsilon;",
          "\u03C6": "&phi;",
          "\u03C7": "&chi;",
          "\u03C8": "&psi;",
          "\u03C9": "&omega;",
          "\u03D1": "&thetasym;",
          "\u03D2": "&upsih;",
          "\u03D6": "&piv;",
          "\u2022": "&bull;",
          "\u2026": "&hellip;",
          "\u2032": "&prime;",
          "\u2033": "&Prime;",
          "\u203E": "&oline;",
          "\u2044": "&frasl;",
          "\u2118": "&weierp;",
          "\u2111": "&image;",
          "\u211C": "&real;",
          "\u2122": "&trade;",
          "\u2135": "&alefsym;",
          "\u2190": "&larr;",
          "\u2191": "&uarr;",
          "\u2192": "&rarr;",
          "\u2193": "&darr;",
          "\u2194": "&harr;",
          "\u21B5": "&crarr;",
          "\u21D0": "&lArr;",
          "\u21D1": "&uArr;",
          "\u21D2": "&rArr;",
          "\u21D3": "&dArr;",
          "\u21D4": "&hArr;",
          "\u2200": "&forall;",
          "\u2202": "&part;",
          "\u2203": "&exist;",
          "\u2205": "&empty;",
          "\u2207": "&nabla;",
          "\u2208": "&isin;",
          "\u2209": "&notin;",
          "\u220B": "&ni;",
          "\u220F": "&prod;",
          "\u2211": "&sum;",
          "\u2212": "&minus;",
          "\u2217": "&lowast;",
          "\u221A": "&radic;",
          "\u221D": "&prop;",
          "\u221E": "&infin;",
          "\u2220": "&ang;",
          "\u2227": "&and;",
          "\u2228": "&or;",
          "\u2229": "&cap;",
          "\u222A": "&cup;",
          "\u222B": "&int;",
          "\u2234": "&there4;",
          "\u223C": "&sim;",
          "\u2245": "&cong;",
          "\u2248": "&asymp;",
          "\u2260": "&ne;",
          "\u2261": "&equiv;",
          "\u2264": "&le;",
          "\u2265": "&ge;",
          "\u2282": "&sub;",
          "\u2283": "&sup;",
          "\u2284": "&nsub;",
          "\u2286": "&sube;",
          "\u2287": "&supe;",
          "\u2295": "&oplus;",
          "\u2297": "&otimes;",
          "\u22A5": "&perp;",
          "\u22C5": "&sdot;",
          "\u2308": "&lceil;",
          "\u2309": "&rceil;",
          "\u230A": "&lfloor;",
          "\u230B": "&rfloor;",
          "\u2329": "&lang;",
          "\u232A": "&rang;",
          "\u25CA": "&loz;",
          "\u2660": "&spades;",
          "\u2663": "&clubs;",
          "\u2665": "&hearts;",
          "\u2666": "&diams;"
        }
      },
      html5: {
        entities: {
          "&AElig": "\xC6",
          "&AElig;": "\xC6",
          "&AMP": "&",
          "&AMP;": "&",
          "&Aacute": "\xC1",
          "&Aacute;": "\xC1",
          "&Abreve;": "\u0102",
          "&Acirc": "\xC2",
          "&Acirc;": "\xC2",
          "&Acy;": "\u0410",
          "&Afr;": "\uD835\uDD04",
          "&Agrave": "\xC0",
          "&Agrave;": "\xC0",
          "&Alpha;": "\u0391",
          "&Amacr;": "\u0100",
          "&And;": "\u2A53",
          "&Aogon;": "\u0104",
          "&Aopf;": "\uD835\uDD38",
          "&ApplyFunction;": "\u2061",
          "&Aring": "\xC5",
          "&Aring;": "\xC5",
          "&Ascr;": "\uD835\uDC9C",
          "&Assign;": "\u2254",
          "&Atilde": "\xC3",
          "&Atilde;": "\xC3",
          "&Auml": "\xC4",
          "&Auml;": "\xC4",
          "&Backslash;": "\u2216",
          "&Barv;": "\u2AE7",
          "&Barwed;": "\u2306",
          "&Bcy;": "\u0411",
          "&Because;": "\u2235",
          "&Bernoullis;": "\u212C",
          "&Beta;": "\u0392",
          "&Bfr;": "\uD835\uDD05",
          "&Bopf;": "\uD835\uDD39",
          "&Breve;": "\u02D8",
          "&Bscr;": "\u212C",
          "&Bumpeq;": "\u224E",
          "&CHcy;": "\u0427",
          "&COPY": "\xA9",
          "&COPY;": "\xA9",
          "&Cacute;": "\u0106",
          "&Cap;": "\u22D2",
          "&CapitalDifferentialD;": "\u2145",
          "&Cayleys;": "\u212D",
          "&Ccaron;": "\u010C",
          "&Ccedil": "\xC7",
          "&Ccedil;": "\xC7",
          "&Ccirc;": "\u0108",
          "&Cconint;": "\u2230",
          "&Cdot;": "\u010A",
          "&Cedilla;": "\xB8",
          "&CenterDot;": "\xB7",
          "&Cfr;": "\u212D",
          "&Chi;": "\u03A7",
          "&CircleDot;": "\u2299",
          "&CircleMinus;": "\u2296",
          "&CirclePlus;": "\u2295",
          "&CircleTimes;": "\u2297",
          "&ClockwiseContourIntegral;": "\u2232",
          "&CloseCurlyDoubleQuote;": "\u201D",
          "&CloseCurlyQuote;": "\u2019",
          "&Colon;": "\u2237",
          "&Colone;": "\u2A74",
          "&Congruent;": "\u2261",
          "&Conint;": "\u222F",
          "&ContourIntegral;": "\u222E",
          "&Copf;": "\u2102",
          "&Coproduct;": "\u2210",
          "&CounterClockwiseContourIntegral;": "\u2233",
          "&Cross;": "\u2A2F",
          "&Cscr;": "\uD835\uDC9E",
          "&Cup;": "\u22D3",
          "&CupCap;": "\u224D",
          "&DD;": "\u2145",
          "&DDotrahd;": "\u2911",
          "&DJcy;": "\u0402",
          "&DScy;": "\u0405",
          "&DZcy;": "\u040F",
          "&Dagger;": "\u2021",
          "&Darr;": "\u21A1",
          "&Dashv;": "\u2AE4",
          "&Dcaron;": "\u010E",
          "&Dcy;": "\u0414",
          "&Del;": "\u2207",
          "&Delta;": "\u0394",
          "&Dfr;": "\uD835\uDD07",
          "&DiacriticalAcute;": "\xB4",
          "&DiacriticalDot;": "\u02D9",
          "&DiacriticalDoubleAcute;": "\u02DD",
          "&DiacriticalGrave;": "`",
          "&DiacriticalTilde;": "\u02DC",
          "&Diamond;": "\u22C4",
          "&DifferentialD;": "\u2146",
          "&Dopf;": "\uD835\uDD3B",
          "&Dot;": "\xA8",
          "&DotDot;": "\u20DC",
          "&DotEqual;": "\u2250",
          "&DoubleContourIntegral;": "\u222F",
          "&DoubleDot;": "\xA8",
          "&DoubleDownArrow;": "\u21D3",
          "&DoubleLeftArrow;": "\u21D0",
          "&DoubleLeftRightArrow;": "\u21D4",
          "&DoubleLeftTee;": "\u2AE4",
          "&DoubleLongLeftArrow;": "\u27F8",
          "&DoubleLongLeftRightArrow;": "\u27FA",
          "&DoubleLongRightArrow;": "\u27F9",
          "&DoubleRightArrow;": "\u21D2",
          "&DoubleRightTee;": "\u22A8",
          "&DoubleUpArrow;": "\u21D1",
          "&DoubleUpDownArrow;": "\u21D5",
          "&DoubleVerticalBar;": "\u2225",
          "&DownArrow;": "\u2193",
          "&DownArrowBar;": "\u2913",
          "&DownArrowUpArrow;": "\u21F5",
          "&DownBreve;": "\u0311",
          "&DownLeftRightVector;": "\u2950",
          "&DownLeftTeeVector;": "\u295E",
          "&DownLeftVector;": "\u21BD",
          "&DownLeftVectorBar;": "\u2956",
          "&DownRightTeeVector;": "\u295F",
          "&DownRightVector;": "\u21C1",
          "&DownRightVectorBar;": "\u2957",
          "&DownTee;": "\u22A4",
          "&DownTeeArrow;": "\u21A7",
          "&Downarrow;": "\u21D3",
          "&Dscr;": "\uD835\uDC9F",
          "&Dstrok;": "\u0110",
          "&ENG;": "\u014A",
          "&ETH": "\xD0",
          "&ETH;": "\xD0",
          "&Eacute": "\xC9",
          "&Eacute;": "\xC9",
          "&Ecaron;": "\u011A",
          "&Ecirc": "\xCA",
          "&Ecirc;": "\xCA",
          "&Ecy;": "\u042D",
          "&Edot;": "\u0116",
          "&Efr;": "\uD835\uDD08",
          "&Egrave": "\xC8",
          "&Egrave;": "\xC8",
          "&Element;": "\u2208",
          "&Emacr;": "\u0112",
          "&EmptySmallSquare;": "\u25FB",
          "&EmptyVerySmallSquare;": "\u25AB",
          "&Eogon;": "\u0118",
          "&Eopf;": "\uD835\uDD3C",
          "&Epsilon;": "\u0395",
          "&Equal;": "\u2A75",
          "&EqualTilde;": "\u2242",
          "&Equilibrium;": "\u21CC",
          "&Escr;": "\u2130",
          "&Esim;": "\u2A73",
          "&Eta;": "\u0397",
          "&Euml": "\xCB",
          "&Euml;": "\xCB",
          "&Exists;": "\u2203",
          "&ExponentialE;": "\u2147",
          "&Fcy;": "\u0424",
          "&Ffr;": "\uD835\uDD09",
          "&FilledSmallSquare;": "\u25FC",
          "&FilledVerySmallSquare;": "\u25AA",
          "&Fopf;": "\uD835\uDD3D",
          "&ForAll;": "\u2200",
          "&Fouriertrf;": "\u2131",
          "&Fscr;": "\u2131",
          "&GJcy;": "\u0403",
          "&GT": ">",
          "&GT;": ">",
          "&Gamma;": "\u0393",
          "&Gammad;": "\u03DC",
          "&Gbreve;": "\u011E",
          "&Gcedil;": "\u0122",
          "&Gcirc;": "\u011C",
          "&Gcy;": "\u0413",
          "&Gdot;": "\u0120",
          "&Gfr;": "\uD835\uDD0A",
          "&Gg;": "\u22D9",
          "&Gopf;": "\uD835\uDD3E",
          "&GreaterEqual;": "\u2265",
          "&GreaterEqualLess;": "\u22DB",
          "&GreaterFullEqual;": "\u2267",
          "&GreaterGreater;": "\u2AA2",
          "&GreaterLess;": "\u2277",
          "&GreaterSlantEqual;": "\u2A7E",
          "&GreaterTilde;": "\u2273",
          "&Gscr;": "\uD835\uDCA2",
          "&Gt;": "\u226B",
          "&HARDcy;": "\u042A",
          "&Hacek;": "\u02C7",
          "&Hat;": "^",
          "&Hcirc;": "\u0124",
          "&Hfr;": "\u210C",
          "&HilbertSpace;": "\u210B",
          "&Hopf;": "\u210D",
          "&HorizontalLine;": "\u2500",
          "&Hscr;": "\u210B",
          "&Hstrok;": "\u0126",
          "&HumpDownHump;": "\u224E",
          "&HumpEqual;": "\u224F",
          "&IEcy;": "\u0415",
          "&IJlig;": "\u0132",
          "&IOcy;": "\u0401",
          "&Iacute": "\xCD",
          "&Iacute;": "\xCD",
          "&Icirc": "\xCE",
          "&Icirc;": "\xCE",
          "&Icy;": "\u0418",
          "&Idot;": "\u0130",
          "&Ifr;": "\u2111",
          "&Igrave": "\xCC",
          "&Igrave;": "\xCC",
          "&Im;": "\u2111",
          "&Imacr;": "\u012A",
          "&ImaginaryI;": "\u2148",
          "&Implies;": "\u21D2",
          "&Int;": "\u222C",
          "&Integral;": "\u222B",
          "&Intersection;": "\u22C2",
          "&InvisibleComma;": "\u2063",
          "&InvisibleTimes;": "\u2062",
          "&Iogon;": "\u012E",
          "&Iopf;": "\uD835\uDD40",
          "&Iota;": "\u0399",
          "&Iscr;": "\u2110",
          "&Itilde;": "\u0128",
          "&Iukcy;": "\u0406",
          "&Iuml": "\xCF",
          "&Iuml;": "\xCF",
          "&Jcirc;": "\u0134",
          "&Jcy;": "\u0419",
          "&Jfr;": "\uD835\uDD0D",
          "&Jopf;": "\uD835\uDD41",
          "&Jscr;": "\uD835\uDCA5",
          "&Jsercy;": "\u0408",
          "&Jukcy;": "\u0404",
          "&KHcy;": "\u0425",
          "&KJcy;": "\u040C",
          "&Kappa;": "\u039A",
          "&Kcedil;": "\u0136",
          "&Kcy;": "\u041A",
          "&Kfr;": "\uD835\uDD0E",
          "&Kopf;": "\uD835\uDD42",
          "&Kscr;": "\uD835\uDCA6",
          "&LJcy;": "\u0409",
          "&LT": "<",
          "&LT;": "<",
          "&Lacute;": "\u0139",
          "&Lambda;": "\u039B",
          "&Lang;": "\u27EA",
          "&Laplacetrf;": "\u2112",
          "&Larr;": "\u219E",
          "&Lcaron;": "\u013D",
          "&Lcedil;": "\u013B",
          "&Lcy;": "\u041B",
          "&LeftAngleBracket;": "\u27E8",
          "&LeftArrow;": "\u2190",
          "&LeftArrowBar;": "\u21E4",
          "&LeftArrowRightArrow;": "\u21C6",
          "&LeftCeiling;": "\u2308",
          "&LeftDoubleBracket;": "\u27E6",
          "&LeftDownTeeVector;": "\u2961",
          "&LeftDownVector;": "\u21C3",
          "&LeftDownVectorBar;": "\u2959",
          "&LeftFloor;": "\u230A",
          "&LeftRightArrow;": "\u2194",
          "&LeftRightVector;": "\u294E",
          "&LeftTee;": "\u22A3",
          "&LeftTeeArrow;": "\u21A4",
          "&LeftTeeVector;": "\u295A",
          "&LeftTriangle;": "\u22B2",
          "&LeftTriangleBar;": "\u29CF",
          "&LeftTriangleEqual;": "\u22B4",
          "&LeftUpDownVector;": "\u2951",
          "&LeftUpTeeVector;": "\u2960",
          "&LeftUpVector;": "\u21BF",
          "&LeftUpVectorBar;": "\u2958",
          "&LeftVector;": "\u21BC",
          "&LeftVectorBar;": "\u2952",
          "&Leftarrow;": "\u21D0",
          "&Leftrightarrow;": "\u21D4",
          "&LessEqualGreater;": "\u22DA",
          "&LessFullEqual;": "\u2266",
          "&LessGreater;": "\u2276",
          "&LessLess;": "\u2AA1",
          "&LessSlantEqual;": "\u2A7D",
          "&LessTilde;": "\u2272",
          "&Lfr;": "\uD835\uDD0F",
          "&Ll;": "\u22D8",
          "&Lleftarrow;": "\u21DA",
          "&Lmidot;": "\u013F",
          "&LongLeftArrow;": "\u27F5",
          "&LongLeftRightArrow;": "\u27F7",
          "&LongRightArrow;": "\u27F6",
          "&Longleftarrow;": "\u27F8",
          "&Longleftrightarrow;": "\u27FA",
          "&Longrightarrow;": "\u27F9",
          "&Lopf;": "\uD835\uDD43",
          "&LowerLeftArrow;": "\u2199",
          "&LowerRightArrow;": "\u2198",
          "&Lscr;": "\u2112",
          "&Lsh;": "\u21B0",
          "&Lstrok;": "\u0141",
          "&Lt;": "\u226A",
          "&Map;": "\u2905",
          "&Mcy;": "\u041C",
          "&MediumSpace;": "\u205F",
          "&Mellintrf;": "\u2133",
          "&Mfr;": "\uD835\uDD10",
          "&MinusPlus;": "\u2213",
          "&Mopf;": "\uD835\uDD44",
          "&Mscr;": "\u2133",
          "&Mu;": "\u039C",
          "&NJcy;": "\u040A",
          "&Nacute;": "\u0143",
          "&Ncaron;": "\u0147",
          "&Ncedil;": "\u0145",
          "&Ncy;": "\u041D",
          "&NegativeMediumSpace;": "\u200B",
          "&NegativeThickSpace;": "\u200B",
          "&NegativeThinSpace;": "\u200B",
          "&NegativeVeryThinSpace;": "\u200B",
          "&NestedGreaterGreater;": "\u226B",
          "&NestedLessLess;": "\u226A",
          "&NewLine;": "\n",
          "&Nfr;": "\uD835\uDD11",
          "&NoBreak;": "\u2060",
          "&NonBreakingSpace;": "\xA0",
          "&Nopf;": "\u2115",
          "&Not;": "\u2AEC",
          "&NotCongruent;": "\u2262",
          "&NotCupCap;": "\u226D",
          "&NotDoubleVerticalBar;": "\u2226",
          "&NotElement;": "\u2209",
          "&NotEqual;": "\u2260",
          "&NotEqualTilde;": "\u2242\u0338",
          "&NotExists;": "\u2204",
          "&NotGreater;": "\u226F",
          "&NotGreaterEqual;": "\u2271",
          "&NotGreaterFullEqual;": "\u2267\u0338",
          "&NotGreaterGreater;": "\u226B\u0338",
          "&NotGreaterLess;": "\u2279",
          "&NotGreaterSlantEqual;": "\u2A7E\u0338",
          "&NotGreaterTilde;": "\u2275",
          "&NotHumpDownHump;": "\u224E\u0338",
          "&NotHumpEqual;": "\u224F\u0338",
          "&NotLeftTriangle;": "\u22EA",
          "&NotLeftTriangleBar;": "\u29CF\u0338",
          "&NotLeftTriangleEqual;": "\u22EC",
          "&NotLess;": "\u226E",
          "&NotLessEqual;": "\u2270",
          "&NotLessGreater;": "\u2278",
          "&NotLessLess;": "\u226A\u0338",
          "&NotLessSlantEqual;": "\u2A7D\u0338",
          "&NotLessTilde;": "\u2274",
          "&NotNestedGreaterGreater;": "\u2AA2\u0338",
          "&NotNestedLessLess;": "\u2AA1\u0338",
          "&NotPrecedes;": "\u2280",
          "&NotPrecedesEqual;": "\u2AAF\u0338",
          "&NotPrecedesSlantEqual;": "\u22E0",
          "&NotReverseElement;": "\u220C",
          "&NotRightTriangle;": "\u22EB",
          "&NotRightTriangleBar;": "\u29D0\u0338",
          "&NotRightTriangleEqual;": "\u22ED",
          "&NotSquareSubset;": "\u228F\u0338",
          "&NotSquareSubsetEqual;": "\u22E2",
          "&NotSquareSuperset;": "\u2290\u0338",
          "&NotSquareSupersetEqual;": "\u22E3",
          "&NotSubset;": "\u2282\u20D2",
          "&NotSubsetEqual;": "\u2288",
          "&NotSucceeds;": "\u2281",
          "&NotSucceedsEqual;": "\u2AB0\u0338",
          "&NotSucceedsSlantEqual;": "\u22E1",
          "&NotSucceedsTilde;": "\u227F\u0338",
          "&NotSuperset;": "\u2283\u20D2",
          "&NotSupersetEqual;": "\u2289",
          "&NotTilde;": "\u2241",
          "&NotTildeEqual;": "\u2244",
          "&NotTildeFullEqual;": "\u2247",
          "&NotTildeTilde;": "\u2249",
          "&NotVerticalBar;": "\u2224",
          "&Nscr;": "\uD835\uDCA9",
          "&Ntilde": "\xD1",
          "&Ntilde;": "\xD1",
          "&Nu;": "\u039D",
          "&OElig;": "\u0152",
          "&Oacute": "\xD3",
          "&Oacute;": "\xD3",
          "&Ocirc": "\xD4",
          "&Ocirc;": "\xD4",
          "&Ocy;": "\u041E",
          "&Odblac;": "\u0150",
          "&Ofr;": "\uD835\uDD12",
          "&Ograve": "\xD2",
          "&Ograve;": "\xD2",
          "&Omacr;": "\u014C",
          "&Omega;": "\u03A9",
          "&Omicron;": "\u039F",
          "&Oopf;": "\uD835\uDD46",
          "&OpenCurlyDoubleQuote;": "\u201C",
          "&OpenCurlyQuote;": "\u2018",
          "&Or;": "\u2A54",
          "&Oscr;": "\uD835\uDCAA",
          "&Oslash": "\xD8",
          "&Oslash;": "\xD8",
          "&Otilde": "\xD5",
          "&Otilde;": "\xD5",
          "&Otimes;": "\u2A37",
          "&Ouml": "\xD6",
          "&Ouml;": "\xD6",
          "&OverBar;": "\u203E",
          "&OverBrace;": "\u23DE",
          "&OverBracket;": "\u23B4",
          "&OverParenthesis;": "\u23DC",
          "&PartialD;": "\u2202",
          "&Pcy;": "\u041F",
          "&Pfr;": "\uD835\uDD13",
          "&Phi;": "\u03A6",
          "&Pi;": "\u03A0",
          "&PlusMinus;": "\xB1",
          "&Poincareplane;": "\u210C",
          "&Popf;": "\u2119",
          "&Pr;": "\u2ABB",
          "&Precedes;": "\u227A",
          "&PrecedesEqual;": "\u2AAF",
          "&PrecedesSlantEqual;": "\u227C",
          "&PrecedesTilde;": "\u227E",
          "&Prime;": "\u2033",
          "&Product;": "\u220F",
          "&Proportion;": "\u2237",
          "&Proportional;": "\u221D",
          "&Pscr;": "\uD835\uDCAB",
          "&Psi;": "\u03A8",
          "&QUOT": '"',
          "&QUOT;": '"',
          "&Qfr;": "\uD835\uDD14",
          "&Qopf;": "\u211A",
          "&Qscr;": "\uD835\uDCAC",
          "&RBarr;": "\u2910",
          "&REG": "\xAE",
          "&REG;": "\xAE",
          "&Racute;": "\u0154",
          "&Rang;": "\u27EB",
          "&Rarr;": "\u21A0",
          "&Rarrtl;": "\u2916",
          "&Rcaron;": "\u0158",
          "&Rcedil;": "\u0156",
          "&Rcy;": "\u0420",
          "&Re;": "\u211C",
          "&ReverseElement;": "\u220B",
          "&ReverseEquilibrium;": "\u21CB",
          "&ReverseUpEquilibrium;": "\u296F",
          "&Rfr;": "\u211C",
          "&Rho;": "\u03A1",
          "&RightAngleBracket;": "\u27E9",
          "&RightArrow;": "\u2192",
          "&RightArrowBar;": "\u21E5",
          "&RightArrowLeftArrow;": "\u21C4",
          "&RightCeiling;": "\u2309",
          "&RightDoubleBracket;": "\u27E7",
          "&RightDownTeeVector;": "\u295D",
          "&RightDownVector;": "\u21C2",
          "&RightDownVectorBar;": "\u2955",
          "&RightFloor;": "\u230B",
          "&RightTee;": "\u22A2",
          "&RightTeeArrow;": "\u21A6",
          "&RightTeeVector;": "\u295B",
          "&RightTriangle;": "\u22B3",
          "&RightTriangleBar;": "\u29D0",
          "&RightTriangleEqual;": "\u22B5",
          "&RightUpDownVector;": "\u294F",
          "&RightUpTeeVector;": "\u295C",
          "&RightUpVector;": "\u21BE",
          "&RightUpVectorBar;": "\u2954",
          "&RightVector;": "\u21C0",
          "&RightVectorBar;": "\u2953",
          "&Rightarrow;": "\u21D2",
          "&Ropf;": "\u211D",
          "&RoundImplies;": "\u2970",
          "&Rrightarrow;": "\u21DB",
          "&Rscr;": "\u211B",
          "&Rsh;": "\u21B1",
          "&RuleDelayed;": "\u29F4",
          "&SHCHcy;": "\u0429",
          "&SHcy;": "\u0428",
          "&SOFTcy;": "\u042C",
          "&Sacute;": "\u015A",
          "&Sc;": "\u2ABC",
          "&Scaron;": "\u0160",
          "&Scedil;": "\u015E",
          "&Scirc;": "\u015C",
          "&Scy;": "\u0421",
          "&Sfr;": "\uD835\uDD16",
          "&ShortDownArrow;": "\u2193",
          "&ShortLeftArrow;": "\u2190",
          "&ShortRightArrow;": "\u2192",
          "&ShortUpArrow;": "\u2191",
          "&Sigma;": "\u03A3",
          "&SmallCircle;": "\u2218",
          "&Sopf;": "\uD835\uDD4A",
          "&Sqrt;": "\u221A",
          "&Square;": "\u25A1",
          "&SquareIntersection;": "\u2293",
          "&SquareSubset;": "\u228F",
          "&SquareSubsetEqual;": "\u2291",
          "&SquareSuperset;": "\u2290",
          "&SquareSupersetEqual;": "\u2292",
          "&SquareUnion;": "\u2294",
          "&Sscr;": "\uD835\uDCAE",
          "&Star;": "\u22C6",
          "&Sub;": "\u22D0",
          "&Subset;": "\u22D0",
          "&SubsetEqual;": "\u2286",
          "&Succeeds;": "\u227B",
          "&SucceedsEqual;": "\u2AB0",
          "&SucceedsSlantEqual;": "\u227D",
          "&SucceedsTilde;": "\u227F",
          "&SuchThat;": "\u220B",
          "&Sum;": "\u2211",
          "&Sup;": "\u22D1",
          "&Superset;": "\u2283",
          "&SupersetEqual;": "\u2287",
          "&Supset;": "\u22D1",
          "&THORN": "\xDE",
          "&THORN;": "\xDE",
          "&TRADE;": "\u2122",
          "&TSHcy;": "\u040B",
          "&TScy;": "\u0426",
          "&Tab;": "	",
          "&Tau;": "\u03A4",
          "&Tcaron;": "\u0164",
          "&Tcedil;": "\u0162",
          "&Tcy;": "\u0422",
          "&Tfr;": "\uD835\uDD17",
          "&Therefore;": "\u2234",
          "&Theta;": "\u0398",
          "&ThickSpace;": "\u205F\u200A",
          "&ThinSpace;": "\u2009",
          "&Tilde;": "\u223C",
          "&TildeEqual;": "\u2243",
          "&TildeFullEqual;": "\u2245",
          "&TildeTilde;": "\u2248",
          "&Topf;": "\uD835\uDD4B",
          "&TripleDot;": "\u20DB",
          "&Tscr;": "\uD835\uDCAF",
          "&Tstrok;": "\u0166",
          "&Uacute": "\xDA",
          "&Uacute;": "\xDA",
          "&Uarr;": "\u219F",
          "&Uarrocir;": "\u2949",
          "&Ubrcy;": "\u040E",
          "&Ubreve;": "\u016C",
          "&Ucirc": "\xDB",
          "&Ucirc;": "\xDB",
          "&Ucy;": "\u0423",
          "&Udblac;": "\u0170",
          "&Ufr;": "\uD835\uDD18",
          "&Ugrave": "\xD9",
          "&Ugrave;": "\xD9",
          "&Umacr;": "\u016A",
          "&UnderBar;": "_",
          "&UnderBrace;": "\u23DF",
          "&UnderBracket;": "\u23B5",
          "&UnderParenthesis;": "\u23DD",
          "&Union;": "\u22C3",
          "&UnionPlus;": "\u228E",
          "&Uogon;": "\u0172",
          "&Uopf;": "\uD835\uDD4C",
          "&UpArrow;": "\u2191",
          "&UpArrowBar;": "\u2912",
          "&UpArrowDownArrow;": "\u21C5",
          "&UpDownArrow;": "\u2195",
          "&UpEquilibrium;": "\u296E",
          "&UpTee;": "\u22A5",
          "&UpTeeArrow;": "\u21A5",
          "&Uparrow;": "\u21D1",
          "&Updownarrow;": "\u21D5",
          "&UpperLeftArrow;": "\u2196",
          "&UpperRightArrow;": "\u2197",
          "&Upsi;": "\u03D2",
          "&Upsilon;": "\u03A5",
          "&Uring;": "\u016E",
          "&Uscr;": "\uD835\uDCB0",
          "&Utilde;": "\u0168",
          "&Uuml": "\xDC",
          "&Uuml;": "\xDC",
          "&VDash;": "\u22AB",
          "&Vbar;": "\u2AEB",
          "&Vcy;": "\u0412",
          "&Vdash;": "\u22A9",
          "&Vdashl;": "\u2AE6",
          "&Vee;": "\u22C1",
          "&Verbar;": "\u2016",
          "&Vert;": "\u2016",
          "&VerticalBar;": "\u2223",
          "&VerticalLine;": "|",
          "&VerticalSeparator;": "\u2758",
          "&VerticalTilde;": "\u2240",
          "&VeryThinSpace;": "\u200A",
          "&Vfr;": "\uD835\uDD19",
          "&Vopf;": "\uD835\uDD4D",
          "&Vscr;": "\uD835\uDCB1",
          "&Vvdash;": "\u22AA",
          "&Wcirc;": "\u0174",
          "&Wedge;": "\u22C0",
          "&Wfr;": "\uD835\uDD1A",
          "&Wopf;": "\uD835\uDD4E",
          "&Wscr;": "\uD835\uDCB2",
          "&Xfr;": "\uD835\uDD1B",
          "&Xi;": "\u039E",
          "&Xopf;": "\uD835\uDD4F",
          "&Xscr;": "\uD835\uDCB3",
          "&YAcy;": "\u042F",
          "&YIcy;": "\u0407",
          "&YUcy;": "\u042E",
          "&Yacute": "\xDD",
          "&Yacute;": "\xDD",
          "&Ycirc;": "\u0176",
          "&Ycy;": "\u042B",
          "&Yfr;": "\uD835\uDD1C",
          "&Yopf;": "\uD835\uDD50",
          "&Yscr;": "\uD835\uDCB4",
          "&Yuml;": "\u0178",
          "&ZHcy;": "\u0416",
          "&Zacute;": "\u0179",
          "&Zcaron;": "\u017D",
          "&Zcy;": "\u0417",
          "&Zdot;": "\u017B",
          "&ZeroWidthSpace;": "\u200B",
          "&Zeta;": "\u0396",
          "&Zfr;": "\u2128",
          "&Zopf;": "\u2124",
          "&Zscr;": "\uD835\uDCB5",
          "&aacute": "\xE1",
          "&aacute;": "\xE1",
          "&abreve;": "\u0103",
          "&ac;": "\u223E",
          "&acE;": "\u223E\u0333",
          "&acd;": "\u223F",
          "&acirc": "\xE2",
          "&acirc;": "\xE2",
          "&acute": "\xB4",
          "&acute;": "\xB4",
          "&acy;": "\u0430",
          "&aelig": "\xE6",
          "&aelig;": "\xE6",
          "&af;": "\u2061",
          "&afr;": "\uD835\uDD1E",
          "&agrave": "\xE0",
          "&agrave;": "\xE0",
          "&alefsym;": "\u2135",
          "&aleph;": "\u2135",
          "&alpha;": "\u03B1",
          "&amacr;": "\u0101",
          "&amalg;": "\u2A3F",
          "&amp": "&",
          "&amp;": "&",
          "&and;": "\u2227",
          "&andand;": "\u2A55",
          "&andd;": "\u2A5C",
          "&andslope;": "\u2A58",
          "&andv;": "\u2A5A",
          "&ang;": "\u2220",
          "&ange;": "\u29A4",
          "&angle;": "\u2220",
          "&angmsd;": "\u2221",
          "&angmsdaa;": "\u29A8",
          "&angmsdab;": "\u29A9",
          "&angmsdac;": "\u29AA",
          "&angmsdad;": "\u29AB",
          "&angmsdae;": "\u29AC",
          "&angmsdaf;": "\u29AD",
          "&angmsdag;": "\u29AE",
          "&angmsdah;": "\u29AF",
          "&angrt;": "\u221F",
          "&angrtvb;": "\u22BE",
          "&angrtvbd;": "\u299D",
          "&angsph;": "\u2222",
          "&angst;": "\xC5",
          "&angzarr;": "\u237C",
          "&aogon;": "\u0105",
          "&aopf;": "\uD835\uDD52",
          "&ap;": "\u2248",
          "&apE;": "\u2A70",
          "&apacir;": "\u2A6F",
          "&ape;": "\u224A",
          "&apid;": "\u224B",
          "&apos;": "'",
          "&approx;": "\u2248",
          "&approxeq;": "\u224A",
          "&aring": "\xE5",
          "&aring;": "\xE5",
          "&ascr;": "\uD835\uDCB6",
          "&ast;": "*",
          "&asymp;": "\u2248",
          "&asympeq;": "\u224D",
          "&atilde": "\xE3",
          "&atilde;": "\xE3",
          "&auml": "\xE4",
          "&auml;": "\xE4",
          "&awconint;": "\u2233",
          "&awint;": "\u2A11",
          "&bNot;": "\u2AED",
          "&backcong;": "\u224C",
          "&backepsilon;": "\u03F6",
          "&backprime;": "\u2035",
          "&backsim;": "\u223D",
          "&backsimeq;": "\u22CD",
          "&barvee;": "\u22BD",
          "&barwed;": "\u2305",
          "&barwedge;": "\u2305",
          "&bbrk;": "\u23B5",
          "&bbrktbrk;": "\u23B6",
          "&bcong;": "\u224C",
          "&bcy;": "\u0431",
          "&bdquo;": "\u201E",
          "&becaus;": "\u2235",
          "&because;": "\u2235",
          "&bemptyv;": "\u29B0",
          "&bepsi;": "\u03F6",
          "&bernou;": "\u212C",
          "&beta;": "\u03B2",
          "&beth;": "\u2136",
          "&between;": "\u226C",
          "&bfr;": "\uD835\uDD1F",
          "&bigcap;": "\u22C2",
          "&bigcirc;": "\u25EF",
          "&bigcup;": "\u22C3",
          "&bigodot;": "\u2A00",
          "&bigoplus;": "\u2A01",
          "&bigotimes;": "\u2A02",
          "&bigsqcup;": "\u2A06",
          "&bigstar;": "\u2605",
          "&bigtriangledown;": "\u25BD",
          "&bigtriangleup;": "\u25B3",
          "&biguplus;": "\u2A04",
          "&bigvee;": "\u22C1",
          "&bigwedge;": "\u22C0",
          "&bkarow;": "\u290D",
          "&blacklozenge;": "\u29EB",
          "&blacksquare;": "\u25AA",
          "&blacktriangle;": "\u25B4",
          "&blacktriangledown;": "\u25BE",
          "&blacktriangleleft;": "\u25C2",
          "&blacktriangleright;": "\u25B8",
          "&blank;": "\u2423",
          "&blk12;": "\u2592",
          "&blk14;": "\u2591",
          "&blk34;": "\u2593",
          "&block;": "\u2588",
          "&bne;": "=\u20E5",
          "&bnequiv;": "\u2261\u20E5",
          "&bnot;": "\u2310",
          "&bopf;": "\uD835\uDD53",
          "&bot;": "\u22A5",
          "&bottom;": "\u22A5",
          "&bowtie;": "\u22C8",
          "&boxDL;": "\u2557",
          "&boxDR;": "\u2554",
          "&boxDl;": "\u2556",
          "&boxDr;": "\u2553",
          "&boxH;": "\u2550",
          "&boxHD;": "\u2566",
          "&boxHU;": "\u2569",
          "&boxHd;": "\u2564",
          "&boxHu;": "\u2567",
          "&boxUL;": "\u255D",
          "&boxUR;": "\u255A",
          "&boxUl;": "\u255C",
          "&boxUr;": "\u2559",
          "&boxV;": "\u2551",
          "&boxVH;": "\u256C",
          "&boxVL;": "\u2563",
          "&boxVR;": "\u2560",
          "&boxVh;": "\u256B",
          "&boxVl;": "\u2562",
          "&boxVr;": "\u255F",
          "&boxbox;": "\u29C9",
          "&boxdL;": "\u2555",
          "&boxdR;": "\u2552",
          "&boxdl;": "\u2510",
          "&boxdr;": "\u250C",
          "&boxh;": "\u2500",
          "&boxhD;": "\u2565",
          "&boxhU;": "\u2568",
          "&boxhd;": "\u252C",
          "&boxhu;": "\u2534",
          "&boxminus;": "\u229F",
          "&boxplus;": "\u229E",
          "&boxtimes;": "\u22A0",
          "&boxuL;": "\u255B",
          "&boxuR;": "\u2558",
          "&boxul;": "\u2518",
          "&boxur;": "\u2514",
          "&boxv;": "\u2502",
          "&boxvH;": "\u256A",
          "&boxvL;": "\u2561",
          "&boxvR;": "\u255E",
          "&boxvh;": "\u253C",
          "&boxvl;": "\u2524",
          "&boxvr;": "\u251C",
          "&bprime;": "\u2035",
          "&breve;": "\u02D8",
          "&brvbar": "\xA6",
          "&brvbar;": "\xA6",
          "&bscr;": "\uD835\uDCB7",
          "&bsemi;": "\u204F",
          "&bsim;": "\u223D",
          "&bsime;": "\u22CD",
          "&bsol;": "\\",
          "&bsolb;": "\u29C5",
          "&bsolhsub;": "\u27C8",
          "&bull;": "\u2022",
          "&bullet;": "\u2022",
          "&bump;": "\u224E",
          "&bumpE;": "\u2AAE",
          "&bumpe;": "\u224F",
          "&bumpeq;": "\u224F",
          "&cacute;": "\u0107",
          "&cap;": "\u2229",
          "&capand;": "\u2A44",
          "&capbrcup;": "\u2A49",
          "&capcap;": "\u2A4B",
          "&capcup;": "\u2A47",
          "&capdot;": "\u2A40",
          "&caps;": "\u2229\uFE00",
          "&caret;": "\u2041",
          "&caron;": "\u02C7",
          "&ccaps;": "\u2A4D",
          "&ccaron;": "\u010D",
          "&ccedil": "\xE7",
          "&ccedil;": "\xE7",
          "&ccirc;": "\u0109",
          "&ccups;": "\u2A4C",
          "&ccupssm;": "\u2A50",
          "&cdot;": "\u010B",
          "&cedil": "\xB8",
          "&cedil;": "\xB8",
          "&cemptyv;": "\u29B2",
          "&cent": "\xA2",
          "&cent;": "\xA2",
          "&centerdot;": "\xB7",
          "&cfr;": "\uD835\uDD20",
          "&chcy;": "\u0447",
          "&check;": "\u2713",
          "&checkmark;": "\u2713",
          "&chi;": "\u03C7",
          "&cir;": "\u25CB",
          "&cirE;": "\u29C3",
          "&circ;": "\u02C6",
          "&circeq;": "\u2257",
          "&circlearrowleft;": "\u21BA",
          "&circlearrowright;": "\u21BB",
          "&circledR;": "\xAE",
          "&circledS;": "\u24C8",
          "&circledast;": "\u229B",
          "&circledcirc;": "\u229A",
          "&circleddash;": "\u229D",
          "&cire;": "\u2257",
          "&cirfnint;": "\u2A10",
          "&cirmid;": "\u2AEF",
          "&cirscir;": "\u29C2",
          "&clubs;": "\u2663",
          "&clubsuit;": "\u2663",
          "&colon;": ":",
          "&colone;": "\u2254",
          "&coloneq;": "\u2254",
          "&comma;": ",",
          "&commat;": "@",
          "&comp;": "\u2201",
          "&compfn;": "\u2218",
          "&complement;": "\u2201",
          "&complexes;": "\u2102",
          "&cong;": "\u2245",
          "&congdot;": "\u2A6D",
          "&conint;": "\u222E",
          "&copf;": "\uD835\uDD54",
          "&coprod;": "\u2210",
          "&copy": "\xA9",
          "&copy;": "\xA9",
          "&copysr;": "\u2117",
          "&crarr;": "\u21B5",
          "&cross;": "\u2717",
          "&cscr;": "\uD835\uDCB8",
          "&csub;": "\u2ACF",
          "&csube;": "\u2AD1",
          "&csup;": "\u2AD0",
          "&csupe;": "\u2AD2",
          "&ctdot;": "\u22EF",
          "&cudarrl;": "\u2938",
          "&cudarrr;": "\u2935",
          "&cuepr;": "\u22DE",
          "&cuesc;": "\u22DF",
          "&cularr;": "\u21B6",
          "&cularrp;": "\u293D",
          "&cup;": "\u222A",
          "&cupbrcap;": "\u2A48",
          "&cupcap;": "\u2A46",
          "&cupcup;": "\u2A4A",
          "&cupdot;": "\u228D",
          "&cupor;": "\u2A45",
          "&cups;": "\u222A\uFE00",
          "&curarr;": "\u21B7",
          "&curarrm;": "\u293C",
          "&curlyeqprec;": "\u22DE",
          "&curlyeqsucc;": "\u22DF",
          "&curlyvee;": "\u22CE",
          "&curlywedge;": "\u22CF",
          "&curren": "\xA4",
          "&curren;": "\xA4",
          "&curvearrowleft;": "\u21B6",
          "&curvearrowright;": "\u21B7",
          "&cuvee;": "\u22CE",
          "&cuwed;": "\u22CF",
          "&cwconint;": "\u2232",
          "&cwint;": "\u2231",
          "&cylcty;": "\u232D",
          "&dArr;": "\u21D3",
          "&dHar;": "\u2965",
          "&dagger;": "\u2020",
          "&daleth;": "\u2138",
          "&darr;": "\u2193",
          "&dash;": "\u2010",
          "&dashv;": "\u22A3",
          "&dbkarow;": "\u290F",
          "&dblac;": "\u02DD",
          "&dcaron;": "\u010F",
          "&dcy;": "\u0434",
          "&dd;": "\u2146",
          "&ddagger;": "\u2021",
          "&ddarr;": "\u21CA",
          "&ddotseq;": "\u2A77",
          "&deg": "\xB0",
          "&deg;": "\xB0",
          "&delta;": "\u03B4",
          "&demptyv;": "\u29B1",
          "&dfisht;": "\u297F",
          "&dfr;": "\uD835\uDD21",
          "&dharl;": "\u21C3",
          "&dharr;": "\u21C2",
          "&diam;": "\u22C4",
          "&diamond;": "\u22C4",
          "&diamondsuit;": "\u2666",
          "&diams;": "\u2666",
          "&die;": "\xA8",
          "&digamma;": "\u03DD",
          "&disin;": "\u22F2",
          "&div;": "\xF7",
          "&divide": "\xF7",
          "&divide;": "\xF7",
          "&divideontimes;": "\u22C7",
          "&divonx;": "\u22C7",
          "&djcy;": "\u0452",
          "&dlcorn;": "\u231E",
          "&dlcrop;": "\u230D",
          "&dollar;": "$",
          "&dopf;": "\uD835\uDD55",
          "&dot;": "\u02D9",
          "&doteq;": "\u2250",
          "&doteqdot;": "\u2251",
          "&dotminus;": "\u2238",
          "&dotplus;": "\u2214",
          "&dotsquare;": "\u22A1",
          "&doublebarwedge;": "\u2306",
          "&downarrow;": "\u2193",
          "&downdownarrows;": "\u21CA",
          "&downharpoonleft;": "\u21C3",
          "&downharpoonright;": "\u21C2",
          "&drbkarow;": "\u2910",
          "&drcorn;": "\u231F",
          "&drcrop;": "\u230C",
          "&dscr;": "\uD835\uDCB9",
          "&dscy;": "\u0455",
          "&dsol;": "\u29F6",
          "&dstrok;": "\u0111",
          "&dtdot;": "\u22F1",
          "&dtri;": "\u25BF",
          "&dtrif;": "\u25BE",
          "&duarr;": "\u21F5",
          "&duhar;": "\u296F",
          "&dwangle;": "\u29A6",
          "&dzcy;": "\u045F",
          "&dzigrarr;": "\u27FF",
          "&eDDot;": "\u2A77",
          "&eDot;": "\u2251",
          "&eacute": "\xE9",
          "&eacute;": "\xE9",
          "&easter;": "\u2A6E",
          "&ecaron;": "\u011B",
          "&ecir;": "\u2256",
          "&ecirc": "\xEA",
          "&ecirc;": "\xEA",
          "&ecolon;": "\u2255",
          "&ecy;": "\u044D",
          "&edot;": "\u0117",
          "&ee;": "\u2147",
          "&efDot;": "\u2252",
          "&efr;": "\uD835\uDD22",
          "&eg;": "\u2A9A",
          "&egrave": "\xE8",
          "&egrave;": "\xE8",
          "&egs;": "\u2A96",
          "&egsdot;": "\u2A98",
          "&el;": "\u2A99",
          "&elinters;": "\u23E7",
          "&ell;": "\u2113",
          "&els;": "\u2A95",
          "&elsdot;": "\u2A97",
          "&emacr;": "\u0113",
          "&empty;": "\u2205",
          "&emptyset;": "\u2205",
          "&emptyv;": "\u2205",
          "&emsp13;": "\u2004",
          "&emsp14;": "\u2005",
          "&emsp;": "\u2003",
          "&eng;": "\u014B",
          "&ensp;": "\u2002",
          "&eogon;": "\u0119",
          "&eopf;": "\uD835\uDD56",
          "&epar;": "\u22D5",
          "&eparsl;": "\u29E3",
          "&eplus;": "\u2A71",
          "&epsi;": "\u03B5",
          "&epsilon;": "\u03B5",
          "&epsiv;": "\u03F5",
          "&eqcirc;": "\u2256",
          "&eqcolon;": "\u2255",
          "&eqsim;": "\u2242",
          "&eqslantgtr;": "\u2A96",
          "&eqslantless;": "\u2A95",
          "&equals;": "=",
          "&equest;": "\u225F",
          "&equiv;": "\u2261",
          "&equivDD;": "\u2A78",
          "&eqvparsl;": "\u29E5",
          "&erDot;": "\u2253",
          "&erarr;": "\u2971",
          "&escr;": "\u212F",
          "&esdot;": "\u2250",
          "&esim;": "\u2242",
          "&eta;": "\u03B7",
          "&eth": "\xF0",
          "&eth;": "\xF0",
          "&euml": "\xEB",
          "&euml;": "\xEB",
          "&euro;": "\u20AC",
          "&excl;": "!",
          "&exist;": "\u2203",
          "&expectation;": "\u2130",
          "&exponentiale;": "\u2147",
          "&fallingdotseq;": "\u2252",
          "&fcy;": "\u0444",
          "&female;": "\u2640",
          "&ffilig;": "\uFB03",
          "&fflig;": "\uFB00",
          "&ffllig;": "\uFB04",
          "&ffr;": "\uD835\uDD23",
          "&filig;": "\uFB01",
          "&fjlig;": "fj",
          "&flat;": "\u266D",
          "&fllig;": "\uFB02",
          "&fltns;": "\u25B1",
          "&fnof;": "\u0192",
          "&fopf;": "\uD835\uDD57",
          "&forall;": "\u2200",
          "&fork;": "\u22D4",
          "&forkv;": "\u2AD9",
          "&fpartint;": "\u2A0D",
          "&frac12": "\xBD",
          "&frac12;": "\xBD",
          "&frac13;": "\u2153",
          "&frac14": "\xBC",
          "&frac14;": "\xBC",
          "&frac15;": "\u2155",
          "&frac16;": "\u2159",
          "&frac18;": "\u215B",
          "&frac23;": "\u2154",
          "&frac25;": "\u2156",
          "&frac34": "\xBE",
          "&frac34;": "\xBE",
          "&frac35;": "\u2157",
          "&frac38;": "\u215C",
          "&frac45;": "\u2158",
          "&frac56;": "\u215A",
          "&frac58;": "\u215D",
          "&frac78;": "\u215E",
          "&frasl;": "\u2044",
          "&frown;": "\u2322",
          "&fscr;": "\uD835\uDCBB",
          "&gE;": "\u2267",
          "&gEl;": "\u2A8C",
          "&gacute;": "\u01F5",
          "&gamma;": "\u03B3",
          "&gammad;": "\u03DD",
          "&gap;": "\u2A86",
          "&gbreve;": "\u011F",
          "&gcirc;": "\u011D",
          "&gcy;": "\u0433",
          "&gdot;": "\u0121",
          "&ge;": "\u2265",
          "&gel;": "\u22DB",
          "&geq;": "\u2265",
          "&geqq;": "\u2267",
          "&geqslant;": "\u2A7E",
          "&ges;": "\u2A7E",
          "&gescc;": "\u2AA9",
          "&gesdot;": "\u2A80",
          "&gesdoto;": "\u2A82",
          "&gesdotol;": "\u2A84",
          "&gesl;": "\u22DB\uFE00",
          "&gesles;": "\u2A94",
          "&gfr;": "\uD835\uDD24",
          "&gg;": "\u226B",
          "&ggg;": "\u22D9",
          "&gimel;": "\u2137",
          "&gjcy;": "\u0453",
          "&gl;": "\u2277",
          "&glE;": "\u2A92",
          "&gla;": "\u2AA5",
          "&glj;": "\u2AA4",
          "&gnE;": "\u2269",
          "&gnap;": "\u2A8A",
          "&gnapprox;": "\u2A8A",
          "&gne;": "\u2A88",
          "&gneq;": "\u2A88",
          "&gneqq;": "\u2269",
          "&gnsim;": "\u22E7",
          "&gopf;": "\uD835\uDD58",
          "&grave;": "`",
          "&gscr;": "\u210A",
          "&gsim;": "\u2273",
          "&gsime;": "\u2A8E",
          "&gsiml;": "\u2A90",
          "&gt": ">",
          "&gt;": ">",
          "&gtcc;": "\u2AA7",
          "&gtcir;": "\u2A7A",
          "&gtdot;": "\u22D7",
          "&gtlPar;": "\u2995",
          "&gtquest;": "\u2A7C",
          "&gtrapprox;": "\u2A86",
          "&gtrarr;": "\u2978",
          "&gtrdot;": "\u22D7",
          "&gtreqless;": "\u22DB",
          "&gtreqqless;": "\u2A8C",
          "&gtrless;": "\u2277",
          "&gtrsim;": "\u2273",
          "&gvertneqq;": "\u2269\uFE00",
          "&gvnE;": "\u2269\uFE00",
          "&hArr;": "\u21D4",
          "&hairsp;": "\u200A",
          "&half;": "\xBD",
          "&hamilt;": "\u210B",
          "&hardcy;": "\u044A",
          "&harr;": "\u2194",
          "&harrcir;": "\u2948",
          "&harrw;": "\u21AD",
          "&hbar;": "\u210F",
          "&hcirc;": "\u0125",
          "&hearts;": "\u2665",
          "&heartsuit;": "\u2665",
          "&hellip;": "\u2026",
          "&hercon;": "\u22B9",
          "&hfr;": "\uD835\uDD25",
          "&hksearow;": "\u2925",
          "&hkswarow;": "\u2926",
          "&hoarr;": "\u21FF",
          "&homtht;": "\u223B",
          "&hookleftarrow;": "\u21A9",
          "&hookrightarrow;": "\u21AA",
          "&hopf;": "\uD835\uDD59",
          "&horbar;": "\u2015",
          "&hscr;": "\uD835\uDCBD",
          "&hslash;": "\u210F",
          "&hstrok;": "\u0127",
          "&hybull;": "\u2043",
          "&hyphen;": "\u2010",
          "&iacute": "\xED",
          "&iacute;": "\xED",
          "&ic;": "\u2063",
          "&icirc": "\xEE",
          "&icirc;": "\xEE",
          "&icy;": "\u0438",
          "&iecy;": "\u0435",
          "&iexcl": "\xA1",
          "&iexcl;": "\xA1",
          "&iff;": "\u21D4",
          "&ifr;": "\uD835\uDD26",
          "&igrave": "\xEC",
          "&igrave;": "\xEC",
          "&ii;": "\u2148",
          "&iiiint;": "\u2A0C",
          "&iiint;": "\u222D",
          "&iinfin;": "\u29DC",
          "&iiota;": "\u2129",
          "&ijlig;": "\u0133",
          "&imacr;": "\u012B",
          "&image;": "\u2111",
          "&imagline;": "\u2110",
          "&imagpart;": "\u2111",
          "&imath;": "\u0131",
          "&imof;": "\u22B7",
          "&imped;": "\u01B5",
          "&in;": "\u2208",
          "&incare;": "\u2105",
          "&infin;": "\u221E",
          "&infintie;": "\u29DD",
          "&inodot;": "\u0131",
          "&int;": "\u222B",
          "&intcal;": "\u22BA",
          "&integers;": "\u2124",
          "&intercal;": "\u22BA",
          "&intlarhk;": "\u2A17",
          "&intprod;": "\u2A3C",
          "&iocy;": "\u0451",
          "&iogon;": "\u012F",
          "&iopf;": "\uD835\uDD5A",
          "&iota;": "\u03B9",
          "&iprod;": "\u2A3C",
          "&iquest": "\xBF",
          "&iquest;": "\xBF",
          "&iscr;": "\uD835\uDCBE",
          "&isin;": "\u2208",
          "&isinE;": "\u22F9",
          "&isindot;": "\u22F5",
          "&isins;": "\u22F4",
          "&isinsv;": "\u22F3",
          "&isinv;": "\u2208",
          "&it;": "\u2062",
          "&itilde;": "\u0129",
          "&iukcy;": "\u0456",
          "&iuml": "\xEF",
          "&iuml;": "\xEF",
          "&jcirc;": "\u0135",
          "&jcy;": "\u0439",
          "&jfr;": "\uD835\uDD27",
          "&jmath;": "\u0237",
          "&jopf;": "\uD835\uDD5B",
          "&jscr;": "\uD835\uDCBF",
          "&jsercy;": "\u0458",
          "&jukcy;": "\u0454",
          "&kappa;": "\u03BA",
          "&kappav;": "\u03F0",
          "&kcedil;": "\u0137",
          "&kcy;": "\u043A",
          "&kfr;": "\uD835\uDD28",
          "&kgreen;": "\u0138",
          "&khcy;": "\u0445",
          "&kjcy;": "\u045C",
          "&kopf;": "\uD835\uDD5C",
          "&kscr;": "\uD835\uDCC0",
          "&lAarr;": "\u21DA",
          "&lArr;": "\u21D0",
          "&lAtail;": "\u291B",
          "&lBarr;": "\u290E",
          "&lE;": "\u2266",
          "&lEg;": "\u2A8B",
          "&lHar;": "\u2962",
          "&lacute;": "\u013A",
          "&laemptyv;": "\u29B4",
          "&lagran;": "\u2112",
          "&lambda;": "\u03BB",
          "&lang;": "\u27E8",
          "&langd;": "\u2991",
          "&langle;": "\u27E8",
          "&lap;": "\u2A85",
          "&laquo": "\xAB",
          "&laquo;": "\xAB",
          "&larr;": "\u2190",
          "&larrb;": "\u21E4",
          "&larrbfs;": "\u291F",
          "&larrfs;": "\u291D",
          "&larrhk;": "\u21A9",
          "&larrlp;": "\u21AB",
          "&larrpl;": "\u2939",
          "&larrsim;": "\u2973",
          "&larrtl;": "\u21A2",
          "&lat;": "\u2AAB",
          "&latail;": "\u2919",
          "&late;": "\u2AAD",
          "&lates;": "\u2AAD\uFE00",
          "&lbarr;": "\u290C",
          "&lbbrk;": "\u2772",
          "&lbrace;": "{",
          "&lbrack;": "[",
          "&lbrke;": "\u298B",
          "&lbrksld;": "\u298F",
          "&lbrkslu;": "\u298D",
          "&lcaron;": "\u013E",
          "&lcedil;": "\u013C",
          "&lceil;": "\u2308",
          "&lcub;": "{",
          "&lcy;": "\u043B",
          "&ldca;": "\u2936",
          "&ldquo;": "\u201C",
          "&ldquor;": "\u201E",
          "&ldrdhar;": "\u2967",
          "&ldrushar;": "\u294B",
          "&ldsh;": "\u21B2",
          "&le;": "\u2264",
          "&leftarrow;": "\u2190",
          "&leftarrowtail;": "\u21A2",
          "&leftharpoondown;": "\u21BD",
          "&leftharpoonup;": "\u21BC",
          "&leftleftarrows;": "\u21C7",
          "&leftrightarrow;": "\u2194",
          "&leftrightarrows;": "\u21C6",
          "&leftrightharpoons;": "\u21CB",
          "&leftrightsquigarrow;": "\u21AD",
          "&leftthreetimes;": "\u22CB",
          "&leg;": "\u22DA",
          "&leq;": "\u2264",
          "&leqq;": "\u2266",
          "&leqslant;": "\u2A7D",
          "&les;": "\u2A7D",
          "&lescc;": "\u2AA8",
          "&lesdot;": "\u2A7F",
          "&lesdoto;": "\u2A81",
          "&lesdotor;": "\u2A83",
          "&lesg;": "\u22DA\uFE00",
          "&lesges;": "\u2A93",
          "&lessapprox;": "\u2A85",
          "&lessdot;": "\u22D6",
          "&lesseqgtr;": "\u22DA",
          "&lesseqqgtr;": "\u2A8B",
          "&lessgtr;": "\u2276",
          "&lesssim;": "\u2272",
          "&lfisht;": "\u297C",
          "&lfloor;": "\u230A",
          "&lfr;": "\uD835\uDD29",
          "&lg;": "\u2276",
          "&lgE;": "\u2A91",
          "&lhard;": "\u21BD",
          "&lharu;": "\u21BC",
          "&lharul;": "\u296A",
          "&lhblk;": "\u2584",
          "&ljcy;": "\u0459",
          "&ll;": "\u226A",
          "&llarr;": "\u21C7",
          "&llcorner;": "\u231E",
          "&llhard;": "\u296B",
          "&lltri;": "\u25FA",
          "&lmidot;": "\u0140",
          "&lmoust;": "\u23B0",
          "&lmoustache;": "\u23B0",
          "&lnE;": "\u2268",
          "&lnap;": "\u2A89",
          "&lnapprox;": "\u2A89",
          "&lne;": "\u2A87",
          "&lneq;": "\u2A87",
          "&lneqq;": "\u2268",
          "&lnsim;": "\u22E6",
          "&loang;": "\u27EC",
          "&loarr;": "\u21FD",
          "&lobrk;": "\u27E6",
          "&longleftarrow;": "\u27F5",
          "&longleftrightarrow;": "\u27F7",
          "&longmapsto;": "\u27FC",
          "&longrightarrow;": "\u27F6",
          "&looparrowleft;": "\u21AB",
          "&looparrowright;": "\u21AC",
          "&lopar;": "\u2985",
          "&lopf;": "\uD835\uDD5D",
          "&loplus;": "\u2A2D",
          "&lotimes;": "\u2A34",
          "&lowast;": "\u2217",
          "&lowbar;": "_",
          "&loz;": "\u25CA",
          "&lozenge;": "\u25CA",
          "&lozf;": "\u29EB",
          "&lpar;": "(",
          "&lparlt;": "\u2993",
          "&lrarr;": "\u21C6",
          "&lrcorner;": "\u231F",
          "&lrhar;": "\u21CB",
          "&lrhard;": "\u296D",
          "&lrm;": "\u200E",
          "&lrtri;": "\u22BF",
          "&lsaquo;": "\u2039",
          "&lscr;": "\uD835\uDCC1",
          "&lsh;": "\u21B0",
          "&lsim;": "\u2272",
          "&lsime;": "\u2A8D",
          "&lsimg;": "\u2A8F",
          "&lsqb;": "[",
          "&lsquo;": "\u2018",
          "&lsquor;": "\u201A",
          "&lstrok;": "\u0142",
          "&lt": "<",
          "&lt;": "<",
          "&ltcc;": "\u2AA6",
          "&ltcir;": "\u2A79",
          "&ltdot;": "\u22D6",
          "&lthree;": "\u22CB",
          "&ltimes;": "\u22C9",
          "&ltlarr;": "\u2976",
          "&ltquest;": "\u2A7B",
          "&ltrPar;": "\u2996",
          "&ltri;": "\u25C3",
          "&ltrie;": "\u22B4",
          "&ltrif;": "\u25C2",
          "&lurdshar;": "\u294A",
          "&luruhar;": "\u2966",
          "&lvertneqq;": "\u2268\uFE00",
          "&lvnE;": "\u2268\uFE00",
          "&mDDot;": "\u223A",
          "&macr": "\xAF",
          "&macr;": "\xAF",
          "&male;": "\u2642",
          "&malt;": "\u2720",
          "&maltese;": "\u2720",
          "&map;": "\u21A6",
          "&mapsto;": "\u21A6",
          "&mapstodown;": "\u21A7",
          "&mapstoleft;": "\u21A4",
          "&mapstoup;": "\u21A5",
          "&marker;": "\u25AE",
          "&mcomma;": "\u2A29",
          "&mcy;": "\u043C",
          "&mdash;": "\u2014",
          "&measuredangle;": "\u2221",
          "&mfr;": "\uD835\uDD2A",
          "&mho;": "\u2127",
          "&micro": "\xB5",
          "&micro;": "\xB5",
          "&mid;": "\u2223",
          "&midast;": "*",
          "&midcir;": "\u2AF0",
          "&middot": "\xB7",
          "&middot;": "\xB7",
          "&minus;": "\u2212",
          "&minusb;": "\u229F",
          "&minusd;": "\u2238",
          "&minusdu;": "\u2A2A",
          "&mlcp;": "\u2ADB",
          "&mldr;": "\u2026",
          "&mnplus;": "\u2213",
          "&models;": "\u22A7",
          "&mopf;": "\uD835\uDD5E",
          "&mp;": "\u2213",
          "&mscr;": "\uD835\uDCC2",
          "&mstpos;": "\u223E",
          "&mu;": "\u03BC",
          "&multimap;": "\u22B8",
          "&mumap;": "\u22B8",
          "&nGg;": "\u22D9\u0338",
          "&nGt;": "\u226B\u20D2",
          "&nGtv;": "\u226B\u0338",
          "&nLeftarrow;": "\u21CD",
          "&nLeftrightarrow;": "\u21CE",
          "&nLl;": "\u22D8\u0338",
          "&nLt;": "\u226A\u20D2",
          "&nLtv;": "\u226A\u0338",
          "&nRightarrow;": "\u21CF",
          "&nVDash;": "\u22AF",
          "&nVdash;": "\u22AE",
          "&nabla;": "\u2207",
          "&nacute;": "\u0144",
          "&nang;": "\u2220\u20D2",
          "&nap;": "\u2249",
          "&napE;": "\u2A70\u0338",
          "&napid;": "\u224B\u0338",
          "&napos;": "\u0149",
          "&napprox;": "\u2249",
          "&natur;": "\u266E",
          "&natural;": "\u266E",
          "&naturals;": "\u2115",
          "&nbsp": "\xA0",
          "&nbsp;": "\xA0",
          "&nbump;": "\u224E\u0338",
          "&nbumpe;": "\u224F\u0338",
          "&ncap;": "\u2A43",
          "&ncaron;": "\u0148",
          "&ncedil;": "\u0146",
          "&ncong;": "\u2247",
          "&ncongdot;": "\u2A6D\u0338",
          "&ncup;": "\u2A42",
          "&ncy;": "\u043D",
          "&ndash;": "\u2013",
          "&ne;": "\u2260",
          "&neArr;": "\u21D7",
          "&nearhk;": "\u2924",
          "&nearr;": "\u2197",
          "&nearrow;": "\u2197",
          "&nedot;": "\u2250\u0338",
          "&nequiv;": "\u2262",
          "&nesear;": "\u2928",
          "&nesim;": "\u2242\u0338",
          "&nexist;": "\u2204",
          "&nexists;": "\u2204",
          "&nfr;": "\uD835\uDD2B",
          "&ngE;": "\u2267\u0338",
          "&nge;": "\u2271",
          "&ngeq;": "\u2271",
          "&ngeqq;": "\u2267\u0338",
          "&ngeqslant;": "\u2A7E\u0338",
          "&nges;": "\u2A7E\u0338",
          "&ngsim;": "\u2275",
          "&ngt;": "\u226F",
          "&ngtr;": "\u226F",
          "&nhArr;": "\u21CE",
          "&nharr;": "\u21AE",
          "&nhpar;": "\u2AF2",
          "&ni;": "\u220B",
          "&nis;": "\u22FC",
          "&nisd;": "\u22FA",
          "&niv;": "\u220B",
          "&njcy;": "\u045A",
          "&nlArr;": "\u21CD",
          "&nlE;": "\u2266\u0338",
          "&nlarr;": "\u219A",
          "&nldr;": "\u2025",
          "&nle;": "\u2270",
          "&nleftarrow;": "\u219A",
          "&nleftrightarrow;": "\u21AE",
          "&nleq;": "\u2270",
          "&nleqq;": "\u2266\u0338",
          "&nleqslant;": "\u2A7D\u0338",
          "&nles;": "\u2A7D\u0338",
          "&nless;": "\u226E",
          "&nlsim;": "\u2274",
          "&nlt;": "\u226E",
          "&nltri;": "\u22EA",
          "&nltrie;": "\u22EC",
          "&nmid;": "\u2224",
          "&nopf;": "\uD835\uDD5F",
          "&not": "\xAC",
          "&not;": "\xAC",
          "&notin;": "\u2209",
          "&notinE;": "\u22F9\u0338",
          "&notindot;": "\u22F5\u0338",
          "&notinva;": "\u2209",
          "&notinvb;": "\u22F7",
          "&notinvc;": "\u22F6",
          "&notni;": "\u220C",
          "&notniva;": "\u220C",
          "&notnivb;": "\u22FE",
          "&notnivc;": "\u22FD",
          "&npar;": "\u2226",
          "&nparallel;": "\u2226",
          "&nparsl;": "\u2AFD\u20E5",
          "&npart;": "\u2202\u0338",
          "&npolint;": "\u2A14",
          "&npr;": "\u2280",
          "&nprcue;": "\u22E0",
          "&npre;": "\u2AAF\u0338",
          "&nprec;": "\u2280",
          "&npreceq;": "\u2AAF\u0338",
          "&nrArr;": "\u21CF",
          "&nrarr;": "\u219B",
          "&nrarrc;": "\u2933\u0338",
          "&nrarrw;": "\u219D\u0338",
          "&nrightarrow;": "\u219B",
          "&nrtri;": "\u22EB",
          "&nrtrie;": "\u22ED",
          "&nsc;": "\u2281",
          "&nsccue;": "\u22E1",
          "&nsce;": "\u2AB0\u0338",
          "&nscr;": "\uD835\uDCC3",
          "&nshortmid;": "\u2224",
          "&nshortparallel;": "\u2226",
          "&nsim;": "\u2241",
          "&nsime;": "\u2244",
          "&nsimeq;": "\u2244",
          "&nsmid;": "\u2224",
          "&nspar;": "\u2226",
          "&nsqsube;": "\u22E2",
          "&nsqsupe;": "\u22E3",
          "&nsub;": "\u2284",
          "&nsubE;": "\u2AC5\u0338",
          "&nsube;": "\u2288",
          "&nsubset;": "\u2282\u20D2",
          "&nsubseteq;": "\u2288",
          "&nsubseteqq;": "\u2AC5\u0338",
          "&nsucc;": "\u2281",
          "&nsucceq;": "\u2AB0\u0338",
          "&nsup;": "\u2285",
          "&nsupE;": "\u2AC6\u0338",
          "&nsupe;": "\u2289",
          "&nsupset;": "\u2283\u20D2",
          "&nsupseteq;": "\u2289",
          "&nsupseteqq;": "\u2AC6\u0338",
          "&ntgl;": "\u2279",
          "&ntilde": "\xF1",
          "&ntilde;": "\xF1",
          "&ntlg;": "\u2278",
          "&ntriangleleft;": "\u22EA",
          "&ntrianglelefteq;": "\u22EC",
          "&ntriangleright;": "\u22EB",
          "&ntrianglerighteq;": "\u22ED",
          "&nu;": "\u03BD",
          "&num;": "#",
          "&numero;": "\u2116",
          "&numsp;": "\u2007",
          "&nvDash;": "\u22AD",
          "&nvHarr;": "\u2904",
          "&nvap;": "\u224D\u20D2",
          "&nvdash;": "\u22AC",
          "&nvge;": "\u2265\u20D2",
          "&nvgt;": ">\u20D2",
          "&nvinfin;": "\u29DE",
          "&nvlArr;": "\u2902",
          "&nvle;": "\u2264\u20D2",
          "&nvlt;": "<\u20D2",
          "&nvltrie;": "\u22B4\u20D2",
          "&nvrArr;": "\u2903",
          "&nvrtrie;": "\u22B5\u20D2",
          "&nvsim;": "\u223C\u20D2",
          "&nwArr;": "\u21D6",
          "&nwarhk;": "\u2923",
          "&nwarr;": "\u2196",
          "&nwarrow;": "\u2196",
          "&nwnear;": "\u2927",
          "&oS;": "\u24C8",
          "&oacute": "\xF3",
          "&oacute;": "\xF3",
          "&oast;": "\u229B",
          "&ocir;": "\u229A",
          "&ocirc": "\xF4",
          "&ocirc;": "\xF4",
          "&ocy;": "\u043E",
          "&odash;": "\u229D",
          "&odblac;": "\u0151",
          "&odiv;": "\u2A38",
          "&odot;": "\u2299",
          "&odsold;": "\u29BC",
          "&oelig;": "\u0153",
          "&ofcir;": "\u29BF",
          "&ofr;": "\uD835\uDD2C",
          "&ogon;": "\u02DB",
          "&ograve": "\xF2",
          "&ograve;": "\xF2",
          "&ogt;": "\u29C1",
          "&ohbar;": "\u29B5",
          "&ohm;": "\u03A9",
          "&oint;": "\u222E",
          "&olarr;": "\u21BA",
          "&olcir;": "\u29BE",
          "&olcross;": "\u29BB",
          "&oline;": "\u203E",
          "&olt;": "\u29C0",
          "&omacr;": "\u014D",
          "&omega;": "\u03C9",
          "&omicron;": "\u03BF",
          "&omid;": "\u29B6",
          "&ominus;": "\u2296",
          "&oopf;": "\uD835\uDD60",
          "&opar;": "\u29B7",
          "&operp;": "\u29B9",
          "&oplus;": "\u2295",
          "&or;": "\u2228",
          "&orarr;": "\u21BB",
          "&ord;": "\u2A5D",
          "&order;": "\u2134",
          "&orderof;": "\u2134",
          "&ordf": "\xAA",
          "&ordf;": "\xAA",
          "&ordm": "\xBA",
          "&ordm;": "\xBA",
          "&origof;": "\u22B6",
          "&oror;": "\u2A56",
          "&orslope;": "\u2A57",
          "&orv;": "\u2A5B",
          "&oscr;": "\u2134",
          "&oslash": "\xF8",
          "&oslash;": "\xF8",
          "&osol;": "\u2298",
          "&otilde": "\xF5",
          "&otilde;": "\xF5",
          "&otimes;": "\u2297",
          "&otimesas;": "\u2A36",
          "&ouml": "\xF6",
          "&ouml;": "\xF6",
          "&ovbar;": "\u233D",
          "&par;": "\u2225",
          "&para": "\xB6",
          "&para;": "\xB6",
          "&parallel;": "\u2225",
          "&parsim;": "\u2AF3",
          "&parsl;": "\u2AFD",
          "&part;": "\u2202",
          "&pcy;": "\u043F",
          "&percnt;": "%",
          "&period;": ".",
          "&permil;": "\u2030",
          "&perp;": "\u22A5",
          "&pertenk;": "\u2031",
          "&pfr;": "\uD835\uDD2D",
          "&phi;": "\u03C6",
          "&phiv;": "\u03D5",
          "&phmmat;": "\u2133",
          "&phone;": "\u260E",
          "&pi;": "\u03C0",
          "&pitchfork;": "\u22D4",
          "&piv;": "\u03D6",
          "&planck;": "\u210F",
          "&planckh;": "\u210E",
          "&plankv;": "\u210F",
          "&plus;": "+",
          "&plusacir;": "\u2A23",
          "&plusb;": "\u229E",
          "&pluscir;": "\u2A22",
          "&plusdo;": "\u2214",
          "&plusdu;": "\u2A25",
          "&pluse;": "\u2A72",
          "&plusmn": "\xB1",
          "&plusmn;": "\xB1",
          "&plussim;": "\u2A26",
          "&plustwo;": "\u2A27",
          "&pm;": "\xB1",
          "&pointint;": "\u2A15",
          "&popf;": "\uD835\uDD61",
          "&pound": "\xA3",
          "&pound;": "\xA3",
          "&pr;": "\u227A",
          "&prE;": "\u2AB3",
          "&prap;": "\u2AB7",
          "&prcue;": "\u227C",
          "&pre;": "\u2AAF",
          "&prec;": "\u227A",
          "&precapprox;": "\u2AB7",
          "&preccurlyeq;": "\u227C",
          "&preceq;": "\u2AAF",
          "&precnapprox;": "\u2AB9",
          "&precneqq;": "\u2AB5",
          "&precnsim;": "\u22E8",
          "&precsim;": "\u227E",
          "&prime;": "\u2032",
          "&primes;": "\u2119",
          "&prnE;": "\u2AB5",
          "&prnap;": "\u2AB9",
          "&prnsim;": "\u22E8",
          "&prod;": "\u220F",
          "&profalar;": "\u232E",
          "&profline;": "\u2312",
          "&profsurf;": "\u2313",
          "&prop;": "\u221D",
          "&propto;": "\u221D",
          "&prsim;": "\u227E",
          "&prurel;": "\u22B0",
          "&pscr;": "\uD835\uDCC5",
          "&psi;": "\u03C8",
          "&puncsp;": "\u2008",
          "&qfr;": "\uD835\uDD2E",
          "&qint;": "\u2A0C",
          "&qopf;": "\uD835\uDD62",
          "&qprime;": "\u2057",
          "&qscr;": "\uD835\uDCC6",
          "&quaternions;": "\u210D",
          "&quatint;": "\u2A16",
          "&quest;": "?",
          "&questeq;": "\u225F",
          "&quot": '"',
          "&quot;": '"',
          "&rAarr;": "\u21DB",
          "&rArr;": "\u21D2",
          "&rAtail;": "\u291C",
          "&rBarr;": "\u290F",
          "&rHar;": "\u2964",
          "&race;": "\u223D\u0331",
          "&racute;": "\u0155",
          "&radic;": "\u221A",
          "&raemptyv;": "\u29B3",
          "&rang;": "\u27E9",
          "&rangd;": "\u2992",
          "&range;": "\u29A5",
          "&rangle;": "\u27E9",
          "&raquo": "\xBB",
          "&raquo;": "\xBB",
          "&rarr;": "\u2192",
          "&rarrap;": "\u2975",
          "&rarrb;": "\u21E5",
          "&rarrbfs;": "\u2920",
          "&rarrc;": "\u2933",
          "&rarrfs;": "\u291E",
          "&rarrhk;": "\u21AA",
          "&rarrlp;": "\u21AC",
          "&rarrpl;": "\u2945",
          "&rarrsim;": "\u2974",
          "&rarrtl;": "\u21A3",
          "&rarrw;": "\u219D",
          "&ratail;": "\u291A",
          "&ratio;": "\u2236",
          "&rationals;": "\u211A",
          "&rbarr;": "\u290D",
          "&rbbrk;": "\u2773",
          "&rbrace;": "}",
          "&rbrack;": "]",
          "&rbrke;": "\u298C",
          "&rbrksld;": "\u298E",
          "&rbrkslu;": "\u2990",
          "&rcaron;": "\u0159",
          "&rcedil;": "\u0157",
          "&rceil;": "\u2309",
          "&rcub;": "}",
          "&rcy;": "\u0440",
          "&rdca;": "\u2937",
          "&rdldhar;": "\u2969",
          "&rdquo;": "\u201D",
          "&rdquor;": "\u201D",
          "&rdsh;": "\u21B3",
          "&real;": "\u211C",
          "&realine;": "\u211B",
          "&realpart;": "\u211C",
          "&reals;": "\u211D",
          "&rect;": "\u25AD",
          "&reg": "\xAE",
          "&reg;": "\xAE",
          "&rfisht;": "\u297D",
          "&rfloor;": "\u230B",
          "&rfr;": "\uD835\uDD2F",
          "&rhard;": "\u21C1",
          "&rharu;": "\u21C0",
          "&rharul;": "\u296C",
          "&rho;": "\u03C1",
          "&rhov;": "\u03F1",
          "&rightarrow;": "\u2192",
          "&rightarrowtail;": "\u21A3",
          "&rightharpoondown;": "\u21C1",
          "&rightharpoonup;": "\u21C0",
          "&rightleftarrows;": "\u21C4",
          "&rightleftharpoons;": "\u21CC",
          "&rightrightarrows;": "\u21C9",
          "&rightsquigarrow;": "\u219D",
          "&rightthreetimes;": "\u22CC",
          "&ring;": "\u02DA",
          "&risingdotseq;": "\u2253",
          "&rlarr;": "\u21C4",
          "&rlhar;": "\u21CC",
          "&rlm;": "\u200F",
          "&rmoust;": "\u23B1",
          "&rmoustache;": "\u23B1",
          "&rnmid;": "\u2AEE",
          "&roang;": "\u27ED",
          "&roarr;": "\u21FE",
          "&robrk;": "\u27E7",
          "&ropar;": "\u2986",
          "&ropf;": "\uD835\uDD63",
          "&roplus;": "\u2A2E",
          "&rotimes;": "\u2A35",
          "&rpar;": ")",
          "&rpargt;": "\u2994",
          "&rppolint;": "\u2A12",
          "&rrarr;": "\u21C9",
          "&rsaquo;": "\u203A",
          "&rscr;": "\uD835\uDCC7",
          "&rsh;": "\u21B1",
          "&rsqb;": "]",
          "&rsquo;": "\u2019",
          "&rsquor;": "\u2019",
          "&rthree;": "\u22CC",
          "&rtimes;": "\u22CA",
          "&rtri;": "\u25B9",
          "&rtrie;": "\u22B5",
          "&rtrif;": "\u25B8",
          "&rtriltri;": "\u29CE",
          "&ruluhar;": "\u2968",
          "&rx;": "\u211E",
          "&sacute;": "\u015B",
          "&sbquo;": "\u201A",
          "&sc;": "\u227B",
          "&scE;": "\u2AB4",
          "&scap;": "\u2AB8",
          "&scaron;": "\u0161",
          "&sccue;": "\u227D",
          "&sce;": "\u2AB0",
          "&scedil;": "\u015F",
          "&scirc;": "\u015D",
          "&scnE;": "\u2AB6",
          "&scnap;": "\u2ABA",
          "&scnsim;": "\u22E9",
          "&scpolint;": "\u2A13",
          "&scsim;": "\u227F",
          "&scy;": "\u0441",
          "&sdot;": "\u22C5",
          "&sdotb;": "\u22A1",
          "&sdote;": "\u2A66",
          "&seArr;": "\u21D8",
          "&searhk;": "\u2925",
          "&searr;": "\u2198",
          "&searrow;": "\u2198",
          "&sect": "\xA7",
          "&sect;": "\xA7",
          "&semi;": ";",
          "&seswar;": "\u2929",
          "&setminus;": "\u2216",
          "&setmn;": "\u2216",
          "&sext;": "\u2736",
          "&sfr;": "\uD835\uDD30",
          "&sfrown;": "\u2322",
          "&sharp;": "\u266F",
          "&shchcy;": "\u0449",
          "&shcy;": "\u0448",
          "&shortmid;": "\u2223",
          "&shortparallel;": "\u2225",
          "&shy": "\xAD",
          "&shy;": "\xAD",
          "&sigma;": "\u03C3",
          "&sigmaf;": "\u03C2",
          "&sigmav;": "\u03C2",
          "&sim;": "\u223C",
          "&simdot;": "\u2A6A",
          "&sime;": "\u2243",
          "&simeq;": "\u2243",
          "&simg;": "\u2A9E",
          "&simgE;": "\u2AA0",
          "&siml;": "\u2A9D",
          "&simlE;": "\u2A9F",
          "&simne;": "\u2246",
          "&simplus;": "\u2A24",
          "&simrarr;": "\u2972",
          "&slarr;": "\u2190",
          "&smallsetminus;": "\u2216",
          "&smashp;": "\u2A33",
          "&smeparsl;": "\u29E4",
          "&smid;": "\u2223",
          "&smile;": "\u2323",
          "&smt;": "\u2AAA",
          "&smte;": "\u2AAC",
          "&smtes;": "\u2AAC\uFE00",
          "&softcy;": "\u044C",
          "&sol;": "/",
          "&solb;": "\u29C4",
          "&solbar;": "\u233F",
          "&sopf;": "\uD835\uDD64",
          "&spades;": "\u2660",
          "&spadesuit;": "\u2660",
          "&spar;": "\u2225",
          "&sqcap;": "\u2293",
          "&sqcaps;": "\u2293\uFE00",
          "&sqcup;": "\u2294",
          "&sqcups;": "\u2294\uFE00",
          "&sqsub;": "\u228F",
          "&sqsube;": "\u2291",
          "&sqsubset;": "\u228F",
          "&sqsubseteq;": "\u2291",
          "&sqsup;": "\u2290",
          "&sqsupe;": "\u2292",
          "&sqsupset;": "\u2290",
          "&sqsupseteq;": "\u2292",
          "&squ;": "\u25A1",
          "&square;": "\u25A1",
          "&squarf;": "\u25AA",
          "&squf;": "\u25AA",
          "&srarr;": "\u2192",
          "&sscr;": "\uD835\uDCC8",
          "&ssetmn;": "\u2216",
          "&ssmile;": "\u2323",
          "&sstarf;": "\u22C6",
          "&star;": "\u2606",
          "&starf;": "\u2605",
          "&straightepsilon;": "\u03F5",
          "&straightphi;": "\u03D5",
          "&strns;": "\xAF",
          "&sub;": "\u2282",
          "&subE;": "\u2AC5",
          "&subdot;": "\u2ABD",
          "&sube;": "\u2286",
          "&subedot;": "\u2AC3",
          "&submult;": "\u2AC1",
          "&subnE;": "\u2ACB",
          "&subne;": "\u228A",
          "&subplus;": "\u2ABF",
          "&subrarr;": "\u2979",
          "&subset;": "\u2282",
          "&subseteq;": "\u2286",
          "&subseteqq;": "\u2AC5",
          "&subsetneq;": "\u228A",
          "&subsetneqq;": "\u2ACB",
          "&subsim;": "\u2AC7",
          "&subsub;": "\u2AD5",
          "&subsup;": "\u2AD3",
          "&succ;": "\u227B",
          "&succapprox;": "\u2AB8",
          "&succcurlyeq;": "\u227D",
          "&succeq;": "\u2AB0",
          "&succnapprox;": "\u2ABA",
          "&succneqq;": "\u2AB6",
          "&succnsim;": "\u22E9",
          "&succsim;": "\u227F",
          "&sum;": "\u2211",
          "&sung;": "\u266A",
          "&sup1": "\xB9",
          "&sup1;": "\xB9",
          "&sup2": "\xB2",
          "&sup2;": "\xB2",
          "&sup3": "\xB3",
          "&sup3;": "\xB3",
          "&sup;": "\u2283",
          "&supE;": "\u2AC6",
          "&supdot;": "\u2ABE",
          "&supdsub;": "\u2AD8",
          "&supe;": "\u2287",
          "&supedot;": "\u2AC4",
          "&suphsol;": "\u27C9",
          "&suphsub;": "\u2AD7",
          "&suplarr;": "\u297B",
          "&supmult;": "\u2AC2",
          "&supnE;": "\u2ACC",
          "&supne;": "\u228B",
          "&supplus;": "\u2AC0",
          "&supset;": "\u2283",
          "&supseteq;": "\u2287",
          "&supseteqq;": "\u2AC6",
          "&supsetneq;": "\u228B",
          "&supsetneqq;": "\u2ACC",
          "&supsim;": "\u2AC8",
          "&supsub;": "\u2AD4",
          "&supsup;": "\u2AD6",
          "&swArr;": "\u21D9",
          "&swarhk;": "\u2926",
          "&swarr;": "\u2199",
          "&swarrow;": "\u2199",
          "&swnwar;": "\u292A",
          "&szlig": "\xDF",
          "&szlig;": "\xDF",
          "&target;": "\u2316",
          "&tau;": "\u03C4",
          "&tbrk;": "\u23B4",
          "&tcaron;": "\u0165",
          "&tcedil;": "\u0163",
          "&tcy;": "\u0442",
          "&tdot;": "\u20DB",
          "&telrec;": "\u2315",
          "&tfr;": "\uD835\uDD31",
          "&there4;": "\u2234",
          "&therefore;": "\u2234",
          "&theta;": "\u03B8",
          "&thetasym;": "\u03D1",
          "&thetav;": "\u03D1",
          "&thickapprox;": "\u2248",
          "&thicksim;": "\u223C",
          "&thinsp;": "\u2009",
          "&thkap;": "\u2248",
          "&thksim;": "\u223C",
          "&thorn": "\xFE",
          "&thorn;": "\xFE",
          "&tilde;": "\u02DC",
          "&times": "\xD7",
          "&times;": "\xD7",
          "&timesb;": "\u22A0",
          "&timesbar;": "\u2A31",
          "&timesd;": "\u2A30",
          "&tint;": "\u222D",
          "&toea;": "\u2928",
          "&top;": "\u22A4",
          "&topbot;": "\u2336",
          "&topcir;": "\u2AF1",
          "&topf;": "\uD835\uDD65",
          "&topfork;": "\u2ADA",
          "&tosa;": "\u2929",
          "&tprime;": "\u2034",
          "&trade;": "\u2122",
          "&triangle;": "\u25B5",
          "&triangledown;": "\u25BF",
          "&triangleleft;": "\u25C3",
          "&trianglelefteq;": "\u22B4",
          "&triangleq;": "\u225C",
          "&triangleright;": "\u25B9",
          "&trianglerighteq;": "\u22B5",
          "&tridot;": "\u25EC",
          "&trie;": "\u225C",
          "&triminus;": "\u2A3A",
          "&triplus;": "\u2A39",
          "&trisb;": "\u29CD",
          "&tritime;": "\u2A3B",
          "&trpezium;": "\u23E2",
          "&tscr;": "\uD835\uDCC9",
          "&tscy;": "\u0446",
          "&tshcy;": "\u045B",
          "&tstrok;": "\u0167",
          "&twixt;": "\u226C",
          "&twoheadleftarrow;": "\u219E",
          "&twoheadrightarrow;": "\u21A0",
          "&uArr;": "\u21D1",
          "&uHar;": "\u2963",
          "&uacute": "\xFA",
          "&uacute;": "\xFA",
          "&uarr;": "\u2191",
          "&ubrcy;": "\u045E",
          "&ubreve;": "\u016D",
          "&ucirc": "\xFB",
          "&ucirc;": "\xFB",
          "&ucy;": "\u0443",
          "&udarr;": "\u21C5",
          "&udblac;": "\u0171",
          "&udhar;": "\u296E",
          "&ufisht;": "\u297E",
          "&ufr;": "\uD835\uDD32",
          "&ugrave": "\xF9",
          "&ugrave;": "\xF9",
          "&uharl;": "\u21BF",
          "&uharr;": "\u21BE",
          "&uhblk;": "\u2580",
          "&ulcorn;": "\u231C",
          "&ulcorner;": "\u231C",
          "&ulcrop;": "\u230F",
          "&ultri;": "\u25F8",
          "&umacr;": "\u016B",
          "&uml": "\xA8",
          "&uml;": "\xA8",
          "&uogon;": "\u0173",
          "&uopf;": "\uD835\uDD66",
          "&uparrow;": "\u2191",
          "&updownarrow;": "\u2195",
          "&upharpoonleft;": "\u21BF",
          "&upharpoonright;": "\u21BE",
          "&uplus;": "\u228E",
          "&upsi;": "\u03C5",
          "&upsih;": "\u03D2",
          "&upsilon;": "\u03C5",
          "&upuparrows;": "\u21C8",
          "&urcorn;": "\u231D",
          "&urcorner;": "\u231D",
          "&urcrop;": "\u230E",
          "&uring;": "\u016F",
          "&urtri;": "\u25F9",
          "&uscr;": "\uD835\uDCCA",
          "&utdot;": "\u22F0",
          "&utilde;": "\u0169",
          "&utri;": "\u25B5",
          "&utrif;": "\u25B4",
          "&uuarr;": "\u21C8",
          "&uuml": "\xFC",
          "&uuml;": "\xFC",
          "&uwangle;": "\u29A7",
          "&vArr;": "\u21D5",
          "&vBar;": "\u2AE8",
          "&vBarv;": "\u2AE9",
          "&vDash;": "\u22A8",
          "&vangrt;": "\u299C",
          "&varepsilon;": "\u03F5",
          "&varkappa;": "\u03F0",
          "&varnothing;": "\u2205",
          "&varphi;": "\u03D5",
          "&varpi;": "\u03D6",
          "&varpropto;": "\u221D",
          "&varr;": "\u2195",
          "&varrho;": "\u03F1",
          "&varsigma;": "\u03C2",
          "&varsubsetneq;": "\u228A\uFE00",
          "&varsubsetneqq;": "\u2ACB\uFE00",
          "&varsupsetneq;": "\u228B\uFE00",
          "&varsupsetneqq;": "\u2ACC\uFE00",
          "&vartheta;": "\u03D1",
          "&vartriangleleft;": "\u22B2",
          "&vartriangleright;": "\u22B3",
          "&vcy;": "\u0432",
          "&vdash;": "\u22A2",
          "&vee;": "\u2228",
          "&veebar;": "\u22BB",
          "&veeeq;": "\u225A",
          "&vellip;": "\u22EE",
          "&verbar;": "|",
          "&vert;": "|",
          "&vfr;": "\uD835\uDD33",
          "&vltri;": "\u22B2",
          "&vnsub;": "\u2282\u20D2",
          "&vnsup;": "\u2283\u20D2",
          "&vopf;": "\uD835\uDD67",
          "&vprop;": "\u221D",
          "&vrtri;": "\u22B3",
          "&vscr;": "\uD835\uDCCB",
          "&vsubnE;": "\u2ACB\uFE00",
          "&vsubne;": "\u228A\uFE00",
          "&vsupnE;": "\u2ACC\uFE00",
          "&vsupne;": "\u228B\uFE00",
          "&vzigzag;": "\u299A",
          "&wcirc;": "\u0175",
          "&wedbar;": "\u2A5F",
          "&wedge;": "\u2227",
          "&wedgeq;": "\u2259",
          "&weierp;": "\u2118",
          "&wfr;": "\uD835\uDD34",
          "&wopf;": "\uD835\uDD68",
          "&wp;": "\u2118",
          "&wr;": "\u2240",
          "&wreath;": "\u2240",
          "&wscr;": "\uD835\uDCCC",
          "&xcap;": "\u22C2",
          "&xcirc;": "\u25EF",
          "&xcup;": "\u22C3",
          "&xdtri;": "\u25BD",
          "&xfr;": "\uD835\uDD35",
          "&xhArr;": "\u27FA",
          "&xharr;": "\u27F7",
          "&xi;": "\u03BE",
          "&xlArr;": "\u27F8",
          "&xlarr;": "\u27F5",
          "&xmap;": "\u27FC",
          "&xnis;": "\u22FB",
          "&xodot;": "\u2A00",
          "&xopf;": "\uD835\uDD69",
          "&xoplus;": "\u2A01",
          "&xotime;": "\u2A02",
          "&xrArr;": "\u27F9",
          "&xrarr;": "\u27F6",
          "&xscr;": "\uD835\uDCCD",
          "&xsqcup;": "\u2A06",
          "&xuplus;": "\u2A04",
          "&xutri;": "\u25B3",
          "&xvee;": "\u22C1",
          "&xwedge;": "\u22C0",
          "&yacute": "\xFD",
          "&yacute;": "\xFD",
          "&yacy;": "\u044F",
          "&ycirc;": "\u0177",
          "&ycy;": "\u044B",
          "&yen": "\xA5",
          "&yen;": "\xA5",
          "&yfr;": "\uD835\uDD36",
          "&yicy;": "\u0457",
          "&yopf;": "\uD835\uDD6A",
          "&yscr;": "\uD835\uDCCE",
          "&yucy;": "\u044E",
          "&yuml": "\xFF",
          "&yuml;": "\xFF",
          "&zacute;": "\u017A",
          "&zcaron;": "\u017E",
          "&zcy;": "\u0437",
          "&zdot;": "\u017C",
          "&zeetrf;": "\u2128",
          "&zeta;": "\u03B6",
          "&zfr;": "\uD835\uDD37",
          "&zhcy;": "\u0436",
          "&zigrarr;": "\u21DD",
          "&zopf;": "\uD835\uDD6B",
          "&zscr;": "\uD835\uDCCF",
          "&zwj;": "\u200D",
          "&zwnj;": "\u200C"
        },
        characters: {
          "\xC6": "&AElig;",
          "&": "&amp;",
          "\xC1": "&Aacute;",
          "\u0102": "&Abreve;",
          "\xC2": "&Acirc;",
          "\u0410": "&Acy;",
          "\uD835\uDD04": "&Afr;",
          "\xC0": "&Agrave;",
          "\u0391": "&Alpha;",
          "\u0100": "&Amacr;",
          "\u2A53": "&And;",
          "\u0104": "&Aogon;",
          "\uD835\uDD38": "&Aopf;",
          "\u2061": "&af;",
          "\xC5": "&angst;",
          "\uD835\uDC9C": "&Ascr;",
          "\u2254": "&coloneq;",
          "\xC3": "&Atilde;",
          "\xC4": "&Auml;",
          "\u2216": "&ssetmn;",
          "\u2AE7": "&Barv;",
          "\u2306": "&doublebarwedge;",
          "\u0411": "&Bcy;",
          "\u2235": "&because;",
          "\u212C": "&bernou;",
          "\u0392": "&Beta;",
          "\uD835\uDD05": "&Bfr;",
          "\uD835\uDD39": "&Bopf;",
          "\u02D8": "&breve;",
          "\u224E": "&bump;",
          "\u0427": "&CHcy;",
          "\xA9": "&copy;",
          "\u0106": "&Cacute;",
          "\u22D2": "&Cap;",
          "\u2145": "&DD;",
          "\u212D": "&Cfr;",
          "\u010C": "&Ccaron;",
          "\xC7": "&Ccedil;",
          "\u0108": "&Ccirc;",
          "\u2230": "&Cconint;",
          "\u010A": "&Cdot;",
          "\xB8": "&cedil;",
          "\xB7": "&middot;",
          "\u03A7": "&Chi;",
          "\u2299": "&odot;",
          "\u2296": "&ominus;",
          "\u2295": "&oplus;",
          "\u2297": "&otimes;",
          "\u2232": "&cwconint;",
          "\u201D": "&rdquor;",
          "\u2019": "&rsquor;",
          "\u2237": "&Proportion;",
          "\u2A74": "&Colone;",
          "\u2261": "&equiv;",
          "\u222F": "&DoubleContourIntegral;",
          "\u222E": "&oint;",
          "\u2102": "&complexes;",
          "\u2210": "&coprod;",
          "\u2233": "&awconint;",
          "\u2A2F": "&Cross;",
          "\uD835\uDC9E": "&Cscr;",
          "\u22D3": "&Cup;",
          "\u224D": "&asympeq;",
          "\u2911": "&DDotrahd;",
          "\u0402": "&DJcy;",
          "\u0405": "&DScy;",
          "\u040F": "&DZcy;",
          "\u2021": "&ddagger;",
          "\u21A1": "&Darr;",
          "\u2AE4": "&DoubleLeftTee;",
          "\u010E": "&Dcaron;",
          "\u0414": "&Dcy;",
          "\u2207": "&nabla;",
          "\u0394": "&Delta;",
          "\uD835\uDD07": "&Dfr;",
          "\xB4": "&acute;",
          "\u02D9": "&dot;",
          "\u02DD": "&dblac;",
          "`": "&grave;",
          "\u02DC": "&tilde;",
          "\u22C4": "&diamond;",
          "\u2146": "&dd;",
          "\uD835\uDD3B": "&Dopf;",
          "\xA8": "&uml;",
          "\u20DC": "&DotDot;",
          "\u2250": "&esdot;",
          "\u21D3": "&dArr;",
          "\u21D0": "&lArr;",
          "\u21D4": "&iff;",
          "\u27F8": "&xlArr;",
          "\u27FA": "&xhArr;",
          "\u27F9": "&xrArr;",
          "\u21D2": "&rArr;",
          "\u22A8": "&vDash;",
          "\u21D1": "&uArr;",
          "\u21D5": "&vArr;",
          "\u2225": "&spar;",
          "\u2193": "&downarrow;",
          "\u2913": "&DownArrowBar;",
          "\u21F5": "&duarr;",
          "\u0311": "&DownBreve;",
          "\u2950": "&DownLeftRightVector;",
          "\u295E": "&DownLeftTeeVector;",
          "\u21BD": "&lhard;",
          "\u2956": "&DownLeftVectorBar;",
          "\u295F": "&DownRightTeeVector;",
          "\u21C1": "&rightharpoondown;",
          "\u2957": "&DownRightVectorBar;",
          "\u22A4": "&top;",
          "\u21A7": "&mapstodown;",
          "\uD835\uDC9F": "&Dscr;",
          "\u0110": "&Dstrok;",
          "\u014A": "&ENG;",
          "\xD0": "&ETH;",
          "\xC9": "&Eacute;",
          "\u011A": "&Ecaron;",
          "\xCA": "&Ecirc;",
          "\u042D": "&Ecy;",
          "\u0116": "&Edot;",
          "\uD835\uDD08": "&Efr;",
          "\xC8": "&Egrave;",
          "\u2208": "&isinv;",
          "\u0112": "&Emacr;",
          "\u25FB": "&EmptySmallSquare;",
          "\u25AB": "&EmptyVerySmallSquare;",
          "\u0118": "&Eogon;",
          "\uD835\uDD3C": "&Eopf;",
          "\u0395": "&Epsilon;",
          "\u2A75": "&Equal;",
          "\u2242": "&esim;",
          "\u21CC": "&rlhar;",
          "\u2130": "&expectation;",
          "\u2A73": "&Esim;",
          "\u0397": "&Eta;",
          "\xCB": "&Euml;",
          "\u2203": "&exist;",
          "\u2147": "&exponentiale;",
          "\u0424": "&Fcy;",
          "\uD835\uDD09": "&Ffr;",
          "\u25FC": "&FilledSmallSquare;",
          "\u25AA": "&squf;",
          "\uD835\uDD3D": "&Fopf;",
          "\u2200": "&forall;",
          "\u2131": "&Fscr;",
          "\u0403": "&GJcy;",
          ">": "&gt;",
          "\u0393": "&Gamma;",
          "\u03DC": "&Gammad;",
          "\u011E": "&Gbreve;",
          "\u0122": "&Gcedil;",
          "\u011C": "&Gcirc;",
          "\u0413": "&Gcy;",
          "\u0120": "&Gdot;",
          "\uD835\uDD0A": "&Gfr;",
          "\u22D9": "&ggg;",
          "\uD835\uDD3E": "&Gopf;",
          "\u2265": "&geq;",
          "\u22DB": "&gtreqless;",
          "\u2267": "&geqq;",
          "\u2AA2": "&GreaterGreater;",
          "\u2277": "&gtrless;",
          "\u2A7E": "&ges;",
          "\u2273": "&gtrsim;",
          "\uD835\uDCA2": "&Gscr;",
          "\u226B": "&gg;",
          "\u042A": "&HARDcy;",
          "\u02C7": "&caron;",
          "^": "&Hat;",
          "\u0124": "&Hcirc;",
          "\u210C": "&Poincareplane;",
          "\u210B": "&hamilt;",
          "\u210D": "&quaternions;",
          "\u2500": "&boxh;",
          "\u0126": "&Hstrok;",
          "\u224F": "&bumpeq;",
          "\u0415": "&IEcy;",
          "\u0132": "&IJlig;",
          "\u0401": "&IOcy;",
          "\xCD": "&Iacute;",
          "\xCE": "&Icirc;",
          "\u0418": "&Icy;",
          "\u0130": "&Idot;",
          "\u2111": "&imagpart;",
          "\xCC": "&Igrave;",
          "\u012A": "&Imacr;",
          "\u2148": "&ii;",
          "\u222C": "&Int;",
          "\u222B": "&int;",
          "\u22C2": "&xcap;",
          "\u2063": "&ic;",
          "\u2062": "&it;",
          "\u012E": "&Iogon;",
          "\uD835\uDD40": "&Iopf;",
          "\u0399": "&Iota;",
          "\u2110": "&imagline;",
          "\u0128": "&Itilde;",
          "\u0406": "&Iukcy;",
          "\xCF": "&Iuml;",
          "\u0134": "&Jcirc;",
          "\u0419": "&Jcy;",
          "\uD835\uDD0D": "&Jfr;",
          "\uD835\uDD41": "&Jopf;",
          "\uD835\uDCA5": "&Jscr;",
          "\u0408": "&Jsercy;",
          "\u0404": "&Jukcy;",
          "\u0425": "&KHcy;",
          "\u040C": "&KJcy;",
          "\u039A": "&Kappa;",
          "\u0136": "&Kcedil;",
          "\u041A": "&Kcy;",
          "\uD835\uDD0E": "&Kfr;",
          "\uD835\uDD42": "&Kopf;",
          "\uD835\uDCA6": "&Kscr;",
          "\u0409": "&LJcy;",
          "<": "&lt;",
          "\u0139": "&Lacute;",
          "\u039B": "&Lambda;",
          "\u27EA": "&Lang;",
          "\u2112": "&lagran;",
          "\u219E": "&twoheadleftarrow;",
          "\u013D": "&Lcaron;",
          "\u013B": "&Lcedil;",
          "\u041B": "&Lcy;",
          "\u27E8": "&langle;",
          "\u2190": "&slarr;",
          "\u21E4": "&larrb;",
          "\u21C6": "&lrarr;",
          "\u2308": "&lceil;",
          "\u27E6": "&lobrk;",
          "\u2961": "&LeftDownTeeVector;",
          "\u21C3": "&downharpoonleft;",
          "\u2959": "&LeftDownVectorBar;",
          "\u230A": "&lfloor;",
          "\u2194": "&leftrightarrow;",
          "\u294E": "&LeftRightVector;",
          "\u22A3": "&dashv;",
          "\u21A4": "&mapstoleft;",
          "\u295A": "&LeftTeeVector;",
          "\u22B2": "&vltri;",
          "\u29CF": "&LeftTriangleBar;",
          "\u22B4": "&trianglelefteq;",
          "\u2951": "&LeftUpDownVector;",
          "\u2960": "&LeftUpTeeVector;",
          "\u21BF": "&upharpoonleft;",
          "\u2958": "&LeftUpVectorBar;",
          "\u21BC": "&lharu;",
          "\u2952": "&LeftVectorBar;",
          "\u22DA": "&lesseqgtr;",
          "\u2266": "&leqq;",
          "\u2276": "&lg;",
          "\u2AA1": "&LessLess;",
          "\u2A7D": "&les;",
          "\u2272": "&lsim;",
          "\uD835\uDD0F": "&Lfr;",
          "\u22D8": "&Ll;",
          "\u21DA": "&lAarr;",
          "\u013F": "&Lmidot;",
          "\u27F5": "&xlarr;",
          "\u27F7": "&xharr;",
          "\u27F6": "&xrarr;",
          "\uD835\uDD43": "&Lopf;",
          "\u2199": "&swarrow;",
          "\u2198": "&searrow;",
          "\u21B0": "&lsh;",
          "\u0141": "&Lstrok;",
          "\u226A": "&ll;",
          "\u2905": "&Map;",
          "\u041C": "&Mcy;",
          "\u205F": "&MediumSpace;",
          "\u2133": "&phmmat;",
          "\uD835\uDD10": "&Mfr;",
          "\u2213": "&mp;",
          "\uD835\uDD44": "&Mopf;",
          "\u039C": "&Mu;",
          "\u040A": "&NJcy;",
          "\u0143": "&Nacute;",
          "\u0147": "&Ncaron;",
          "\u0145": "&Ncedil;",
          "\u041D": "&Ncy;",
          "\u200B": "&ZeroWidthSpace;",
          "\n": "&NewLine;",
          "\uD835\uDD11": "&Nfr;",
          "\u2060": "&NoBreak;",
          "\xA0": "&nbsp;",
          "\u2115": "&naturals;",
          "\u2AEC": "&Not;",
          "\u2262": "&nequiv;",
          "\u226D": "&NotCupCap;",
          "\u2226": "&nspar;",
          "\u2209": "&notinva;",
          "\u2260": "&ne;",
          "\u2242\u0338": "&nesim;",
          "\u2204": "&nexists;",
          "\u226F": "&ngtr;",
          "\u2271": "&ngeq;",
          "\u2267\u0338": "&ngeqq;",
          "\u226B\u0338": "&nGtv;",
          "\u2279": "&ntgl;",
          "\u2A7E\u0338": "&nges;",
          "\u2275": "&ngsim;",
          "\u224E\u0338": "&nbump;",
          "\u224F\u0338": "&nbumpe;",
          "\u22EA": "&ntriangleleft;",
          "\u29CF\u0338": "&NotLeftTriangleBar;",
          "\u22EC": "&ntrianglelefteq;",
          "\u226E": "&nlt;",
          "\u2270": "&nleq;",
          "\u2278": "&ntlg;",
          "\u226A\u0338": "&nLtv;",
          "\u2A7D\u0338": "&nles;",
          "\u2274": "&nlsim;",
          "\u2AA2\u0338": "&NotNestedGreaterGreater;",
          "\u2AA1\u0338": "&NotNestedLessLess;",
          "\u2280": "&nprec;",
          "\u2AAF\u0338": "&npreceq;",
          "\u22E0": "&nprcue;",
          "\u220C": "&notniva;",
          "\u22EB": "&ntriangleright;",
          "\u29D0\u0338": "&NotRightTriangleBar;",
          "\u22ED": "&ntrianglerighteq;",
          "\u228F\u0338": "&NotSquareSubset;",
          "\u22E2": "&nsqsube;",
          "\u2290\u0338": "&NotSquareSuperset;",
          "\u22E3": "&nsqsupe;",
          "\u2282\u20D2": "&vnsub;",
          "\u2288": "&nsubseteq;",
          "\u2281": "&nsucc;",
          "\u2AB0\u0338": "&nsucceq;",
          "\u22E1": "&nsccue;",
          "\u227F\u0338": "&NotSucceedsTilde;",
          "\u2283\u20D2": "&vnsup;",
          "\u2289": "&nsupseteq;",
          "\u2241": "&nsim;",
          "\u2244": "&nsimeq;",
          "\u2247": "&ncong;",
          "\u2249": "&napprox;",
          "\u2224": "&nsmid;",
          "\uD835\uDCA9": "&Nscr;",
          "\xD1": "&Ntilde;",
          "\u039D": "&Nu;",
          "\u0152": "&OElig;",
          "\xD3": "&Oacute;",
          "\xD4": "&Ocirc;",
          "\u041E": "&Ocy;",
          "\u0150": "&Odblac;",
          "\uD835\uDD12": "&Ofr;",
          "\xD2": "&Ograve;",
          "\u014C": "&Omacr;",
          "\u03A9": "&ohm;",
          "\u039F": "&Omicron;",
          "\uD835\uDD46": "&Oopf;",
          "\u201C": "&ldquo;",
          "\u2018": "&lsquo;",
          "\u2A54": "&Or;",
          "\uD835\uDCAA": "&Oscr;",
          "\xD8": "&Oslash;",
          "\xD5": "&Otilde;",
          "\u2A37": "&Otimes;",
          "\xD6": "&Ouml;",
          "\u203E": "&oline;",
          "\u23DE": "&OverBrace;",
          "\u23B4": "&tbrk;",
          "\u23DC": "&OverParenthesis;",
          "\u2202": "&part;",
          "\u041F": "&Pcy;",
          "\uD835\uDD13": "&Pfr;",
          "\u03A6": "&Phi;",
          "\u03A0": "&Pi;",
          "\xB1": "&pm;",
          "\u2119": "&primes;",
          "\u2ABB": "&Pr;",
          "\u227A": "&prec;",
          "\u2AAF": "&preceq;",
          "\u227C": "&preccurlyeq;",
          "\u227E": "&prsim;",
          "\u2033": "&Prime;",
          "\u220F": "&prod;",
          "\u221D": "&vprop;",
          "\uD835\uDCAB": "&Pscr;",
          "\u03A8": "&Psi;",
          '"': "&quot;",
          "\uD835\uDD14": "&Qfr;",
          "\u211A": "&rationals;",
          "\uD835\uDCAC": "&Qscr;",
          "\u2910": "&drbkarow;",
          "\xAE": "&reg;",
          "\u0154": "&Racute;",
          "\u27EB": "&Rang;",
          "\u21A0": "&twoheadrightarrow;",
          "\u2916": "&Rarrtl;",
          "\u0158": "&Rcaron;",
          "\u0156": "&Rcedil;",
          "\u0420": "&Rcy;",
          "\u211C": "&realpart;",
          "\u220B": "&niv;",
          "\u21CB": "&lrhar;",
          "\u296F": "&duhar;",
          "\u03A1": "&Rho;",
          "\u27E9": "&rangle;",
          "\u2192": "&srarr;",
          "\u21E5": "&rarrb;",
          "\u21C4": "&rlarr;",
          "\u2309": "&rceil;",
          "\u27E7": "&robrk;",
          "\u295D": "&RightDownTeeVector;",
          "\u21C2": "&downharpoonright;",
          "\u2955": "&RightDownVectorBar;",
          "\u230B": "&rfloor;",
          "\u22A2": "&vdash;",
          "\u21A6": "&mapsto;",
          "\u295B": "&RightTeeVector;",
          "\u22B3": "&vrtri;",
          "\u29D0": "&RightTriangleBar;",
          "\u22B5": "&trianglerighteq;",
          "\u294F": "&RightUpDownVector;",
          "\u295C": "&RightUpTeeVector;",
          "\u21BE": "&upharpoonright;",
          "\u2954": "&RightUpVectorBar;",
          "\u21C0": "&rightharpoonup;",
          "\u2953": "&RightVectorBar;",
          "\u211D": "&reals;",
          "\u2970": "&RoundImplies;",
          "\u21DB": "&rAarr;",
          "\u211B": "&realine;",
          "\u21B1": "&rsh;",
          "\u29F4": "&RuleDelayed;",
          "\u0429": "&SHCHcy;",
          "\u0428": "&SHcy;",
          "\u042C": "&SOFTcy;",
          "\u015A": "&Sacute;",
          "\u2ABC": "&Sc;",
          "\u0160": "&Scaron;",
          "\u015E": "&Scedil;",
          "\u015C": "&Scirc;",
          "\u0421": "&Scy;",
          "\uD835\uDD16": "&Sfr;",
          "\u2191": "&uparrow;",
          "\u03A3": "&Sigma;",
          "\u2218": "&compfn;",
          "\uD835\uDD4A": "&Sopf;",
          "\u221A": "&radic;",
          "\u25A1": "&square;",
          "\u2293": "&sqcap;",
          "\u228F": "&sqsubset;",
          "\u2291": "&sqsubseteq;",
          "\u2290": "&sqsupset;",
          "\u2292": "&sqsupseteq;",
          "\u2294": "&sqcup;",
          "\uD835\uDCAE": "&Sscr;",
          "\u22C6": "&sstarf;",
          "\u22D0": "&Subset;",
          "\u2286": "&subseteq;",
          "\u227B": "&succ;",
          "\u2AB0": "&succeq;",
          "\u227D": "&succcurlyeq;",
          "\u227F": "&succsim;",
          "\u2211": "&sum;",
          "\u22D1": "&Supset;",
          "\u2283": "&supset;",
          "\u2287": "&supseteq;",
          "\xDE": "&THORN;",
          "\u2122": "&trade;",
          "\u040B": "&TSHcy;",
          "\u0426": "&TScy;",
          "	": "&Tab;",
          "\u03A4": "&Tau;",
          "\u0164": "&Tcaron;",
          "\u0162": "&Tcedil;",
          "\u0422": "&Tcy;",
          "\uD835\uDD17": "&Tfr;",
          "\u2234": "&therefore;",
          "\u0398": "&Theta;",
          "\u205F\u200A": "&ThickSpace;",
          "\u2009": "&thinsp;",
          "\u223C": "&thksim;",
          "\u2243": "&simeq;",
          "\u2245": "&cong;",
          "\u2248": "&thkap;",
          "\uD835\uDD4B": "&Topf;",
          "\u20DB": "&tdot;",
          "\uD835\uDCAF": "&Tscr;",
          "\u0166": "&Tstrok;",
          "\xDA": "&Uacute;",
          "\u219F": "&Uarr;",
          "\u2949": "&Uarrocir;",
          "\u040E": "&Ubrcy;",
          "\u016C": "&Ubreve;",
          "\xDB": "&Ucirc;",
          "\u0423": "&Ucy;",
          "\u0170": "&Udblac;",
          "\uD835\uDD18": "&Ufr;",
          "\xD9": "&Ugrave;",
          "\u016A": "&Umacr;",
          _: "&lowbar;",
          "\u23DF": "&UnderBrace;",
          "\u23B5": "&bbrk;",
          "\u23DD": "&UnderParenthesis;",
          "\u22C3": "&xcup;",
          "\u228E": "&uplus;",
          "\u0172": "&Uogon;",
          "\uD835\uDD4C": "&Uopf;",
          "\u2912": "&UpArrowBar;",
          "\u21C5": "&udarr;",
          "\u2195": "&varr;",
          "\u296E": "&udhar;",
          "\u22A5": "&perp;",
          "\u21A5": "&mapstoup;",
          "\u2196": "&nwarrow;",
          "\u2197": "&nearrow;",
          "\u03D2": "&upsih;",
          "\u03A5": "&Upsilon;",
          "\u016E": "&Uring;",
          "\uD835\uDCB0": "&Uscr;",
          "\u0168": "&Utilde;",
          "\xDC": "&Uuml;",
          "\u22AB": "&VDash;",
          "\u2AEB": "&Vbar;",
          "\u0412": "&Vcy;",
          "\u22A9": "&Vdash;",
          "\u2AE6": "&Vdashl;",
          "\u22C1": "&xvee;",
          "\u2016": "&Vert;",
          "\u2223": "&smid;",
          "|": "&vert;",
          "\u2758": "&VerticalSeparator;",
          "\u2240": "&wreath;",
          "\u200A": "&hairsp;",
          "\uD835\uDD19": "&Vfr;",
          "\uD835\uDD4D": "&Vopf;",
          "\uD835\uDCB1": "&Vscr;",
          "\u22AA": "&Vvdash;",
          "\u0174": "&Wcirc;",
          "\u22C0": "&xwedge;",
          "\uD835\uDD1A": "&Wfr;",
          "\uD835\uDD4E": "&Wopf;",
          "\uD835\uDCB2": "&Wscr;",
          "\uD835\uDD1B": "&Xfr;",
          "\u039E": "&Xi;",
          "\uD835\uDD4F": "&Xopf;",
          "\uD835\uDCB3": "&Xscr;",
          "\u042F": "&YAcy;",
          "\u0407": "&YIcy;",
          "\u042E": "&YUcy;",
          "\xDD": "&Yacute;",
          "\u0176": "&Ycirc;",
          "\u042B": "&Ycy;",
          "\uD835\uDD1C": "&Yfr;",
          "\uD835\uDD50": "&Yopf;",
          "\uD835\uDCB4": "&Yscr;",
          "\u0178": "&Yuml;",
          "\u0416": "&ZHcy;",
          "\u0179": "&Zacute;",
          "\u017D": "&Zcaron;",
          "\u0417": "&Zcy;",
          "\u017B": "&Zdot;",
          "\u0396": "&Zeta;",
          "\u2128": "&zeetrf;",
          "\u2124": "&integers;",
          "\uD835\uDCB5": "&Zscr;",
          "\xE1": "&aacute;",
          "\u0103": "&abreve;",
          "\u223E": "&mstpos;",
          "\u223E\u0333": "&acE;",
          "\u223F": "&acd;",
          "\xE2": "&acirc;",
          "\u0430": "&acy;",
          "\xE6": "&aelig;",
          "\uD835\uDD1E": "&afr;",
          "\xE0": "&agrave;",
          "\u2135": "&aleph;",
          "\u03B1": "&alpha;",
          "\u0101": "&amacr;",
          "\u2A3F": "&amalg;",
          "\u2227": "&wedge;",
          "\u2A55": "&andand;",
          "\u2A5C": "&andd;",
          "\u2A58": "&andslope;",
          "\u2A5A": "&andv;",
          "\u2220": "&angle;",
          "\u29A4": "&ange;",
          "\u2221": "&measuredangle;",
          "\u29A8": "&angmsdaa;",
          "\u29A9": "&angmsdab;",
          "\u29AA": "&angmsdac;",
          "\u29AB": "&angmsdad;",
          "\u29AC": "&angmsdae;",
          "\u29AD": "&angmsdaf;",
          "\u29AE": "&angmsdag;",
          "\u29AF": "&angmsdah;",
          "\u221F": "&angrt;",
          "\u22BE": "&angrtvb;",
          "\u299D": "&angrtvbd;",
          "\u2222": "&angsph;",
          "\u237C": "&angzarr;",
          "\u0105": "&aogon;",
          "\uD835\uDD52": "&aopf;",
          "\u2A70": "&apE;",
          "\u2A6F": "&apacir;",
          "\u224A": "&approxeq;",
          "\u224B": "&apid;",
          "'": "&apos;",
          "\xE5": "&aring;",
          "\uD835\uDCB6": "&ascr;",
          "*": "&midast;",
          "\xE3": "&atilde;",
          "\xE4": "&auml;",
          "\u2A11": "&awint;",
          "\u2AED": "&bNot;",
          "\u224C": "&bcong;",
          "\u03F6": "&bepsi;",
          "\u2035": "&bprime;",
          "\u223D": "&bsim;",
          "\u22CD": "&bsime;",
          "\u22BD": "&barvee;",
          "\u2305": "&barwedge;",
          "\u23B6": "&bbrktbrk;",
          "\u0431": "&bcy;",
          "\u201E": "&ldquor;",
          "\u29B0": "&bemptyv;",
          "\u03B2": "&beta;",
          "\u2136": "&beth;",
          "\u226C": "&twixt;",
          "\uD835\uDD1F": "&bfr;",
          "\u25EF": "&xcirc;",
          "\u2A00": "&xodot;",
          "\u2A01": "&xoplus;",
          "\u2A02": "&xotime;",
          "\u2A06": "&xsqcup;",
          "\u2605": "&starf;",
          "\u25BD": "&xdtri;",
          "\u25B3": "&xutri;",
          "\u2A04": "&xuplus;",
          "\u290D": "&rbarr;",
          "\u29EB": "&lozf;",
          "\u25B4": "&utrif;",
          "\u25BE": "&dtrif;",
          "\u25C2": "&ltrif;",
          "\u25B8": "&rtrif;",
          "\u2423": "&blank;",
          "\u2592": "&blk12;",
          "\u2591": "&blk14;",
          "\u2593": "&blk34;",
          "\u2588": "&block;",
          "=\u20E5": "&bne;",
          "\u2261\u20E5": "&bnequiv;",
          "\u2310": "&bnot;",
          "\uD835\uDD53": "&bopf;",
          "\u22C8": "&bowtie;",
          "\u2557": "&boxDL;",
          "\u2554": "&boxDR;",
          "\u2556": "&boxDl;",
          "\u2553": "&boxDr;",
          "\u2550": "&boxH;",
          "\u2566": "&boxHD;",
          "\u2569": "&boxHU;",
          "\u2564": "&boxHd;",
          "\u2567": "&boxHu;",
          "\u255D": "&boxUL;",
          "\u255A": "&boxUR;",
          "\u255C": "&boxUl;",
          "\u2559": "&boxUr;",
          "\u2551": "&boxV;",
          "\u256C": "&boxVH;",
          "\u2563": "&boxVL;",
          "\u2560": "&boxVR;",
          "\u256B": "&boxVh;",
          "\u2562": "&boxVl;",
          "\u255F": "&boxVr;",
          "\u29C9": "&boxbox;",
          "\u2555": "&boxdL;",
          "\u2552": "&boxdR;",
          "\u2510": "&boxdl;",
          "\u250C": "&boxdr;",
          "\u2565": "&boxhD;",
          "\u2568": "&boxhU;",
          "\u252C": "&boxhd;",
          "\u2534": "&boxhu;",
          "\u229F": "&minusb;",
          "\u229E": "&plusb;",
          "\u22A0": "&timesb;",
          "\u255B": "&boxuL;",
          "\u2558": "&boxuR;",
          "\u2518": "&boxul;",
          "\u2514": "&boxur;",
          "\u2502": "&boxv;",
          "\u256A": "&boxvH;",
          "\u2561": "&boxvL;",
          "\u255E": "&boxvR;",
          "\u253C": "&boxvh;",
          "\u2524": "&boxvl;",
          "\u251C": "&boxvr;",
          "\xA6": "&brvbar;",
          "\uD835\uDCB7": "&bscr;",
          "\u204F": "&bsemi;",
          "\\": "&bsol;",
          "\u29C5": "&bsolb;",
          "\u27C8": "&bsolhsub;",
          "\u2022": "&bullet;",
          "\u2AAE": "&bumpE;",
          "\u0107": "&cacute;",
          "\u2229": "&cap;",
          "\u2A44": "&capand;",
          "\u2A49": "&capbrcup;",
          "\u2A4B": "&capcap;",
          "\u2A47": "&capcup;",
          "\u2A40": "&capdot;",
          "\u2229\uFE00": "&caps;",
          "\u2041": "&caret;",
          "\u2A4D": "&ccaps;",
          "\u010D": "&ccaron;",
          "\xE7": "&ccedil;",
          "\u0109": "&ccirc;",
          "\u2A4C": "&ccups;",
          "\u2A50": "&ccupssm;",
          "\u010B": "&cdot;",
          "\u29B2": "&cemptyv;",
          "\xA2": "&cent;",
          "\uD835\uDD20": "&cfr;",
          "\u0447": "&chcy;",
          "\u2713": "&checkmark;",
          "\u03C7": "&chi;",
          "\u25CB": "&cir;",
          "\u29C3": "&cirE;",
          "\u02C6": "&circ;",
          "\u2257": "&cire;",
          "\u21BA": "&olarr;",
          "\u21BB": "&orarr;",
          "\u24C8": "&oS;",
          "\u229B": "&oast;",
          "\u229A": "&ocir;",
          "\u229D": "&odash;",
          "\u2A10": "&cirfnint;",
          "\u2AEF": "&cirmid;",
          "\u29C2": "&cirscir;",
          "\u2663": "&clubsuit;",
          ":": "&colon;",
          ",": "&comma;",
          "@": "&commat;",
          "\u2201": "&complement;",
          "\u2A6D": "&congdot;",
          "\uD835\uDD54": "&copf;",
          "\u2117": "&copysr;",
          "\u21B5": "&crarr;",
          "\u2717": "&cross;",
          "\uD835\uDCB8": "&cscr;",
          "\u2ACF": "&csub;",
          "\u2AD1": "&csube;",
          "\u2AD0": "&csup;",
          "\u2AD2": "&csupe;",
          "\u22EF": "&ctdot;",
          "\u2938": "&cudarrl;",
          "\u2935": "&cudarrr;",
          "\u22DE": "&curlyeqprec;",
          "\u22DF": "&curlyeqsucc;",
          "\u21B6": "&curvearrowleft;",
          "\u293D": "&cularrp;",
          "\u222A": "&cup;",
          "\u2A48": "&cupbrcap;",
          "\u2A46": "&cupcap;",
          "\u2A4A": "&cupcup;",
          "\u228D": "&cupdot;",
          "\u2A45": "&cupor;",
          "\u222A\uFE00": "&cups;",
          "\u21B7": "&curvearrowright;",
          "\u293C": "&curarrm;",
          "\u22CE": "&cuvee;",
          "\u22CF": "&cuwed;",
          "\xA4": "&curren;",
          "\u2231": "&cwint;",
          "\u232D": "&cylcty;",
          "\u2965": "&dHar;",
          "\u2020": "&dagger;",
          "\u2138": "&daleth;",
          "\u2010": "&hyphen;",
          "\u290F": "&rBarr;",
          "\u010F": "&dcaron;",
          "\u0434": "&dcy;",
          "\u21CA": "&downdownarrows;",
          "\u2A77": "&eDDot;",
          "\xB0": "&deg;",
          "\u03B4": "&delta;",
          "\u29B1": "&demptyv;",
          "\u297F": "&dfisht;",
          "\uD835\uDD21": "&dfr;",
          "\u2666": "&diams;",
          "\u03DD": "&gammad;",
          "\u22F2": "&disin;",
          "\xF7": "&divide;",
          "\u22C7": "&divonx;",
          "\u0452": "&djcy;",
          "\u231E": "&llcorner;",
          "\u230D": "&dlcrop;",
          $: "&dollar;",
          "\uD835\uDD55": "&dopf;",
          "\u2251": "&eDot;",
          "\u2238": "&minusd;",
          "\u2214": "&plusdo;",
          "\u22A1": "&sdotb;",
          "\u231F": "&lrcorner;",
          "\u230C": "&drcrop;",
          "\uD835\uDCB9": "&dscr;",
          "\u0455": "&dscy;",
          "\u29F6": "&dsol;",
          "\u0111": "&dstrok;",
          "\u22F1": "&dtdot;",
          "\u25BF": "&triangledown;",
          "\u29A6": "&dwangle;",
          "\u045F": "&dzcy;",
          "\u27FF": "&dzigrarr;",
          "\xE9": "&eacute;",
          "\u2A6E": "&easter;",
          "\u011B": "&ecaron;",
          "\u2256": "&eqcirc;",
          "\xEA": "&ecirc;",
          "\u2255": "&eqcolon;",
          "\u044D": "&ecy;",
          "\u0117": "&edot;",
          "\u2252": "&fallingdotseq;",
          "\uD835\uDD22": "&efr;",
          "\u2A9A": "&eg;",
          "\xE8": "&egrave;",
          "\u2A96": "&eqslantgtr;",
          "\u2A98": "&egsdot;",
          "\u2A99": "&el;",
          "\u23E7": "&elinters;",
          "\u2113": "&ell;",
          "\u2A95": "&eqslantless;",
          "\u2A97": "&elsdot;",
          "\u0113": "&emacr;",
          "\u2205": "&varnothing;",
          "\u2004": "&emsp13;",
          "\u2005": "&emsp14;",
          "\u2003": "&emsp;",
          "\u014B": "&eng;",
          "\u2002": "&ensp;",
          "\u0119": "&eogon;",
          "\uD835\uDD56": "&eopf;",
          "\u22D5": "&epar;",
          "\u29E3": "&eparsl;",
          "\u2A71": "&eplus;",
          "\u03B5": "&epsilon;",
          "\u03F5": "&varepsilon;",
          "=": "&equals;",
          "\u225F": "&questeq;",
          "\u2A78": "&equivDD;",
          "\u29E5": "&eqvparsl;",
          "\u2253": "&risingdotseq;",
          "\u2971": "&erarr;",
          "\u212F": "&escr;",
          "\u03B7": "&eta;",
          "\xF0": "&eth;",
          "\xEB": "&euml;",
          "\u20AC": "&euro;",
          "!": "&excl;",
          "\u0444": "&fcy;",
          "\u2640": "&female;",
          "\uFB03": "&ffilig;",
          "\uFB00": "&fflig;",
          "\uFB04": "&ffllig;",
          "\uD835\uDD23": "&ffr;",
          "\uFB01": "&filig;",
          fj: "&fjlig;",
          "\u266D": "&flat;",
          "\uFB02": "&fllig;",
          "\u25B1": "&fltns;",
          "\u0192": "&fnof;",
          "\uD835\uDD57": "&fopf;",
          "\u22D4": "&pitchfork;",
          "\u2AD9": "&forkv;",
          "\u2A0D": "&fpartint;",
          "\xBD": "&half;",
          "\u2153": "&frac13;",
          "\xBC": "&frac14;",
          "\u2155": "&frac15;",
          "\u2159": "&frac16;",
          "\u215B": "&frac18;",
          "\u2154": "&frac23;",
          "\u2156": "&frac25;",
          "\xBE": "&frac34;",
          "\u2157": "&frac35;",
          "\u215C": "&frac38;",
          "\u2158": "&frac45;",
          "\u215A": "&frac56;",
          "\u215D": "&frac58;",
          "\u215E": "&frac78;",
          "\u2044": "&frasl;",
          "\u2322": "&sfrown;",
          "\uD835\uDCBB": "&fscr;",
          "\u2A8C": "&gtreqqless;",
          "\u01F5": "&gacute;",
          "\u03B3": "&gamma;",
          "\u2A86": "&gtrapprox;",
          "\u011F": "&gbreve;",
          "\u011D": "&gcirc;",
          "\u0433": "&gcy;",
          "\u0121": "&gdot;",
          "\u2AA9": "&gescc;",
          "\u2A80": "&gesdot;",
          "\u2A82": "&gesdoto;",
          "\u2A84": "&gesdotol;",
          "\u22DB\uFE00": "&gesl;",
          "\u2A94": "&gesles;",
          "\uD835\uDD24": "&gfr;",
          "\u2137": "&gimel;",
          "\u0453": "&gjcy;",
          "\u2A92": "&glE;",
          "\u2AA5": "&gla;",
          "\u2AA4": "&glj;",
          "\u2269": "&gneqq;",
          "\u2A8A": "&gnapprox;",
          "\u2A88": "&gneq;",
          "\u22E7": "&gnsim;",
          "\uD835\uDD58": "&gopf;",
          "\u210A": "&gscr;",
          "\u2A8E": "&gsime;",
          "\u2A90": "&gsiml;",
          "\u2AA7": "&gtcc;",
          "\u2A7A": "&gtcir;",
          "\u22D7": "&gtrdot;",
          "\u2995": "&gtlPar;",
          "\u2A7C": "&gtquest;",
          "\u2978": "&gtrarr;",
          "\u2269\uFE00": "&gvnE;",
          "\u044A": "&hardcy;",
          "\u2948": "&harrcir;",
          "\u21AD": "&leftrightsquigarrow;",
          "\u210F": "&plankv;",
          "\u0125": "&hcirc;",
          "\u2665": "&heartsuit;",
          "\u2026": "&mldr;",
          "\u22B9": "&hercon;",
          "\uD835\uDD25": "&hfr;",
          "\u2925": "&searhk;",
          "\u2926": "&swarhk;",
          "\u21FF": "&hoarr;",
          "\u223B": "&homtht;",
          "\u21A9": "&larrhk;",
          "\u21AA": "&rarrhk;",
          "\uD835\uDD59": "&hopf;",
          "\u2015": "&horbar;",
          "\uD835\uDCBD": "&hscr;",
          "\u0127": "&hstrok;",
          "\u2043": "&hybull;",
          "\xED": "&iacute;",
          "\xEE": "&icirc;",
          "\u0438": "&icy;",
          "\u0435": "&iecy;",
          "\xA1": "&iexcl;",
          "\uD835\uDD26": "&ifr;",
          "\xEC": "&igrave;",
          "\u2A0C": "&qint;",
          "\u222D": "&tint;",
          "\u29DC": "&iinfin;",
          "\u2129": "&iiota;",
          "\u0133": "&ijlig;",
          "\u012B": "&imacr;",
          "\u0131": "&inodot;",
          "\u22B7": "&imof;",
          "\u01B5": "&imped;",
          "\u2105": "&incare;",
          "\u221E": "&infin;",
          "\u29DD": "&infintie;",
          "\u22BA": "&intercal;",
          "\u2A17": "&intlarhk;",
          "\u2A3C": "&iprod;",
          "\u0451": "&iocy;",
          "\u012F": "&iogon;",
          "\uD835\uDD5A": "&iopf;",
          "\u03B9": "&iota;",
          "\xBF": "&iquest;",
          "\uD835\uDCBE": "&iscr;",
          "\u22F9": "&isinE;",
          "\u22F5": "&isindot;",
          "\u22F4": "&isins;",
          "\u22F3": "&isinsv;",
          "\u0129": "&itilde;",
          "\u0456": "&iukcy;",
          "\xEF": "&iuml;",
          "\u0135": "&jcirc;",
          "\u0439": "&jcy;",
          "\uD835\uDD27": "&jfr;",
          "\u0237": "&jmath;",
          "\uD835\uDD5B": "&jopf;",
          "\uD835\uDCBF": "&jscr;",
          "\u0458": "&jsercy;",
          "\u0454": "&jukcy;",
          "\u03BA": "&kappa;",
          "\u03F0": "&varkappa;",
          "\u0137": "&kcedil;",
          "\u043A": "&kcy;",
          "\uD835\uDD28": "&kfr;",
          "\u0138": "&kgreen;",
          "\u0445": "&khcy;",
          "\u045C": "&kjcy;",
          "\uD835\uDD5C": "&kopf;",
          "\uD835\uDCC0": "&kscr;",
          "\u291B": "&lAtail;",
          "\u290E": "&lBarr;",
          "\u2A8B": "&lesseqqgtr;",
          "\u2962": "&lHar;",
          "\u013A": "&lacute;",
          "\u29B4": "&laemptyv;",
          "\u03BB": "&lambda;",
          "\u2991": "&langd;",
          "\u2A85": "&lessapprox;",
          "\xAB": "&laquo;",
          "\u291F": "&larrbfs;",
          "\u291D": "&larrfs;",
          "\u21AB": "&looparrowleft;",
          "\u2939": "&larrpl;",
          "\u2973": "&larrsim;",
          "\u21A2": "&leftarrowtail;",
          "\u2AAB": "&lat;",
          "\u2919": "&latail;",
          "\u2AAD": "&late;",
          "\u2AAD\uFE00": "&lates;",
          "\u290C": "&lbarr;",
          "\u2772": "&lbbrk;",
          "{": "&lcub;",
          "[": "&lsqb;",
          "\u298B": "&lbrke;",
          "\u298F": "&lbrksld;",
          "\u298D": "&lbrkslu;",
          "\u013E": "&lcaron;",
          "\u013C": "&lcedil;",
          "\u043B": "&lcy;",
          "\u2936": "&ldca;",
          "\u2967": "&ldrdhar;",
          "\u294B": "&ldrushar;",
          "\u21B2": "&ldsh;",
          "\u2264": "&leq;",
          "\u21C7": "&llarr;",
          "\u22CB": "&lthree;",
          "\u2AA8": "&lescc;",
          "\u2A7F": "&lesdot;",
          "\u2A81": "&lesdoto;",
          "\u2A83": "&lesdotor;",
          "\u22DA\uFE00": "&lesg;",
          "\u2A93": "&lesges;",
          "\u22D6": "&ltdot;",
          "\u297C": "&lfisht;",
          "\uD835\uDD29": "&lfr;",
          "\u2A91": "&lgE;",
          "\u296A": "&lharul;",
          "\u2584": "&lhblk;",
          "\u0459": "&ljcy;",
          "\u296B": "&llhard;",
          "\u25FA": "&lltri;",
          "\u0140": "&lmidot;",
          "\u23B0": "&lmoustache;",
          "\u2268": "&lneqq;",
          "\u2A89": "&lnapprox;",
          "\u2A87": "&lneq;",
          "\u22E6": "&lnsim;",
          "\u27EC": "&loang;",
          "\u21FD": "&loarr;",
          "\u27FC": "&xmap;",
          "\u21AC": "&rarrlp;",
          "\u2985": "&lopar;",
          "\uD835\uDD5D": "&lopf;",
          "\u2A2D": "&loplus;",
          "\u2A34": "&lotimes;",
          "\u2217": "&lowast;",
          "\u25CA": "&lozenge;",
          "(": "&lpar;",
          "\u2993": "&lparlt;",
          "\u296D": "&lrhard;",
          "\u200E": "&lrm;",
          "\u22BF": "&lrtri;",
          "\u2039": "&lsaquo;",
          "\uD835\uDCC1": "&lscr;",
          "\u2A8D": "&lsime;",
          "\u2A8F": "&lsimg;",
          "\u201A": "&sbquo;",
          "\u0142": "&lstrok;",
          "\u2AA6": "&ltcc;",
          "\u2A79": "&ltcir;",
          "\u22C9": "&ltimes;",
          "\u2976": "&ltlarr;",
          "\u2A7B": "&ltquest;",
          "\u2996": "&ltrPar;",
          "\u25C3": "&triangleleft;",
          "\u294A": "&lurdshar;",
          "\u2966": "&luruhar;",
          "\u2268\uFE00": "&lvnE;",
          "\u223A": "&mDDot;",
          "\xAF": "&strns;",
          "\u2642": "&male;",
          "\u2720": "&maltese;",
          "\u25AE": "&marker;",
          "\u2A29": "&mcomma;",
          "\u043C": "&mcy;",
          "\u2014": "&mdash;",
          "\uD835\uDD2A": "&mfr;",
          "\u2127": "&mho;",
          "\xB5": "&micro;",
          "\u2AF0": "&midcir;",
          "\u2212": "&minus;",
          "\u2A2A": "&minusdu;",
          "\u2ADB": "&mlcp;",
          "\u22A7": "&models;",
          "\uD835\uDD5E": "&mopf;",
          "\uD835\uDCC2": "&mscr;",
          "\u03BC": "&mu;",
          "\u22B8": "&mumap;",
          "\u22D9\u0338": "&nGg;",
          "\u226B\u20D2": "&nGt;",
          "\u21CD": "&nlArr;",
          "\u21CE": "&nhArr;",
          "\u22D8\u0338": "&nLl;",
          "\u226A\u20D2": "&nLt;",
          "\u21CF": "&nrArr;",
          "\u22AF": "&nVDash;",
          "\u22AE": "&nVdash;",
          "\u0144": "&nacute;",
          "\u2220\u20D2": "&nang;",
          "\u2A70\u0338": "&napE;",
          "\u224B\u0338": "&napid;",
          "\u0149": "&napos;",
          "\u266E": "&natural;",
          "\u2A43": "&ncap;",
          "\u0148": "&ncaron;",
          "\u0146": "&ncedil;",
          "\u2A6D\u0338": "&ncongdot;",
          "\u2A42": "&ncup;",
          "\u043D": "&ncy;",
          "\u2013": "&ndash;",
          "\u21D7": "&neArr;",
          "\u2924": "&nearhk;",
          "\u2250\u0338": "&nedot;",
          "\u2928": "&toea;",
          "\uD835\uDD2B": "&nfr;",
          "\u21AE": "&nleftrightarrow;",
          "\u2AF2": "&nhpar;",
          "\u22FC": "&nis;",
          "\u22FA": "&nisd;",
          "\u045A": "&njcy;",
          "\u2266\u0338": "&nleqq;",
          "\u219A": "&nleftarrow;",
          "\u2025": "&nldr;",
          "\uD835\uDD5F": "&nopf;",
          "\xAC": "&not;",
          "\u22F9\u0338": "&notinE;",
          "\u22F5\u0338": "&notindot;",
          "\u22F7": "&notinvb;",
          "\u22F6": "&notinvc;",
          "\u22FE": "&notnivb;",
          "\u22FD": "&notnivc;",
          "\u2AFD\u20E5": "&nparsl;",
          "\u2202\u0338": "&npart;",
          "\u2A14": "&npolint;",
          "\u219B": "&nrightarrow;",
          "\u2933\u0338": "&nrarrc;",
          "\u219D\u0338": "&nrarrw;",
          "\uD835\uDCC3": "&nscr;",
          "\u2284": "&nsub;",
          "\u2AC5\u0338": "&nsubseteqq;",
          "\u2285": "&nsup;",
          "\u2AC6\u0338": "&nsupseteqq;",
          "\xF1": "&ntilde;",
          "\u03BD": "&nu;",
          "#": "&num;",
          "\u2116": "&numero;",
          "\u2007": "&numsp;",
          "\u22AD": "&nvDash;",
          "\u2904": "&nvHarr;",
          "\u224D\u20D2": "&nvap;",
          "\u22AC": "&nvdash;",
          "\u2265\u20D2": "&nvge;",
          ">\u20D2": "&nvgt;",
          "\u29DE": "&nvinfin;",
          "\u2902": "&nvlArr;",
          "\u2264\u20D2": "&nvle;",
          "<\u20D2": "&nvlt;",
          "\u22B4\u20D2": "&nvltrie;",
          "\u2903": "&nvrArr;",
          "\u22B5\u20D2": "&nvrtrie;",
          "\u223C\u20D2": "&nvsim;",
          "\u21D6": "&nwArr;",
          "\u2923": "&nwarhk;",
          "\u2927": "&nwnear;",
          "\xF3": "&oacute;",
          "\xF4": "&ocirc;",
          "\u043E": "&ocy;",
          "\u0151": "&odblac;",
          "\u2A38": "&odiv;",
          "\u29BC": "&odsold;",
          "\u0153": "&oelig;",
          "\u29BF": "&ofcir;",
          "\uD835\uDD2C": "&ofr;",
          "\u02DB": "&ogon;",
          "\xF2": "&ograve;",
          "\u29C1": "&ogt;",
          "\u29B5": "&ohbar;",
          "\u29BE": "&olcir;",
          "\u29BB": "&olcross;",
          "\u29C0": "&olt;",
          "\u014D": "&omacr;",
          "\u03C9": "&omega;",
          "\u03BF": "&omicron;",
          "\u29B6": "&omid;",
          "\uD835\uDD60": "&oopf;",
          "\u29B7": "&opar;",
          "\u29B9": "&operp;",
          "\u2228": "&vee;",
          "\u2A5D": "&ord;",
          "\u2134": "&oscr;",
          "\xAA": "&ordf;",
          "\xBA": "&ordm;",
          "\u22B6": "&origof;",
          "\u2A56": "&oror;",
          "\u2A57": "&orslope;",
          "\u2A5B": "&orv;",
          "\xF8": "&oslash;",
          "\u2298": "&osol;",
          "\xF5": "&otilde;",
          "\u2A36": "&otimesas;",
          "\xF6": "&ouml;",
          "\u233D": "&ovbar;",
          "\xB6": "&para;",
          "\u2AF3": "&parsim;",
          "\u2AFD": "&parsl;",
          "\u043F": "&pcy;",
          "%": "&percnt;",
          ".": "&period;",
          "\u2030": "&permil;",
          "\u2031": "&pertenk;",
          "\uD835\uDD2D": "&pfr;",
          "\u03C6": "&phi;",
          "\u03D5": "&varphi;",
          "\u260E": "&phone;",
          "\u03C0": "&pi;",
          "\u03D6": "&varpi;",
          "\u210E": "&planckh;",
          "+": "&plus;",
          "\u2A23": "&plusacir;",
          "\u2A22": "&pluscir;",
          "\u2A25": "&plusdu;",
          "\u2A72": "&pluse;",
          "\u2A26": "&plussim;",
          "\u2A27": "&plustwo;",
          "\u2A15": "&pointint;",
          "\uD835\uDD61": "&popf;",
          "\xA3": "&pound;",
          "\u2AB3": "&prE;",
          "\u2AB7": "&precapprox;",
          "\u2AB9": "&prnap;",
          "\u2AB5": "&prnE;",
          "\u22E8": "&prnsim;",
          "\u2032": "&prime;",
          "\u232E": "&profalar;",
          "\u2312": "&profline;",
          "\u2313": "&profsurf;",
          "\u22B0": "&prurel;",
          "\uD835\uDCC5": "&pscr;",
          "\u03C8": "&psi;",
          "\u2008": "&puncsp;",
          "\uD835\uDD2E": "&qfr;",
          "\uD835\uDD62": "&qopf;",
          "\u2057": "&qprime;",
          "\uD835\uDCC6": "&qscr;",
          "\u2A16": "&quatint;",
          "?": "&quest;",
          "\u291C": "&rAtail;",
          "\u2964": "&rHar;",
          "\u223D\u0331": "&race;",
          "\u0155": "&racute;",
          "\u29B3": "&raemptyv;",
          "\u2992": "&rangd;",
          "\u29A5": "&range;",
          "\xBB": "&raquo;",
          "\u2975": "&rarrap;",
          "\u2920": "&rarrbfs;",
          "\u2933": "&rarrc;",
          "\u291E": "&rarrfs;",
          "\u2945": "&rarrpl;",
          "\u2974": "&rarrsim;",
          "\u21A3": "&rightarrowtail;",
          "\u219D": "&rightsquigarrow;",
          "\u291A": "&ratail;",
          "\u2236": "&ratio;",
          "\u2773": "&rbbrk;",
          "}": "&rcub;",
          "]": "&rsqb;",
          "\u298C": "&rbrke;",
          "\u298E": "&rbrksld;",
          "\u2990": "&rbrkslu;",
          "\u0159": "&rcaron;",
          "\u0157": "&rcedil;",
          "\u0440": "&rcy;",
          "\u2937": "&rdca;",
          "\u2969": "&rdldhar;",
          "\u21B3": "&rdsh;",
          "\u25AD": "&rect;",
          "\u297D": "&rfisht;",
          "\uD835\uDD2F": "&rfr;",
          "\u296C": "&rharul;",
          "\u03C1": "&rho;",
          "\u03F1": "&varrho;",
          "\u21C9": "&rrarr;",
          "\u22CC": "&rthree;",
          "\u02DA": "&ring;",
          "\u200F": "&rlm;",
          "\u23B1": "&rmoustache;",
          "\u2AEE": "&rnmid;",
          "\u27ED": "&roang;",
          "\u21FE": "&roarr;",
          "\u2986": "&ropar;",
          "\uD835\uDD63": "&ropf;",
          "\u2A2E": "&roplus;",
          "\u2A35": "&rotimes;",
          ")": "&rpar;",
          "\u2994": "&rpargt;",
          "\u2A12": "&rppolint;",
          "\u203A": "&rsaquo;",
          "\uD835\uDCC7": "&rscr;",
          "\u22CA": "&rtimes;",
          "\u25B9": "&triangleright;",
          "\u29CE": "&rtriltri;",
          "\u2968": "&ruluhar;",
          "\u211E": "&rx;",
          "\u015B": "&sacute;",
          "\u2AB4": "&scE;",
          "\u2AB8": "&succapprox;",
          "\u0161": "&scaron;",
          "\u015F": "&scedil;",
          "\u015D": "&scirc;",
          "\u2AB6": "&succneqq;",
          "\u2ABA": "&succnapprox;",
          "\u22E9": "&succnsim;",
          "\u2A13": "&scpolint;",
          "\u0441": "&scy;",
          "\u22C5": "&sdot;",
          "\u2A66": "&sdote;",
          "\u21D8": "&seArr;",
          "\xA7": "&sect;",
          ";": "&semi;",
          "\u2929": "&tosa;",
          "\u2736": "&sext;",
          "\uD835\uDD30": "&sfr;",
          "\u266F": "&sharp;",
          "\u0449": "&shchcy;",
          "\u0448": "&shcy;",
          "\xAD": "&shy;",
          "\u03C3": "&sigma;",
          "\u03C2": "&varsigma;",
          "\u2A6A": "&simdot;",
          "\u2A9E": "&simg;",
          "\u2AA0": "&simgE;",
          "\u2A9D": "&siml;",
          "\u2A9F": "&simlE;",
          "\u2246": "&simne;",
          "\u2A24": "&simplus;",
          "\u2972": "&simrarr;",
          "\u2A33": "&smashp;",
          "\u29E4": "&smeparsl;",
          "\u2323": "&ssmile;",
          "\u2AAA": "&smt;",
          "\u2AAC": "&smte;",
          "\u2AAC\uFE00": "&smtes;",
          "\u044C": "&softcy;",
          "/": "&sol;",
          "\u29C4": "&solb;",
          "\u233F": "&solbar;",
          "\uD835\uDD64": "&sopf;",
          "\u2660": "&spadesuit;",
          "\u2293\uFE00": "&sqcaps;",
          "\u2294\uFE00": "&sqcups;",
          "\uD835\uDCC8": "&sscr;",
          "\u2606": "&star;",
          "\u2282": "&subset;",
          "\u2AC5": "&subseteqq;",
          "\u2ABD": "&subdot;",
          "\u2AC3": "&subedot;",
          "\u2AC1": "&submult;",
          "\u2ACB": "&subsetneqq;",
          "\u228A": "&subsetneq;",
          "\u2ABF": "&subplus;",
          "\u2979": "&subrarr;",
          "\u2AC7": "&subsim;",
          "\u2AD5": "&subsub;",
          "\u2AD3": "&subsup;",
          "\u266A": "&sung;",
          "\xB9": "&sup1;",
          "\xB2": "&sup2;",
          "\xB3": "&sup3;",
          "\u2AC6": "&supseteqq;",
          "\u2ABE": "&supdot;",
          "\u2AD8": "&supdsub;",
          "\u2AC4": "&supedot;",
          "\u27C9": "&suphsol;",
          "\u2AD7": "&suphsub;",
          "\u297B": "&suplarr;",
          "\u2AC2": "&supmult;",
          "\u2ACC": "&supsetneqq;",
          "\u228B": "&supsetneq;",
          "\u2AC0": "&supplus;",
          "\u2AC8": "&supsim;",
          "\u2AD4": "&supsub;",
          "\u2AD6": "&supsup;",
          "\u21D9": "&swArr;",
          "\u292A": "&swnwar;",
          "\xDF": "&szlig;",
          "\u2316": "&target;",
          "\u03C4": "&tau;",
          "\u0165": "&tcaron;",
          "\u0163": "&tcedil;",
          "\u0442": "&tcy;",
          "\u2315": "&telrec;",
          "\uD835\uDD31": "&tfr;",
          "\u03B8": "&theta;",
          "\u03D1": "&vartheta;",
          "\xFE": "&thorn;",
          "\xD7": "&times;",
          "\u2A31": "&timesbar;",
          "\u2A30": "&timesd;",
          "\u2336": "&topbot;",
          "\u2AF1": "&topcir;",
          "\uD835\uDD65": "&topf;",
          "\u2ADA": "&topfork;",
          "\u2034": "&tprime;",
          "\u25B5": "&utri;",
          "\u225C": "&trie;",
          "\u25EC": "&tridot;",
          "\u2A3A": "&triminus;",
          "\u2A39": "&triplus;",
          "\u29CD": "&trisb;",
          "\u2A3B": "&tritime;",
          "\u23E2": "&trpezium;",
          "\uD835\uDCC9": "&tscr;",
          "\u0446": "&tscy;",
          "\u045B": "&tshcy;",
          "\u0167": "&tstrok;",
          "\u2963": "&uHar;",
          "\xFA": "&uacute;",
          "\u045E": "&ubrcy;",
          "\u016D": "&ubreve;",
          "\xFB": "&ucirc;",
          "\u0443": "&ucy;",
          "\u0171": "&udblac;",
          "\u297E": "&ufisht;",
          "\uD835\uDD32": "&ufr;",
          "\xF9": "&ugrave;",
          "\u2580": "&uhblk;",
          "\u231C": "&ulcorner;",
          "\u230F": "&ulcrop;",
          "\u25F8": "&ultri;",
          "\u016B": "&umacr;",
          "\u0173": "&uogon;",
          "\uD835\uDD66": "&uopf;",
          "\u03C5": "&upsilon;",
          "\u21C8": "&uuarr;",
          "\u231D": "&urcorner;",
          "\u230E": "&urcrop;",
          "\u016F": "&uring;",
          "\u25F9": "&urtri;",
          "\uD835\uDCCA": "&uscr;",
          "\u22F0": "&utdot;",
          "\u0169": "&utilde;",
          "\xFC": "&uuml;",
          "\u29A7": "&uwangle;",
          "\u2AE8": "&vBar;",
          "\u2AE9": "&vBarv;",
          "\u299C": "&vangrt;",
          "\u228A\uFE00": "&vsubne;",
          "\u2ACB\uFE00": "&vsubnE;",
          "\u228B\uFE00": "&vsupne;",
          "\u2ACC\uFE00": "&vsupnE;",
          "\u0432": "&vcy;",
          "\u22BB": "&veebar;",
          "\u225A": "&veeeq;",
          "\u22EE": "&vellip;",
          "\uD835\uDD33": "&vfr;",
          "\uD835\uDD67": "&vopf;",
          "\uD835\uDCCB": "&vscr;",
          "\u299A": "&vzigzag;",
          "\u0175": "&wcirc;",
          "\u2A5F": "&wedbar;",
          "\u2259": "&wedgeq;",
          "\u2118": "&wp;",
          "\uD835\uDD34": "&wfr;",
          "\uD835\uDD68": "&wopf;",
          "\uD835\uDCCC": "&wscr;",
          "\uD835\uDD35": "&xfr;",
          "\u03BE": "&xi;",
          "\u22FB": "&xnis;",
          "\uD835\uDD69": "&xopf;",
          "\uD835\uDCCD": "&xscr;",
          "\xFD": "&yacute;",
          "\u044F": "&yacy;",
          "\u0177": "&ycirc;",
          "\u044B": "&ycy;",
          "\xA5": "&yen;",
          "\uD835\uDD36": "&yfr;",
          "\u0457": "&yicy;",
          "\uD835\uDD6A": "&yopf;",
          "\uD835\uDCCE": "&yscr;",
          "\u044E": "&yucy;",
          "\xFF": "&yuml;",
          "\u017A": "&zacute;",
          "\u017E": "&zcaron;",
          "\u0437": "&zcy;",
          "\u017C": "&zdot;",
          "\u03B6": "&zeta;",
          "\uD835\uDD37": "&zfr;",
          "\u0436": "&zhcy;",
          "\u21DD": "&zigrarr;",
          "\uD835\uDD6B": "&zopf;",
          "\uD835\uDCCF": "&zscr;",
          "\u200D": "&zwj;",
          "\u200C": "&zwnj;"
        }
      }
    };
  }
});

// node_modules/html-entities/lib/numeric-unicode-map.js
var require_numeric_unicode_map = __commonJS({
  "node_modules/html-entities/lib/numeric-unicode-map.js": function(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.numericUnicodeMap = {
      0: 65533,
      128: 8364,
      130: 8218,
      131: 402,
      132: 8222,
      133: 8230,
      134: 8224,
      135: 8225,
      136: 710,
      137: 8240,
      138: 352,
      139: 8249,
      140: 338,
      142: 381,
      145: 8216,
      146: 8217,
      147: 8220,
      148: 8221,
      149: 8226,
      150: 8211,
      151: 8212,
      152: 732,
      153: 8482,
      154: 353,
      155: 8250,
      156: 339,
      158: 382,
      159: 376
    };
  }
});

// node_modules/html-entities/lib/surrogate-pairs.js
var require_surrogate_pairs = __commonJS({
  "node_modules/html-entities/lib/surrogate-pairs.js": function(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.fromCodePoint = String.fromCodePoint || function(astralCodePoint) {
      return String.fromCharCode(Math.floor((astralCodePoint - 65536) / 1024) + 55296, (astralCodePoint - 65536) % 1024 + 56320);
    };
    exports.getCodePoint = String.prototype.codePointAt ? function(input, position) {
      return input.codePointAt(position);
    } : function(input, position) {
      return (input.charCodeAt(position) - 55296) * 1024 + input.charCodeAt(position + 1) - 56320 + 65536;
    };
    exports.highSurrogateFrom = 55296;
    exports.highSurrogateTo = 56319;
  }
});

// node_modules/html-entities/lib/index.js
var require_lib = __commonJS({
  "node_modules/html-entities/lib/index.js": function(exports) {
    "use strict";
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p))
              t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var named_references_1 = require_named_references();
    var numeric_unicode_map_1 = require_numeric_unicode_map();
    var surrogate_pairs_1 = require_surrogate_pairs();
    var allNamedReferences = __assign(__assign({}, named_references_1.namedReferences), {
      all: named_references_1.namedReferences.html5
    });
    var encodeRegExps = {
      specialChars: /[<>'"&]/g,
      nonAscii: /[<>'"&\u0080-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,
      nonAsciiPrintable: /[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,
      nonAsciiPrintableOnly: /[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,
      extensive: /[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g
    };
    var defaultEncodeOptions = {
      mode: "specialChars",
      level: "all",
      numeric: "decimal"
    };
    function encode(text, _a) {
      var _b = _a === void 0 ? defaultEncodeOptions : _a, _c = _b.mode, mode = _c === void 0 ? "specialChars" : _c, _d = _b.numeric, numeric = _d === void 0 ? "decimal" : _d, _e = _b.level, level = _e === void 0 ? "all" : _e;
      if (!text) {
        return "";
      }
      var encodeRegExp = encodeRegExps[mode];
      var references = allNamedReferences[level].characters;
      var isHex = numeric === "hexadecimal";
      encodeRegExp.lastIndex = 0;
      var _b = encodeRegExp.exec(text);
      var _c;
      if (_b) {
        _c = "";
        var _d = 0;
        do {
          if (_d !== _b.index) {
            _c += text.substring(_d, _b.index);
          }
          var _e = _b[0];
          var result_1 = references[_e];
          if (!result_1) {
            var code_1 = _e.length > 1 ? surrogate_pairs_1.getCodePoint(_e, 0) : _e.charCodeAt(0);
            result_1 = (isHex ? "&#x" + code_1.toString(16) : "&#" + code_1) + ";";
          }
          _c += result_1;
          _d = _b.index + _e.length;
        } while (_b = encodeRegExp.exec(text));
        if (_d !== text.length) {
          _c += text.substring(_d);
        }
      } else {
        _c = text;
      }
      return _c;
    }
    exports.encode = encode;
    var defaultDecodeOptions = {
      scope: "body",
      level: "all"
    };
    var strict = /&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g;
    var attribute = /&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g;
    var baseDecodeRegExps = {
      xml: {
        strict: strict,
        attribute: attribute,
        body: named_references_1.bodyRegExps.xml
      },
      html4: {
        strict: strict,
        attribute: attribute,
        body: named_references_1.bodyRegExps.html4
      },
      html5: {
        strict: strict,
        attribute: attribute,
        body: named_references_1.bodyRegExps.html5
      }
    };
    var decodeRegExps = __assign(__assign({}, baseDecodeRegExps), {
      all: baseDecodeRegExps.html5
    });
    var fromCharCode = String.fromCharCode;
    var outOfBoundsChar = fromCharCode(65533);
    var defaultDecodeEntityOptions = {
      level: "all"
    };
    function decodeEntity(entity, _a) {
      var _b = (_a === void 0 ? defaultDecodeEntityOptions : _a).level, level = _b === void 0 ? "all" : _b;
      if (!entity) {
        return "";
      }
      var _b = entity;
      var decodeEntityLastChar_1 = entity[entity.length - 1];
      if (false) {
        _b = entity;
      } else if (false) {
        _b = entity;
      } else {
        var decodeResultByReference_1 = allNamedReferences[level].entities[entity];
        if (decodeResultByReference_1) {
          _b = decodeResultByReference_1;
        } else if (entity[0] === "&" && entity[1] === "#") {
          var decodeSecondChar_1 = entity[2];
          var decodeCode_1 = decodeSecondChar_1 == "x" || decodeSecondChar_1 == "X" ? parseInt(entity.substr(3), 16) : parseInt(entity.substr(2));
          _b = decodeCode_1 >= 1114111 ? outOfBoundsChar : decodeCode_1 > 65535 ? surrogate_pairs_1.fromCodePoint(decodeCode_1) : fromCharCode(numeric_unicode_map_1.numericUnicodeMap[decodeCode_1] || decodeCode_1);
        }
      }
      return _b;
    }
    exports.decodeEntity = decodeEntity;
    function decode(text, _a) {
      var decodeSecondChar_1 = _a === void 0 ? defaultDecodeOptions : _a, decodeCode_1 = decodeSecondChar_1.level, level = decodeCode_1 === void 0 ? "all" : decodeCode_1, _b = decodeSecondChar_1.scope, scope = _b === void 0 ? level === "xml" ? "strict" : "body" : _b;
      if (!text) {
        return "";
      }
      var decodeRegExp = decodeRegExps[level][scope];
      var references = allNamedReferences[level].entities;
      var isAttribute = scope === "attribute";
      var isStrict = scope === "strict";
      decodeRegExp.lastIndex = 0;
      var replaceMatch_1 = decodeRegExp.exec(text);
      var replaceResult_1;
      if (replaceMatch_1) {
        replaceResult_1 = "";
        var replaceLastIndex_1 = 0;
        do {
          if (replaceLastIndex_1 !== replaceMatch_1.index) {
            replaceResult_1 += text.substring(replaceLastIndex_1, replaceMatch_1.index);
          }
          var replaceInput_1 = replaceMatch_1[0];
          var decodeResult_1 = replaceInput_1;
          var decodeEntityLastChar_2 = replaceInput_1[replaceInput_1.length - 1];
          if (isAttribute && decodeEntityLastChar_2 === "=") {
            decodeResult_1 = replaceInput_1;
          } else if (isStrict && decodeEntityLastChar_2 !== ";") {
            decodeResult_1 = replaceInput_1;
          } else {
            var decodeResultByReference_2 = references[replaceInput_1];
            if (decodeResultByReference_2) {
              decodeResult_1 = decodeResultByReference_2;
            } else if (replaceInput_1[0] === "&" && replaceInput_1[1] === "#") {
              var decodeSecondChar_2 = replaceInput_1[2];
              var decodeCode_2 = decodeSecondChar_2 == "x" || decodeSecondChar_2 == "X" ? parseInt(replaceInput_1.substr(3), 16) : parseInt(replaceInput_1.substr(2));
              decodeResult_1 = decodeCode_2 >= 1114111 ? outOfBoundsChar : decodeCode_2 > 65535 ? surrogate_pairs_1.fromCodePoint(decodeCode_2) : fromCharCode(numeric_unicode_map_1.numericUnicodeMap[decodeCode_2] || decodeCode_2);
            }
          }
          replaceResult_1 += decodeResult_1;
          replaceLastIndex_1 = replaceMatch_1.index + replaceInput_1.length;
        } while (replaceMatch_1 = decodeRegExp.exec(text));
        if (replaceLastIndex_1 !== text.length) {
          replaceResult_1 += text.substring(replaceLastIndex_1);
        }
      } else {
        replaceResult_1 = text;
      }
      return replaceResult_1;
    }
    exports.decode = decode;
  }
});

// node_modules/core-js/internals/global.js
var require_global = __commonJS({
  "node_modules/core-js/internals/global.js": function(exports, module2) {
    "use strict";
    var check = function check2(it) {
      return it && it.Math === Math && it;
    };
    module2.exports = // eslint-disable-next-line es/no-global-this -- safe
    check(typeof globalThis == "object" && globalThis) || check(typeof window == "object" && window) || // eslint-disable-next-line no-restricted-globals -- safe
    check(typeof self == "object" && self) || check(typeof global == "object" && global) || // eslint-disable-next-line no-new-func -- fallback
    function() {
      return this;
    }() || exports || Function("return this")();
  }
});

// node_modules/core-js/internals/fails.js
var require_fails = __commonJS({
  "node_modules/core-js/internals/fails.js": function(exports, module2) {
    "use strict";
    module2.exports = function(exec) {
      try {
        return !!exec();
      } catch (error) {
        return true;
      }
    };
  }
});

// node_modules/core-js/internals/descriptors.js
var require_descriptors = __commonJS({
  "node_modules/core-js/internals/descriptors.js": function(exports, module2) {
    "use strict";
    var fails = require_fails();
    module2.exports = !fails(function() {
      return Object.defineProperty({}, 1, {
        get: function get4() {
          return 7;
        }
      })[1] !== 7;
    });
  }
});

// node_modules/core-js/internals/function-bind-native.js
var require_function_bind_native = __commonJS({
  "node_modules/core-js/internals/function-bind-native.js": function(exports, module2) {
    "use strict";
    var fails = require_fails();
    module2.exports = !fails(function() {
      var test = function() {
      }.bind();
      return typeof test != "function" || test.hasOwnProperty("prototype");
    });
  }
});

// node_modules/core-js/internals/function-call.js
var require_function_call = __commonJS({
  "node_modules/core-js/internals/function-call.js": function(exports, module2) {
    "use strict";
    var NATIVE_BIND = require_function_bind_native();
    var call = Function.prototype.call;
    module2.exports = NATIVE_BIND ? call.bind(call) : function() {
      return call.apply(call, arguments);
    };
  }
});

// node_modules/core-js/internals/object-property-is-enumerable.js
var require_object_property_is_enumerable = __commonJS({
  "node_modules/core-js/internals/object-property-is-enumerable.js": function(exports) {
    "use strict";
    var $propertyIsEnumerable = {}.propertyIsEnumerable;
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({
      1: 2
    }, 1);
    exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
      var descriptor = getOwnPropertyDescriptor(this, V);
      return !!descriptor && descriptor.enumerable;
    } : $propertyIsEnumerable;
  }
});

// node_modules/core-js/internals/create-property-descriptor.js
var require_create_property_descriptor = __commonJS({
  "node_modules/core-js/internals/create-property-descriptor.js": function(exports, module2) {
    "use strict";
    module2.exports = function(bitmap, value) {
      return {
        enumerable: !(bitmap & 1),
        configurable: !(bitmap & 2),
        writable: !(bitmap & 4),
        value: value
      };
    };
  }
});

// node_modules/core-js/internals/function-uncurry-this.js
var require_function_uncurry_this = __commonJS({
  "node_modules/core-js/internals/function-uncurry-this.js": function(exports, module2) {
    "use strict";
    var NATIVE_BIND = require_function_bind_native();
    var FunctionPrototype = Function.prototype;
    var call = FunctionPrototype.call;
    var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);
    module2.exports = NATIVE_BIND ? uncurryThisWithBind : function(fn) {
      return function() {
        return call.apply(fn, arguments);
      };
    };
  }
});

// node_modules/core-js/internals/classof-raw.js
var require_classof_raw = __commonJS({
  "node_modules/core-js/internals/classof-raw.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var toString = uncurryThis({}.toString);
    var stringSlice = uncurryThis("".slice);
    module2.exports = function(it) {
      return stringSlice(toString(it), 8, -1);
    };
  }
});

// node_modules/core-js/internals/indexed-object.js
var require_indexed_object = __commonJS({
  "node_modules/core-js/internals/indexed-object.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var classof = require_classof_raw();
    var $Object = Object;
    var split = uncurryThis("".split);
    module2.exports = fails(function() {
      return !$Object("z").propertyIsEnumerable(0);
    }) ? function(it) {
      return classof(it) === "String" ? split(it, "") : $Object(it);
    } : $Object;
  }
});

// node_modules/core-js/internals/is-null-or-undefined.js
var require_is_null_or_undefined = __commonJS({
  "node_modules/core-js/internals/is-null-or-undefined.js": function(exports, module2) {
    "use strict";
    module2.exports = function(it) {
      return it === null || it === void 0;
    };
  }
});

// node_modules/core-js/internals/require-object-coercible.js
var require_require_object_coercible = __commonJS({
  "node_modules/core-js/internals/require-object-coercible.js": function(exports, module2) {
    "use strict";
    var isNullOrUndefined = require_is_null_or_undefined();
    var $TypeError = TypeError;
    module2.exports = function(it) {
      if (isNullOrUndefined(it))
        throw $TypeError("Can't call method on " + it);
      return it;
    };
  }
});

// node_modules/core-js/internals/to-indexed-object.js
var require_to_indexed_object = __commonJS({
  "node_modules/core-js/internals/to-indexed-object.js": function(exports, module2) {
    "use strict";
    var IndexedObject = require_indexed_object();
    var requireObjectCoercible = require_require_object_coercible();
    module2.exports = function(it) {
      return IndexedObject(requireObjectCoercible(it));
    };
  }
});

// node_modules/core-js/internals/document-all.js
var require_document_all = __commonJS({
  "node_modules/core-js/internals/document-all.js": function(exports, module2) {
    "use strict";
    var documentAll = typeof document == "object" && document.all;
    var IS_HTMLDDA = typeof documentAll == "undefined" && documentAll !== void 0;
    module2.exports = {
      all: documentAll,
      IS_HTMLDDA: IS_HTMLDDA
    };
  }
});

// node_modules/core-js/internals/is-callable.js
var require_is_callable = __commonJS({
  "node_modules/core-js/internals/is-callable.js": function(exports, module2) {
    "use strict";
    var $documentAll = require_document_all();
    var documentAll = $documentAll.all;
    module2.exports = $documentAll.IS_HTMLDDA ? function(argument) {
      return typeof argument == "function" || argument === documentAll;
    } : function(argument) {
      return typeof argument == "function";
    };
  }
});

// node_modules/core-js/internals/is-object.js
var require_is_object = __commonJS({
  "node_modules/core-js/internals/is-object.js": function(exports, module2) {
    "use strict";
    var isCallable = require_is_callable();
    var $documentAll = require_document_all();
    var documentAll = $documentAll.all;
    module2.exports = $documentAll.IS_HTMLDDA ? function(it) {
      return typeof it == "object" ? it !== null : isCallable(it) || it === documentAll;
    } : function(it) {
      return typeof it == "object" ? it !== null : isCallable(it);
    };
  }
});

// node_modules/core-js/internals/get-built-in.js
var require_get_built_in = __commonJS({
  "node_modules/core-js/internals/get-built-in.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var isCallable = require_is_callable();
    var aFunction = function aFunction2(argument) {
      return isCallable(argument) ? argument : void 0;
    };
    module2.exports = function(namespace, method) {
      return arguments.length < 2 ? aFunction(global2[namespace]) : global2[namespace] && global2[namespace][method];
    };
  }
});

// node_modules/core-js/internals/object-is-prototype-of.js
var require_object_is_prototype_of = __commonJS({
  "node_modules/core-js/internals/object-is-prototype-of.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    module2.exports = uncurryThis({}.isPrototypeOf);
  }
});

// node_modules/core-js/internals/engine-user-agent.js
var require_engine_user_agent = __commonJS({
  "node_modules/core-js/internals/engine-user-agent.js": function(exports, module2) {
    "use strict";
    module2.exports = typeof navigator != "undefined" && String(navigator.userAgent) || "";
  }
});

// node_modules/core-js/internals/engine-v8-version.js
var require_engine_v8_version = __commonJS({
  "node_modules/core-js/internals/engine-v8-version.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var userAgent = require_engine_user_agent();
    var process2 = global2.process;
    var Deno = global2.Deno;
    var versions = process2 && process2.versions || Deno && Deno.version;
    var v8 = versions && versions.v8;
    var match;
    var version;
    if (v8) {
      match = v8.split(".");
      version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
    }
    if (!version && userAgent) {
      match = userAgent.match(/Edge\/(\d+)/);
      if (!match || match[1] >= 74) {
        match = userAgent.match(/Chrome\/(\d+)/);
        if (match)
          version = +match[1];
      }
    }
    module2.exports = version;
  }
});

// node_modules/core-js/internals/symbol-constructor-detection.js
var require_symbol_constructor_detection = __commonJS({
  "node_modules/core-js/internals/symbol-constructor-detection.js": function(exports, module2) {
    "use strict";
    var V8_VERSION = require_engine_v8_version();
    var fails = require_fails();
    var global2 = require_global();
    var $String = global2.String;
    module2.exports = !!Object.getOwnPropertySymbols && !fails(function() {
      var symbol = Symbol("symbol detection");
      return !$String(symbol) || !(Object(symbol) instanceof Symbol) || // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
      !Symbol.sham && V8_VERSION && V8_VERSION < 41;
    });
  }
});

// node_modules/core-js/internals/use-symbol-as-uid.js
var require_use_symbol_as_uid = __commonJS({
  "node_modules/core-js/internals/use-symbol-as-uid.js": function(exports, module2) {
    "use strict";
    var NATIVE_SYMBOL = require_symbol_constructor_detection();
    module2.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == "symbol";
  }
});

// node_modules/core-js/internals/is-symbol.js
var require_is_symbol = __commonJS({
  "node_modules/core-js/internals/is-symbol.js": function(exports, module2) {
    "use strict";
    var getBuiltIn = require_get_built_in();
    var isCallable = require_is_callable();
    var isPrototypeOf = require_object_is_prototype_of();
    var USE_SYMBOL_AS_UID = require_use_symbol_as_uid();
    var $Object = Object;
    module2.exports = USE_SYMBOL_AS_UID ? function(it) {
      return typeof it == "symbol";
    } : function(it) {
      var $Symbol = getBuiltIn("Symbol");
      return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
    };
  }
});

// node_modules/core-js/internals/try-to-string.js
var require_try_to_string = __commonJS({
  "node_modules/core-js/internals/try-to-string.js": function(exports, module2) {
    "use strict";
    var $String = String;
    module2.exports = function(argument) {
      try {
        return $String(argument);
      } catch (error) {
        return "Object";
      }
    };
  }
});

// node_modules/core-js/internals/a-callable.js
var require_a_callable = __commonJS({
  "node_modules/core-js/internals/a-callable.js": function(exports, module2) {
    "use strict";
    var isCallable = require_is_callable();
    var tryToString = require_try_to_string();
    var $TypeError = TypeError;
    module2.exports = function(argument) {
      if (isCallable(argument))
        return argument;
      throw $TypeError(tryToString(argument) + " is not a function");
    };
  }
});

// node_modules/core-js/internals/get-method.js
var require_get_method = __commonJS({
  "node_modules/core-js/internals/get-method.js": function(exports, module2) {
    "use strict";
    var aCallable = require_a_callable();
    var isNullOrUndefined = require_is_null_or_undefined();
    module2.exports = function(V, P) {
      var func = V[P];
      return isNullOrUndefined(func) ? void 0 : aCallable(func);
    };
  }
});

// node_modules/core-js/internals/ordinary-to-primitive.js
var require_ordinary_to_primitive = __commonJS({
  "node_modules/core-js/internals/ordinary-to-primitive.js": function(exports, module2) {
    "use strict";
    var call = require_function_call();
    var isCallable = require_is_callable();
    var isObject = require_is_object();
    var $TypeError = TypeError;
    module2.exports = function(input, pref) {
      var fn, val;
      if (pref === "string" && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
        return val;
      if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input)))
        return val;
      if (pref !== "string" && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
        return val;
      throw $TypeError("Can't convert object to primitive value");
    };
  }
});

// node_modules/core-js/internals/is-pure.js
var require_is_pure = __commonJS({
  "node_modules/core-js/internals/is-pure.js": function(exports, module2) {
    "use strict";
    module2.exports = false;
  }
});

// node_modules/core-js/internals/define-global-property.js
var require_define_global_property = __commonJS({
  "node_modules/core-js/internals/define-global-property.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var defineProperty = Object.defineProperty;
    module2.exports = function(key, value) {
      try {
        defineProperty(global2, key, {
          value: value,
          configurable: true,
          writable: true
        });
      } catch (error) {
        global2[key] = value;
      }
      return value;
    };
  }
});

// node_modules/core-js/internals/shared-store.js
var require_shared_store = __commonJS({
  "node_modules/core-js/internals/shared-store.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var defineGlobalProperty = require_define_global_property();
    var SHARED = "__core-js_shared__";
    var store = global2[SHARED] || defineGlobalProperty(SHARED, {});
    module2.exports = store;
  }
});

// node_modules/core-js/internals/shared.js
var require_shared = __commonJS({
  "node_modules/core-js/internals/shared.js": function(exports, module2) {
    "use strict";
    var IS_PURE = require_is_pure();
    var store = require_shared_store();
    (module2.exports = function(key, value) {
      return store[key] || (store[key] = value !== void 0 ? value : {});
    })("versions", []).push({
      version: "3.32.1",
      mode: IS_PURE ? "pure" : "global",
      copyright: "\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",
      license: "https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",
      source: "https://github.com/zloirock/core-js"
    });
  }
});

// node_modules/core-js/internals/to-object.js
var require_to_object = __commonJS({
  "node_modules/core-js/internals/to-object.js": function(exports, module2) {
    "use strict";
    var requireObjectCoercible = require_require_object_coercible();
    var $Object = Object;
    module2.exports = function(argument) {
      return $Object(requireObjectCoercible(argument));
    };
  }
});

// node_modules/core-js/internals/has-own-property.js
var require_has_own_property = __commonJS({
  "node_modules/core-js/internals/has-own-property.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var toObject = require_to_object();
    var hasOwnProperty = uncurryThis({}.hasOwnProperty);
    module2.exports = Object.hasOwn || function hasOwn(it, key) {
      return hasOwnProperty(toObject(it), key);
    };
  }
});

// node_modules/core-js/internals/uid.js
var require_uid = __commonJS({
  "node_modules/core-js/internals/uid.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var id = 0;
    var postfix = Math.random();
    var toString = uncurryThis(1 .toString);
    module2.exports = function(key) {
      return "Symbol(" + (key === void 0 ? "" : key) + ")_" + toString(++id + postfix, 36);
    };
  }
});

// node_modules/core-js/internals/well-known-symbol.js
var require_well_known_symbol = __commonJS({
  "node_modules/core-js/internals/well-known-symbol.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var shared = require_shared();
    var hasOwn = require_has_own_property();
    var uid = require_uid();
    var NATIVE_SYMBOL = require_symbol_constructor_detection();
    var USE_SYMBOL_AS_UID = require_use_symbol_as_uid();
    var Symbol2 = global2.Symbol;
    var WellKnownSymbolsStore = shared("wks");
    var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol2["for"] || Symbol2 : Symbol2 && Symbol2.withoutSetter || uid;
    module2.exports = function(name) {
      if (!hasOwn(WellKnownSymbolsStore, name)) {
        WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol2, name) ? Symbol2[name] : createWellKnownSymbol("Symbol." + name);
      }
      return WellKnownSymbolsStore[name];
    };
  }
});

// node_modules/core-js/internals/to-primitive.js
var require_to_primitive = __commonJS({
  "node_modules/core-js/internals/to-primitive.js": function(exports, module2) {
    "use strict";
    var call = require_function_call();
    var isObject = require_is_object();
    var isSymbol = require_is_symbol();
    var getMethod = require_get_method();
    var ordinaryToPrimitive = require_ordinary_to_primitive();
    var wellKnownSymbol = require_well_known_symbol();
    var $TypeError = TypeError;
    var TO_PRIMITIVE = wellKnownSymbol("toPrimitive");
    module2.exports = function(input, pref) {
      if (!isObject(input) || isSymbol(input))
        return input;
      var exoticToPrim = getMethod(input, TO_PRIMITIVE);
      var result;
      if (exoticToPrim) {
        if (pref === void 0)
          pref = "default";
        result = call(exoticToPrim, input, pref);
        if (!isObject(result) || isSymbol(result))
          return result;
        throw $TypeError("Can't convert object to primitive value");
      }
      if (pref === void 0)
        pref = "number";
      return ordinaryToPrimitive(input, pref);
    };
  }
});

// node_modules/core-js/internals/to-property-key.js
var require_to_property_key = __commonJS({
  "node_modules/core-js/internals/to-property-key.js": function(exports, module2) {
    "use strict";
    var toPrimitive = require_to_primitive();
    var isSymbol = require_is_symbol();
    module2.exports = function(argument) {
      var key = toPrimitive(argument, "string");
      return isSymbol(key) ? key : key + "";
    };
  }
});

// node_modules/core-js/internals/document-create-element.js
var require_document_create_element = __commonJS({
  "node_modules/core-js/internals/document-create-element.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var isObject = require_is_object();
    var document2 = global2.document;
    var EXISTS = isObject(document2) && isObject(document2.createElement);
    module2.exports = function(it) {
      return EXISTS ? document2.createElement(it) : {};
    };
  }
});

// node_modules/core-js/internals/ie8-dom-define.js
var require_ie8_dom_define = __commonJS({
  "node_modules/core-js/internals/ie8-dom-define.js": function(exports, module2) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var fails = require_fails();
    var createElement = require_document_create_element();
    module2.exports = !DESCRIPTORS && !fails(function() {
      return Object.defineProperty(createElement("div"), "a", {
        get: function get4() {
          return 7;
        }
      }).a !== 7;
    });
  }
});

// node_modules/core-js/internals/object-get-own-property-descriptor.js
var require_object_get_own_property_descriptor = __commonJS({
  "node_modules/core-js/internals/object-get-own-property-descriptor.js": function(exports) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var call = require_function_call();
    var propertyIsEnumerableModule = require_object_property_is_enumerable();
    var createPropertyDescriptor = require_create_property_descriptor();
    var toIndexedObject = require_to_indexed_object();
    var toPropertyKey = require_to_property_key();
    var hasOwn = require_has_own_property();
    var IE8_DOM_DEFINE = require_ie8_dom_define();
    var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
      O = toIndexedObject(O);
      P = toPropertyKey(P);
      if (IE8_DOM_DEFINE)
        try {
          return $getOwnPropertyDescriptor(O, P);
        } catch (error) {
        }
      if (hasOwn(O, P))
        return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
    };
  }
});

// node_modules/core-js/internals/v8-prototype-define-bug.js
var require_v8_prototype_define_bug = __commonJS({
  "node_modules/core-js/internals/v8-prototype-define-bug.js": function(exports, module2) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var fails = require_fails();
    module2.exports = DESCRIPTORS && fails(function() {
      return Object.defineProperty(function() {
      }, "prototype", {
        value: 42,
        writable: false
      }).prototype !== 42;
    });
  }
});

// node_modules/core-js/internals/an-object.js
var require_an_object = __commonJS({
  "node_modules/core-js/internals/an-object.js": function(exports, module2) {
    "use strict";
    var isObject = require_is_object();
    var $String = String;
    var $TypeError = TypeError;
    module2.exports = function(argument) {
      if (isObject(argument))
        return argument;
      throw $TypeError($String(argument) + " is not an object");
    };
  }
});

// node_modules/core-js/internals/object-define-property.js
var require_object_define_property = __commonJS({
  "node_modules/core-js/internals/object-define-property.js": function(exports) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var IE8_DOM_DEFINE = require_ie8_dom_define();
    var V8_PROTOTYPE_DEFINE_BUG = require_v8_prototype_define_bug();
    var anObject = require_an_object();
    var toPropertyKey = require_to_property_key();
    var $TypeError = TypeError;
    var $defineProperty = Object.defineProperty;
    var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    var ENUMERABLE = "enumerable";
    var CONFIGURABLE = "configurable";
    var WRITABLE = "writable";
    exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
      anObject(O);
      P = toPropertyKey(P);
      anObject(Attributes);
      if (typeof O === "function" && P === "prototype" && "value" in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
        var current = $getOwnPropertyDescriptor(O, P);
        if (current && current[WRITABLE]) {
          O[P] = Attributes.value;
          Attributes = {
            configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
            enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
            writable: false
          };
        }
      }
      return $defineProperty(O, P, Attributes);
    } : $defineProperty : function defineProperty(O, P, Attributes) {
      anObject(O);
      P = toPropertyKey(P);
      anObject(Attributes);
      if (IE8_DOM_DEFINE)
        try {
          return $defineProperty(O, P, Attributes);
        } catch (error) {
        }
      if ("get" in Attributes || "set" in Attributes)
        throw $TypeError("Accessors not supported");
      if ("value" in Attributes)
        O[P] = Attributes.value;
      return O;
    };
  }
});

// node_modules/core-js/internals/create-non-enumerable-property.js
var require_create_non_enumerable_property = __commonJS({
  "node_modules/core-js/internals/create-non-enumerable-property.js": function(exports, module2) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var definePropertyModule = require_object_define_property();
    var createPropertyDescriptor = require_create_property_descriptor();
    module2.exports = DESCRIPTORS ? function(object, key, value) {
      return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
    } : function(object, key, value) {
      object[key] = value;
      return object;
    };
  }
});

// node_modules/core-js/internals/function-name.js
var require_function_name = __commonJS({
  "node_modules/core-js/internals/function-name.js": function(exports, module2) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var hasOwn = require_has_own_property();
    var FunctionPrototype = Function.prototype;
    var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
    var EXISTS = hasOwn(FunctionPrototype, "name");
    var PROPER = EXISTS && function something() {
    }.name === "something";
    var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, "name").configurable);
    module2.exports = {
      EXISTS: EXISTS,
      PROPER: PROPER,
      CONFIGURABLE: CONFIGURABLE
    };
  }
});

// node_modules/core-js/internals/inspect-source.js
var require_inspect_source = __commonJS({
  "node_modules/core-js/internals/inspect-source.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var isCallable = require_is_callable();
    var store = require_shared_store();
    var functionToString = uncurryThis(Function.toString);
    if (!isCallable(store.inspectSource)) {
      store.inspectSource = function(it) {
        return functionToString(it);
      };
    }
    module2.exports = store.inspectSource;
  }
});

// node_modules/core-js/internals/weak-map-basic-detection.js
var require_weak_map_basic_detection = __commonJS({
  "node_modules/core-js/internals/weak-map-basic-detection.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var isCallable = require_is_callable();
    var WeakMap2 = global2.WeakMap;
    module2.exports = isCallable(WeakMap2) && /native code/.test(String(WeakMap2));
  }
});

// node_modules/core-js/internals/shared-key.js
var require_shared_key = __commonJS({
  "node_modules/core-js/internals/shared-key.js": function(exports, module2) {
    "use strict";
    var shared = require_shared();
    var uid = require_uid();
    var keys = shared("keys");
    module2.exports = function(key) {
      return keys[key] || (keys[key] = uid(key));
    };
  }
});

// node_modules/core-js/internals/hidden-keys.js
var require_hidden_keys = __commonJS({
  "node_modules/core-js/internals/hidden-keys.js": function(exports, module2) {
    "use strict";
    module2.exports = {};
  }
});

// node_modules/core-js/internals/internal-state.js
var require_internal_state = __commonJS({
  "node_modules/core-js/internals/internal-state.js": function(exports, module2) {
    "use strict";
    var NATIVE_WEAK_MAP = require_weak_map_basic_detection();
    var global2 = require_global();
    var isObject = require_is_object();
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var hasOwn = require_has_own_property();
    var shared = require_shared_store();
    var sharedKey = require_shared_key();
    var hiddenKeys = require_hidden_keys();
    var OBJECT_ALREADY_INITIALIZED = "Object already initialized";
    var TypeError2 = global2.TypeError;
    var WeakMap2 = global2.WeakMap;
    var set2;
    var get4;
    var has;
    var enforce = function enforce2(it) {
      return has(it) ? get4(it) : set2(it, {});
    };
    var getterFor = function getterFor2(TYPE) {
      return function(it) {
        var state;
        if (!isObject(it) || (state = get4(it)).type !== TYPE) {
          throw TypeError2("Incompatible receiver, " + TYPE + " required");
        }
        return state;
      };
    };
    if (NATIVE_WEAK_MAP || shared.state) {
      store = shared.state || (shared.state = new WeakMap2());
      store.get = store.get;
      store.has = store.has;
      store.set = store.set;
      set2 = function set3(it, metadata) {
        if (store.has(it))
          throw TypeError2(OBJECT_ALREADY_INITIALIZED);
        metadata.facade = it;
        store.set(it, metadata);
        return metadata;
      };
      get4 = function get5(it) {
        return store.get(it) || {};
      };
      has = function has2(it) {
        return store.has(it);
      };
    } else {
      STATE = sharedKey("state");
      hiddenKeys[STATE] = true;
      set2 = function set3(it, metadata) {
        if (hasOwn(it, STATE))
          throw TypeError2(OBJECT_ALREADY_INITIALIZED);
        metadata.facade = it;
        createNonEnumerableProperty(it, STATE, metadata);
        return metadata;
      };
      get4 = function get5(it) {
        return hasOwn(it, STATE) ? it[STATE] : {};
      };
      has = function has2(it) {
        return hasOwn(it, STATE);
      };
    }
    var store;
    var STATE;
    module2.exports = {
      set: set2,
      get: get4,
      has: has,
      enforce: enforce,
      getterFor: getterFor
    };
  }
});

// node_modules/core-js/internals/make-built-in.js
var require_make_built_in = __commonJS({
  "node_modules/core-js/internals/make-built-in.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var hasOwn = require_has_own_property();
    var DESCRIPTORS = require_descriptors();
    var CONFIGURABLE_FUNCTION_NAME = require_function_name().CONFIGURABLE;
    var inspectSource = require_inspect_source();
    var InternalStateModule = require_internal_state();
    var enforceInternalState = InternalStateModule.enforce;
    var getInternalState = InternalStateModule.get;
    var $String = String;
    var defineProperty = Object.defineProperty;
    var stringSlice = uncurryThis("".slice);
    var replace = uncurryThis("".replace);
    var join = uncurryThis([].join);
    var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function() {
      return defineProperty(function() {
      }, "length", {
        value: 8
      }).length !== 8;
    });
    var TEMPLATE = String(String).split("String");
    var makeBuiltIn = module2.exports = function(value, name, options) {
      if (stringSlice($String(name), 0, 7) === "Symbol(") {
        name = "[" + replace($String(name), /^Symbol\(([^)]*)\)/, "$1") + "]";
      }
      if (options && options.getter)
        name = "get " + name;
      if (options && options.setter)
        name = "set " + name;
      if (!hasOwn(value, "name") || CONFIGURABLE_FUNCTION_NAME && value.name !== name) {
        if (DESCRIPTORS)
          defineProperty(value, "name", {
            value: name,
            configurable: true
          });
        else
          value.name = name;
      }
      if (CONFIGURABLE_LENGTH && options && hasOwn(options, "arity") && value.length !== options.arity) {
        defineProperty(value, "length", {
          value: options.arity
        });
      }
      try {
        if (options && hasOwn(options, "constructor") && options.constructor) {
          if (DESCRIPTORS)
            defineProperty(value, "prototype", {
              writable: false
            });
        } else if (value.prototype)
          value.prototype = void 0;
      } catch (error) {
      }
      var state = enforceInternalState(value);
      if (!hasOwn(state, "source")) {
        state.source = join(TEMPLATE, typeof name == "string" ? name : "");
      }
      return value;
    };
    Function.prototype.toString = makeBuiltIn(function toString() {
      return isCallable(this) && getInternalState(this).source || inspectSource(this);
    }, "toString");
  }
});

// node_modules/core-js/internals/define-built-in.js
var require_define_built_in = __commonJS({
  "node_modules/core-js/internals/define-built-in.js": function(exports, module2) {
    "use strict";
    var isCallable = require_is_callable();
    var definePropertyModule = require_object_define_property();
    var makeBuiltIn = require_make_built_in();
    var defineGlobalProperty = require_define_global_property();
    module2.exports = function(O, key, value, options) {
      if (!options)
        options = {};
      var simple = options.enumerable;
      var name = options.name !== void 0 ? options.name : key;
      if (isCallable(value))
        makeBuiltIn(value, name, options);
      if (options.global) {
        if (simple)
          O[key] = value;
        else
          defineGlobalProperty(key, value);
      } else {
        try {
          if (!options.unsafe)
            delete O[key];
          else if (O[key])
            simple = true;
        } catch (error) {
        }
        if (simple)
          O[key] = value;
        else
          definePropertyModule.f(O, key, {
            value: value,
            enumerable: false,
            configurable: !options.nonConfigurable,
            writable: !options.nonWritable
          });
      }
      return O;
    };
  }
});

// node_modules/core-js/internals/math-trunc.js
var require_math_trunc = __commonJS({
  "node_modules/core-js/internals/math-trunc.js": function(exports, module2) {
    "use strict";
    var ceil = Math.ceil;
    var floor = Math.floor;
    module2.exports = Math.trunc || function trunc(x) {
      var n = +x;
      return (n > 0 ? floor : ceil)(n);
    };
  }
});

// node_modules/core-js/internals/to-integer-or-infinity.js
var require_to_integer_or_infinity = __commonJS({
  "node_modules/core-js/internals/to-integer-or-infinity.js": function(exports, module2) {
    "use strict";
    var trunc = require_math_trunc();
    module2.exports = function(argument) {
      var number = +argument;
      return number !== number || number === 0 ? 0 : trunc(number);
    };
  }
});

// node_modules/core-js/internals/to-absolute-index.js
var require_to_absolute_index = __commonJS({
  "node_modules/core-js/internals/to-absolute-index.js": function(exports, module2) {
    "use strict";
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var max = Math.max;
    var min = Math.min;
    module2.exports = function(index, length) {
      var integer = toIntegerOrInfinity(index);
      return integer < 0 ? max(integer + length, 0) : min(integer, length);
    };
  }
});

// node_modules/core-js/internals/to-length.js
var require_to_length = __commonJS({
  "node_modules/core-js/internals/to-length.js": function(exports, module2) {
    "use strict";
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var min = Math.min;
    module2.exports = function(argument) {
      return argument > 0 ? min(toIntegerOrInfinity(argument), 9007199254740991) : 0;
    };
  }
});

// node_modules/core-js/internals/length-of-array-like.js
var require_length_of_array_like = __commonJS({
  "node_modules/core-js/internals/length-of-array-like.js": function(exports, module2) {
    "use strict";
    var toLength = require_to_length();
    module2.exports = function(obj) {
      return toLength(obj.length);
    };
  }
});

// node_modules/core-js/internals/array-includes.js
var require_array_includes = __commonJS({
  "node_modules/core-js/internals/array-includes.js": function(exports, module2) {
    "use strict";
    var toIndexedObject = require_to_indexed_object();
    var toAbsoluteIndex = require_to_absolute_index();
    var lengthOfArrayLike = require_length_of_array_like();
    var createMethod = function createMethod2(IS_INCLUDES) {
      return function($this, el, fromIndex) {
        var O = toIndexedObject($this);
        var length = lengthOfArrayLike(O);
        var index = toAbsoluteIndex(fromIndex, length);
        var value;
        if (IS_INCLUDES && el !== el)
          while (length > index) {
            value = O[index++];
            if (value !== value)
              return true;
          }
        else
          for (; length > index; index++) {
            if ((IS_INCLUDES || index in O) && O[index] === el)
              return IS_INCLUDES || index || 0;
          }
        return !IS_INCLUDES && -1;
      };
    };
    module2.exports = {
      // `Array.prototype.includes` method
      // https://tc39.es/ecma262/#sec-array.prototype.includes
      includes: createMethod(true),
      // `Array.prototype.indexOf` method
      // https://tc39.es/ecma262/#sec-array.prototype.indexof
      indexOf: createMethod(false)
    };
  }
});

// node_modules/core-js/internals/object-keys-internal.js
var require_object_keys_internal = __commonJS({
  "node_modules/core-js/internals/object-keys-internal.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var hasOwn = require_has_own_property();
    var toIndexedObject = require_to_indexed_object();
    var indexOf = require_array_includes().indexOf;
    var hiddenKeys = require_hidden_keys();
    var push = uncurryThis([].push);
    module2.exports = function(object, names) {
      var O = toIndexedObject(object);
      var i = 0;
      var result = [];
      var key;
      for (key in O)
        !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
      while (names.length > i)
        if (hasOwn(O, key = names[i++])) {
          ~indexOf(result, key) || push(result, key);
        }
      return result;
    };
  }
});

// node_modules/core-js/internals/enum-bug-keys.js
var require_enum_bug_keys = __commonJS({
  "node_modules/core-js/internals/enum-bug-keys.js": function(exports, module2) {
    "use strict";
    module2.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"];
  }
});

// node_modules/core-js/internals/object-get-own-property-names.js
var require_object_get_own_property_names = __commonJS({
  "node_modules/core-js/internals/object-get-own-property-names.js": function(exports) {
    "use strict";
    var internalObjectKeys = require_object_keys_internal();
    var enumBugKeys = require_enum_bug_keys();
    var hiddenKeys = enumBugKeys.concat("length", "prototype");
    exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
      return internalObjectKeys(O, hiddenKeys);
    };
  }
});

// node_modules/core-js/internals/object-get-own-property-symbols.js
var require_object_get_own_property_symbols = __commonJS({
  "node_modules/core-js/internals/object-get-own-property-symbols.js": function(exports) {
    "use strict";
    exports.f = Object.getOwnPropertySymbols;
  }
});

// node_modules/core-js/internals/own-keys.js
var require_own_keys = __commonJS({
  "node_modules/core-js/internals/own-keys.js": function(exports, module2) {
    "use strict";
    var getBuiltIn = require_get_built_in();
    var uncurryThis = require_function_uncurry_this();
    var getOwnPropertyNamesModule = require_object_get_own_property_names();
    var getOwnPropertySymbolsModule = require_object_get_own_property_symbols();
    var anObject = require_an_object();
    var concat = uncurryThis([].concat);
    module2.exports = getBuiltIn("Reflect", "ownKeys") || function ownKeys16(it) {
      var keys = getOwnPropertyNamesModule.f(anObject(it));
      var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
      return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
    };
  }
});

// node_modules/core-js/internals/copy-constructor-properties.js
var require_copy_constructor_properties = __commonJS({
  "node_modules/core-js/internals/copy-constructor-properties.js": function(exports, module2) {
    "use strict";
    var hasOwn = require_has_own_property();
    var ownKeys16 = require_own_keys();
    var getOwnPropertyDescriptorModule = require_object_get_own_property_descriptor();
    var definePropertyModule = require_object_define_property();
    module2.exports = function(target, source, exceptions) {
      var keys = ownKeys16(source);
      var defineProperty = definePropertyModule.f;
      var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
      for (var i = 0; i < keys.length; i++) {
        var key = keys[i];
        if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
          defineProperty(target, key, getOwnPropertyDescriptor(source, key));
        }
      }
    };
  }
});

// node_modules/core-js/internals/is-forced.js
var require_is_forced = __commonJS({
  "node_modules/core-js/internals/is-forced.js": function(exports, module2) {
    "use strict";
    var fails = require_fails();
    var isCallable = require_is_callable();
    var replacement = /#|\.prototype\./;
    var isForced = function isForced2(feature, detection) {
      var value = data[normalize(feature)];
      return value === POLYFILL ? true : value === NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
    };
    var normalize = isForced.normalize = function(string) {
      return String(string).replace(replacement, ".").toLowerCase();
    };
    var data = isForced.data = {};
    var NATIVE = isForced.NATIVE = "N";
    var POLYFILL = isForced.POLYFILL = "P";
    module2.exports = isForced;
  }
});

// node_modules/core-js/internals/export.js
var require_export = __commonJS({
  "node_modules/core-js/internals/export.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var getOwnPropertyDescriptor = require_object_get_own_property_descriptor().f;
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var defineBuiltIn = require_define_built_in();
    var defineGlobalProperty = require_define_global_property();
    var copyConstructorProperties = require_copy_constructor_properties();
    var isForced = require_is_forced();
    module2.exports = function(options, source) {
      var TARGET = options.target;
      var GLOBAL = options.global;
      var STATIC = options.stat;
      var FORCED, target, key, targetProperty, sourceProperty, descriptor;
      if (GLOBAL) {
        target = global2;
      } else if (STATIC) {
        target = global2[TARGET] || defineGlobalProperty(TARGET, {});
      } else {
        target = (global2[TARGET] || {}).prototype;
      }
      if (target)
        for (key in source) {
          sourceProperty = source[key];
          if (options.dontCallGetSet) {
            descriptor = getOwnPropertyDescriptor(target, key);
            targetProperty = descriptor && descriptor.value;
          } else
            targetProperty = target[key];
          FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? "." : "#") + key, options.forced);
          if (!FORCED && targetProperty !== void 0) {
            if (typeof sourceProperty == typeof targetProperty)
              continue;
            copyConstructorProperties(sourceProperty, targetProperty);
          }
          if (options.sham || targetProperty && targetProperty.sham) {
            createNonEnumerableProperty(sourceProperty, "sham", true);
          }
          defineBuiltIn(target, key, sourceProperty, options);
        }
    };
  }
});

// node_modules/core-js/internals/is-array.js
var require_is_array = __commonJS({
  "node_modules/core-js/internals/is-array.js": function(exports, module2) {
    "use strict";
    var classof = require_classof_raw();
    module2.exports = Array.isArray || function isArray(argument) {
      return classof(argument) === "Array";
    };
  }
});

// node_modules/core-js/internals/does-not-exceed-safe-integer.js
var require_does_not_exceed_safe_integer = __commonJS({
  "node_modules/core-js/internals/does-not-exceed-safe-integer.js": function(exports, module2) {
    "use strict";
    var $TypeError = TypeError;
    var MAX_SAFE_INTEGER = 9007199254740991;
    module2.exports = function(it) {
      if (it > MAX_SAFE_INTEGER)
        throw $TypeError("Maximum allowed index exceeded");
      return it;
    };
  }
});

// node_modules/core-js/internals/function-uncurry-this-clause.js
var require_function_uncurry_this_clause = __commonJS({
  "node_modules/core-js/internals/function-uncurry-this-clause.js": function(exports, module2) {
    "use strict";
    var classofRaw = require_classof_raw();
    var uncurryThis = require_function_uncurry_this();
    module2.exports = function(fn) {
      if (classofRaw(fn) === "Function")
        return uncurryThis(fn);
    };
  }
});

// node_modules/core-js/internals/function-bind-context.js
var require_function_bind_context = __commonJS({
  "node_modules/core-js/internals/function-bind-context.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this_clause();
    var aCallable = require_a_callable();
    var NATIVE_BIND = require_function_bind_native();
    var bind = uncurryThis(uncurryThis.bind);
    module2.exports = function(fn, that) {
      aCallable(fn);
      return that === void 0 ? fn : NATIVE_BIND ? bind(fn, that) : function() {
        return fn.apply(that, arguments);
      };
    };
  }
});

// node_modules/core-js/internals/flatten-into-array.js
var require_flatten_into_array = __commonJS({
  "node_modules/core-js/internals/flatten-into-array.js": function(exports, module2) {
    "use strict";
    var isArray = require_is_array();
    var lengthOfArrayLike = require_length_of_array_like();
    var doesNotExceedSafeInteger = require_does_not_exceed_safe_integer();
    var bind = require_function_bind_context();
    var flattenIntoArray = function flattenIntoArray2(target, original, source, sourceLen, start, depth, mapper, thisArg) {
      var targetIndex = start;
      var sourceIndex = 0;
      var mapFn = mapper ? bind(mapper, thisArg) : false;
      var element, elementLen;
      while (sourceIndex < sourceLen) {
        if (sourceIndex in source) {
          element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];
          if (depth > 0 && isArray(element)) {
            elementLen = lengthOfArrayLike(element);
            targetIndex = flattenIntoArray2(target, original, element, elementLen, targetIndex, depth - 1) - 1;
          } else {
            doesNotExceedSafeInteger(targetIndex + 1);
            target[targetIndex] = element;
          }
          targetIndex++;
        }
        sourceIndex++;
      }
      return targetIndex;
    };
    module2.exports = flattenIntoArray;
  }
});

// node_modules/core-js/internals/to-string-tag-support.js
var require_to_string_tag_support = __commonJS({
  "node_modules/core-js/internals/to-string-tag-support.js": function(exports, module2) {
    "use strict";
    var wellKnownSymbol = require_well_known_symbol();
    var TO_STRING_TAG = wellKnownSymbol("toStringTag");
    var test = {};
    test[TO_STRING_TAG] = "z";
    module2.exports = String(test) === "[object z]";
  }
});

// node_modules/core-js/internals/classof.js
var require_classof = __commonJS({
  "node_modules/core-js/internals/classof.js": function(exports, module2) {
    "use strict";
    var TO_STRING_TAG_SUPPORT = require_to_string_tag_support();
    var isCallable = require_is_callable();
    var classofRaw = require_classof_raw();
    var wellKnownSymbol = require_well_known_symbol();
    var TO_STRING_TAG = wellKnownSymbol("toStringTag");
    var $Object = Object;
    var CORRECT_ARGUMENTS = classofRaw(function() {
      return arguments;
    }()) === "Arguments";
    var tryGet = function tryGet2(it, key) {
      try {
        return it[key];
      } catch (error) {
      }
    };
    module2.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function(it) {
      var O, tag, result;
      return it === void 0 ? "Undefined" : it === null ? "Null" : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == "string" ? tag : CORRECT_ARGUMENTS ? classofRaw(O) : (result = classofRaw(O)) === "Object" && isCallable(O.callee) ? "Arguments" : result;
    };
  }
});

// node_modules/core-js/internals/is-constructor.js
var require_is_constructor = __commonJS({
  "node_modules/core-js/internals/is-constructor.js": function(exports, module2) {
    "use strict";
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var classof = require_classof();
    var getBuiltIn = require_get_built_in();
    var inspectSource = require_inspect_source();
    var noop = function noop2() {
    };
    var empty = [];
    var construct = getBuiltIn("Reflect", "construct");
    var constructorRegExp = /^\s*(?:class|function)\b/;
    var exec = uncurryThis(constructorRegExp.exec);
    var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);
    var isConstructorModern = function isConstructor(argument) {
      if (!isCallable(argument))
        return false;
      try {
        construct(noop, empty, argument);
        return true;
      } catch (error) {
        return false;
      }
    };
    var isConstructorLegacy = function isConstructor(argument) {
      if (!isCallable(argument))
        return false;
      switch (classof(argument)) {
        case "AsyncFunction":
        case "GeneratorFunction":
        case "AsyncGeneratorFunction":
          return false;
      }
      try {
        return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
      } catch (error) {
        return true;
      }
    };
    isConstructorLegacy.sham = true;
    module2.exports = !construct || fails(function() {
      var called;
      return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function() {
        called = true;
      }) || called;
    }) ? isConstructorLegacy : isConstructorModern;
  }
});

// node_modules/core-js/internals/array-species-constructor.js
var require_array_species_constructor = __commonJS({
  "node_modules/core-js/internals/array-species-constructor.js": function(exports, module2) {
    "use strict";
    var isArray = require_is_array();
    var isConstructor = require_is_constructor();
    var isObject = require_is_object();
    var wellKnownSymbol = require_well_known_symbol();
    var SPECIES = wellKnownSymbol("species");
    var $Array = Array;
    module2.exports = function(originalArray) {
      var C;
      if (isArray(originalArray)) {
        C = originalArray.constructor;
        if (isConstructor(C) && (C === $Array || isArray(C.prototype)))
          C = void 0;
        else if (isObject(C)) {
          C = C[SPECIES];
          if (C === null)
            C = void 0;
        }
      }
      return C === void 0 ? $Array : C;
    };
  }
});

// node_modules/core-js/internals/array-species-create.js
var require_array_species_create = __commonJS({
  "node_modules/core-js/internals/array-species-create.js": function(exports, module2) {
    "use strict";
    var arraySpeciesConstructor = require_array_species_constructor();
    module2.exports = function(originalArray, length) {
      return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
    };
  }
});

// node_modules/core-js/modules/es.array.flat.js
var require_es_array_flat = __commonJS({
  "node_modules/core-js/modules/es.array.flat.js": function() {
    "use strict";
    var $2 = require_export();
    var flattenIntoArray = require_flatten_into_array();
    var toObject = require_to_object();
    var lengthOfArrayLike = require_length_of_array_like();
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var arraySpeciesCreate = require_array_species_create();
    $2({
      target: "Array",
      proto: true
    }, {
      flat: function flat2() {
        var depthArg = arguments.length ? arguments[0] : void 0;
        var O = toObject(this);
        var sourceLen = lengthOfArrayLike(O);
        var A = arraySpeciesCreate(O, 0);
        A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === void 0 ? 1 : toIntegerOrInfinity(depthArg));
        return A;
      }
    });
  }
});

// node_modules/core-js/internals/object-keys.js
var require_object_keys = __commonJS({
  "node_modules/core-js/internals/object-keys.js": function(exports, module2) {
    "use strict";
    var internalObjectKeys = require_object_keys_internal();
    var enumBugKeys = require_enum_bug_keys();
    module2.exports = Object.keys || function keys(O) {
      return internalObjectKeys(O, enumBugKeys);
    };
  }
});

// node_modules/core-js/internals/object-define-properties.js
var require_object_define_properties = __commonJS({
  "node_modules/core-js/internals/object-define-properties.js": function(exports) {
    "use strict";
    var DESCRIPTORS = require_descriptors();
    var V8_PROTOTYPE_DEFINE_BUG = require_v8_prototype_define_bug();
    var definePropertyModule = require_object_define_property();
    var anObject = require_an_object();
    var toIndexedObject = require_to_indexed_object();
    var objectKeys = require_object_keys();
    exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
      anObject(O);
      var props = toIndexedObject(Properties);
      var keys = objectKeys(Properties);
      var length = keys.length;
      var index = 0;
      var key;
      while (length > index)
        definePropertyModule.f(O, key = keys[index++], props[key]);
      return O;
    };
  }
});

// node_modules/core-js/internals/html.js
var require_html = __commonJS({
  "node_modules/core-js/internals/html.js": function(exports, module2) {
    "use strict";
    var getBuiltIn = require_get_built_in();
    module2.exports = getBuiltIn("document", "documentElement");
  }
});

// node_modules/core-js/internals/object-create.js
var require_object_create = __commonJS({
  "node_modules/core-js/internals/object-create.js": function(exports, module2) {
    "use strict";
    var anObject = require_an_object();
    var definePropertiesModule = require_object_define_properties();
    var enumBugKeys = require_enum_bug_keys();
    var hiddenKeys = require_hidden_keys();
    var html = require_html();
    var documentCreateElement = require_document_create_element();
    var sharedKey = require_shared_key();
    var GT = ">";
    var LT = "<";
    var PROTOTYPE = "prototype";
    var SCRIPT = "script";
    var IE_PROTO = sharedKey("IE_PROTO");
    var EmptyConstructor = function EmptyConstructor2() {
    };
    var scriptTag = function scriptTag2(content) {
      return LT + SCRIPT + GT + content + LT + "/" + SCRIPT + GT;
    };
    var NullProtoObjectViaActiveX = function NullProtoObjectViaActiveX2(activeXDocument2) {
      activeXDocument2.write(scriptTag(""));
      activeXDocument2.close();
      var temp = activeXDocument2.parentWindow.Object;
      activeXDocument2 = null;
      return temp;
    };
    var NullProtoObjectViaIFrame = function NullProtoObjectViaIFrame2() {
      var iframe = documentCreateElement("iframe");
      var JS = "java" + SCRIPT + ":";
      var iframeDocument;
      iframe.style.display = "none";
      html.appendChild(iframe);
      iframe.src = String(JS);
      iframeDocument = iframe.contentWindow.document;
      iframeDocument.open();
      iframeDocument.write(scriptTag("document.F=Object"));
      iframeDocument.close();
      return iframeDocument.F;
    };
    var activeXDocument;
    var _NullProtoObject = function NullProtoObject() {
      try {
        activeXDocument = new ActiveXObject("htmlfile");
      } catch (error) {
      }
      _NullProtoObject = typeof document != "undefined" ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
      var length = enumBugKeys.length;
      while (length--)
        delete _NullProtoObject[PROTOTYPE][enumBugKeys[length]];
      return _NullProtoObject();
    };
    hiddenKeys[IE_PROTO] = true;
    module2.exports = Object.create || function create3(O, Properties) {
      var result;
      if (O !== null) {
        EmptyConstructor[PROTOTYPE] = anObject(O);
        result = new EmptyConstructor();
        EmptyConstructor[PROTOTYPE] = null;
        result[IE_PROTO] = O;
      } else
        result = _NullProtoObject();
      return Properties === void 0 ? result : definePropertiesModule.f(result, Properties);
    };
  }
});

// node_modules/core-js/internals/add-to-unscopables.js
var require_add_to_unscopables = __commonJS({
  "node_modules/core-js/internals/add-to-unscopables.js": function(exports, module2) {
    "use strict";
    var wellKnownSymbol = require_well_known_symbol();
    var create3 = require_object_create();
    var defineProperty = require_object_define_property().f;
    var UNSCOPABLES = wellKnownSymbol("unscopables");
    var ArrayPrototype = Array.prototype;
    if (ArrayPrototype[UNSCOPABLES] === void 0) {
      defineProperty(ArrayPrototype, UNSCOPABLES, {
        configurable: true,
        value: create3(null)
      });
    }
    module2.exports = function(key) {
      ArrayPrototype[UNSCOPABLES][key] = true;
    };
  }
});

// node_modules/core-js/modules/es.array.unscopables.flat.js
var require_es_array_unscopables_flat = __commonJS({
  "node_modules/core-js/modules/es.array.unscopables.flat.js": function() {
    "use strict";
    var addToUnscopables = require_add_to_unscopables();
    addToUnscopables("flat");
  }
});

// node_modules/core-js/internals/entry-unbind.js
var require_entry_unbind = __commonJS({
  "node_modules/core-js/internals/entry-unbind.js": function(exports, module2) {
    "use strict";
    var global2 = require_global();
    var uncurryThis = require_function_uncurry_this();
    module2.exports = function(CONSTRUCTOR, METHOD) {
      return uncurryThis(global2[CONSTRUCTOR].prototype[METHOD]);
    };
  }
});

// node_modules/core-js/es/array/flat.js
var require_flat = __commonJS({
  "node_modules/core-js/es/array/flat.js": function(exports, module2) {
    "use strict";
    require_es_array_flat();
    require_es_array_unscopables_flat();
    var entryUnbind = require_entry_unbind();
    module2.exports = entryUnbind("Array", "flat");
  }
});

// node_modules/core-js/stable/array/flat.js
var require_flat2 = __commonJS({
  "node_modules/core-js/stable/array/flat.js": function(exports, module2) {
    "use strict";
    var parent = require_flat();
    module2.exports = parent;
  }
});

// node_modules/core-js/actual/array/flat.js
var require_flat3 = __commonJS({
  "node_modules/core-js/actual/array/flat.js": function(exports, module2) {
    "use strict";
    var parent = require_flat2();
    module2.exports = parent;
  }
});

// node_modules/core-js/full/array/flat.js
var require_flat4 = __commonJS({
  "node_modules/core-js/full/array/flat.js": function(exports, module2) {
    "use strict";
    var parent = require_flat3();
    module2.exports = parent;
  }
});

// node_modules/core-js/features/array/flat.js
var require_flat5 = __commonJS({
  "node_modules/core-js/features/array/flat.js": function(exports, module2) {
    "use strict";
    module2.exports = require_flat4();
  }
});

// node_modules/core-js/internals/iterators.js
var require_iterators = __commonJS({
  "node_modules/core-js/internals/iterators.js": function(exports, module2) {
    "use strict";
    module2.exports = {};
  }
});

// node_modules/core-js/internals/is-array-iterator-method.js
var require_is_array_iterator_method = __commonJS({
  "node_modules/core-js/internals/is-array-iterator-method.js": function(exports, module2) {
    "use strict";
    var wellKnownSymbol = require_well_known_symbol();
    var Iterators = require_iterators();
    var ITERATOR = wellKnownSymbol("iterator");
    var ArrayPrototype = Array.prototype;
    module2.exports = function(it) {
      return it !== void 0 && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
    };
  }
});

// node_modules/core-js/internals/get-iterator-method.js
var require_get_iterator_method = __commonJS({
  "node_modules/core-js/internals/get-iterator-method.js": function(exports, module2) {
    "use strict";
    var classof = require_classof();
    var getMethod = require_get_method();
    var isNullOrUndefined = require_is_null_or_undefined();
    var Iterators = require_iterators();
    var wellKnownSymbol = require_well_known_symbol();
    var ITERATOR = wellKnownSymbol("iterator");
    module2.exports = function(it) {
      if (!isNullOrUndefined(it))
        return getMethod(it, ITERATOR) || getMethod(it, "@@iterator") || Iterators[classof(it)];
    };
  }
});

// node_modules/core-js/internals/get-iterator.js
var require_get_iterator = __commonJS({
  "node_modules/core-js/internals/get-iterator.js": function(exports, module2) {
    "use strict";
    var call = require_function_call();
    var aCallable = require_a_callable();
    var anObject = require_an_object();
    var tryToString = require_try_to_string();
    var getIteratorMethod = require_get_iterator_method();
    var $TypeError = TypeError;
    module2.exports = function(argument, usingIterator) {
      var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
      if (aCallable(iteratorMethod))
        return anObject(call(iteratorMethod, argument));
      throw $TypeError(tryToString(argument) + " is not iterable");
    };
  }
});

// node_modules/core-js/internals/iterator-close.js
var require_iterator_close = __commonJS({
  "node_modules/core-js/internals/iterator-close.js": function(exports, module2) {
    "use strict";
    var call = require_function_call();
    var anObject = require_an_object();
    var getMethod = require_get_method();
    module2.exports = function(iterator, kind, value) {
      var innerResult, innerError;
      anObject(iterator);
      try {
        innerResult = getMethod(iterator, "return");
        if (!innerResult) {
          if (kind === "throw")
            throw value;
          return value;
        }
        innerResult = call(innerResult, iterator);
      } catch (error) {
        innerError = true;
        innerResult = error;
      }
      if (kind === "throw")
        throw value;
      if (innerError)
        throw innerResult;
      anObject(innerResult);
      return value;
    };
  }
});

// node_modules/core-js/internals/iterate.js
var require_iterate = __commonJS({
  "node_modules/core-js/internals/iterate.js": function(exports, module2) {
    "use strict";
    var bind = require_function_bind_context();
    var call = require_function_call();
    var anObject = require_an_object();
    var tryToString = require_try_to_string();
    var isArrayIteratorMethod = require_is_array_iterator_method();
    var lengthOfArrayLike = require_length_of_array_like();
    var isPrototypeOf = require_object_is_prototype_of();
    var getIterator = require_get_iterator();
    var getIteratorMethod = require_get_iterator_method();
    var iteratorClose = require_iterator_close();
    var $TypeError = TypeError;
    var Result = function Result2(stopped, result) {
      this.stopped = stopped;
      this.result = result;
    };
    var ResultPrototype = Result.prototype;
    module2.exports = function(iterable, unboundFunction, options) {
      var that = options && options.that;
      var AS_ENTRIES = !!(options && options.AS_ENTRIES);
      var IS_RECORD = !!(options && options.IS_RECORD);
      var IS_ITERATOR = !!(options && options.IS_ITERATOR);
      var INTERRUPTED = !!(options && options.INTERRUPTED);
      var fn = bind(unboundFunction, that);
      var iterator, iterFn, index, length, result, next2, step;
      var stop = function stop2(condition) {
        if (iterator)
          iteratorClose(iterator, "normal", condition);
        return new Result(true, condition);
      };
      var callFn = function callFn2(value) {
        if (AS_ENTRIES) {
          anObject(value);
          return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
        }
        return INTERRUPTED ? fn(value, stop) : fn(value);
      };
      if (IS_RECORD) {
        iterator = iterable.iterator;
      } else if (IS_ITERATOR) {
        iterator = iterable;
      } else {
        iterFn = getIteratorMethod(iterable);
        if (!iterFn)
          throw $TypeError(tryToString(iterable) + " is not iterable");
        if (isArrayIteratorMethod(iterFn)) {
          for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
            result = callFn(iterable[index]);
            if (result && isPrototypeOf(ResultPrototype, result))
              return result;
          }
          return new Result(false);
        }
        iterator = getIterator(iterable, iterFn);
      }
      next2 = IS_RECORD ? iterable.next : iterator.next;
      while (!(step = call(next2, iterator)).done) {
        try {
          result = callFn(step.value);
        } catch (error) {
          iteratorClose(iterator, "throw", error);
        }
        if (typeof result == "object" && result && isPrototypeOf(ResultPrototype, result))
          return result;
      }
      return new Result(false);
    };
  }
});

// node_modules/core-js/internals/create-property.js
var require_create_property = __commonJS({
  "node_modules/core-js/internals/create-property.js": function(exports, module2) {
    "use strict";
    var toPropertyKey = require_to_property_key();
    var definePropertyModule = require_object_define_property();
    var createPropertyDescriptor = require_create_property_descriptor();
    module2.exports = function(object, key, value) {
      var propertyKey = toPropertyKey(key);
      if (propertyKey in object)
        definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
      else
        object[propertyKey] = value;
    };
  }
});

// src/index.ts
var src_exports = {};
__export(src_exports, {
  canContinue: function() {
    return canContinue;
  },
  main: function() {
    return main;
  }
});
module.exports = __toCommonJS(src_exports);

// node_modules/grimoire-kolmafia/dist/args.js
var import_kolmafia = require("kolmafia");
function _createForOfIteratorHelper(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), true).forEach(function(key) {
      _defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var Args = /* @__PURE__ */ function() {
  function Args2() {
    _classCallCheck(this, Args2);
  }
  _createClass(Args2, null, [{
    key: "custom",
    value: function custom(spec, _parser, valueHelpName) {
      var _a, _b;
      var raw_options = (_a = spec.options) === null || _a === void 0 ? void 0 : _a.map(function(option) {
        return option[0];
      });
      if ("default" in spec && raw_options) {
        if (!raw_options.includes(spec.default)) {
          throw "Invalid default value ".concat(spec.default);
        }
      }
      return _objectSpread(_objectSpread({}, spec), {}, {
        valueHelpName: valueHelpName,
        parser: function(value) {
          var parsed_value = _parser(value);
          if (parsed_value === void 0 || parsed_value instanceof ParseError)
            return parsed_value;
          if (raw_options) {
            if (!raw_options.includes(parsed_value)) {
              return new ParseError("received ".concat(value, " which was not in the allowed options"));
            }
          }
          return parsed_value;
        },
        options: (_b = spec.options) === null || _b === void 0 ? void 0 : _b.map(function(a) {
          return ["".concat(a[0]), a[1]];
        })
      });
    }
  }, {
    key: "arrayFromArg",
    value: function arrayFromArg(spec, argFromSpec) {
      var _a, _b, _c;
      var spec_without_default = _objectSpread({}, spec);
      if ("default" in spec_without_default)
        delete spec_without_default["default"];
      var arg = argFromSpec.call(this, spec_without_default);
      var raw_options = (_a = spec.options) === null || _a === void 0 ? void 0 : _a.map(function(option) {
        return option[0];
      });
      if ("default" in spec && raw_options) {
        var _iterator = _createForOfIteratorHelper(spec.default), _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
            var default_entry = _step.value;
            if (!raw_options.includes(default_entry))
              throw "Invalid default value ".concat(spec.default);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      var separator = (_b = spec.separator) !== null && _b !== void 0 ? _b : ",";
      var arrayParser = function(value) {
        var values = value.split(separator);
        if (!spec.noTrim)
          values = values.map(function(v) {
            return v.trim();
          });
        var result = values.map(function(v) {
          return arg.parser(v);
        });
        var error = result.find(function(v) {
          return v instanceof ParseError;
        });
        if (error)
          return error;
        var failure_index = result.indexOf(void 0);
        if (failure_index !== -1)
          return new ParseError("components expected ".concat(arg.valueHelpName, " but could not parse ").concat(values[failure_index]));
        return result;
      };
      return _objectSpread(_objectSpread({}, spec), {}, {
        valueHelpName: "".concat(arg.valueHelpName).concat(separator, " ").concat(arg.valueHelpName).concat(separator, " ..."),
        parser: arrayParser,
        options: (_c = spec.options) === null || _c === void 0 ? void 0 : _c.map(function(a) {
          return ["".concat(a[0]), a[1]];
        })
      });
    }
  }, {
    key: "string",
    value: function string(spec) {
      return this.custom(spec, function(value) {
        return value;
      }, "TEXT");
    }
  }, {
    key: "strings",
    value: function strings(spec) {
      return this.arrayFromArg(spec, this.string);
    }
  }, {
    key: "number",
    value: function number(spec) {
      return this.custom(spec, function(value) {
        return isNaN(Number(value)) ? void 0 : Number(value);
      }, "NUMBER");
    }
  }, {
    key: "numbers",
    value: function numbers(spec) {
      return this.arrayFromArg(spec, this.number);
    }
  }, {
    key: "boolean",
    value: function boolean(spec) {
      return this.custom(spec, function(value) {
        if (value.toLowerCase() === "true")
          return true;
        if (value.toLowerCase() === "false")
          return false;
        return void 0;
      }, "BOOLEAN");
    }
  }, {
    key: "booleans",
    value: function booleans(spec) {
      return this.arrayFromArg(spec, this.boolean);
    }
  }, {
    key: "flag",
    value: function flag(spec) {
      return this.custom(spec, function(value) {
        if (value.toLowerCase() === "true")
          return true;
        if (value.toLowerCase() === "false")
          return false;
        return void 0;
      }, "FLAG");
    }
  }, {
    key: "class",
    value: function _class(spec) {
      return this.custom(spec, function(value) {
        var match = import_kolmafia.Class.get(value);
        if (match.toString().toUpperCase() === value.toString().toUpperCase())
          return match;
        if (!isNaN(Number(value)))
          return match;
        return void 0;
      }, "CLASS");
    }
  }, {
    key: "classes",
    value: function classes(spec) {
      return this.arrayFromArg(spec, this.class);
    }
  }, {
    key: "effect",
    value: function effect2(spec) {
      return this.custom(spec, import_kolmafia.Effect.get, "EFFECT");
    }
  }, {
    key: "effects",
    value: function effects(spec) {
      return this.arrayFromArg(spec, this.effect);
    }
  }, {
    key: "familiar",
    value: function familiar4(spec) {
      return this.custom(spec, import_kolmafia.Familiar.get, "FAMILIAR");
    }
  }, {
    key: "familiars",
    value: function familiars(spec) {
      return this.arrayFromArg(spec, this.familiar);
    }
  }, {
    key: "item",
    value: function item9(spec) {
      return this.custom(spec, import_kolmafia.Item.get, "ITEM");
    }
  }, {
    key: "items",
    value: function items(spec) {
      return this.arrayFromArg(spec, this.item);
    }
  }, {
    key: "location",
    value: function location(spec) {
      return this.custom(spec, import_kolmafia.Location.get, "LOCATION");
    }
  }, {
    key: "locations",
    value: function locations(spec) {
      return this.arrayFromArg(spec, this.location);
    }
  }, {
    key: "monster",
    value: function monster(spec) {
      return this.custom(spec, import_kolmafia.Monster.get, "MONSTER");
    }
  }, {
    key: "monsters",
    value: function monsters(spec) {
      return this.arrayFromArg(spec, this.monster);
    }
  }, {
    key: "path",
    value: function path(spec) {
      return this.custom(spec, import_kolmafia.Path.get, "PATH");
    }
  }, {
    key: "paths",
    value: function paths(spec) {
      return this.arrayFromArg(spec, this.path);
    }
  }, {
    key: "skill",
    value: function skill(spec) {
      return this.custom(spec, import_kolmafia.Skill.get, "SKILL");
    }
  }, {
    key: "skills",
    value: function skills2(spec) {
      return this.arrayFromArg(spec, this.skill);
    }
    /**
     * Create a group of arguments that will be printed separately in the help.
     *
     * Note that keys in the group must still be globally distinct.
     *
     * @param groupName The display name for the group in help.
     * @param args A JS object specifying the script arguments. Its values should
     *    be {@link Arg} objects (created by Args.string, Args.number, or others)
     *    or groups of arguments (created by Args.group).
     */
  }, {
    key: "group",
    value: function group(groupName, args) {
      return {
        name: groupName,
        args: args
      };
    }
    /**
     * Create a set of input arguments for a script.
     * @param scriptName Prefix for property names; often the name of the script.
     * @param scriptHelp Brief description of this script, for the help message.
     * @param args A JS object specifying the script arguments. Its values should
     *    be {@link Arg} objects (created by Args.string, Args.number, or others)
     *    or groups of arguments (created by Args.group).
     * @param options Config options for the args and arg parser.
     * @returns An object which can hold parsed argument values. The keys of this
     *    object are identical to the keys in 'args'.
     */
  }, {
    key: "create",
    value: function create3(scriptName, scriptHelp, args, options) {
      var _objectSpread22;
      _traverse(args, function(keySpec, key) {
        if (key === "help" || keySpec.key === "help")
          throw "help is a reserved argument name";
      });
      var argsWithHelp = _objectSpread(_objectSpread({}, args), {}, {
        help: this.flag({
          help: "Show this message and exit.",
          setting: ""
        })
      });
      var res = _objectSpread(_objectSpread({}, _loadDefaultValues(argsWithHelp)), {}, (_objectSpread22 = {}, _defineProperty(_objectSpread22, specSymbol, argsWithHelp), _defineProperty(_objectSpread22, scriptSymbol, scriptName), _defineProperty(_objectSpread22, scriptHelpSymbol, scriptHelp), _defineProperty(_objectSpread22, optionsSymbol, options !== null && options !== void 0 ? options : {}), _objectSpread22));
      if (options === null || options === void 0 ? void 0 : options.positionalArgs) {
        var keys = [];
        var metadata = Args2.getMetadata(res);
        metadata.traverse(function(keySpec, key) {
          var _a;
          keys.push((_a = keySpec.key) !== null && _a !== void 0 ? _a : key);
        });
        var _iterator2 = _createForOfIteratorHelper(options.positionalArgs), _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
            var arg = _step2.value;
            if (!keys.includes(arg))
              throw "Unknown key for positional arg: ".concat(arg);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
      return res;
    }
    /**
     * Parse the command line input into the provided script arguments.
     * @param args An object to hold the parsed argument values, from Args.create(*).
     * @param command The command line input.
     * @param includeSettings If true, parse values from settings as well.
     */
  }, {
    key: "fill",
    value: function fill(args, command) {
      var includeSettings = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
      var _a;
      var metadata = Args2.getMetadata(args);
      var keys = /* @__PURE__ */ new Set();
      var flags = /* @__PURE__ */ new Set();
      metadata.traverse(function(keySpec, key) {
        var _a2;
        var name = (_a2 = keySpec.key) !== null && _a2 !== void 0 ? _a2 : key;
        if (flags.has(name) || keys.has(name))
          throw "Duplicate arg key ".concat(name, " is not allowed");
        if (keySpec.valueHelpName === "FLAG")
          flags.add(name);
        else
          keys.add(name);
      });
      if (includeSettings) {
        metadata.traverseAndMaybeSet(args, function(keySpec, key) {
          var _a2, _b;
          var setting = (_a2 = keySpec.setting) !== null && _a2 !== void 0 ? _a2 : "".concat(metadata.scriptName, "_").concat((_b = keySpec.key) !== null && _b !== void 0 ? _b : key);
          if (setting === "")
            return void 0;
          var value_str = (0, import_kolmafia.getProperty)(setting);
          if (value_str === "")
            return void 0;
          return parseAndValidate(keySpec, "Setting ".concat(setting), value_str);
        });
      }
      if (command === void 0 || command === "")
        return;
      var parsed = new CommandParser(command, keys, flags, (_a = metadata.options.positionalArgs) !== null && _a !== void 0 ? _a : []).parse();
      metadata.traverseAndMaybeSet(args, function(keySpec, key) {
        var _a2;
        var argKey = (_a2 = keySpec.key) !== null && _a2 !== void 0 ? _a2 : key;
        var value_str = parsed.get(argKey);
        if (value_str === void 0)
          return void 0;
        return parseAndValidate(keySpec, "Argument ".concat(argKey), value_str);
      });
    }
    /**
     * Parse command line input into a new set of script arguments.
     * @param scriptName Prefix to use in property names; typically the name of the script.
     * @param scriptHelp Brief description of this script, for the help message.
     * @param spec An object specifying the script arguments.
     * @param command The command line input.
     * @param options Config options for the args and arg parser.
     */
  }, {
    key: "parse",
    value: function parse(scriptName, scriptHelp, spec, command, options) {
      var args = this.create(scriptName, scriptHelp, spec, options);
      this.fill(args, command);
      return args;
    }
    /**
     * Print a description of the script arguments to the CLI.
     *
     * First, all top-level argument descriptions are printed in the order they
     * were defined. Afterwards, descriptions for groups of arguments are printed
     * in the order they were defined.
     *
     * @param args An object of parsed arguments, from Args.create(*).
     * @param maxOptionsToDisplay If given, do not list more than this many options for each arg.
     */
  }, {
    key: "showHelp",
    value: function showHelp(args, maxOptionsToDisplay) {
      var _a;
      var metadata = Args2.getMetadata(args);
      (0, import_kolmafia.printHtml)("".concat(metadata.scriptHelp));
      (0, import_kolmafia.printHtml)("");
      (0, import_kolmafia.printHtml)("<b>".concat((_a = metadata.options.defaultGroupName) !== null && _a !== void 0 ? _a : "Options", ":</b>"));
      metadata.traverse(function(arg, key) {
        var _a2, _b, _c, _d, _e;
        if (arg.hidden)
          return;
        var nameText = "<font color='".concat((0, import_kolmafia.isDarkMode)() ? "yellow" : "blue", "'>").concat((_a2 = arg.key) !== null && _a2 !== void 0 ? _a2 : key, "</font>");
        var valueText = arg.valueHelpName === "FLAG" ? "" : "<font color='purple'>".concat(arg.valueHelpName, "</font>");
        var helpText = (_b = arg.help) !== null && _b !== void 0 ? _b : "";
        var defaultText = "default" in arg ? "<font color='#888888'>[default: ".concat(arg.default, "]</font>") : "";
        var settingText = arg.setting === "" ? "" : "<font color='#888888'>[setting: ".concat((_c = arg.setting) !== null && _c !== void 0 ? _c : "".concat(metadata.scriptName, "_").concat((_d = arg.key) !== null && _d !== void 0 ? _d : key), "]</font>");
        (0, import_kolmafia.printHtml)("&nbsp;&nbsp;".concat([nameText, valueText, "-", helpText, defaultText, settingText].join(" ")));
        var valueOptions = (_e = arg.options) !== null && _e !== void 0 ? _e : [];
        if (valueOptions.length < (maxOptionsToDisplay !== null && maxOptionsToDisplay !== void 0 ? maxOptionsToDisplay : Number.MAX_VALUE)) {
          var _iterator3 = _createForOfIteratorHelper(valueOptions), _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
              var option = _step3.value;
              if (option.length === 1 || option[1] === void 0) {
                (0, import_kolmafia.printHtml)("&nbsp;&nbsp;&nbsp;&nbsp;<font color='blue'>".concat(nameText, "</font> ").concat(option[0]));
              } else {
                (0, import_kolmafia.printHtml)("&nbsp;&nbsp;&nbsp;&nbsp;<font color='blue'>".concat(nameText, "</font> ").concat(option[0], " - ").concat(option[1]));
              }
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      }, function(group) {
        (0, import_kolmafia.printHtml)("");
        (0, import_kolmafia.printHtml)("<b>".concat(group.name, ":</b>"));
      });
    }
    /**
     * Load the metadata information for a set of arguments. Only for advanced usage.
     *
     * @param args A JS object specifying the script arguments. Its values should
     *    be {@link Arg} objects (created by Args.string, Args.number, or others)
     *    or groups of arguments (created by Args.group).
     * @returns A class containing metadata information.
     */
  }, {
    key: "getMetadata",
    value: function getMetadata(args) {
      return new WrappedArgMetadata(args);
    }
  }]);
  return Args2;
}();
var ParseError = /* @__PURE__ */ _createClass(function ParseError2(message) {
  _classCallCheck(this, ParseError2);
  this.message = message;
});
var specSymbol = Symbol("spec");
var scriptSymbol = Symbol("script");
var scriptHelpSymbol = Symbol("scriptHelp");
var optionsSymbol = Symbol("options");
function parseAndValidate(arg, source, value) {
  var parsed_value;
  try {
    parsed_value = arg.parser(value);
  } catch (_a) {
    parsed_value = void 0;
  }
  if (parsed_value === void 0)
    throw "".concat(source, " expected ").concat(arg.valueHelpName, " but could not parse ").concat(value);
  if (parsed_value instanceof ParseError)
    throw "".concat(source, " ").concat(parsed_value.message);
  return parsed_value;
}
var WrappedArgMetadata = /* @__PURE__ */ function() {
  function WrappedArgMetadata2(args) {
    _classCallCheck(this, WrappedArgMetadata2);
    this.spec = args[specSymbol];
    this.scriptName = args[scriptSymbol];
    this.scriptHelp = args[scriptHelpSymbol];
    this.options = args[optionsSymbol];
  }
  _createClass(WrappedArgMetadata2, [{
    key: "loadDefaultValues",
    value: function loadDefaultValues() {
      return _loadDefaultValues(this.spec);
    }
    /**
     * Traverse the spec and possibly generate a value for each argument.
     *
     * @param result The object to hold the resulting argument values, typically
     *    the result of loadDefaultValues().
     * @param setTo A function to generate an argument value from each arg spec.
     *    If this function returns undefined, then the argument value is unchanged.
     */
  }, {
    key: "traverseAndMaybeSet",
    value: function traverseAndMaybeSet(result, setTo) {
      return _traverseAndMaybeSet(this.spec, result, setTo);
    }
    /**
     * Traverse the spec and call a method for each argument.
     *
     * @param process A function to call at each arg spec.
     */
  }, {
    key: "traverse",
    value: function traverse(process2, onGroup) {
      return _traverse(this.spec, process2, onGroup);
    }
  }]);
  return WrappedArgMetadata2;
}();
function _loadDefaultValues(spec) {
  var result = {};
  for (var k in spec) {
    var argSpec = spec[k];
    if ("args" in argSpec) {
      result[k] = _loadDefaultValues(argSpec.args);
    } else {
      if ("default" in argSpec)
        result[k] = argSpec.default;
      else
        result[k] = void 0;
    }
  }
  return result;
}
function _traverseAndMaybeSet(spec, result, setTo) {
  var groups = [];
  for (var k in spec) {
    var argSpec = spec[k];
    if ("args" in argSpec) {
      groups.push([argSpec, k]);
    } else {
      var value = setTo(argSpec, k);
      if (value === void 0)
        continue;
      result[k] = value;
    }
  }
  for (var _i = 0, _groups = groups; _i < _groups.length; _i++) {
    var group_and_key = _groups[_i];
    _traverseAndMaybeSet(group_and_key[0].args, result[group_and_key[1]], setTo);
  }
}
function _traverse(spec, process2, onGroup) {
  var groups = [];
  for (var k in spec) {
    var argSpec = spec[k];
    if ("args" in argSpec) {
      groups.push([argSpec, k]);
    } else {
      process2(argSpec, k);
    }
  }
  for (var _i2 = 0, _groups2 = groups; _i2 < _groups2.length; _i2++) {
    var group_and_key = _groups2[_i2];
    onGroup === null || onGroup === void 0 ? void 0 : onGroup(group_and_key[0], group_and_key[1]);
    _traverse(group_and_key[0].args, process2, onGroup);
  }
}
var CommandParser = /* @__PURE__ */ function() {
  function CommandParser2(command, keys, flags, positionalArgs) {
    _classCallCheck(this, CommandParser2);
    this.command = command;
    this.index = 0;
    this.keys = keys;
    this.flags = flags;
    this.positionalArgs = positionalArgs;
    this.positionalArgsParsed = 0;
  }
  _createClass(CommandParser2, [{
    key: "parse",
    value: function parse() {
      var _a, _b, _c, _d;
      this.index = 0;
      var result = /* @__PURE__ */ new Map();
      while (!this.finished()) {
        var parsing_negative_flag = false;
        if (this.peek() === "!") {
          parsing_negative_flag = true;
          this.consume(["!"]);
        }
        var startIndex = this.index;
        var key = this.parseKey();
        if (result.has(key)) {
          throw "Duplicate key ".concat(key, " (first set to ").concat((_a = result.get(key)) !== null && _a !== void 0 ? _a : "", ")");
        }
        if (this.flags.has(key)) {
          result.set(key, parsing_negative_flag ? "false" : "true");
          if (this.peek() === "=")
            throw "Flag ".concat(key, " cannot be assigned a value");
          if (!this.finished())
            this.consume([" "]);
          this.prevUnquotedKey = void 0;
        } else if (this.keys.has(key)) {
          this.consume(["=", " "]);
          var value = this.parseValue();
          if (["'", '"'].includes((_b = this.prev()) !== null && _b !== void 0 ? _b : ""))
            this.prevUnquotedKey = void 0;
          else
            this.prevUnquotedKey = key;
          if (!this.finished())
            this.consume([" "]);
          result.set(key, value);
        } else if (this.positionalArgsParsed < this.positionalArgs.length && this.peek() !== "=") {
          var positionalKey = this.positionalArgs[this.positionalArgsParsed];
          this.positionalArgsParsed++;
          this.index = startIndex;
          var _value = this.parseValue();
          if (["'", '"'].includes((_c = this.prev()) !== null && _c !== void 0 ? _c : ""))
            this.prevUnquotedKey = void 0;
          else
            this.prevUnquotedKey = key;
          if (!this.finished())
            this.consume([" "]);
          if (result.has(positionalKey))
            throw "Cannot assign ".concat(_value, " to ").concat(positionalKey, " (positionally) since ").concat(positionalKey, " was already set to ").concat((_d = result.get(positionalKey)) !== null && _d !== void 0 ? _d : "");
          result.set(positionalKey, _value);
        } else {
          if (this.prevUnquotedKey && this.peek() !== "=")
            throw "Unknown argument: ".concat(key, " (if this should have been parsed as part of ").concat(this.prevUnquotedKey, ", you should surround the entire value in quotes)");
          else
            throw "Unknown argument: ".concat(key);
        }
      }
      return result;
    }
    /**
     * @returns True if the entire command has been parsed.
     */
  }, {
    key: "finished",
    value: function finished() {
      return this.index >= this.command.length;
    }
    /**
     * @returns The next character to parse, if it exists.
     */
  }, {
    key: "peek",
    value: function peek() {
      if (this.index >= this.command.length)
        return void 0;
      return this.command.charAt(this.index);
    }
    /**
     * @returns The character just parsed, if it exists.
     */
  }, {
    key: "prev",
    value: function prev() {
      if (this.index <= 0)
        return void 0;
      if (this.index >= this.command.length + 1)
        return void 0;
      return this.command.charAt(this.index - 1);
    }
    /**
     * Advance the internal marker over the next expected character.
     * Throws an error on unexpected characters.
     *
     * @param allowed Characters that are expected.
     */
  }, {
    key: "consume",
    value: function consume(allowed) {
      var _a;
      if (this.finished())
        throw "Expected ".concat(allowed);
      if (allowed.includes((_a = this.peek()) !== null && _a !== void 0 ? _a : "")) {
        this.index += 1;
      }
    }
    /**
     * Find the next occurance of one of the provided characters, or the end of
     * the string if the characters never appear again.
     *
     * @param searchValue The characters to locate.
     */
  }, {
    key: "findNext",
    value: function findNext(searchValue) {
      var result = this.command.length;
      var _iterator4 = _createForOfIteratorHelper(searchValue), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var value = _step4.value;
          var index = this.command.indexOf(value, this.index);
          if (index !== -1 && index < result)
            result = index;
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      return result;
    }
    /**
     * Starting from the internal marker, parse a single key.
     * This also advances the internal marker.
     *
     * @returns The next key.
     */
  }, {
    key: "parseKey",
    value: function parseKey() {
      var keyEnd = this.findNext(["=", " "]);
      var key = this.command.substring(this.index, keyEnd);
      this.index = keyEnd;
      return key;
    }
    /**
     * Starting from the internal marker, parse a single value.
     * This also advances the internal marker.
     *
     * Values are a single word or enclosed in matching quotes, i.e. one of:
     *    "[^"]*"
     *    '[^']*"
     *    [^'"][^ ]*
     *
     * @returns The next value.
     */
  }, {
    key: "parseValue",
    value: function parseValue() {
      var _a, _b;
      var valueEnder = " ";
      var quotes = ["'", '"'];
      if (quotes.includes((_a = this.peek()) !== null && _a !== void 0 ? _a : "")) {
        valueEnder = (_b = this.peek()) !== null && _b !== void 0 ? _b : "";
        this.consume([valueEnder]);
      }
      var valueEnd = this.findNext([valueEnder]);
      var value = this.command.substring(this.index, valueEnd);
      if (valueEnder !== " " && valueEnd === this.command.length) {
        throw "No closing ".concat(valueEnder, " found for ").concat(valueEnder).concat(value);
      }
      this.index = valueEnd;
      if (valueEnder !== " ")
        this.consume([valueEnder]);
      return value;
    }
  }]);
  return CommandParser2;
}();

// node_modules/grimoire-kolmafia/dist/combat.js
var import_kolmafia45 = require("kolmafia");

// node_modules/libram/dist/actions/ActionSource.js
var import_kolmafia8 = require("kolmafia");

// node_modules/libram/dist/combat.js
var import_kolmafia6 = require("kolmafia");

// node_modules/libram/dist/lib.js
var import_kolmafia5 = require("kolmafia");

// node_modules/libram/dist/logger.js
var import_kolmafia2 = require("kolmafia");
var _defaultHandlers;
function _classCallCheck2(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties2(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey2(descriptor.key), descriptor);
  }
}
function _createClass2(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties2(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties2(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty2(obj, key, value) {
  key = _toPropertyKey2(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey2(arg) {
  var key = _toPrimitive2(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive2(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var LogLevels;
(function(LogLevels2) {
  LogLevels2[LogLevels2["NONE"] = 0] = "NONE";
  LogLevels2[LogLevels2["ERROR"] = 1] = "ERROR";
  LogLevels2[LogLevels2["WARNING"] = 2] = "WARNING";
  LogLevels2[LogLevels2["INFO"] = 3] = "INFO";
  LogLevels2[LogLevels2["DEBUG"] = 4] = "DEBUG";
})(LogLevels || (LogLevels = {}));
var defaultHandlers = (_defaultHandlers = {}, _defineProperty2(_defaultHandlers, LogLevels.INFO, function(message) {
  (0, import_kolmafia2.printHtml)("<b>[Libram Info]</b> ".concat(message));
  (0, import_kolmafia2.logprint)("[Libram] ".concat(message));
  return;
}), _defineProperty2(_defaultHandlers, LogLevels.WARNING, function(message) {
  (0, import_kolmafia2.printHtml)('<span style="background: orange; color: white;"><b>[Libram Warning]</b> '.concat(message, "</span>"));
  (0, import_kolmafia2.logprint)("[Libram] ".concat(message));
  return;
}), _defineProperty2(_defaultHandlers, LogLevels.ERROR, function(error) {
  (0, import_kolmafia2.printHtml)('<span style="background: red; color: white;"><b>[Libram Error]</b> '.concat(error.toString(), "</span>"));
  (0, import_kolmafia2.logprint)("[Libram] ".concat(error));
  return;
}), _defineProperty2(_defaultHandlers, LogLevels.DEBUG, function(message) {
  (0, import_kolmafia2.printHtml)('<span style="background: red; color: white;"><b>[Libram Debug]</b> '.concat(message, "</span>"));
  (0, import_kolmafia2.logprint)("[Libram] ".concat(message));
  return;
}), _defaultHandlers);
var Logger = /* @__PURE__ */ function() {
  function Logger2() {
    _classCallCheck2(this, Logger2);
    _defineProperty2(this, "handlers", defaultHandlers);
  }
  _createClass2(Logger2, [{
    key: "level",
    get: function get4() {
      return Logger2.currentLevel;
    }
  }, {
    key: "setLevel",
    value: function setLevel(level) {
      Logger2.currentLevel = level;
    }
  }, {
    key: "setHandler",
    value: function setHandler(level, callback) {
      this.handlers[level] = callback;
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
  }, {
    key: "log",
    value: function log2(level, message) {
      if (this.level >= level)
        this.handlers[level](message);
    }
  }, {
    key: "info",
    value: function info(message) {
      this.log(LogLevels.INFO, message);
    }
  }, {
    key: "warning",
    value: function warning(message) {
      this.log(LogLevels.WARNING, message);
    }
  }, {
    key: "error",
    value: function error(message) {
      this.log(LogLevels.ERROR, message);
    }
  }, {
    key: "debug",
    value: function debug(message) {
      this.log(LogLevels.DEBUG, message);
    }
  }]);
  return Logger2;
}();
_defineProperty2(Logger, "currentLevel", LogLevels.ERROR);
var logger_default = new Logger();

// node_modules/libram/dist/property.js
var property_exports = {};
__export(property_exports, {
  PropertiesManager: function() {
    return PropertiesManager;
  },
  decrement: function() {
    return decrement;
  },
  get: function() {
    return get;
  },
  getBoolean: function() {
    return getBoolean;
  },
  getBounty: function() {
    return getBounty;
  },
  getClass: function() {
    return getClass;
  },
  getCoinmaster: function() {
    return getCoinmaster;
  },
  getCommaSeparated: function() {
    return getCommaSeparated;
  },
  getEffect: function() {
    return getEffect;
  },
  getElement: function() {
    return getElement;
  },
  getFamiliar: function() {
    return getFamiliar;
  },
  getItem: function() {
    return getItem;
  },
  getLocation: function() {
    return getLocation;
  },
  getMonster: function() {
    return getMonster;
  },
  getNumber: function() {
    return getNumber;
  },
  getPhylum: function() {
    return getPhylum;
  },
  getServant: function() {
    return getServant;
  },
  getSkill: function() {
    return getSkill;
  },
  getSlot: function() {
    return getSlot;
  },
  getStat: function() {
    return getStat;
  },
  getString: function() {
    return getString;
  },
  getThrall: function() {
    return getThrall;
  },
  increment: function() {
    return increment;
  },
  set: function() {
    return _set;
  },
  setProperties: function() {
    return setProperties;
  },
  withChoice: function() {
    return withChoice;
  },
  withChoices: function() {
    return withChoices;
  },
  withProperties: function() {
    return withProperties;
  },
  withProperty: function() {
    return withProperty;
  }
});
var import_kolmafia3 = require("kolmafia");

// node_modules/libram/dist/propertyTypes.js
var booleanProperties = ["abortOnChoiceWhenNotInChoice", "addChatCommandLine", "addCreationQueue", "addStatusBarToFrames", "allowCloseableDesktopTabs", "allowNegativeTally", "allowNonMoodBurning", "allowSummonBurning", "autoHighlightOnFocus", "broadcastEvents", "cacheMallSearches", "chatBeep", "chatLinksUseRelay", "compactChessboard", "copyAsHTML", "customizedTabs", "debugBuy", "debugConsequences", "debugFoxtrotRemoval", "debugPathnames", "debugTopMenuStyle", "gapProtection", "gitInstallDependencies", "gitShowCommitMessages", "gitUpdateOnLogin", "greenScreenProtection", "guiUsesOneWindow", "hideServerDebugText", "logAcquiredItems", "logBattleAction", "logBrowserInteractions", "logChatMessages", "logChatRequests", "logCleanedHTML", "logDecoratedResponses", "logFamiliarActions", "logGainMessages", "logReadableHTML", "logPreferenceChange", "logMonsterHealth", "logReverseOrder", "logStatGains", "logStatusEffects", "logStatusOnLogin", "macroDebug", "macroLens", "mementoListActive", "mergeHobopolisChat", "pingLogin", "pingStealthyTimein", "printStackOnAbort", "proxySet", "relayAddSounds", "relayAddsCustomCombat", "relayAddsDiscoHelper", "relayAddsGraphicalCLI", "relayAddsQuickScripts", "relayAddsRestoreLinks", "relayAddsUpArrowLinks", "relayAddsUseLinks", "relayAddsWikiLinks", "relayAllowRemoteAccess", "relayBrowserOnly", "relayCacheUncacheable", "relayFormatsChatText", "relayHidesJunkMallItems", "relayMaintainsEffects", "relayMaintainsHealth", "relayMaintainsMana", "relayOverridesImages", "relayRunsAfterAdventureScript", "relayRunsBeforeBattleScript", "relayRunsBeforePVPScript", "relayScriptButtonFirst", "relayTextualizesEffects", "relayTrimsZapList", "relayUsesInlineLinks", "relayUsesIntegratedChat", "relayWarnOnRecoverFailure", "removeMalignantEffects", "saveSettingsOnSet", "sharePriceData", "showAllRequests", "showExceptionalRequests", "stealthLogin", "svnInstallDependencies", "svnShowCommitMessages", "svnUpdateOnLogin", "switchEquipmentForBuffs", "syncAfterSvnUpdate", "useChatToolbar", "useContactsFrame", "useDevProxyServer", "useDockIconBadge", "useHugglerChannel", "useImageCache", "useLastUserAgent", "useSystemTrayIcon", "useTabbedChatFrame", "useToolbars", "useCachedVolcanoMaps", "useZoneComboBox", "verboseSpeakeasy", "verboseFloundry", "wrapLongLines", "_gitUpdated", "_svnRepoFileFetched", "_svnUpdated", "antagonisticSnowmanKitAvailable", "arcadeGameHints", "armoryUnlocked", "autoForbidIgnoringStores", "autoCraft", "autoQuest", "autoEntangle", "autoGarish", "autoManaRestore", "autoFillMayoMinder", "autoPinkyRing", "autoPlantHardcore", "autoPlantSoftcore", "autoPotionID", "autoRepairBoxServants", "autoSatisfyWithCloset", "autoSatisfyWithCoinmasters", "autoSatisfyWithMall", "autoSatisfyWithNPCs", "autoSatisfyWithStash", "autoSatisfyWithStorage", "autoSetConditions", "autoSteal", "autoTuxedo", "backupCameraReverserEnabled", "badMoonEncounter01", "badMoonEncounter02", "badMoonEncounter03", "badMoonEncounter04", "badMoonEncounter05", "badMoonEncounter06", "badMoonEncounter07", "badMoonEncounter08", "badMoonEncounter09", "badMoonEncounter10", "badMoonEncounter11", "badMoonEncounter12", "badMoonEncounter13", "badMoonEncounter14", "badMoonEncounter15", "badMoonEncounter16", "badMoonEncounter17", "badMoonEncounter18", "badMoonEncounter19", "badMoonEncounter20", "badMoonEncounter21", "badMoonEncounter22", "badMoonEncounter23", "badMoonEncounter24", "badMoonEncounter25", "badMoonEncounter26", "badMoonEncounter27", "badMoonEncounter28", "badMoonEncounter29", "badMoonEncounter30", "badMoonEncounter31", "badMoonEncounter32", "badMoonEncounter33", "badMoonEncounter34", "badMoonEncounter35", "badMoonEncounter36", "badMoonEncounter37", "badMoonEncounter38", "badMoonEncounter39", "badMoonEncounter40", "badMoonEncounter41", "badMoonEncounter42", "badMoonEncounter43", "badMoonEncounter44", "badMoonEncounter45", "badMoonEncounter46", "badMoonEncounter47", "badMoonEncounter48", "barrelShrineUnlocked", "bigBrotherRescued", "blackBartsBootyAvailable", "bondAdv", "bondBeach", "bondBeat", "bondBooze", "bondBridge", "bondDesert", "bondDR", "bondDrunk1", "bondDrunk2", "bondHoney", "bondHP", "bondInit", "bondItem1", "bondItem2", "bondItem3", "bondJetpack", "bondMartiniDelivery", "bondMartiniPlus", "bondMartiniTurn", "bondMeat", "bondMox1", "bondMox2", "bondMPregen", "bondMus1", "bondMus2", "bondMys1", "bondMys2", "bondSpleen", "bondStat", "bondStat2", "bondStealth", "bondStealth2", "bondSymbols", "bondWar", "bondWeapon2", "bondWpn", "booPeakLit", "bootsCharged", "breakfastCompleted", "burrowgrubHiveUsed", "calzoneOfLegendEaten", "canteenUnlocked", "chaosButterflyThrown", "chatbotScriptExecuted", "chateauAvailable", "chatLiterate", "chatServesUpdates", "checkJackassHardcore", "checkJackassSoftcore", "clanAttacksEnabled", "coldAirportAlways", "considerShadowNoodles", "controlRoomUnlock", "concertVisited", "controlPanel1", "controlPanel2", "controlPanel3", "controlPanel4", "controlPanel5", "controlPanel6", "controlPanel7", "controlPanel8", "controlPanel9", "corralUnlocked", "dailyDungeonDone", "dampOldBootPurchased", "daycareOpen", "deepDishOfLegendEaten", "demonSummoned", "dinseyAudienceEngagement", "dinseyGarbagePirate", "dinseyRapidPassEnabled", "dinseyRollercoasterNext", "dinseySafetyProtocolsLoose", "doghouseBoarded", "dontStopForCounters", "drippingHallUnlocked", "drippyShieldUnlocked", "edUsedLash", "eldritchFissureAvailable", "eldritchHorrorAvailable", "errorOnAmbiguousFold", "essenceOfAnnoyanceAvailable", "essenceOfBearAvailable", "expressCardUsed", "falloutShelterChronoUsed", "falloutShelterCoolingTankUsed", "fireExtinguisherBatHoleUsed", "fireExtinguisherChasmUsed", "fireExtinguisherCyrptUsed", "fireExtinguisherDesertUsed", "fireExtinguisherHaremUsed", "fistTeachingsHaikuDungeon", "fistTeachingsPokerRoom", "fistTeachingsBarroomBrawl", "fistTeachingsConservatory", "fistTeachingsBatHole", "fistTeachingsFunHouse", "fistTeachingsMenagerie", "fistTeachingsSlums", "fistTeachingsFratHouse", "fistTeachingsRoad", "fistTeachingsNinjaSnowmen", "flickeringPixel1", "flickeringPixel2", "flickeringPixel3", "flickeringPixel4", "flickeringPixel5", "flickeringPixel6", "flickeringPixel7", "flickeringPixel8", "floristFriarAvailable", "floristFriarChecked", "frAlways", "frCemetaryUnlocked", "friarsBlessingReceived", "frMountainsUnlocked", "frSwampUnlocked", "frVillageUnlocked", "frWoodUnlocked", "getawayCampsiteUnlocked", "ghostPencil1", "ghostPencil2", "ghostPencil3", "ghostPencil4", "ghostPencil5", "ghostPencil6", "ghostPencil7", "ghostPencil8", "ghostPencil9", "gingerAdvanceClockUnlocked", "gingerBlackmailAccomplished", "gingerbreadCityAvailable", "gingerExtraAdventures", "gingerNegativesDropped", "gingerSewersUnlocked", "gingerSubwayLineUnlocked", "gingerRetailUnlocked", "glitchItemAvailable", "grabCloversHardcore", "grabCloversSoftcore", "guideToSafariAvailable", "guyMadeOfBeesDefeated", "hallowienerDefiledNook", "hallowienerGuanoJunction", "hallowienerKnollGym", "hallowienerMadnessBakery", "hallowienerMiddleChamber", "hallowienerOvergrownLot", "hallowienerSkeletonStore", "hallowienerSmutOrcs", "hallowienerSonofaBeach", "hallowienerVolcoino", "hardcorePVPWarning", "harvestBatteriesHardcore", "harvestBatteriesSoftcore", "hasAutumnaton", "hasBartender", "hasChef", "hasCocktailKit", "hasCosmicBowlingBall", "hasDetectiveSchool", "hasMaydayContract", "hasOven", "hasRange", "hasShaker", "hasSushiMat", "haveBoxingDaydreamHardcore", "haveBoxingDaydreamSoftcore", "hermitHax0red", "holidayHalsBookAvailable", "horseryAvailable", "hotAirportAlways", "implementGlitchItem", "intenseCurrents", "itemBoughtPerAscension637", "itemBoughtPerAscension8266", "itemBoughtPerAscension10790", "itemBoughtPerAscension10794", "itemBoughtPerAscension10795", "itemBoughtPerCharacter6423", "itemBoughtPerCharacter6428", "itemBoughtPerCharacter6429", "kingLiberated", "lastPirateInsult1", "lastPirateInsult2", "lastPirateInsult3", "lastPirateInsult4", "lastPirateInsult5", "lastPirateInsult6", "lastPirateInsult7", "lastPirateInsult8", "lawOfAveragesAvailable", "leafletCompleted", "libraryCardUsed", "lockPicked", "logBastilleBattalionBattles", "loginRecoveryHardcore", "loginRecoverySoftcore", "lovebugsUnlocked", "loveTunnelAvailable", "lowerChamberUnlock", "madnessBakeryAvailable", "makePocketWishesHardcore", "makePocketWishesSoftcore", "manualOfNumberologyAvailable", "mappingMonsters", "mapToAnemoneMinePurchased", "mapToKokomoAvailable", "mapToMadnessReefPurchased", "mapToTheDiveBarPurchased", "mapToTheMarinaraTrenchPurchased", "mapToTheSkateParkPurchased", "maraisBeaverUnlock", "maraisCorpseUnlock", "maraisDarkUnlock", "maraisVillageUnlock", "maraisWildlifeUnlock", "maraisWizardUnlock", "maximizerAlwaysCurrent", "maximizerCreateOnHand", "maximizerCurrentMallPrices", "maximizerFoldables", "maximizerIncludeAll", "maximizerNoAdventures", "middleChamberUnlock", "milkOfMagnesiumActive", "moonTuned", "neverendingPartyAlways", "noncombatForcerActive", "oasisAvailable", "odeBuffbotCheck", "oilPeakLit", "oscusSodaUsed", "outrageousSombreroUsed", "overgrownLotAvailable", "ownsFloristFriar", "ownsSpeakeasy", "pathedSummonsHardcore", "pathedSummonsSoftcore", "pizzaOfLegendEaten", "popularTartUnlocked", "potatoAlarmClockUsed", "prAlways", "prayedForGlamour", "prayedForProtection", "prayedForVigor", "primaryLabCheerCoreGrabbed", "pyramidBombUsed", "rageGlandVented", "readManualHardcore", "readManualSoftcore", "relayShowSpoilers", "relayShowWarnings", "rememberDesktopSize", "replicaChateauAvailable", "replicaNeverendingPartyAlways", "replicaWitchessSetAvailable", "requireBoxServants", "requireSewerTestItems", "restUsingCampAwayTent", "restUsingChateau", "ROMOfOptimalityAvailable", "safePickpocket", "schoolOfHardKnocksDiplomaAvailable", "scriptCascadingMenus", "serverAddsCustomCombat", "SHAWARMAInitiativeUnlocked", "showForbiddenStores", "showGainsPerUnit", "showIgnoringStorePrices", "showNoSummonOnly", "showTurnFreeOnly", "skeletonStoreAvailable", "sleazeAirportAlways", "snojoAvailable", "sortByEffect", "sortByRoom", "spacegateAlways", "spacegateVaccine1", "spacegateVaccine2", "spacegateVaccine3", "spaceInvaderDefeated", "spelunkyHints", "spiceMelangeUsed", "spookyAirportAlways", "stenchAirportAlways", "stopForFixedWanderer", "stopForUltraRare", "styxPixieVisited", "superconductorDefeated", "suppressInappropriateNags", "suppressPowerPixellation", "suppressMallPriceCacheMessages", "telegraphOfficeAvailable", "telescopeLookedHigh", "timeTowerAvailable", "trackLightsOut", "uneffectWithHotTub", "universalSeasoningActive", "universalSeasoningAvailable", "useBookOfEverySkillHardcore", "useBookOfEverySkillSoftcore", "useCrimboToysHardcore", "useCrimboToysSoftcore", "verboseMaximizer", "visitLoungeHardcore", "visitLoungeSoftcore", "visitRumpusHardcore", "visitRumpusSoftcore", "voteAlways", "wildfireBarrelCaulked", "wildfireDusted", "wildfireFracked", "wildfirePumpGreased", "wildfireSprinkled", "yearbookCameraPending", "youRobotScavenged", "_2002MrStoreCreditsCollected", "_affirmationCookieEaten", "_affirmationHateUsed", "_airFryerUsed", "_akgyxothUsed", "_alienAnimalMilkUsed", "_alienPlantPodUsed", "_allYearSucker", "_aprilShower", "_armyToddlerCast", "_aug1Cast", "_aug2Cast", "_aug3Cast", "_aug4Cast", "_aug5Cast", "_aug6Cast", "_aug7Cast", "_aug8Cast", "_aug9Cast", "_aug10Cast", "_aug11Cast", "_aug12Cast", "_aug13Cast", "_aug14Cast", "_aug15Cast", "_aug16Cast", "_aug17Cast", "_aug18Cast", "_aug19Cast", "_aug20Cast", "_aug21Cast", "_aug22Cast", "_aug23Cast", "_aug24Cast", "_aug25Cast", "_aug26Cast", "_aug27Cast", "_aug28Cast", "_aug29Cast", "_aug30Cast", "_aug31Cast", "_augTodayCast", "_authorsInkUsed", "_baconMachineUsed", "_bagOfCandy", "_bagOfCandyUsed", "_bagOTricksUsed", "_ballastTurtleUsed", "_ballInACupUsed", "_ballpit", "_barrelPrayer", "_bastilleLastBattleWon", "_beachCombing", "_bendHellUsed", "_blackMonolithUsed", "_blankoutUsed", "_bonersSummoned", "_bookOfEverySkillUsed", "_borrowedTimeUsed", "_bowleggedSwaggerUsed", "_bowlFullOfJellyUsed", "_boxOfHammersUsed", "_brainPreservationFluidUsed", "_brassDreadFlaskUsed", "_cameraUsed", "_canSeekBirds", "_carboLoaded", "_cargoPocketEmptied", "_ceciHatUsed", "_chateauDeskHarvested", "_chateauMonsterFought", "_chibiChanged", "_chronerCrossUsed", "_chronerTriggerUsed", "_chubbyAndPlumpUsed", "_circadianRhythmsRecalled", "_circleDrumUsed", "_clanFortuneBuffUsed", "_claraBellUsed", "_coalPaperweightUsed", "_cocoaDispenserUsed", "_cocktailShakerUsed", "_coldAirportToday", "_coldOne", "_communismUsed", "_confusingLEDClockUsed", "_controlPanelUsed", "_cookbookbatRecipeDrops", "_corruptedStardustUsed", "_cosmicSixPackConjured", "_crappyCameraUsed", "_creepyVoodooDollUsed", "_crimboTraining", "_crimboTree", "_cursedKegUsed", "_cursedMicrowaveUsed", "_dailyDungeonMalwareUsed", "_darkChocolateHeart", "_daycareFights", "_daycareNap", "_daycareSpa", "_daycareToday", "_defectiveTokenChecked", "_defectiveTokenUsed", "_dinseyGarbageDisposed", "_discoKnife", "_distentionPillUsed", "_dnaHybrid", "_docClocksThymeCocktailDrunk", "_drippingHallDoor1", "_drippingHallDoor2", "_drippingHallDoor3", "_drippingHallDoor4", "_drippyCaviarUsed", "_drippyNuggetUsed", "_drippyPilsnerUsed", "_drippyPlumUsed", "_drippyWineUsed", "_eldritchHorrorEvoked", "_eldritchTentacleFought", "_entauntaunedToday", "_envyfishEggUsed", "_epicMcTwistUsed", "_essentialTofuUsed", "_etchedHourglassUsed", "_eternalCarBatteryUsed", "_everfullGlassUsed", "_eyeAndATwistUsed", "_fancyChessSetUsed", "_falloutShelterSpaUsed", "_fancyHotDogEaten", "_farmerItemsCollected", "_favoriteBirdVisited", "_firedJokestersGun", "_fireExtinguisherRefilled", "_fireStartingKitUsed", "_fireworksShop", "_fireworksShopHatBought", "_fireworksShopEquipmentBought", "_fireworkUsed", "_fishyPipeUsed", "_floundryItemCreated", "_floundryItemUsed", "_freePillKeeperUsed", "_frToday", "_fudgeSporkUsed", "_garbageItemChanged", "_gingerBiggerAlligators", "_gingerbreadCityToday", "_gingerbreadClockAdvanced", "_gingerbreadClockVisited", "_gingerbreadColumnDestroyed", "_gingerbreadMobHitUsed", "_glennGoldenDiceUsed", "_glitchItemImplemented", "_gnollEyeUsed", "_governmentPerDiemUsed", "_grimBuff", "_guildManualUsed", "_guzzlrQuestAbandoned", "_hardKnocksDiplomaUsed", "_hippyMeatCollected", "_hobbyHorseUsed", "_holidayFunUsed", "_holoWristCrystal", "_hotAirportToday", "_hungerSauceUsed", "_hyperinflatedSealLungUsed", "_iceHotelRoomsRaided", "_iceSculptureUsed", "_incredibleSelfEsteemCast", "_infernoDiscoVisited", "_internetDailyDungeonMalwareBought", "_internetGallonOfMilkBought", "_internetPlusOneBought", "_internetPrintScreenButtonBought", "_internetViralVideoBought", "_interviewIsabella", "_interviewMasquerade", "_interviewVlad", "_inquisitorsUnidentifiableObjectUsed", "_ironicMoustache", "_jackassPlumberGame", "_jarlsCheeseSummoned", "_jarlsCreamSummoned", "_jarlsDoughSummoned", "_jarlsEggsSummoned", "_jarlsFruitSummoned", "_jarlsMeatSummoned", "_jarlsPotatoSummoned", "_jarlsVeggiesSummoned", "_jingleBellUsed", "_jukebox", "_kgbFlywheelCharged", "_kgbLeftDrawerUsed", "_kgbOpened", "_kgbRightDrawerUsed", "_kolConSixPackUsed", "_kolhsCutButNotDried", "_kolhsIsskayLikeAnAshtray", "_kolhsPoeticallyLicenced", "_kolhsSchoolSpirited", "_kudzuSaladEaten", "_lastCombatLost", "_lastCombatWon", "_latteBanishUsed", "_latteCopyUsed", "_latteDrinkUsed", "_legendaryBeat", "_licenseToChillUsed", "_lodestoneUsed", "_lookingGlass", "_loveTunnelToday", "_loveTunnelUsed", "_luckyGoldRingVolcoino", "_lunchBreak", "_lupineHormonesUsed", "_lyleFavored", "_madLiquorDrunk", "_madTeaParty", "_mafiaMiddleFingerRingUsed", "_managerialManipulationUsed", "_mansquitoSerumUsed", "_maydayDropped", "_mayoDeviceRented", "_mayoTankSoaked", "_meatballMachineUsed", "_meatifyMatterUsed", "_milkOfMagnesiumUsed", "_mimeArmyShotglassUsed", "_missGravesVermouthDrunk", "_missileLauncherUsed", "_molehillMountainUsed", "_momFoodReceived", "_mrBurnsgerEaten", "_muffinOrderedToday", "_mushroomGardenVisited", "_neverendingPartyToday", "_newYouQuestCompleted", "_olympicSwimmingPool", "_olympicSwimmingPoolItemFound", "_overflowingGiftBasketUsed", "_partyHard", "_pastaAdditive", "_perfectFreezeUsed", "_perfectlyFairCoinUsed", "_petePartyThrown", "_peteRiotIncited", "_photocopyUsed", "_pickyTweezersUsed", "_pingPongGame", "_pirateBellowUsed", "_pirateForkUsed", "_pixelOrbUsed", "_plumbersMushroomStewEaten", "_pneumaticityPotionUsed", "_portableSteamUnitUsed", "_pottedTeaTreeUsed", "_prToday", "_psychoJarFilled", "_psychoJarUsed", "_psychokineticHugUsed", "_rainStickUsed", "_redwoodRainStickUsed", "_replicaSnowconeTomeUsed", "_replicaResolutionLibramUsed", "_replicaSmithsTomeUsed", "_requestSandwichSucceeded", "_rhinestonesAcquired", "_seaJellyHarvested", "_setOfJacksUsed", "_sewingKitUsed", "_sexChanged", "_shadowAffinityToday", "_shadowForestLooted", "_shrubDecorated", "_silverDreadFlaskUsed", "_sitCourseCompleted", "_skateBuff1", "_skateBuff2", "_skateBuff3", "_skateBuff4", "_skateBuff5", "_sleazeAirportToday", "_sobrieTeaUsed", "_softwareGlitchTurnReceived", "_sotParcelReturned", "_spacegateMurderbot", "_spacegateRuins", "_spacegateSpant", "_spacegateToday", "_spacegateVaccine", "_spaghettiBreakfast", "_spaghettiBreakfastEaten", "_spinmasterLatheVisited", "_spinningWheel", "_spookyAirportToday", "_stabonicScrollUsed", "_steelyEyedSquintUsed", "_stenchAirportToday", "_stinkyCheeseBanisherUsed", "_strangeStalagmiteUsed", "_streamsCrossed", "_stuffedPocketwatchUsed", "_styxSprayUsed", "_summonAnnoyanceUsed", "_summonCarrotUsed", "_summonResortPassUsed", "_sweetToothUsed", "_syntheticDogHairPillUsed", "_tacoFlierUsed", "_telegraphOfficeToday", "_templeHiddenPower", "_tempuraAirUsed", "_thesisDelivered", "_timeSpinnerReplicatorUsed", "_toastSummoned", "_tonicDjinn", "_treasuryEliteMeatCollected", "_treasuryHaremMeatCollected", "_trivialAvocationsGame", "_tryptophanDartUsed", "_turtlePowerCast", "_twelveNightEnergyUsed", "_ultraMegaSourBallUsed", "_victorSpoilsUsed", "_villainLairCanLidUsed", "_villainLairColorChoiceUsed", "_villainLairDoorChoiceUsed", "_villainLairFirecrackerUsed", "_villainLairSymbologyChoiceUsed", "_villainLairWebUsed", "_vmaskBanisherUsed", "_voraciTeaUsed", "_volcanoItemRedeemed", "_volcanoSuperduperheatedMetal", "_voteToday", "_VYKEACafeteriaRaided", "_VYKEALoungeRaided", "_walfordQuestStartedToday", "_warbearBankUsed", "_warbearBreakfastMachineUsed", "_warbearGyrocopterUsed", "_warbearSodaMachineUsed", "_wildfireBarrelHarvested", "_witchessBuff", "_workshedItemUsed", "_zombieClover", "_preventScurvy", "lockedItem4637", "lockedItem4638", "lockedItem4639", "lockedItem4646", "lockedItem4647", "unknownRecipe3542", "unknownRecipe3543", "unknownRecipe3544", "unknownRecipe3545", "unknownRecipe3546", "unknownRecipe3547", "unknownRecipe3548", "unknownRecipe3749", "unknownRecipe3751", "unknownRecipe4172", "unknownRecipe4173", "unknownRecipe4174", "unknownRecipe5060", "unknownRecipe5061", "unknownRecipe5062", "unknownRecipe5063", "unknownRecipe5064", "unknownRecipe5066", "unknownRecipe5067", "unknownRecipe5069", "unknownRecipe5070", "unknownRecipe5072", "unknownRecipe5073", "unknownRecipe5670", "unknownRecipe5671", "unknownRecipe6501", "unknownRecipe6564", "unknownRecipe6565", "unknownRecipe6566", "unknownRecipe6567", "unknownRecipe6568", "unknownRecipe6569", "unknownRecipe6570", "unknownRecipe6571", "unknownRecipe6572", "unknownRecipe6573", "unknownRecipe6574", "unknownRecipe6575", "unknownRecipe6576", "unknownRecipe6577", "unknownRecipe6578", "unknownRecipe7752", "unknownRecipe7753", "unknownRecipe7754", "unknownRecipe7755", "unknownRecipe7756", "unknownRecipe7757", "unknownRecipe7758", "unknownRecipe10970", "unknownRecipe10971", "unknownRecipe10972", "unknownRecipe10973", "unknownRecipe10974", "unknownRecipe10975", "unknownRecipe10976", "unknownRecipe10977", "unknownRecipe10978", "unknownRecipe10988", "unknownRecipe10989", "unknownRecipe10990", "unknownRecipe10991", "unknownRecipe10992", "unknownRecipe11000"];
var numericProperties = ["coinMasterIndex", "dailyDeedsVersion", "defaultDropdown1", "defaultDropdown2", "defaultDropdownSplit", "defaultLimit", "fixedThreadPoolSize", "itemManagerIndex", "lastBuffRequestType", "lastGlobalCounterDay", "lastImageCacheClear", "pingDefaultTestPings", "pingLoginCount", "pingLoginGoal", "pingLoginThreshold", "pingTestPings", "previousUpdateRevision", "relayDelayForSVN", "relaySkillButtonCount", "scriptButtonPosition", "statusDropdown", "svnThreadPoolSize", "toolbarPosition", "_beachTides", "_g9Effect", "8BitBonusTurns", "8BitScore", "addingScrolls", "affirmationCookiesEaten", "aminoAcidsUsed", "antagonisticSnowmanKitCost", "ascensionsToday", "asolDeferredPoints", "asolPointsPigSkinner", "asolPointsCheeseWizard", "asolPointsJazzAgent", "autoAbortThreshold", "autoAntidote", "autoBuyPriceLimit", "autumnatonQuestTurn", "availableCandyCredits", "availableDimes", "availableFunPoints", "availableMrStore2002Credits", "availableQuarters", "availableStoreCredits", "availableSwagger", "averageSwagger", "awolMedicine", "awolPointsBeanslinger", "awolPointsCowpuncher", "awolPointsSnakeoiler", "awolDeferredPointsBeanslinger", "awolDeferredPointsCowpuncher", "awolDeferredPointsSnakeoiler", "awolVenom", "bagOTricksCharges", "ballpitBonus", "bankedKarma", "bartenderTurnsUsed", "basementMallPrices", "basementSafetyMargin", "batmanFundsAvailable", "batmanBonusInitialFunds", "batmanTimeLeft", "bearSwagger", "beeCounter", "beGregariousCharges", "beGregariousFightsLeft", "birdformCold", "birdformHot", "birdformRoc", "birdformSleaze", "birdformSpooky", "birdformStench", "blackBartsBootyCost", "blackPuddingsDefeated", "blackForestProgress", "blankOutUsed", "bloodweiserDrunk", "bondPoints", "bondVillainsDefeated", "boneAbacusVictories", "booPeakProgress", "borisPoints", "breakableHandling", "breakableHandling1964", "breakableHandling9691", "breakableHandling9692", "breakableHandling9699", "breathitinCharges", "brodenBacteria", "brodenSprinkles", "buffBotMessageDisposal", "buffBotPhilanthropyType", "buffJimmyIngredients", "burnoutsDefeated", "burrowgrubSummonsRemaining", "camelSpit", "camerasUsed", "campAwayDecoration", "candyWitchTurnsUsed", "candyWitchCandyTotal", "carboLoading", "catBurglarBankHeists", "cellarLayout", "charitableDonations", "chasmBridgeProgress", "chefTurnsUsed", "chessboardsCleared", "chibiAlignment", "chibiBirthday", "chibiFitness", "chibiIntelligence", "chibiLastVisit", "chibiSocialization", "chilledToTheBone", "cinchoSaltAndLime", "cinderellaMinutesToMidnight", "cinderellaScore", "cocktailSummons", "commerceGhostCombats", "controlPanelOmega", "cornucopiasOpened", "cosmicBowlingBallReturnCombats", "cozyCounter6332", "cozyCounter6333", "cozyCounter6334", "craftingClay", "craftingLeather", "craftingStraw", "crimbo16BeardChakraCleanliness", "crimbo16BootsChakraCleanliness", "crimbo16BungChakraCleanliness", "crimbo16CrimboHatChakraCleanliness", "crimbo16GutsChakraCleanliness", "crimbo16HatChakraCleanliness", "crimbo16JellyChakraCleanliness", "crimbo16LiverChakraCleanliness", "crimbo16NippleChakraCleanliness", "crimbo16NoseChakraCleanliness", "crimbo16ReindeerChakraCleanliness", "crimbo16SackChakraCleanliness", "crimboTrainingSkill", "crimboTreeDays", "cubelingProgress", "currentExtremity", "currentHedgeMazeRoom", "currentMojoFilters", "currentNunneryMeat", "currentPortalEnergy", "currentReplicaStoreYear", "cursedMagnifyingGlassCount", "cyrptAlcoveEvilness", "cyrptCrannyEvilness", "cyrptNicheEvilness", "cyrptNookEvilness", "cyrptTotalEvilness", "darkGyfftePoints", "daycareEquipment", "daycareInstructors", "daycareLastScavenge", "daycareToddlers", "dbNemesisSkill1", "dbNemesisSkill2", "dbNemesisSkill3", "desertExploration", "desktopHeight", "desktopWidth", "dinseyFilthLevel", "dinseyFunProgress", "dinseyNastyBearsDefeated", "dinseySocialJusticeIProgress", "dinseySocialJusticeIIProgress", "dinseyTouristsFed", "dinseyToxicMultiplier", "doctorBagQuestLights", "doctorBagUpgrades", "dreadScroll1", "dreadScroll2", "dreadScroll3", "dreadScroll4", "dreadScroll5", "dreadScroll6", "dreadScroll7", "dreadScroll8", "dripAdventuresSinceAscension", "drippingHallAdventuresSinceAscension", "drippingTreesAdventuresSinceAscension", "drippyBatsUnlocked", "drippyJuice", "drippyOrbsClaimed", "drunkenSwagger", "edDefeatAbort", "edPoints", "eldritchTentaclesFought", "electricKoolAidEaten", "elfGratitude", "encountersUntilDMTChoice", "encountersUntilNEPChoice", "encountersUntilSRChoice", "ensorceleeLevel", "entauntaunedColdRes", "essenceOfAnnoyanceCost", "essenceOfBearCost", "extraRolloverAdventures", "falloutShelterLevel", "familiarSweat", "fingernailsClipped", "fistSkillsKnown", "flyeredML", "fossilB", "fossilD", "fossilN", "fossilP", "fossilS", "fossilW", "fratboysDefeated", "frenchGuardTurtlesFreed", "funGuyMansionKills", "garbageChampagneCharge", "garbageFireProgress", "garbageShirtCharge", "garbageTreeCharge", "garlandUpgrades", "getsYouDrunkTurnsLeft", "ghostPepperTurnsLeft", "gingerDigCount", "gingerLawChoice", "gingerMuscleChoice", "gingerTrainScheduleStudies", "gladiatorBallMovesKnown", "gladiatorBladeMovesKnown", "gladiatorNetMovesKnown", "glitchItemCost", "glitchItemImplementationCount", "glitchItemImplementationLevel", "glitchSwagger", "gloverPoints", "gnasirProgress", "goldenMrAccessories", "gongPath", "gooseDronesRemaining", "goreCollected", "gourdItemCount", "greyYouPoints", "grimoire1Summons", "grimoire2Summons", "grimoire3Summons", "grimstoneCharge", "guardTurtlesFreed", "guideToSafariCost", "guyMadeOfBeesCount", "guzzlrBronzeDeliveries", "guzzlrDeliveryProgress", "guzzlrGoldDeliveries", "guzzlrPlatinumDeliveries", "haciendaLayout", "hallowiener8BitRealm", "hallowienerCoinspiracy", "hareMillisecondsSaved", "hareTurnsUsed", "heavyRainsStartingThunder", "heavyRainsStartingRain", "heavyRainsStartingLightning", "heroDonationBoris", "heroDonationJarlsberg", "heroDonationSneakyPete", "hiddenApartmentProgress", "hiddenBowlingAlleyProgress", "hiddenHospitalProgress", "hiddenOfficeProgress", "hiddenTavernUnlock", "highTopPumped", "hippiesDefeated", "holidayHalsBookCost", "holidaySwagger", "homemadeRobotUpgrades", "homebodylCharges", "hpAutoRecovery", "hpAutoRecoveryTarget", "iceSwagger", "jarlsbergPoints", "jungCharge", "junglePuns", "knownAscensions", "kolhsTotalSchoolSpirited", "lastAnticheeseDay", "lastArcadeAscension", "lastBadMoonReset", "lastBangPotionReset", "lastBattlefieldReset", "lastBeardBuff", "lastBreakfast", "lastCartographyBooPeak", "lastCartographyCastleTop", "lastCartographyDarkNeck", "lastCartographyDefiledNook", "lastCartographyFratHouse", "lastCartographyFratHouseVerge", "lastCartographyGuanoJunction", "lastCartographyHauntedBilliards", "lastCartographyHippyCampVerge", "lastCartographyZeppelinProtesters", "lastCastleGroundUnlock", "lastCastleTopUnlock", "lastCellarReset", "lastChanceThreshold", "lastChasmReset", "lastColosseumRoundWon", "lastCouncilVisit", "lastCounterDay", "lastDesertUnlock", "lastDispensaryOpen", "lastDMTDuplication", "lastDwarfFactoryReset", "lastEVHelmetValue", "lastEVHelmetReset", "lastEmptiedStorage", "lastFilthClearance", "lastGoofballBuy", "lastGuildStoreOpen", "lastGuyMadeOfBeesReset", "lastFratboyCall", "lastFriarCeremonyAscension", "lastFriarsElbowNC", "lastFriarsHeartNC", "lastFriarsNeckNC", "lastHippyCall", "lastIslandUnlock", "lastKeyotronUse", "lastKingLiberation", "lastLightsOutTurn", "lastMushroomPlot", "lastMiningReset", "lastNemesisReset", "lastPaperStripReset", "lastPirateEphemeraReset", "lastPirateInsultReset", "lastPlusSignUnlock", "lastQuartetAscension", "lastQuartetRequest", "lastSecondFloorUnlock", "lastShadowForgeUnlockAdventure", "lastSkateParkReset", "lastStillBeatingSpleen", "lastTavernAscension", "lastTavernSquare", "lastTelescopeReset", "lastTempleAdventures", "lastTempleButtonsUnlock", "lastTempleUnlock", "lastThingWithNoNameDefeated", "lastTowelAscension", "lastTr4pz0rQuest", "lastTrainsetConfiguration", "lastVioletFogMap", "lastVoteMonsterTurn", "lastWartDinseyDefeated", "lastWuTangDefeated", "lastYearbookCameraAscension", "lastZapperWand", "lastZapperWandExplosionDay", "lawOfAveragesCost", "legacyPoints", "libramSummons", "lightsOutAutomation", "louvreDesiredGoal", "louvreGoal", "lovebugsAridDesert", "lovebugsBeachBuck", "lovebugsBooze", "lovebugsChroner", "lovebugsCoinspiracy", "lovebugsCyrpt", "lovebugsFreddy", "lovebugsFunFunds", "lovebugsHoboNickel", "lovebugsItemDrop", "lovebugsMeat", "lovebugsMeatDrop", "lovebugsMoxie", "lovebugsMuscle", "lovebugsMysticality", "lovebugsOilPeak", "lovebugsOrcChasm", "lovebugsPowder", "lovebugsWalmart", "lttQuestDifficulty", "lttQuestStageCount", "manaBurnSummonThreshold", "manaBurningThreshold", "manaBurningTrigger", "manorDrawerCount", "manualOfNumberologyCost", "mapToKokomoCost", "masksUnlocked", "maximizerMRUSize", "maximizerCombinationLimit", "maximizerEquipmentLevel", "maximizerEquipmentScope", "maximizerMaxPrice", "maximizerPriceLevel", "maxManaBurn", "mayflyExperience", "mayoLevel", "meansuckerPrice", "merkinVocabularyMastery", "miniAdvClass", "miniMartinisDrunk", "moleTunnelLevel", "monsterHabitatsFightsLeft", "mothershipProgress", "mpAutoRecovery", "mpAutoRecoveryTarget", "munchiesPillsUsed", "mushroomGardenCropLevel", "nextParanormalActivity", "nextQuantumFamiliarOwnerId", "nextQuantumFamiliarTurn", "noobPoints", "noobDeferredPoints", "noodleSummons", "nsContestants1", "nsContestants2", "nsContestants3", "nuclearAutumnPoints", "numericSwagger", "nunsVisits", "oilPeakProgress", "optimalSwagger", "optimisticCandleProgress", "palindomeDudesDefeated", "parasolUsed", "pendingMapReflections", "pingpongSkill", "pirateSwagger", "plantingDay", "plumberBadgeCost", "plumberCostumeCost", "plumberPoints", "poolSharkCount", "poolSkill", "primaryLabGooIntensity", "prismaticSummons", "procrastinatorLanguageFluency", "promptAboutCrafting", "puzzleChampBonus", "pyramidPosition", "quantumPoints", "reagentSummons", "reanimatorArms", "reanimatorLegs", "reanimatorSkulls", "reanimatorWeirdParts", "reanimatorWings", "recentLocations", "redSnapperProgress", "relayPort", "relocatePygmyJanitor", "relocatePygmyLawyer", "rockinRobinProgress", "ROMOfOptimalityCost", "rumpelstiltskinKidsRescued", "rumpelstiltskinTurnsUsed", "rwbMonsterCount", "safariSwagger", "sausageGrinderUnits", "schoolOfHardKnocksDiplomaCost", "schoolSwagger", "scrapbookCharges", "screechCombats", "scriptMRULength", "seaodesFound", "SeasoningSwagger", "sexChanges", "shenInitiationDay", "shockingLickCharges", "singleFamiliarRun", "skillBurn3", "skillBurn90", "skillBurn153", "skillBurn154", "skillBurn155", "skillBurn1019", "skillBurn5017", "skillBurn6014", "skillBurn6015", "skillBurn6016", "skillBurn6020", "skillBurn6021", "skillBurn6022", "skillBurn6023", "skillBurn6024", "skillBurn6026", "skillBurn6028", "skillBurn7323", "skillBurn14008", "skillBurn14028", "skillBurn14038", "skillBurn15011", "skillBurn15028", "skillBurn17005", "skillBurn22034", "skillBurn22035", "skillBurn23301", "skillBurn23302", "skillBurn23303", "skillBurn23304", "skillBurn23305", "skillBurn23306", "skillLevel46", "skillLevel47", "skillLevel48", "skillLevel117", "skillLevel118", "skillLevel121", "skillLevel128", "skillLevel134", "skillLevel144", "skillLevel180", "skillLevel188", "skillLevel227", "skillLevel7254", "slimelingFullness", "slimelingStacksDropped", "slimelingStacksDue", "smoresEaten", "smutOrcNoncombatProgress", "sneakyPetePoints", "snojoMoxieWins", "snojoMuscleWins", "snojoMysticalityWins", "sourceAgentsDefeated", "sourceEnlightenment", "sourceInterval", "sourcePoints", "sourceTerminalGram", "sourceTerminalPram", "sourceTerminalSpam", "spaceBabyLanguageFluency", "spacePirateLanguageFluency", "spelunkyNextNoncombat", "spelunkySacrifices", "spelunkyWinCount", "spookyPuttyCopiesMade", "spookyVHSTapeMonsterTurn", "statbotUses", "sugarCounter4178", "sugarCounter4179", "sugarCounter4180", "sugarCounter4181", "sugarCounter4182", "sugarCounter4183", "sugarCounter4191", "summonAnnoyanceCost", "sweat", "tacoDanCocktailSauce", "tacoDanFishMeat", "tavernLayout", "telescopeUpgrades", "tempuraSummons", "timeSpinnerMedals", "timesRested", "tomeSummons", "totalCharitableDonations", "trainsetPosition", "turtleBlessingTurns", "twinPeakProgress", "twoCRSPoints", "unicornHornInflation", "universalSeasoningCost", "usable1HWeapons", "usable1xAccs", "usable2HWeapons", "usable3HWeapons", "usableAccessories", "usableHats", "usableOffhands", "usableOther", "usablePants", "usableShirts", "valueOfAdventure", "valueOfInventory", "valueOfStill", "valueOfTome", "vintnerCharge", "vintnerWineLevel", "violetFogGoal", "walfordBucketProgress", "warehouseProgress", "welcomeBackAdv", "whetstonesUsed", "wolfPigsEvicted", "wolfTurnsUsed", "writingDesksDefeated", "xoSkeleltonXProgress", "xoSkeleltonOProgress", "yearbookCameraAscensions", "yearbookCameraUpgrades", "youRobotBody", "youRobotBottom", "youRobotLeft", "youRobotPoints", "youRobotRight", "youRobotTop", "zeppelinProtestors", "zigguratLianas", "zombiePoints", "_absintheDrops", "_abstractionDropsCrown", "_aguaDrops", "_xenomorphCharge", "_ancestralRecallCasts", "_antihangoverBonus", "_astralDrops", "_augSkillsCast", "_autumnatonQuests", "_backUpUses", "_badlyRomanticArrows", "_badgerCharge", "_balefulHowlUses", "_banderRunaways", "_bastilleCheese", "_bastilleGames", "_bastilleGameTurn", "_bastilleLastCheese", "_beanCannonUses", "_bearHugs", "_beerLensDrops", "_bellydancerPickpockets", "_benettonsCasts", "_birdsSoughtToday", "_boomBoxFights", "_boomBoxSongsLeft", "_bootStomps", "_boxingGloveArrows", "_brickoEyeSummons", "_brickoFights", "_campAwayCloudBuffs", "_campAwaySmileBuffs", "_candySummons", "_captainHagnkUsed", "_carnieCandyDrops", "_carrotNoseDrops", "_catBurglarCharge", "_catBurglarHeistsComplete", "_cheerleaderSteam", "_chestXRayUsed", "_chibiAdventures", "_chipBags", "_chocolateCigarsUsed", "_chocolateCoveredPingPongBallsUsed", "_chocolateSculpturesUsed", "_chocolatesUsed", "_chronolithActivations", "_chronolithNextCost", "_cinchUsed", "_cinchoRests", "_circadianRhythmsAdventures", "_clanFortuneConsultUses", "_clipartSummons", "_cloversPurchased", "_coldMedicineConsults", "_coldMedicineEquipmentTaken", "_companionshipCasts", "_cookbookbatCrafting", "_cosmicBowlingSkillsUsed", "_crimbo21ColdResistance", "_dailySpecialPrice", "_daycareGymScavenges", "_daycareRecruits", "_deckCardsDrawn", "_deluxeKlawSummons", "_demandSandwich", "_detectiveCasesCompleted", "_disavowed", "_dnaPotionsMade", "_donhosCasts", "_douseFoeUses", "_dreamJarDrops", "_drunkPygmyBanishes", "_edDefeats", "_edLashCount", "_elronsCasts", "_enamorangs", "_energyCollected", "_expertCornerCutterUsed", "_favorRareSummons", "_feastUsed", "_feelinTheRhythm", "_feelPrideUsed", "_feelExcitementUsed", "_feelHatredUsed", "_feelLonelyUsed", "_feelNervousUsed", "_feelEnvyUsed", "_feelDisappointedUsed", "_feelSuperiorUsed", "_feelLostUsed", "_feelNostalgicUsed", "_feelPeacefulUsed", "_fingertrapArrows", "_fireExtinguisherCharge", "_fragrantHerbsUsed", "_freeBeachWalksUsed", "_frButtonsPressed", "_fudgeWaspFights", "_gapBuffs", "_garbageFireDrops", "_garbageFireDropsCrown", "_genieFightsUsed", "_genieWishesUsed", "_gibbererAdv", "_gibbererCharge", "_gingerbreadCityTurns", "_glarkCableUses", "_glitchMonsterFights", "_gnomeAdv", "_godLobsterFights", "_goldenMoneyCharge", "_gongDrops", "_gothKidCharge", "_gothKidFights", "_greyYouAdventures", "_grimBrotherCharge", "_grimFairyTaleDrops", "_grimFairyTaleDropsCrown", "_grimoireConfiscatorSummons", "_grimoireGeekySummons", "_grimstoneMaskDrops", "_grimstoneMaskDropsCrown", "_grooseCharge", "_grooseDrops", "_grubbyWoolDrops", "_guzzlrDeliveries", "_guzzlrGoldDeliveries", "_guzzlrPlatinumDeliveries", "_hareAdv", "_hareCharge", "_highTopPumps", "_hipsterAdv", "_hoardedCandyDropsCrown", "_hoboUnderlingSummons", "_holoWristDrops", "_holoWristProgress", "_hotAshesDrops", "_hotJellyUses", "_hotTubSoaks", "_humanMuskUses", "_iceballUses", "_inigosCasts", "_jerksHealthMagazinesUsed", "_jiggleCheese", "_jiggleCream", "_jiggleLife", "_jiggleSteak", "_jitbCharge", "_juneCleaverFightsLeft", "_juneCleaverEncounters", "_juneCleaverStench", "_juneCleaverSpooky", "_juneCleaverSleaze", "_juneCleaverHot", "_juneCleaverCold", "_juneCleaverSkips", "_jungDrops", "_kgbClicksUsed", "_kgbDispenserUses", "_kgbTranquilizerDartUses", "_klawSummons", "_kloopCharge", "_kloopDrops", "_kolhsAdventures", "_kolhsSavedByTheBell", "_lastDailyDungeonRoom", "_lastSausageMonsterTurn", "_lastZomboEye", "_latteRefillsUsed", "_leafblowerML", "_legionJackhammerCrafting", "_llamaCharge", "_longConUsed", "_lovebugsBeachBuck", "_lovebugsChroner", "_lovebugsCoinspiracy", "_lovebugsFreddy", "_lovebugsFunFunds", "_lovebugsHoboNickel", "_lovebugsWalmart", "_loveChocolatesUsed", "_lynyrdSnareUses", "_machineTunnelsAdv", "_macrometeoriteUses", "_mafiaThumbRingAdvs", "_mayflowerDrops", "_mayflySummons", "_mediumSiphons", "_meteoriteAdesUsed", "_meteorShowerUses", "_micrometeoriteUses", "_mildEvilPerpetrated", "_miniMartiniDrops", "_monkeyPawWishesUsed", "_monsterHabitatsRecalled", "_monstersMapped", "_mushroomGardenFights", "_nanorhinoCharge", "_navelRunaways", "_neverendingPartyFreeTurns", "_newYouQuestSharpensDone", "_newYouQuestSharpensToDo", "_nextColdMedicineConsult", "_nextQuantumAlignment", "_nightmareFuelCharges", "_noobSkillCount", "_nuclearStockpileUsed", "_oilExtracted", "_olfactionsUsed", "_optimisticCandleDropsCrown", "_oreDropsCrown", "_otoscopeUsed", "_oysterEggsFound", "_pantsgivingBanish", "_pantsgivingCount", "_pantsgivingCrumbs", "_pantsgivingFullness", "_pasteDrops", "_peteJukeboxFixed", "_peteJumpedShark", "_petePeeledOut", "_pieDrops", "_piePartsCount", "_pixieCharge", "_pocketProfessorLectures", "_poisonArrows", "_pokeGrowFertilizerDrops", "_poolGames", "_powderedGoldDrops", "_powderedMadnessUses", "_powerfulGloveBatteryPowerUsed", "_powerPillDrops", "_powerPillUses", "_precisionCasts", "_radlibSummons", "_raindohCopiesMade", "_rapidPrototypingUsed", "_raveStealCount", "_reflexHammerUsed", "_resolutionAdv", "_resolutionRareSummons", "_riftletAdv", "_robinEggDrops", "_roboDrops", "_rogueProgramCharge", "_romanticFightsLeft", "_saberForceMonsterCount", "_saberForceUses", "_saberMod", "_saltGrainsConsumed", "_sandwormCharge", "_saplingsPlanted", "_sausageFights", "_sausagesEaten", "_sausagesMade", "_sealFigurineUses", "_sealScreeches", "_sealsSummoned", "_shadowBricksUsed", "_shadowRiftCombats", "_shatteringPunchUsed", "_shortOrderCookCharge", "_shrubCharge", "_sloppyDinerBeachBucks", "_smilesOfMrA", "_smithsnessSummons", "_snojoFreeFights", "_snojoParts", "_snokebombUsed", "_snowconeSummons", "_snowglobeDrops", "_snowSuitCount", "_sourceTerminalDigitizeMonsterCount", "_sourceTerminalDigitizeUses", "_sourceTerminalDuplicateUses", "_sourceTerminalEnhanceUses", "_sourceTerminalExtrudes", "_sourceTerminalPortscanUses", "_spaceFurDropsCrown", "_spacegatePlanetIndex", "_spacegateTurnsLeft", "_spaceJellyfishDrops", "_speakeasyDrinksDrunk", "_speakeasyFreeFights", "_spelunkerCharges", "_spelunkingTalesDrops", "_spikolodonSpikeUses", "_spookyJellyUses", "_stackLumpsUses", "_steamCardDrops", "_stickerSummons", "_stinkyCheeseCount", "_stressBallSqueezes", "_sugarSummons", "_sweatOutSomeBoozeUsed", "_taffyRareSummons", "_taffyYellowSummons", "_thanksgettingFoodsEaten", "_thingfinderCasts", "_thinknerdPackageDrops", "_thorsPliersCrafting", "_timeHelmetAdv", "_timeSpinnerMinutesUsed", "_tokenDrops", "_transponderDrops", "_turkeyBlastersUsed", "_turkeyBooze", "_turkeyMuscle", "_turkeyMyst", "_turkeyMoxie", "_unaccompaniedMinerUsed", "_unconsciousCollectiveCharge", "_universalSeasoningsUsed", "_universeCalculated", "_universeImploded", "_usedReplicaBatoomerang", "_vampyreCloakeFormUses", "_villainLairProgress", "_vitachocCapsulesUsed", "_vmaskAdv", "_voidFreeFights", "_volcanoItem1", "_volcanoItem2", "_volcanoItem3", "_volcanoItemCount1", "_volcanoItemCount2", "_volcanoItemCount3", "_voteFreeFights", "_VYKEACompanionLevel", "_warbearAutoAnvilCrafting", "_waxGlobDrops", "_whiteRiceDrops", "_witchessFights", "_xoHugsUsed", "_yellowPixelDropsCrown", "_zapCount", "_zombieSmashPocketsUsed"];
var monsterProperties = ["beGregariousMonster", "cameraMonster", "chateauMonster", "clumsinessGroveBoss", "crappyCameraMonster", "crudeMonster", "enamorangMonster", "envyfishMonster", "glacierOfJerksBoss", "holdHandsMonster", "iceSculptureMonster", "lastCopyableMonster", "longConMonster", "maelstromOfLoversBoss", "makeFriendsMonster", "merkinLockkeyMonster", "monkeyPointMonster", "monsterHabitatsMonster", "motifMonster", "nosyNoseMonster", "olfactedMonster", "photocopyMonster", "rainDohMonster", "romanticTarget", "rufusDesiredEntity", "rwbMonster", "screencappedMonster", "spookyPuttyMonster", "spookyVHSTapeMonster", "stenchCursedMonster", "superficiallyInterestedMonster", "waxMonster", "yearbookCameraTarget", "_gallapagosMonster", "_jiggleCreamedMonster", "_latteMonster", "_nanorhinoBanishedMonster", "_newYouQuestMonster", "_relativityMonster", "_saberForceMonster", "_sourceTerminalDigitizeMonster", "_voteMonster"];
var locationProperties = ["autumnatonQuestLocation", "currentJunkyardLocation", "doctorBagQuestLocation", "ghostLocation", "guzzlrQuestLocation", "nextSpookyravenElizabethRoom", "nextSpookyravenStephenRoom", "rwbLocation", "sourceOracleTarget", "_floundryBassLocation", "_floundryCarpLocation", "_floundryCodLocation", "_floundryHatchetfishLocation", "_floundryTroutLocation", "_floundryTunaLocation", "_sotParcelLocation"];
var stringProperties = ["autoLogin", "browserBookmarks", "chatFontSize", "combatHotkey0", "combatHotkey1", "combatHotkey2", "combatHotkey3", "combatHotkey4", "combatHotkey5", "combatHotkey6", "combatHotkey7", "combatHotkey8", "combatHotkey9", "commandLineNamespace", "dailyDeedsOptions", "defaultBorderColor", "displayName", "externalEditor", "getBreakfast", "headerStates", "highlightList", "http.proxyHost", "http.proxyPassword", "http.proxyPort", "http.proxyUser", "https.proxyHost", "https.proxyPassword", "https.proxyPort", "https.proxyUser", "initialDesktop", "initialFrames", "lastRelayUpdate", "lastUserAgent", "lastUsername", "logPreferenceChangeFilter", "loginScript", "loginServerName", "loginWindowLogo", "logoutScript", "pingDefaultTestPage", "pingLatest", "pingLoginAbort", "pingLoginCheck", "pingLoginFail", "pingLongest", "pingShortest", "pingTestPage", "previousNotifyList", "previousUpdateVersion", "saveState", "saveStateActive", "scriptList", "swingLookAndFeel", "userAgent", "8BitColor", "afterAdventureScript", "autoOlfact", "autoPutty", "autumnatonUpgrades", "backupCameraMode", "banishedMonsters", "banishedPhyla", "banishingShoutMonsters", "batmanStats", "batmanZone", "batmanUpgrades", "battleAction", "beachHeadsUnlocked", "beforePVPScript", "betweenBattleScript", "boomBoxSong", "breakfastAlways", "breakfastHardcore", "breakfastSoftcore", "buffBotCasting", "buyScript", "cargoPocketsEmptied", "cargoPocketScraps", "chatbotScript", "chatPlayerScript", "chibiName", "choiceAdventureScript", "chosenTrip", "clanFortuneReply1", "clanFortuneReply2", "clanFortuneReply3", "clanFortuneWord1", "clanFortuneWord2", "clanFortuneWord3", "commerceGhostItem", "counterScript", "copperheadClubHazard", "crimbotChassis", "crimbotArm", "crimbotPropulsion", "crystalBallPredictions", "csServicesPerformed", "currentAstralTrip", "currentDistillateMods", "currentEasyBountyItem", "currentHardBountyItem", "currentHippyStore", "currentJunkyardTool", "currentLlamaForm", "currentMood", "currentPVPSeason", "currentPvpVictories", "currentSpecialBountyItem", "currentSITSkill", "customCombatScript", "cyrusAdjectives", "defaultFlowerLossMessage", "defaultFlowerWinMessage", "demonName1", "demonName2", "demonName3", "demonName4", "demonName5", "demonName6", "demonName7", "demonName8", "demonName9", "demonName10", "demonName11", "demonName12", "demonName13", "dinseyGatorStenchDamage", "dinseyRollercoasterStats", "doctorBagQuestItem", "dolphinItem", "duckAreasCleared", "duckAreasSelected", "edPiece", "enamorangMonsterTurn", "ensorcelee", "EVEDirections", "extraCosmeticModifiers", "familiarScript", "forbiddenStores", "gameProBossSpecialPower", "gooseReprocessed", "grimoireSkillsHardcore", "grimoireSkillsSoftcore", "grimstoneMaskPath", "guzzlrQuestClient", "guzzlrQuestBooze", "guzzlrQuestTier", "harvestGardenHardcore", "harvestGardenSoftcore", "hpAutoRecoveryItems", "invalidBuffMessage", "jickSwordModifier", "juneCleaverQueue", "kingLiberatedScript", "lassoTraining", "lastAdventure", "lastBangPotion819", "lastBangPotion820", "lastBangPotion821", "lastBangPotion822", "lastBangPotion823", "lastBangPotion824", "lastBangPotion825", "lastBangPotion826", "lastBangPotion827", "lastChanceBurn", "lastChessboard", "lastCombatEnvironments", "lastDwarfDiceRolls", "lastDwarfDigitRunes", "lastDwarfEquipmentRunes", "lastDwarfFactoryItem118", "lastDwarfFactoryItem119", "lastDwarfFactoryItem120", "lastDwarfFactoryItem360", "lastDwarfFactoryItem361", "lastDwarfFactoryItem362", "lastDwarfFactoryItem363", "lastDwarfFactoryItem364", "lastDwarfFactoryItem365", "lastDwarfFactoryItem910", "lastDwarfFactoryItem3199", "lastDwarfOfficeItem3208", "lastDwarfOfficeItem3209", "lastDwarfOfficeItem3210", "lastDwarfOfficeItem3211", "lastDwarfOfficeItem3212", "lastDwarfOfficeItem3213", "lastDwarfOfficeItem3214", "lastDwarfOreRunes", "lastDwarfHopper1", "lastDwarfHopper2", "lastDwarfHopper3", "lastDwarfHopper4", "lastEncounter", "lastMacroError", "lastMessageId", "lastPaperStrip3144", "lastPaperStrip4138", "lastPaperStrip4139", "lastPaperStrip4140", "lastPaperStrip4141", "lastPaperStrip4142", "lastPaperStrip4143", "lastPaperStrip4144", "lastPirateEphemera", "lastPorkoBoard", "lastPorkoPayouts", "lastPorkoExpected", "lastSlimeVial3885", "lastSlimeVial3886", "lastSlimeVial3887", "lastSlimeVial3888", "lastSlimeVial3889", "lastSlimeVial3890", "lastSlimeVial3891", "lastSlimeVial3892", "lastSlimeVial3893", "lastSlimeVial3894", "lastSlimeVial3895", "lastSlimeVial3896", "latteIngredients", "latteModifier", "latteUnlocks", "libramSkillsHardcore", "libramSkillsSoftcore", "louvreOverride", "lovePotion", "lttQuestName", "maximizerList", "maximizerMRUList", "mayoInMouth", "mayoMinderSetting", "merkinQuestPath", "mineLayout1", "mineLayout2", "mineLayout3", "mineLayout4", "mineLayout5", "mineLayout6", "mpAutoRecoveryItems", "muffinOnOrder", "nextAdventure", "nextDistillateMods", "nextQuantumFamiliarName", "nextQuantumFamiliarOwner", "nsChallenge2", "nsChallenge3", "nsChallenge4", "nsChallenge5", "nsTowerDoorKeysUsed", "oceanAction", "oceanDestination", "parkaMode", "pastaThrall1", "pastaThrall2", "pastaThrall3", "pastaThrall4", "pastaThrall5", "pastaThrall6", "pastaThrall7", "pastaThrall8", "peteMotorbikeTires", "peteMotorbikeGasTank", "peteMotorbikeHeadlight", "peteMotorbikeCowling", "peteMotorbikeMuffler", "peteMotorbikeSeat", "pieStuffing", "plantingDate", "plantingLength", "plantingScript", "plumberCostumeWorn", "pokefamBoosts", "postAscensionScript", "preAscensionScript", "questClumsinessGrove", "questDoctorBag", "questECoBucket", "questESlAudit", "questESlBacteria", "questESlCheeseburger", "questESlCocktail", "questESlDebt", "questESlFish", "questESlMushStash", "questESlSalt", "questESlSprinkles", "questESpClipper", "questESpEVE", "questESpFakeMedium", "questESpGore", "questESpJunglePun", "questESpOutOfOrder", "questESpSerum", "questESpSmokes", "questEStFishTrash", "questEStGiveMeFuel", "questEStNastyBears", "questEStSocialJusticeI", "questEStSocialJusticeII", "questEStSuperLuber", "questEStWorkWithFood", "questEStZippityDooDah", "questEUNewYou", "questF01Primordial", "questF02Hyboria", "questF03Future", "questF04Elves", "questF05Clancy", "questG01Meatcar", "questG02Whitecastle", "questG03Ego", "questG04Nemesis", "questG05Dark", "questG06Delivery", "questG07Myst", "questG08Moxie", "questG09Muscle", "questGlacierOfJerks", "questGuzzlr", "questI01Scapegoat", "questI02Beat", "questL02Larva", "questL03Rat", "questL04Bat", "questL05Goblin", "questL06Friar", "questL07Cyrptic", "questL08Trapper", "questL09Topping", "questL10Garbage", "questL11Black", "questL11Business", "questL11Curses", "questL11Desert", "questL11Doctor", "questL11MacGuffin", "questL11Manor", "questL11Palindome", "questL11Pyramid", "questL11Ron", "questL11Shen", "questL11Spare", "questL11Worship", "questL12HippyFrat", "questL12War", "questL13Final", "questL13Warehouse", "questLTTQuestByWire", "questM01Untinker", "questM02Artist", "questM03Bugbear", "questM05Toot", "questM06Gourd", "questM07Hammer", "questM08Baker", "questM09Rocks", "questM10Azazel", "questM11Postal", "questM12Pirate", "questM13Escape", "questM14Bounty", "questM15Lol", "questM16Temple", "questM17Babies", "questM18Swamp", "questM19Hippy", "questM20Necklace", "questM21Dance", "questM22Shirt", "questM23Meatsmith", "questM24Doc", "questM25Armorer", "questM26Oracle", "questMaelstromOfLovers", "questPAGhost", "questRufus", "questS01OldGuy", "questS02Monkees", "raveCombo1", "raveCombo2", "raveCombo3", "raveCombo4", "raveCombo5", "raveCombo6", "recoveryScript", "relayCounters", "retroCapeSuperhero", "retroCapeWashingInstructions", "royalty", "rufusDesiredArtifact", "rufusDesiredItems", "rufusQuestTarget", "rufusQuestType", "scriptMRUList", "seahorseName", "shadowLabyrinthGoal", "shadowRiftIngress", "shenQuestItem", "shrubGarland", "shrubGifts", "shrubLights", "shrubTopper", "sideDefeated", "sidequestArenaCompleted", "sidequestFarmCompleted", "sidequestJunkyardCompleted", "sidequestLighthouseCompleted", "sidequestNunsCompleted", "sidequestOrchardCompleted", "skateParkStatus", "snowsuit", "sourceTerminalChips", "sourceTerminalEducate1", "sourceTerminalEducate2", "sourceTerminalEnquiry", "sourceTerminalEducateKnown", "sourceTerminalEnhanceKnown", "sourceTerminalEnquiryKnown", "sourceTerminalExtrudeKnown", "spadingData", "spadingScript", "speakeasyName", "spelunkyStatus", "spelunkyUpgrades", "spookyravenRecipeUsed", "stationaryButton1", "stationaryButton2", "stationaryButton3", "stationaryButton4", "stationaryButton5", "streamCrossDefaultTarget", "sweetSynthesisBlacklist", "telescope1", "telescope2", "telescope3", "telescope4", "telescope5", "testudinalTeachings", "textColors", "thanksMessage", "tomeSkillsHardcore", "tomeSkillsSoftcore", "trackVoteMonster", "trainsetConfiguration", "trapperOre", "umbrellaState", "umdLastObtained", "vintnerWineEffect", "vintnerWineName", "vintnerWineType", "violetFogLayout", "volcanoMaze1", "volcanoMaze2", "volcanoMaze3", "volcanoMaze4", "volcanoMaze5", "walfordBucketItem", "warProgress", "watchedPreferences", "workteaClue", "yourFavoriteBird", "yourFavoriteBirdMods", "youRobotCPUUpgrades", "_bastilleBoosts", "_bastilleChoice1", "_bastilleChoice2", "_bastilleChoice3", "_bastilleCurrentStyles", "_bastilleEnemyCastle", "_bastilleEnemyName", "_bastilleLastBattleResults", "_bastilleLastEncounter", "_bastilleStats", "_beachHeadsUsed", "_beachLayout", "_beachMinutes", "_birdOfTheDay", "_birdOfTheDayMods", "_bittycar", "_campAwaySmileBuffSign", "_citizenZone", "_citizenZoneMods", "_cloudTalkMessage", "_cloudTalkSmoker", "_coatOfPaintModifier", "_dailySpecial", "_deckCardsSeen", "_feastedFamiliars", "_floristPlantsUsed", "_frAreasUnlocked", "_frHoursLeft", "_frMonstersKilled", "_horsery", "_horseryCrazyMox", "_horseryCrazyMus", "_horseryCrazyMys", "_horseryCrazyName", "_horseryCurrentName", "_horseryDarkName", "_horseryNormalName", "_horseryPaleName", "_jickJarAvailable", "_jiggleCheesedMonsters", "_lastCombatStarted", "_lastPirateRealmIsland", "_locketMonstersFought", "_mummeryMods", "_mummeryUses", "_newYouQuestSkill", "_noHatModifier", "_pantogramModifier", "_pottedPowerPlant", "_questESp", "_questPartyFair", "_questPartyFairProgress", "_questPartyFairQuest", "_roboDrinks", "_roninStoragePulls", "_spacegateAnimalLife", "_spacegateCoordinates", "_spacegateGear", "_spacegateHazards", "_spacegateIntelligentLife", "_spacegatePlanetName", "_spacegatePlantLife", "_stolenAccordions", "_tempRelayCounters", "_timeSpinnerFoodAvailable", "_unknownEasyBountyItem", "_unknownHardBountyItem", "_unknownSpecialBountyItem", "_untakenEasyBountyItem", "_untakenHardBountyItem", "_untakenSpecialBountyItem", "_userMods", "_villainLairColor", "_villainLairKey", "_voteLocal1", "_voteLocal2", "_voteLocal3", "_voteLocal4", "_voteMonster1", "_voteMonster2", "_voteModifier", "_VYKEACompanionType", "_VYKEACompanionRune", "_VYKEACompanionName"];
var numericOrStringProperties = ["statusEngineering", "statusGalley", "statusMedbay", "statusMorgue", "statusNavigation", "statusScienceLab", "statusSonar", "statusSpecialOps", "statusWasteProcessing", "choiceAdventure2", "choiceAdventure3", "choiceAdventure4", "choiceAdventure5", "choiceAdventure6", "choiceAdventure7", "choiceAdventure8", "choiceAdventure9", "choiceAdventure10", "choiceAdventure11", "choiceAdventure12", "choiceAdventure14", "choiceAdventure15", "choiceAdventure16", "choiceAdventure17", "choiceAdventure18", "choiceAdventure19", "choiceAdventure20", "choiceAdventure21", "choiceAdventure22", "choiceAdventure23", "choiceAdventure24", "choiceAdventure25", "choiceAdventure26", "choiceAdventure27", "choiceAdventure28", "choiceAdventure29", "choiceAdventure40", "choiceAdventure41", "choiceAdventure42", "choiceAdventure45", "choiceAdventure46", "choiceAdventure47", "choiceAdventure71", "choiceAdventure72", "choiceAdventure73", "choiceAdventure74", "choiceAdventure75", "choiceAdventure76", "choiceAdventure77", "choiceAdventure86", "choiceAdventure87", "choiceAdventure88", "choiceAdventure89", "choiceAdventure90", "choiceAdventure91", "choiceAdventure105", "choiceAdventure106", "choiceAdventure107", "choiceAdventure108", "choiceAdventure109", "choiceAdventure110", "choiceAdventure111", "choiceAdventure112", "choiceAdventure113", "choiceAdventure114", "choiceAdventure115", "choiceAdventure116", "choiceAdventure117", "choiceAdventure118", "choiceAdventure120", "choiceAdventure123", "choiceAdventure125", "choiceAdventure126", "choiceAdventure127", "choiceAdventure129", "choiceAdventure131", "choiceAdventure132", "choiceAdventure135", "choiceAdventure136", "choiceAdventure137", "choiceAdventure138", "choiceAdventure139", "choiceAdventure140", "choiceAdventure141", "choiceAdventure142", "choiceAdventure143", "choiceAdventure144", "choiceAdventure145", "choiceAdventure146", "choiceAdventure147", "choiceAdventure148", "choiceAdventure149", "choiceAdventure151", "choiceAdventure152", "choiceAdventure153", "choiceAdventure154", "choiceAdventure155", "choiceAdventure156", "choiceAdventure157", "choiceAdventure158", "choiceAdventure159", "choiceAdventure160", "choiceAdventure161", "choiceAdventure162", "choiceAdventure163", "choiceAdventure164", "choiceAdventure165", "choiceAdventure166", "choiceAdventure167", "choiceAdventure168", "choiceAdventure169", "choiceAdventure170", "choiceAdventure171", "choiceAdventure172", "choiceAdventure177", "choiceAdventure178", "choiceAdventure180", "choiceAdventure181", "choiceAdventure182", "choiceAdventure184", "choiceAdventure185", "choiceAdventure186", "choiceAdventure187", "choiceAdventure188", "choiceAdventure189", "choiceAdventure191", "choiceAdventure197", "choiceAdventure198", "choiceAdventure199", "choiceAdventure200", "choiceAdventure201", "choiceAdventure202", "choiceAdventure203", "choiceAdventure204", "choiceAdventure205", "choiceAdventure206", "choiceAdventure207", "choiceAdventure208", "choiceAdventure211", "choiceAdventure212", "choiceAdventure213", "choiceAdventure214", "choiceAdventure215", "choiceAdventure216", "choiceAdventure217", "choiceAdventure218", "choiceAdventure219", "choiceAdventure220", "choiceAdventure221", "choiceAdventure222", "choiceAdventure223", "choiceAdventure224", "choiceAdventure225", "choiceAdventure230", "choiceAdventure272", "choiceAdventure273", "choiceAdventure276", "choiceAdventure277", "choiceAdventure278", "choiceAdventure279", "choiceAdventure280", "choiceAdventure281", "choiceAdventure282", "choiceAdventure283", "choiceAdventure284", "choiceAdventure285", "choiceAdventure286", "choiceAdventure287", "choiceAdventure288", "choiceAdventure289", "choiceAdventure290", "choiceAdventure291", "choiceAdventure292", "choiceAdventure293", "choiceAdventure294", "choiceAdventure295", "choiceAdventure296", "choiceAdventure297", "choiceAdventure298", "choiceAdventure299", "choiceAdventure302", "choiceAdventure303", "choiceAdventure304", "choiceAdventure305", "choiceAdventure306", "choiceAdventure307", "choiceAdventure308", "choiceAdventure309", "choiceAdventure310", "choiceAdventure311", "choiceAdventure317", "choiceAdventure318", "choiceAdventure319", "choiceAdventure320", "choiceAdventure321", "choiceAdventure322", "choiceAdventure326", "choiceAdventure327", "choiceAdventure328", "choiceAdventure329", "choiceAdventure330", "choiceAdventure331", "choiceAdventure332", "choiceAdventure333", "choiceAdventure334", "choiceAdventure335", "choiceAdventure336", "choiceAdventure337", "choiceAdventure338", "choiceAdventure339", "choiceAdventure340", "choiceAdventure341", "choiceAdventure342", "choiceAdventure343", "choiceAdventure344", "choiceAdventure345", "choiceAdventure346", "choiceAdventure347", "choiceAdventure348", "choiceAdventure349", "choiceAdventure350", "choiceAdventure351", "choiceAdventure352", "choiceAdventure353", "choiceAdventure354", "choiceAdventure355", "choiceAdventure356", "choiceAdventure357", "choiceAdventure358", "choiceAdventure360", "choiceAdventure361", "choiceAdventure362", "choiceAdventure363", "choiceAdventure364", "choiceAdventure365", "choiceAdventure366", "choiceAdventure367", "choiceAdventure372", "choiceAdventure376", "choiceAdventure387", "choiceAdventure388", "choiceAdventure389", "choiceAdventure390", "choiceAdventure391", "choiceAdventure392", "choiceAdventure393", "choiceAdventure395", "choiceAdventure396", "choiceAdventure397", "choiceAdventure398", "choiceAdventure399", "choiceAdventure400", "choiceAdventure401", "choiceAdventure402", "choiceAdventure403", "choiceAdventure423", "choiceAdventure424", "choiceAdventure425", "choiceAdventure426", "choiceAdventure427", "choiceAdventure428", "choiceAdventure429", "choiceAdventure430", "choiceAdventure431", "choiceAdventure432", "choiceAdventure433", "choiceAdventure435", "choiceAdventure438", "choiceAdventure439", "choiceAdventure442", "choiceAdventure444", "choiceAdventure445", "choiceAdventure446", "choiceAdventure447", "choiceAdventure448", "choiceAdventure449", "choiceAdventure451", "choiceAdventure452", "choiceAdventure453", "choiceAdventure454", "choiceAdventure455", "choiceAdventure456", "choiceAdventure457", "choiceAdventure458", "choiceAdventure460", "choiceAdventure461", "choiceAdventure462", "choiceAdventure463", "choiceAdventure464", "choiceAdventure465", "choiceAdventure467", "choiceAdventure468", "choiceAdventure469", "choiceAdventure470", "choiceAdventure471", "choiceAdventure472", "choiceAdventure473", "choiceAdventure474", "choiceAdventure475", "choiceAdventure477", "choiceAdventure478", "choiceAdventure480", "choiceAdventure483", "choiceAdventure484", "choiceAdventure485", "choiceAdventure486", "choiceAdventure488", "choiceAdventure489", "choiceAdventure490", "choiceAdventure491", "choiceAdventure496", "choiceAdventure497", "choiceAdventure502", "choiceAdventure503", "choiceAdventure504", "choiceAdventure505", "choiceAdventure506", "choiceAdventure507", "choiceAdventure509", "choiceAdventure510", "choiceAdventure511", "choiceAdventure512", "choiceAdventure513", "choiceAdventure514", "choiceAdventure515", "choiceAdventure517", "choiceAdventure518", "choiceAdventure519", "choiceAdventure521", "choiceAdventure522", "choiceAdventure523", "choiceAdventure527", "choiceAdventure528", "choiceAdventure529", "choiceAdventure530", "choiceAdventure531", "choiceAdventure532", "choiceAdventure533", "choiceAdventure534", "choiceAdventure535", "choiceAdventure536", "choiceAdventure538", "choiceAdventure539", "choiceAdventure542", "choiceAdventure543", "choiceAdventure544", "choiceAdventure546", "choiceAdventure548", "choiceAdventure549", "choiceAdventure550", "choiceAdventure551", "choiceAdventure552", "choiceAdventure553", "choiceAdventure554", "choiceAdventure556", "choiceAdventure557", "choiceAdventure558", "choiceAdventure559", "choiceAdventure560", "choiceAdventure561", "choiceAdventure562", "choiceAdventure563", "choiceAdventure564", "choiceAdventure565", "choiceAdventure566", "choiceAdventure567", "choiceAdventure568", "choiceAdventure569", "choiceAdventure571", "choiceAdventure572", "choiceAdventure573", "choiceAdventure574", "choiceAdventure575", "choiceAdventure576", "choiceAdventure577", "choiceAdventure578", "choiceAdventure579", "choiceAdventure581", "choiceAdventure582", "choiceAdventure583", "choiceAdventure584", "choiceAdventure594", "choiceAdventure595", "choiceAdventure596", "choiceAdventure597", "choiceAdventure598", "choiceAdventure599", "choiceAdventure600", "choiceAdventure603", "choiceAdventure604", "choiceAdventure616", "choiceAdventure634", "choiceAdventure640", "choiceAdventure654", "choiceAdventure655", "choiceAdventure656", "choiceAdventure657", "choiceAdventure658", "choiceAdventure664", "choiceAdventure669", "choiceAdventure670", "choiceAdventure671", "choiceAdventure672", "choiceAdventure673", "choiceAdventure674", "choiceAdventure675", "choiceAdventure676", "choiceAdventure677", "choiceAdventure678", "choiceAdventure679", "choiceAdventure681", "choiceAdventure683", "choiceAdventure684", "choiceAdventure685", "choiceAdventure686", "choiceAdventure687", "choiceAdventure688", "choiceAdventure689", "choiceAdventure690", "choiceAdventure691", "choiceAdventure692", "choiceAdventure693", "choiceAdventure694", "choiceAdventure695", "choiceAdventure696", "choiceAdventure697", "choiceAdventure698", "choiceAdventure700", "choiceAdventure701", "choiceAdventure705", "choiceAdventure706", "choiceAdventure707", "choiceAdventure708", "choiceAdventure709", "choiceAdventure710", "choiceAdventure711", "choiceAdventure712", "choiceAdventure713", "choiceAdventure714", "choiceAdventure715", "choiceAdventure716", "choiceAdventure717", "choiceAdventure721", "choiceAdventure725", "choiceAdventure729", "choiceAdventure733", "choiceAdventure737", "choiceAdventure741", "choiceAdventure745", "choiceAdventure749", "choiceAdventure753", "choiceAdventure771", "choiceAdventure778", "choiceAdventure780", "choiceAdventure781", "choiceAdventure783", "choiceAdventure784", "choiceAdventure785", "choiceAdventure786", "choiceAdventure787", "choiceAdventure788", "choiceAdventure789", "choiceAdventure791", "choiceAdventure793", "choiceAdventure794", "choiceAdventure795", "choiceAdventure796", "choiceAdventure797", "choiceAdventure803", "choiceAdventure805", "choiceAdventure808", "choiceAdventure809", "choiceAdventure813", "choiceAdventure815", "choiceAdventure830", "choiceAdventure832", "choiceAdventure833", "choiceAdventure834", "choiceAdventure835", "choiceAdventure837", "choiceAdventure838", "choiceAdventure839", "choiceAdventure840", "choiceAdventure841", "choiceAdventure842", "choiceAdventure851", "choiceAdventure852", "choiceAdventure853", "choiceAdventure854", "choiceAdventure855", "choiceAdventure856", "choiceAdventure857", "choiceAdventure858", "choiceAdventure866", "choiceAdventure873", "choiceAdventure875", "choiceAdventure876", "choiceAdventure877", "choiceAdventure878", "choiceAdventure879", "choiceAdventure880", "choiceAdventure881", "choiceAdventure882", "choiceAdventure888", "choiceAdventure889", "choiceAdventure918", "choiceAdventure919", "choiceAdventure920", "choiceAdventure921", "choiceAdventure923", "choiceAdventure924", "choiceAdventure925", "choiceAdventure926", "choiceAdventure927", "choiceAdventure928", "choiceAdventure929", "choiceAdventure930", "choiceAdventure931", "choiceAdventure932", "choiceAdventure940", "choiceAdventure941", "choiceAdventure942", "choiceAdventure943", "choiceAdventure944", "choiceAdventure945", "choiceAdventure946", "choiceAdventure950", "choiceAdventure955", "choiceAdventure957", "choiceAdventure958", "choiceAdventure959", "choiceAdventure960", "choiceAdventure961", "choiceAdventure962", "choiceAdventure963", "choiceAdventure964", "choiceAdventure965", "choiceAdventure966", "choiceAdventure970", "choiceAdventure973", "choiceAdventure974", "choiceAdventure975", "choiceAdventure976", "choiceAdventure977", "choiceAdventure979", "choiceAdventure980", "choiceAdventure981", "choiceAdventure982", "choiceAdventure983", "choiceAdventure988", "choiceAdventure989", "choiceAdventure993", "choiceAdventure998", "choiceAdventure1000", "choiceAdventure1003", "choiceAdventure1005", "choiceAdventure1006", "choiceAdventure1007", "choiceAdventure1008", "choiceAdventure1009", "choiceAdventure1010", "choiceAdventure1011", "choiceAdventure1012", "choiceAdventure1013", "choiceAdventure1015", "choiceAdventure1016", "choiceAdventure1017", "choiceAdventure1018", "choiceAdventure1019", "choiceAdventure1020", "choiceAdventure1021", "choiceAdventure1022", "choiceAdventure1023", "choiceAdventure1026", "choiceAdventure1027", "choiceAdventure1028", "choiceAdventure1029", "choiceAdventure1030", "choiceAdventure1031", "choiceAdventure1032", "choiceAdventure1033", "choiceAdventure1034", "choiceAdventure1035", "choiceAdventure1036", "choiceAdventure1037", "choiceAdventure1038", "choiceAdventure1039", "choiceAdventure1040", "choiceAdventure1041", "choiceAdventure1042", "choiceAdventure1044", "choiceAdventure1045", "choiceAdventure1046", "choiceAdventure1048", "choiceAdventure1051", "choiceAdventure1052", "choiceAdventure1053", "choiceAdventure1054", "choiceAdventure1055", "choiceAdventure1056", "choiceAdventure1057", "choiceAdventure1059", "choiceAdventure1060", "choiceAdventure1061", "choiceAdventure1062", "choiceAdventure1065", "choiceAdventure1067", "choiceAdventure1068", "choiceAdventure1069", "choiceAdventure1070", "choiceAdventure1071", "choiceAdventure1073", "choiceAdventure1077", "choiceAdventure1080", "choiceAdventure1081", "choiceAdventure1082", "choiceAdventure1083", "choiceAdventure1084", "choiceAdventure1085", "choiceAdventure1091", "choiceAdventure1094", "choiceAdventure1095", "choiceAdventure1096", "choiceAdventure1097", "choiceAdventure1102", "choiceAdventure1106", "choiceAdventure1107", "choiceAdventure1108", "choiceAdventure1110", "choiceAdventure1114", "choiceAdventure1115", "choiceAdventure1116", "choiceAdventure1118", "choiceAdventure1119", "choiceAdventure1120", "choiceAdventure1121", "choiceAdventure1122", "choiceAdventure1123", "choiceAdventure1171", "choiceAdventure1172", "choiceAdventure1173", "choiceAdventure1174", "choiceAdventure1175", "choiceAdventure1193", "choiceAdventure1195", "choiceAdventure1196", "choiceAdventure1197", "choiceAdventure1198", "choiceAdventure1199", "choiceAdventure1202", "choiceAdventure1203", "choiceAdventure1204", "choiceAdventure1205", "choiceAdventure1206", "choiceAdventure1207", "choiceAdventure1208", "choiceAdventure1209", "choiceAdventure1210", "choiceAdventure1211", "choiceAdventure1212", "choiceAdventure1213", "choiceAdventure1214", "choiceAdventure1215", "choiceAdventure1219", "choiceAdventure1222", "choiceAdventure1223", "choiceAdventure1224", "choiceAdventure1225", "choiceAdventure1226", "choiceAdventure1227", "choiceAdventure1228", "choiceAdventure1229", "choiceAdventure1236", "choiceAdventure1237", "choiceAdventure1238", "choiceAdventure1239", "choiceAdventure1240", "choiceAdventure1241", "choiceAdventure1242", "choiceAdventure1243", "choiceAdventure1244", "choiceAdventure1245", "choiceAdventure1246", "choiceAdventure1247", "choiceAdventure1248", "choiceAdventure1249", "choiceAdventure1250", "choiceAdventure1251", "choiceAdventure1252", "choiceAdventure1253", "choiceAdventure1254", "choiceAdventure1255", "choiceAdventure1256", "choiceAdventure1266", "choiceAdventure1280", "choiceAdventure1281", "choiceAdventure1282", "choiceAdventure1283", "choiceAdventure1284", "choiceAdventure1285", "choiceAdventure1286", "choiceAdventure1287", "choiceAdventure1288", "choiceAdventure1289", "choiceAdventure1290", "choiceAdventure1291", "choiceAdventure1292", "choiceAdventure1293", "choiceAdventure1294", "choiceAdventure1295", "choiceAdventure1296", "choiceAdventure1297", "choiceAdventure1298", "choiceAdventure1299", "choiceAdventure1300", "choiceAdventure1301", "choiceAdventure1302", "choiceAdventure1303", "choiceAdventure1304", "choiceAdventure1305", "choiceAdventure1307", "choiceAdventure1310", "choiceAdventure1312", "choiceAdventure1313", "choiceAdventure1314", "choiceAdventure1315", "choiceAdventure1316", "choiceAdventure1317", "choiceAdventure1318", "choiceAdventure1319", "choiceAdventure1321", "choiceAdventure1322", "choiceAdventure1323", "choiceAdventure1324", "choiceAdventure1325", "choiceAdventure1326", "choiceAdventure1327", "choiceAdventure1328", "choiceAdventure1332", "choiceAdventure1333", "choiceAdventure1335", "choiceAdventure1340", "choiceAdventure1341", "choiceAdventure1345", "choiceAdventure1389", "choiceAdventure1392", "choiceAdventure1397", "choiceAdventure1399", "choiceAdventure1405", "choiceAdventure1411", "choiceAdventure1415", "choiceAdventure1427", "choiceAdventure1428", "choiceAdventure1429", "choiceAdventure1430", "choiceAdventure1431", "choiceAdventure1432", "choiceAdventure1433", "choiceAdventure1434", "choiceAdventure1436", "choiceAdventure1460", "choiceAdventure1461", "choiceAdventure1467", "choiceAdventure1468", "choiceAdventure1469", "choiceAdventure1470", "choiceAdventure1471", "choiceAdventure1472", "choiceAdventure1473", "choiceAdventure1474", "choiceAdventure1475", "choiceAdventure1486", "choiceAdventure1487", "choiceAdventure1488", "choiceAdventure1489", "choiceAdventure1491", "choiceAdventure1494", "choiceAdventure1505"];
var familiarProperties = ["commaFamiliar", "nextQuantumFamiliar", "stillsuitFamiliar"];
var statProperties = ["nsChallenge1", "snojoSetting"];
var phylumProperties = ["dnaSyringe", "locketPhylum", "redSnapperPhylum", "_circadianRhythmsPhylum"];

// node_modules/libram/dist/propertyTyping.js
var booleanPropertiesSet = new Set(booleanProperties);
var numericPropertiesSet = new Set(numericProperties);
var numericOrStringPropertiesSet = new Set(numericOrStringProperties);
var stringPropertiesSet = new Set(stringProperties);
var locationPropertiesSet = new Set(locationProperties);
var monsterPropertiesSet = new Set(monsterProperties);
var familiarPropertiesSet = new Set(familiarProperties);
var statPropertiesSet = new Set(statProperties);
var phylumPropertiesSet = new Set(phylumProperties);
function isBooleanProperty(property) {
  return booleanPropertiesSet.has(property);
}
function isNumericProperty(property) {
  return numericPropertiesSet.has(property);
}
function isNumericOrStringProperty(property) {
  return numericOrStringPropertiesSet.has(property);
}
function isStringProperty(property) {
  return stringPropertiesSet.has(property);
}
function isLocationProperty(property) {
  return locationPropertiesSet.has(property);
}
function isMonsterProperty(property) {
  return monsterPropertiesSet.has(property);
}
function isFamiliarProperty(property) {
  return familiarPropertiesSet.has(property);
}
function isStatProperty(property) {
  return statPropertiesSet.has(property);
}
function isPhylumProperty(property) {
  return phylumPropertiesSet.has(property);
}

// node_modules/libram/dist/property.js
function ownKeys2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys2(Object(source), true).forEach(function(key) {
      _defineProperty3(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys2(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _classCallCheck3(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties3(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey3(descriptor.key), descriptor);
  }
}
function _createClass3(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties3(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties3(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty3(obj, key, value) {
  key = _toPropertyKey3(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey3(arg) {
  var key = _toPrimitive3(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive3(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray2(arr, i) || _nonIterableRest();
}
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray2(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray2(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray2(o, minLen);
}
function _arrayLikeToArray2(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles(arr) {
  if (Array.isArray(arr))
    return arr;
}
var createPropertyGetter = function(transform) {
  return function(property, default_) {
    var value = (0, import_kolmafia3.getProperty)(property);
    if (default_ !== void 0 && value === "") {
      return default_;
    }
    return transform(value, property);
  };
};
var createMafiaClassPropertyGetter = function(Type, toType) {
  return createPropertyGetter(function(value) {
    if (value === "")
      return null;
    var v = toType(value);
    return v === Type.none ? null : v;
  });
};
var getString = createPropertyGetter(function(value) {
  return value;
});
var getCommaSeparated = createPropertyGetter(function(value) {
  return value.split(/, ?/);
});
var getBoolean = createPropertyGetter(function(value) {
  return value === "true";
});
var getNumber = createPropertyGetter(function(value) {
  return Number(value);
});
var getBounty = createMafiaClassPropertyGetter(import_kolmafia3.Bounty, import_kolmafia3.toBounty);
var getClass = createMafiaClassPropertyGetter(import_kolmafia3.Class, import_kolmafia3.toClass);
var getCoinmaster = createMafiaClassPropertyGetter(import_kolmafia3.Coinmaster, import_kolmafia3.toCoinmaster);
var getEffect = createMafiaClassPropertyGetter(import_kolmafia3.Effect, import_kolmafia3.toEffect);
var getElement = createMafiaClassPropertyGetter(import_kolmafia3.Element, import_kolmafia3.toElement);
var getFamiliar = createMafiaClassPropertyGetter(import_kolmafia3.Familiar, import_kolmafia3.toFamiliar);
var getItem = createMafiaClassPropertyGetter(import_kolmafia3.Item, import_kolmafia3.toItem);
var getLocation = createMafiaClassPropertyGetter(import_kolmafia3.Location, import_kolmafia3.toLocation);
var getMonster = createMafiaClassPropertyGetter(import_kolmafia3.Monster, import_kolmafia3.toMonster);
var getPhylum = createMafiaClassPropertyGetter(import_kolmafia3.Phylum, import_kolmafia3.toPhylum);
var getServant = createMafiaClassPropertyGetter(import_kolmafia3.Servant, import_kolmafia3.toServant);
var getSkill = createMafiaClassPropertyGetter(import_kolmafia3.Skill, import_kolmafia3.toSkill);
var getSlot = createMafiaClassPropertyGetter(import_kolmafia3.Slot, import_kolmafia3.toSlot);
var getStat = createMafiaClassPropertyGetter(import_kolmafia3.Stat, import_kolmafia3.toStat);
var getThrall = createMafiaClassPropertyGetter(import_kolmafia3.Thrall, import_kolmafia3.toThrall);
function get(property, _default) {
  var value = getString(property);
  if (isBooleanProperty(property)) {
    var _getBoolean;
    return (_getBoolean = getBoolean(property, _default)) !== null && _getBoolean !== void 0 ? _getBoolean : false;
  } else if (isNumericProperty(property)) {
    var _getNumber;
    return (_getNumber = getNumber(property, _default)) !== null && _getNumber !== void 0 ? _getNumber : 0;
  } else if (isNumericOrStringProperty(property)) {
    return value.match(/^\d+$/) ? parseInt(value) : value;
  } else if (isLocationProperty(property)) {
    return getLocation(property, _default);
  } else if (isMonsterProperty(property)) {
    return getMonster(property, _default);
  } else if (isFamiliarProperty(property)) {
    return getFamiliar(property, _default);
  } else if (isStatProperty(property)) {
    return getStat(property, _default);
  } else if (isPhylumProperty(property)) {
    return getPhylum(property, _default);
  } else if (isStringProperty(property)) {
    return value;
  }
  if (_default instanceof import_kolmafia3.Location) {
    return getLocation(property, _default);
  } else if (_default instanceof import_kolmafia3.Monster) {
    return getMonster(property, _default);
  } else if (_default instanceof import_kolmafia3.Familiar) {
    return getFamiliar(property, _default);
  } else if (_default instanceof import_kolmafia3.Stat) {
    return getStat(property, _default);
  } else if (_default instanceof import_kolmafia3.Phylum) {
    return getPhylum(property, _default);
  } else if (typeof _default === "boolean") {
    return value === "true" ? true : value === "false" ? false : _default;
  } else if (typeof _default === "number") {
    return value === "" ? _default : parseInt(value);
  } else if (value === "") {
    return _default === void 0 ? "" : _default;
  } else {
    return value;
  }
}
function _set(property, value) {
  var stringValue = value === null ? "" : value.toString();
  (0, import_kolmafia3.setProperty)(property, stringValue);
  return value;
}
function increment(property) {
  var delta = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  var max = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Infinity;
  var value = get(property);
  if (!isNumericProperty(property))
    return value;
  var nextValue = Math.min(max, value + delta);
  return _set(property, nextValue);
}
function decrement(property) {
  var delta = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  var min = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Infinity;
  var value = get(property);
  if (!isNumericProperty(property))
    return value;
  var nextValue = Math.max(min, value - delta);
  return _set(property, nextValue);
}
function setProperties(properties) {
  for (var _i = 0, _Object$entries = Object.entries(properties); _i < _Object$entries.length; _i++) {
    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), prop = _Object$entries$_i[0], value = _Object$entries$_i[1];
    _set(prop, value);
  }
}
function withProperties(properties, callback) {
  var propertiesBackup = Object.fromEntries(Object.entries(properties).map(function(_ref) {
    var _ref2 = _slicedToArray(_ref, 1), prop = _ref2[0];
    return [prop, get(prop)];
  }));
  setProperties(properties);
  try {
    return callback();
  } finally {
    setProperties(propertiesBackup);
  }
}
function withProperty(property, value, callback) {
  return withProperties(_defineProperty3({}, property, value), callback);
}
function withChoices(choices2, callback) {
  var properties = Object.fromEntries(Object.entries(choices2).map(function(_ref3) {
    var _ref4 = _slicedToArray(_ref3, 2), choice = _ref4[0], option = _ref4[1];
    return ["choiceAdventure".concat(choice), option];
  }));
  return withProperties(properties, callback);
}
function withChoice(choice, value, callback) {
  return withChoices(_defineProperty3({}, choice, value), callback);
}
var PropertiesManager = /* @__PURE__ */ function() {
  function PropertiesManager2() {
    _classCallCheck3(this, PropertiesManager2);
    _defineProperty3(this, "properties", {});
  }
  _createClass3(PropertiesManager2, [{
    key: "storedValues",
    get: function get4() {
      return this.properties;
    }
    /**
     * Sets a collection of properties to the given values, storing the old values.
     *
     * @param propertiesToSet A Properties object, keyed by property name.
     */
  }, {
    key: "set",
    value: function set2(propertiesToSet) {
      for (var _i2 = 0, _Object$entries2 = Object.entries(propertiesToSet); _i2 < _Object$entries2.length; _i2++) {
        var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2), propertyName = _Object$entries2$_i[0], propertyValue = _Object$entries2$_i[1];
        if (this.properties[propertyName] === void 0) {
          this.properties[propertyName] = get(propertyName);
        }
        _set(propertyName, propertyValue);
      }
    }
    /**
     * Sets a collection of choice adventure properties to the given values, storing the old values.
     *
     * @param choicesToSet An object keyed by choice adventure number.
     */
  }, {
    key: "setChoices",
    value: function setChoices(choicesToSet) {
      this.set(Object.fromEntries(Object.entries(choicesToSet).map(function(_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2), choiceNumber = _ref6[0], choiceValue = _ref6[1];
        return ["choiceAdventure".concat(choiceNumber), choiceValue];
      })));
    }
    /**
     * Sets a single choice adventure property to the given value, storing the old value.
     *
     * @param choiceToSet The number of the choice adventure to set the property for.
     * @param value The value to assign to that choice adventure.
     */
  }, {
    key: "setChoice",
    value: function setChoice2(choiceToSet, value) {
      this.setChoices(_defineProperty3({}, choiceToSet, value));
    }
    /**
     * Resets the given properties to their original stored value. Does not delete entries from the manager.
     *
     * @param properties Collection of properties to reset.
     */
  }, {
    key: "reset",
    value: function reset() {
      for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {
        properties[_key] = arguments[_key];
      }
      for (var _i3 = 0, _properties = properties; _i3 < _properties.length; _i3++) {
        var property = _properties[_i3];
        var value = this.properties[property];
        if (value) {
          _set(property, value);
        }
      }
    }
    /**
     * Iterates over all stored values, setting each property back to its original stored value. Does not delete entries from the manager.
     */
  }, {
    key: "resetAll",
    value: function resetAll() {
      setProperties(this.properties);
    }
    /**
     * Stops storing the original values of inputted properties.
     *
     * @param properties Properties for the manager to forget.
     */
  }, {
    key: "clear",
    value: function clear() {
      for (var _len2 = arguments.length, properties = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        properties[_key2] = arguments[_key2];
      }
      for (var _i4 = 0, _properties2 = properties; _i4 < _properties2.length; _i4++) {
        var property = _properties2[_i4];
        if (this.properties[property]) {
          delete this.properties[property];
        }
      }
    }
    /**
     * Clears all properties.
     */
  }, {
    key: "clearAll",
    value: function clearAll() {
      this.properties = {};
    }
    /**
     * Increases a numeric property to the given value if necessary.
     *
     * @param property The numeric property we want to potentially raise.
     * @param value The minimum value we want that property to have.
     * @returns Whether we needed to change the property.
     */
  }, {
    key: "setMinimumValue",
    value: function setMinimumValue(property, value) {
      if (get(property, 0) < value) {
        this.set(_defineProperty3({}, property, value));
        return true;
      }
      return false;
    }
    /**
     * Decrease a numeric property to the given value if necessary.
     *
     * @param property The numeric property we want to potentially lower.
     * @param value The maximum value we want that property to have.
     * @returns Whether we needed to change the property.
     */
  }, {
    key: "setMaximumValue",
    value: function setMaximumValue(property, value) {
      if (get(property, 0) > value) {
        this.set(_defineProperty3({}, property, value));
        return true;
      }
      return false;
    }
    /**
     * Creates a new PropertiesManager with identical stored values to this one.
     *
     * @returns A new PropertiesManager, with identical stored values to this one.
     */
  }, {
    key: "clone",
    value: function clone() {
      var newGuy = new PropertiesManager2();
      newGuy.properties = this.storedValues;
      return newGuy;
    }
    /**
     * Clamps a numeric property, modulating it up or down to fit within a specified range
     *
     * @param property The numeric property to clamp
     * @param min The lower bound for what we want the property to be allowed to be.
     * @param max The upper bound for what we want the property to be allowed to be.
     * @returns Whether we ended up changing the property or not.
     */
  }, {
    key: "clamp",
    value: function clamp2(property, min, max) {
      if (max < min)
        return false;
      var start = get(property);
      this.setMinimumValue(property, min);
      this.setMaximumValue(property, max);
      return start !== get(property);
    }
    /**
     * Determines whether this PropertiesManager has identical stored values to another.
     *
     * @param other The PropertiesManager to compare to this one.
     * @returns Whether their StoredValues are identical.
     */
  }, {
    key: "equals",
    value: function equals(other) {
      var thisProps = Object.entries(this.storedValues);
      var otherProps = new Map(Object.entries(other.storedValues));
      if (thisProps.length !== otherProps.size)
        return false;
      for (var _i5 = 0, _thisProps = thisProps; _i5 < _thisProps.length; _i5++) {
        var _thisProps$_i = _slicedToArray(_thisProps[_i5], 2), propertyName = _thisProps$_i[0], propertyValue = _thisProps$_i[1];
        if (otherProps.get(propertyName) === propertyValue)
          return false;
      }
      return true;
    }
    /**
     * Merges a PropertiesManager onto this one, letting the input win in the event that both PropertiesManagers have a value stored.
     *
     * @param other The PropertiesManager to be merged onto this one.
     * @returns A new PropertiesManager with stored values from both its parents.
     */
  }, {
    key: "merge",
    value: function merge(other) {
      var newGuy = new PropertiesManager2();
      newGuy.properties = _objectSpread2(_objectSpread2({}, this.properties), other.properties);
      return newGuy;
    }
    /**
     * Merges an arbitrary collection of PropertiesManagers, letting the rightmost PropertiesManager win in the event of verlap.
     *
     * @param mergees The PropertiesManagers to merge together.
     * @returns A PropertiesManager that is just an amalgam of all the constituents.
     */
  }], [{
    key: "merge",
    value: function merge() {
      for (var _len3 = arguments.length, mergees = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        mergees[_key3] = arguments[_key3];
      }
      if (mergees.length === 0)
        return new PropertiesManager2();
      return mergees.reduce(function(a, b) {
        return a.merge(b);
      });
    }
  }]);
  return PropertiesManager2;
}();

// node_modules/libram/dist/template-string.js
var import_kolmafia4 = require("kolmafia");

// node_modules/libram/dist/utils.js
function _createForOfIteratorHelper2(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray3(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray2(arr, i) {
  return _arrayWithHoles2(arr) || _iterableToArrayLimit2(arr, i) || _unsupportedIterableToArray3(arr, i) || _nonIterableRest2();
}
function _nonIterableRest2() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit2(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles2(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray3(arr) || _nonIterableSpread();
}
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray3(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray3(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray3(o, minLen);
}
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray3(arr);
}
function _arrayLikeToArray3(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function notNull(value) {
  return value !== null;
}
function parseNumber(n) {
  return Number.parseInt(n.replace(/,/g, ""));
}
function clamp(n, min, max) {
  return Math.max(min, Math.min(max, n));
}
function chunk(array, chunkSize) {
  var result = [];
  for (var i = 0; i < array.length; i += chunkSize) {
    result.push(array.slice(i, i + chunkSize));
  }
  return result;
}
function arrayToCountedMap(array) {
  if (!Array.isArray(array))
    return array;
  var map = /* @__PURE__ */ new Map();
  array.forEach(function(item9) {
    map.set(item9, (map.get(item9) || 0) + 1);
  });
  return map;
}
function countedMapToArray(map) {
  var _ref;
  return (_ref = []).concat.apply(_ref, _toConsumableArray(_toConsumableArray(map).map(function(_ref2) {
    var _ref3 = _slicedToArray2(_ref2, 2), item9 = _ref3[0], quantity = _ref3[1];
    return Array(quantity).fill(item9);
  })));
}
function countedMapToString(map) {
  return _toConsumableArray(map).map(function(_ref4) {
    var _ref5 = _slicedToArray2(_ref4, 2), item9 = _ref5[0], quantity = _ref5[1];
    return "".concat(quantity, " x ").concat(item9);
  }).join(", ");
}
function sum(addends, x) {
  return addends.reduce(function(subtotal, element) {
    return subtotal + (typeof x === "function" ? x(element) : element[x]);
  }, 0);
}
function sumNumbers(addends) {
  return sum(addends, function(x) {
    return x;
  });
}
function arrayContains(item9, array) {
  return array.includes(item9);
}
function setEqual(a, b) {
  var sortedA = _toConsumableArray(a).sort();
  var sortedB = _toConsumableArray(b).sort();
  return a.length === b.length && sortedA.every(function(item9, index) {
    return item9 === sortedB[index];
  });
}
function invertMap(map) {
  var returnValue = /* @__PURE__ */ new Map();
  var _iterator = _createForOfIteratorHelper2(map), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _step$value = _slicedToArray2(_step.value, 2), key = _step$value[0], value = _step$value[1];
      returnValue.set(value, key);
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return returnValue;
}
function splitByCommasWithEscapes(str) {
  var returnValue = [];
  var ignoreNext = false;
  var currentString = "";
  var _iterator2 = _createForOfIteratorHelper2(str.split("")), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var char = _step2.value;
      if (char === "\\") {
        ignoreNext = true;
      } else {
        if (char == "," && !ignoreNext) {
          returnValue.push(currentString.trim());
          currentString = "";
        } else {
          currentString += char;
        }
        ignoreNext = false;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  returnValue.push(currentString.trim());
  return returnValue;
}
function maxBy(array, optimizer) {
  var reverse = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if (!array.length)
    throw new Error("Cannot call maxBy on an empty array!");
  if (typeof optimizer === "function") {
    return _toConsumableArray(array).reduce(function(_ref6, other) {
      var value = _ref6.value, item9 = _ref6.item;
      var otherValue = optimizer(other);
      return value >= otherValue !== reverse ? {
        value: value,
        item: item9
      } : {
        value: otherValue,
        item: other
      };
    }, {
      item: array[0],
      value: optimizer(array[0])
    }).item;
  } else {
    return array.reduce(function(a, b) {
      return a[optimizer] >= b[optimizer] !== reverse ? a : b;
    });
  }
}
function arrayEquals(left, right) {
  if (left.length !== right.length)
    return false;
  return left.every(function(element, index) {
    return element === right[index];
  });
}
function undelay(delayedObject) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  return typeof delayedObject === "function" ? delayedObject.apply(void 0, args) : delayedObject;
}
function makeByXFunction(source) {
  return function(options) {
    var _options$val;
    var val = undelay(source);
    if ("default" in options)
      return (_options$val = options[val]) !== null && _options$val !== void 0 ? _options$val : options.default;
    return options[val];
  };
}
function flat(arr) {
  var depth = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Infinity;
  var flatArray = [];
  var _iterator3 = _createForOfIteratorHelper2(arr), _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
      var item9 = _step3.value;
      if (Array.isArray(item9) && depth > 0) {
        flatArray = flatArray.concat(flat(item9, depth - 1));
      } else {
        flatArray.push(item9);
      }
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  return flatArray;
}

// node_modules/libram/dist/template-string.js
var concatTemplateString = function concatTemplateString2(literals) {
  for (var _len = arguments.length, placeholders = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    placeholders[_key - 1] = arguments[_key];
  }
  return literals.raw.reduce(function(acc, literal, i) {
    var _placeholders$i;
    return acc + literal + ((_placeholders$i = placeholders[i]) !== null && _placeholders$i !== void 0 ? _placeholders$i : "");
  }, "");
};
var handleTypeGetError = function(Type, error) {
  var message = "".concat(error);
  var match = message.match(RegExp("Bad ".concat(Type.name.toLowerCase(), " value: .*")));
  if (match) {
    (0, import_kolmafia4.print)("".concat(match[0], "; if you're certain that this ").concat(Type.name, " exists and is spelled correctly, please update KoLMafia"), "red");
  } else {
    (0, import_kolmafia4.print)(message);
  }
};
var createSingleConstant = function(Type) {
  var tagFunction = function tagFunction2(literals) {
    for (var _len2 = arguments.length, placeholders = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      placeholders[_key2 - 1] = arguments[_key2];
    }
    var input = concatTemplateString.apply(void 0, [literals].concat(placeholders));
    try {
      return Type.get(input);
    } catch (error) {
      handleTypeGetError(Type, error);
    }
    (0, import_kolmafia4.abort)();
  };
  tagFunction.none = Type.none;
  return tagFunction;
};
var createPluralConstant = function(Type) {
  var tagFunction = function tagFunction2(literals) {
    for (var _len3 = arguments.length, placeholders = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      placeholders[_key3 - 1] = arguments[_key3];
    }
    var input = concatTemplateString.apply(void 0, [literals].concat(placeholders));
    if (input === "") {
      return Type.all();
    }
    try {
      return Type.get(splitByCommasWithEscapes(input));
    } catch (error) {
      handleTypeGetError(Type, error);
    }
    (0, import_kolmafia4.abort)();
  };
  tagFunction.all = function() {
    return Type.all();
  };
  return tagFunction;
};
var $bounty = createSingleConstant(import_kolmafia4.Bounty);
var $bounties = createPluralConstant(import_kolmafia4.Bounty);
var $class = createSingleConstant(import_kolmafia4.Class);
var $classes = createPluralConstant(import_kolmafia4.Class);
var $coinmaster = createSingleConstant(import_kolmafia4.Coinmaster);
var $coinmasters = createPluralConstant(import_kolmafia4.Coinmaster);
var $effect = createSingleConstant(import_kolmafia4.Effect);
var $effects = createPluralConstant(import_kolmafia4.Effect);
var $element = createSingleConstant(import_kolmafia4.Element);
var $elements = createPluralConstant(import_kolmafia4.Element);
var $familiar = createSingleConstant(import_kolmafia4.Familiar);
var $familiars = createPluralConstant(import_kolmafia4.Familiar);
var $item = createSingleConstant(import_kolmafia4.Item);
var $items = createPluralConstant(import_kolmafia4.Item);
var $location = createSingleConstant(import_kolmafia4.Location);
var $locations = createPluralConstant(import_kolmafia4.Location);
var $modifier = createSingleConstant(import_kolmafia4.Modifier);
var $modifiers = createPluralConstant(import_kolmafia4.Modifier);
var $monster = createSingleConstant(import_kolmafia4.Monster);
var $monsters = createPluralConstant(import_kolmafia4.Monster);
var $phylum = createSingleConstant(import_kolmafia4.Phylum);
var $phyla = createPluralConstant(import_kolmafia4.Phylum);
var $servant = createSingleConstant(import_kolmafia4.Servant);
var $servants = createPluralConstant(import_kolmafia4.Servant);
var $skill = createSingleConstant(import_kolmafia4.Skill);
var $skills = createPluralConstant(import_kolmafia4.Skill);
var $slot = createSingleConstant(import_kolmafia4.Slot);
var $slots = createPluralConstant(import_kolmafia4.Slot);
var $stat = createSingleConstant(import_kolmafia4.Stat);
var $stats = createPluralConstant(import_kolmafia4.Stat);
var $thrall = createSingleConstant(import_kolmafia4.Thrall);
var $thralls = createPluralConstant(import_kolmafia4.Thrall);
var $path = createSingleConstant(import_kolmafia4.Path);
var $paths = createPluralConstant(import_kolmafia4.Path);

// node_modules/libram/dist/lib.js
var _templateObject;
var _templateObject2;
var _templateObject3;
var _templateObject5;
var _templateObject6;
var _templateObject7;
var _templateObject8;
var _templateObject9;
var _templateObject10;
var _templateObject11;
var _templateObject12;
var _templateObject13;
var _templateObject14;
var _templateObject15;
var _templateObject16;
var _templateObject17;
var _templateObject18;
var _templateObject19;
var _templateObject20;
var _templateObject21;
var _templateObject22;
var _templateObject23;
var _templateObject24;
var _templateObject25;
var _templateObject26;
var _templateObject27;
var _templateObject28;
var _templateObject29;
var _templateObject30;
var _templateObject31;
var _templateObject32;
var _templateObject33;
var _templateObject34;
function _defineProperties4(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey4(descriptor.key), descriptor);
  }
}
function _createClass4(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties4(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties4(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey4(arg) {
  var key = _toPrimitive4(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive4(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _classCallCheck4(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf(subClass, superClass);
}
function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn(this, result);
  };
}
function _possibleConstructorReturn(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized(self2);
}
function _assertThisInitialized(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _wrapNativeSuper(Class5) {
  var _cache = typeof Map === "function" ? /* @__PURE__ */ new Map() : void 0;
  _wrapNativeSuper = function _wrapNativeSuper4(Class6) {
    if (Class6 === null || !_isNativeFunction(Class6))
      return Class6;
    if (typeof Class6 !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }
    if (typeof _cache !== "undefined") {
      if (_cache.has(Class6))
        return _cache.get(Class6);
      _cache.set(Class6, Wrapper);
    }
    function Wrapper() {
      return _construct(Class6, arguments, _getPrototypeOf(this).constructor);
    }
    Wrapper.prototype = Object.create(Class6.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } });
    return _setPrototypeOf(Wrapper, Class6);
  };
  return _wrapNativeSuper(Class5);
}
function _construct(Parent, args, Class5) {
  if (_isNativeReflectConstruct()) {
    _construct = Reflect.construct.bind();
  } else {
    _construct = function _construct4(Parent2, args2, Class6) {
      var a = [null];
      a.push.apply(a, args2);
      var Constructor = Function.bind.apply(Parent2, a);
      var instance = new Constructor();
      if (Class6)
        _setPrototypeOf(instance, Class6.prototype);
      return instance;
    };
  }
  return _construct.apply(null, arguments);
}
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf(o, p);
}
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf(o);
}
function _createForOfIteratorHelper3(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray4(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray3(arr, i) {
  return _arrayWithHoles3(arr) || _iterableToArrayLimit3(arr, i) || _unsupportedIterableToArray4(arr, i) || _nonIterableRest3();
}
function _nonIterableRest3() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray4(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray4(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray4(o, minLen);
}
function _arrayLikeToArray4(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit3(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles3(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function getSongLimit() {
  return 3 + ((0, import_kolmafia5.booleanModifier)("Four Songs") ? 1 : 0) + (0, import_kolmafia5.numericModifier)("Additional Song");
}
function isSong(skillOrEffect) {
  if (skillOrEffect instanceof import_kolmafia5.Effect && skillOrEffect.attributes.includes("song")) {
    return true;
  } else {
    var skill = skillOrEffect instanceof import_kolmafia5.Effect ? (0, import_kolmafia5.toSkill)(skillOrEffect) : skillOrEffect;
    return skill.class === $class(_templateObject || (_templateObject = _taggedTemplateLiteral(["Accordion Thief"]))) && skill.buff;
  }
}
function getActiveEffects() {
  return Object.keys((0, import_kolmafia5.myEffects)()).map(function(e) {
    return import_kolmafia5.Effect.get(e);
  });
}
function getActiveSongs() {
  return getActiveEffects().filter(isSong);
}
function getSongCount() {
  return getActiveSongs().length;
}
function getRemainingLiver() {
  return (0, import_kolmafia5.inebrietyLimit)() - (0, import_kolmafia5.myInebriety)();
}
function getRemainingStomach() {
  return (0, import_kolmafia5.fullnessLimit)() - (0, import_kolmafia5.myFullness)();
}
function have(thing) {
  var quantity = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  if (thing instanceof import_kolmafia5.Effect) {
    return (0, import_kolmafia5.haveEffect)(thing) >= quantity;
  }
  if (thing instanceof import_kolmafia5.Familiar) {
    return (0, import_kolmafia5.haveFamiliar)(thing);
  }
  if (thing instanceof import_kolmafia5.Item) {
    return (0, import_kolmafia5.availableAmount)(thing) >= quantity;
  }
  if (thing instanceof import_kolmafia5.Servant) {
    return (0, import_kolmafia5.haveServant)(thing);
  }
  if (thing instanceof import_kolmafia5.Skill) {
    return (0, import_kolmafia5.haveSkill)(thing);
  }
  if (thing instanceof import_kolmafia5.Thrall) {
    var thrall = (0, import_kolmafia5.myThrall)();
    return thrall.id === thing.id && thrall.level >= quantity;
  }
  return false;
}
function haveInCampground(item9) {
  return Object.keys((0, import_kolmafia5.getCampground)()).map(function(i) {
    return import_kolmafia5.Item.get(i);
  }).includes(item9);
}
var Wanderer;
(function(Wanderer2) {
  Wanderer2["Digitize"] = "Digitize Monster";
  Wanderer2["Enamorang"] = "Enamorang Monster";
  Wanderer2["Familiar"] = "Familiar";
  Wanderer2["Holiday"] = "Holiday Monster";
  Wanderer2["Kramco"] = "Kramco";
  Wanderer2["Nemesis"] = "Nemesis Assassin";
  Wanderer2["Portscan"] = "portscan.edu";
  Wanderer2["Romantic"] = "Romantic Monster";
  Wanderer2["Vote"] = "Vote Monster";
})(Wanderer || (Wanderer = {}));
var deterministicWanderers = [Wanderer.Digitize, Wanderer.Portscan];
function haveCounter(counterName) {
  var minTurns = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  var maxTurns = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 500;
  return (0, import_kolmafia5.getCounters)(counterName, minTurns, maxTurns) === counterName;
}
function haveWandererCounter(wanderer) {
  if (deterministicWanderers.includes(wanderer)) {
    return haveCounter(wanderer);
  }
  var begin = wanderer + " window begin";
  var end = wanderer + " window end";
  return haveCounter(begin) || haveCounter(end);
}
function getKramcoWandererChance() {
  var fights = get("_sausageFights");
  var lastFight = get("_lastSausageMonsterTurn");
  var totalTurns = (0, import_kolmafia5.totalTurnsPlayed)();
  if (fights < 1) {
    return lastFight === totalTurns && (0, import_kolmafia5.myTurncount)() < 1 ? 0.5 : 1;
  }
  var turnsSinceLastFight = totalTurns - lastFight;
  return Math.min(1, (turnsSinceLastFight + 1) / (5 + fights * 3 + Math.pow(Math.max(0, fights - 5), 3)));
}
function getFoldGroup(item9) {
  return Object.entries((0, import_kolmafia5.getRelated)(item9, "fold")).sort(function(_ref, _ref2) {
    var _ref3 = _slicedToArray3(_ref, 2), a = _ref3[1];
    var _ref4 = _slicedToArray3(_ref2, 2), b = _ref4[1];
    return a - b;
  }).map(function(_ref5) {
    var _ref6 = _slicedToArray3(_ref5, 1), i = _ref6[0];
    return import_kolmafia5.Item.get(i);
  });
}
function getBanishedMonsters() {
  var banishes = chunk(get("banishedMonsters").split(":"), 3);
  var result = /* @__PURE__ */ new Map();
  var _iterator = _createForOfIteratorHelper3(banishes), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _step$value = _slicedToArray3(_step.value, 2), foe = _step$value[0], banisher = _step$value[1];
      if (foe === void 0 || banisher === void 0)
        break;
      var banisherItem = (0, import_kolmafia5.toItem)(banisher);
      if (banisher.toLowerCase() === "saber force") {
        result.set($skill(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral(["Use the Force"]))), import_kolmafia5.Monster.get(foe));
      } else if (banisher.toLowerCase() === "nanorhino") {
        result.set($skill(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral(["Unleash Nanites"]))), import_kolmafia5.Monster.get(foe));
      } else if ([import_kolmafia5.Item.none, import_kolmafia5.Item.get("training scroll:  Snokebomb"), import_kolmafia5.Item.get("tomayohawk-style reflex hammer"), null].includes(banisherItem)) {
        if (import_kolmafia5.Skill.get(banisher) === $skill.none) {
          break;
        } else {
          result.set(import_kolmafia5.Skill.get(banisher), import_kolmafia5.Monster.get(foe));
        }
      } else {
        result.set(banisherItem, import_kolmafia5.Monster.get(foe));
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return result;
}
function getAverage(range) {
  var _range$match;
  if (range.indexOf("-") < 0)
    return Number(range);
  var _ref7 = (_range$match = range.match(/(-?[0-9]+)-(-?[0-9]+)/)) !== null && _range$match !== void 0 ? _range$match : ["0", "0", "0"], _ref8 = _slicedToArray3(_ref7, 3), lower = _ref8[1], upper = _ref8[2];
  return (Number(lower) + Number(upper)) / 2;
}
function getAverageAdventures(item9) {
  return getAverage(item9.adventures);
}
function uneffect(effect2) {
  return (0, import_kolmafia5.cliExecute)("uneffect ".concat(effect2.name));
}
function questStep(questName) {
  var stringStep = get(questName);
  if (stringStep === "unstarted")
    return -1;
  else if (stringStep === "started")
    return 0;
  else if (stringStep === "finished" || stringStep === "")
    return 999;
  else {
    if (stringStep.substring(0, 4) !== "step") {
      throw new Error("Quest state parsing error.");
    }
    return parseInt(stringStep.substring(4), 10);
  }
}
var EnsureError = /* @__PURE__ */ function(_Error) {
  _inherits(EnsureError2, _Error);
  var _super = _createSuper(EnsureError2);
  function EnsureError2(cause, reason) {
    var _this;
    _classCallCheck4(this, EnsureError2);
    _this = _super.call(this, "Failed to ensure ".concat(cause.name, "!").concat(reason ? " ".concat(reason) : ""));
    _this.name = "Ensure Error";
    return _this;
  }
  return _createClass4(EnsureError2);
}(/* @__PURE__ */ _wrapNativeSuper(Error));
function ensureEffect(ef) {
  var turns2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  if ((0, import_kolmafia5.haveEffect)(ef) < turns2) {
    if (ef.default === null) {
      throw new EnsureError(ef, "No default action");
    }
    if (!(0, import_kolmafia5.cliExecute)(ef.default) || (0, import_kolmafia5.haveEffect)(ef) === 0) {
      throw new EnsureError(ef);
    }
  }
}
var valueMap = /* @__PURE__ */ new Map();
var MALL_VALUE_MODIFIER = 0.9;
function getSaleValue() {
  for (var _len = arguments.length, items = new Array(_len), _key = 0; _key < _len; _key++) {
    items[_key] = arguments[_key];
  }
  return items.map(function(item9) {
    if (valueMap.has(item9))
      return valueMap.get(item9) || 0;
    if (item9.discardable) {
      valueMap.set(item9, (0, import_kolmafia5.mallPrice)(item9) > Math.max(2 * (0, import_kolmafia5.autosellPrice)(item9), 100) ? MALL_VALUE_MODIFIER * (0, import_kolmafia5.mallPrice)(item9) : (0, import_kolmafia5.autosellPrice)(item9));
    } else {
      valueMap.set(item9, (0, import_kolmafia5.mallPrice)(item9) > 100 ? MALL_VALUE_MODIFIER * (0, import_kolmafia5.mallPrice)(item9) : 0);
    }
    return valueMap.get(item9) || 0;
  }).reduce(function(s, price2) {
    return s + price2;
  }, 0) / items.length;
}
function findLeprechaunMultiplier(familiar4) {
  if (familiar4 === $familiar(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral(["Mutant Cactus Bud"])))) {
    return (0, import_kolmafia5.numericModifier)(familiar4, "Leprechaun Effectiveness", 1, $item.none);
  }
  if (familiar4 === $familiar(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral(["Reanimated Reanimator"]))))
    return 0;
  var meatBonus = (0, import_kolmafia5.numericModifier)(familiar4, "Meat Drop", 1, $item.none);
  if (meatBonus === 0)
    return 0;
  return Math.pow(Math.sqrt(meatBonus / 2 + 55 / 4 + 3) - Math.sqrt(55) / 2, 2);
}
function findFairyMultiplier(familiar4) {
  if (familiar4 === $familiar(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral(["Mutant Fire Ant"])))) {
    return (0, import_kolmafia5.numericModifier)(familiar4, "Fairy Effectiveness", 1, $item.none);
  }
  if (familiar4 === $familiar(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral(["Reanimated Reanimator"]))))
    return 0;
  var itemBonus = (0, import_kolmafia5.numericModifier)(familiar4, "Item Drop", 1, $item.none);
  if (itemBonus === 0)
    return 0;
  return Math.pow(Math.sqrt(itemBonus + 55 / 4 + 3) - Math.sqrt(55) / 2, 2);
}
var holidayWanderers = /* @__PURE__ */ new Map([["El Dia De Los Muertos Borrachos", $monsters(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral(["Novia Cad\xE1ver, Novio Cad\xE1ver, Padre Cad\xE1ver, Persona Inocente Cad\xE1ver"])))], ["Feast of Boris", $monsters(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral(["Candied Yam Golem, Malevolent Tofurkey, Possessed Can of Cranberry Sauce, Stuffing Golem"])))], ["Talk Like a Pirate Day", $monsters(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral(["ambulatory pirate, migratory pirate, peripatetic pirate"])))]]);
function getTodaysHolidayWanderers() {
  return flat((0, import_kolmafia5.holiday)().split("/").map(function(holiday3) {
    var _holidayWanderers$get;
    return (_holidayWanderers$get = holidayWanderers.get(holiday3)) !== null && _holidayWanderers$get !== void 0 ? _holidayWanderers$get : [];
  }));
}
function canVisitUrl() {
  if ((0, import_kolmafia5.currentRound)()) {
    logger_default.debug("Current round is ".concat((0, import_kolmafia5.currentRound)(), "; you're in combat."));
    return false;
  }
  if ((0, import_kolmafia5.inMultiFight)()) {
    logger_default.debug("You're in a multifight.");
    return false;
  }
  if ((0, import_kolmafia5.choiceFollowsFight)()) {
    logger_default.debug("A choice follows this fight.");
    return false;
  }
  if ((0, import_kolmafia5.handlingChoice)()) {
    logger_default.debug("You're currently in a choice adventure");
    return false;
  }
  return true;
}
var telescopeStats = /* @__PURE__ */ new Map([["standing around flexing their muscles and using grip exercisers", $stat(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral(["Muscle"])))], ["sitting around playing chess and solving complicated-looking logic puzzles", $stat(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral(["Mysticality"])))], ["all wearing sunglasses and dancing", $stat(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral(["Moxie"])))]]);
var telescopeElements = /* @__PURE__ */ new Map([["people, all of whom appear to be on fire", $element(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral(["hot"])))], ["people, surrounded by a cloud of eldritch mist", $element(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral(["spooky"])))], ["greasy-looking people furtively skulking around", $element(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral(["sleaze"])))], ["people, surrounded by garbage and clouds of flies", $element(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral(["stench"])))], ["people, clustered around a group of igloos", $element(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral(["cold"])))]]);
var hedgeTrap1 = /* @__PURE__ */ new Map([["smoldering bushes on the outskirts of a hedge maze", $element(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral(["hot"])))], ["creepy-looking black bushes on the outskirts of a hedge maze", $element(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral(["spooky"])))], ["purplish, greasy-looking hedges", $element(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral(["sleaze"])))], ["nasty-looking, dripping green bushes on the outskirts of a hedge maze", $element(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral(["stench"])))], ["frost-rimed bushes on the outskirts of a hedge maze", $element(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral(["cold"])))]]);
var hedgeTrap2 = /* @__PURE__ */ new Map([["smoke rising from deeper within the maze", $element(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral(["hot"])))], ["a miasma of eldritch vapors rising from deeper within the maze", $element(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral(["spooky"])))], ["a greasy purple cloud hanging over the center of the maze", $element(_templateObject27 || (_templateObject27 = _taggedTemplateLiteral(["sleaze"])))], ["a cloud of green gas hovering over the maze", $element(_templateObject28 || (_templateObject28 = _taggedTemplateLiteral(["stench"])))], ["wintry mists rising from deeper within the maze", $element(_templateObject29 || (_templateObject29 = _taggedTemplateLiteral(["cold"])))]]);
var hedgeTrap3 = /* @__PURE__ */ new Map([["with lava slowly oozing out of it", $element(_templateObject30 || (_templateObject30 = _taggedTemplateLiteral(["hot"])))], ["surrounded by creepy black mist", $element(_templateObject31 || (_templateObject31 = _taggedTemplateLiteral(["spooky"])))], ["that occasionally vomits out a greasy ball of hair", $element(_templateObject32 || (_templateObject32 = _taggedTemplateLiteral(["sleaze"])))], ["disgorging a really surprising amount of sewage", $element(_templateObject33 || (_templateObject33 = _taggedTemplateLiteral(["stench"])))], ["occasionally disgorging a bunch of ice cubes", $element(_templateObject34 || (_templateObject34 = _taggedTemplateLiteral(["cold"])))]]);
function examine(thing) {
  var url = thing instanceof import_kolmafia5.Item ? "desc_item.php?whichitem=".concat(thing.descid) : thing instanceof import_kolmafia5.Familiar ? "desc_familiar.php?which=".concat(thing.id) : thing instanceof import_kolmafia5.Effect ? "desc_effect.php?whicheffect=".concat(thing.descid) : "desc_skill.php?whichskill=".concat(thing.id);
  return (0, import_kolmafia5.visitUrl)(url);
}
var byStat = makeByXFunction(function() {
  return (0, import_kolmafia5.myPrimestat)().toString();
});
var byClass = makeByXFunction(function() {
  return (0, import_kolmafia5.myClass)().toString();
});
function directlyUse(item9) {
  return (0, import_kolmafia5.visitUrl)("inv_use.php?which=3&whichitem=".concat(item9.id, "&pwd"));
}

// node_modules/libram/dist/overlappingNames.js
var overlappingItemNames = ["spider web", "really sticky spider web", "dictionary", "NG", "Cloaca-Cola", "yo-yo", "top", "ball", "kite", "yo", "red potion", "blue potion", "bowling ball", "adder", "red button", "pile of sand", "mushroom", "deluxe mushroom"];
var overlappingSkillNames = ["Shoot", "Thrust-Smack", "Headbutt", "Toss", "Knife in the Dark", "Sing", "Disarm", "LIGHT", "BURN", "Extract", "Meteor Shower", "Snipe", "Cleave", "Boil", "Slice", "Rainbow"];

// node_modules/libram/dist/combat.js
function _get() {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get.bind();
  } else {
    _get = function _get3(target, property, receiver) {
      var base = _superPropBase(target, property);
      if (!base)
        return;
      var desc = Object.getOwnPropertyDescriptor(base, property);
      if (desc.get) {
        return desc.get.call(arguments.length < 3 ? target : receiver);
      }
      return desc.value;
    };
  }
  return _get.apply(this, arguments);
}
function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf2(object);
    if (object === null)
      break;
  }
  return object;
}
function _createForOfIteratorHelper4(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray5(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray2(arr) {
  return _arrayWithoutHoles2(arr) || _iterableToArray2(arr) || _unsupportedIterableToArray5(arr) || _nonIterableSpread2();
}
function _nonIterableSpread2() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray5(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray5(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray5(o, minLen);
}
function _iterableToArray2(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles2(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray5(arr);
}
function _arrayLikeToArray5(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _defineProperty4(obj, key, value) {
  key = _toPropertyKey5(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _defineProperties5(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey5(descriptor.key), descriptor);
  }
}
function _createClass5(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties5(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties5(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey5(arg) {
  var key = _toPrimitive5(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive5(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _classCallCheck5(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _inherits2(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf2(subClass, superClass);
}
function _createSuper2(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct2();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf2(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf2(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn2(this, result);
  };
}
function _possibleConstructorReturn2(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized2(self2);
}
function _assertThisInitialized2(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _wrapNativeSuper2(Class5) {
  var _cache = typeof Map === "function" ? /* @__PURE__ */ new Map() : void 0;
  _wrapNativeSuper2 = function _wrapNativeSuper4(Class6) {
    if (Class6 === null || !_isNativeFunction2(Class6))
      return Class6;
    if (typeof Class6 !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }
    if (typeof _cache !== "undefined") {
      if (_cache.has(Class6))
        return _cache.get(Class6);
      _cache.set(Class6, Wrapper);
    }
    function Wrapper() {
      return _construct2(Class6, arguments, _getPrototypeOf2(this).constructor);
    }
    Wrapper.prototype = Object.create(Class6.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } });
    return _setPrototypeOf2(Wrapper, Class6);
  };
  return _wrapNativeSuper2(Class5);
}
function _construct2(Parent, args, Class5) {
  if (_isNativeReflectConstruct2()) {
    _construct2 = Reflect.construct.bind();
  } else {
    _construct2 = function _construct4(Parent2, args2, Class6) {
      var a = [null];
      a.push.apply(a, args2);
      var Constructor = Function.bind.apply(Parent2, a);
      var instance = new Constructor();
      if (Class6)
        _setPrototypeOf2(instance, Class6.prototype);
      return instance;
    };
  }
  return _construct2.apply(null, arguments);
}
function _isNativeReflectConstruct2() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _isNativeFunction2(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}
function _setPrototypeOf2(o, p) {
  _setPrototypeOf2 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf2(o, p);
}
function _getPrototypeOf2(o) {
  _getPrototypeOf2 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf2(o);
}
var MACRO_NAME = "Script Autoattack Macro";
function getMacroId() {
  var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : MACRO_NAME;
  var macroMatches = (0, import_kolmafia6.xpath)((0, import_kolmafia6.visitUrl)("account_combatmacros.php"), '//select[@name="macroid"]/option[text()="'.concat(name, '"]/@value'));
  if (macroMatches.length === 0) {
    (0, import_kolmafia6.visitUrl)("account_combatmacros.php?action=new");
    var newMacroText = (0, import_kolmafia6.visitUrl)("account_combatmacros.php?macroid=0&name=".concat(name, "&macrotext=abort&action=save"));
    return parseInt((0, import_kolmafia6.xpath)(newMacroText, "//input[@name=".concat(name, "]/@value"))[0], 10);
  } else {
    return parseInt(macroMatches[0], 10);
  }
}
function itemOrNameToItem(itemOrName) {
  return typeof itemOrName === "string" ? import_kolmafia6.Item.get(itemOrName) : itemOrName;
}
function itemOrItemsBallsMacroName(itemOrItems) {
  if (Array.isArray(itemOrItems)) {
    return itemOrItems.map(itemOrItemsBallsMacroName).join(", ");
  } else {
    var item9 = itemOrNameToItem(itemOrItems);
    return !overlappingItemNames.includes(item9.name) ? item9.name : item9.id.toFixed(0);
  }
}
function itemOrItemsBallsMacroPredicate(itemOrItems) {
  if (Array.isArray(itemOrItems)) {
    return itemOrItems.map(itemOrItemsBallsMacroPredicate).join(" && ");
  } else {
    return "hascombatitem ".concat(itemOrItems);
  }
}
function skillOrNameToSkill(skillOrName) {
  if (typeof skillOrName === "string") {
    return import_kolmafia6.Skill.get(skillOrName);
  } else {
    return skillOrName;
  }
}
function skillBallsMacroName(skillOrName) {
  var skill = skillOrNameToSkill(skillOrName);
  return skill.name.match(/^[A-Za-z ]+$/) && !overlappingSkillNames.includes(skill.name) ? skill.name : skill.id;
}
var InvalidMacroError = /* @__PURE__ */ function(_Error) {
  _inherits2(InvalidMacroError2, _Error);
  var _super = _createSuper2(InvalidMacroError2);
  function InvalidMacroError2() {
    _classCallCheck5(this, InvalidMacroError2);
    return _super.apply(this, arguments);
  }
  return _createClass5(InvalidMacroError2);
}(/* @__PURE__ */ _wrapNativeSuper2(Error));
var Macro = /* @__PURE__ */ function() {
  function Macro3() {
    _classCallCheck5(this, Macro3);
    _defineProperty4(this, "components", []);
    _defineProperty4(this, "name", MACRO_NAME);
  }
  _createClass5(Macro3, [{
    key: "toString",
    value: (
      /**
       * Convert macro to string.
       *
       * @returns BALLS macro
       */
      function toString() {
        return (this.components.join(";") + ";").replace(/;;+/g, ";");
      }
    )
    /**
     * Gives your macro a new name to be used when saving an autoattack.
     *
     * @param name The name to be used when saving as an autoattack.
     * @returns The macro in question
     */
  }, {
    key: "rename",
    value: function rename(name) {
      this.name = name;
      return this;
    }
    /**
     * Creates a new Macro with a name other than the default name.
     *
     * @param name The name to assign this macro.
     * @returns A new Macro with the assigned name.
     */
  }, {
    key: "save",
    value: (
      /**
       * Save a macro to a Mafia property for use in a consult script.
       */
      function save() {
        _set(Macro3.SAVED_MACRO_PROPERTY, this.toString());
      }
    )
    /**
     * Load a saved macro from the Mafia property.
     *
     * @returns Loaded macro text
     */
  }, {
    key: "step",
    value: (
      /**
       * Statefully add one or several steps to a macro.
       *
       * @param nextSteps The steps to add to the macro.
       * @returns {Macro} This object itself.
       */
      function step() {
        var _ref, _this$components;
        for (var _len = arguments.length, nextSteps = new Array(_len), _key = 0; _key < _len; _key++) {
          nextSteps[_key] = arguments[_key];
        }
        var nextStepsStrings = (_ref = []).concat.apply(_ref, _toConsumableArray2(nextSteps.map(function(x) {
          return x instanceof Macro3 ? x.components : [x];
        })));
        (_this$components = this.components).push.apply(_this$components, _toConsumableArray2(nextStepsStrings.filter(function(s) {
          return s.length > 0;
        })));
        return this;
      }
    )
    /**
     * Statefully add one or several steps to a macro.
     *
     * @param nextSteps The steps to add to the macro.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "submit",
    value: (
      /**
       * Submit the built macro to KoL. Only works inside combat.
       *
       * @returns Contents of the fight page after macro submission
       */
      function submit() {
        var final = this.toString();
        return (0, import_kolmafia6.visitUrl)("fight.php?action=macro&macrotext=".concat((0, import_kolmafia6.urlEncode)(final)), true, true);
      }
    )
    /**
     * Set this macro as a KoL native autoattack.
     */
  }, {
    key: "setAutoAttack",
    value: function setAutoAttack6() {
      var id = Macro3.cachedMacroIds.get(this.name);
      if (id === void 0) {
        id = getMacroId(this.name);
        Macro3.cachedMacroIds.set(this.name, id);
      }
      if ((0, import_kolmafia6.getAutoAttack)() === 99e6 + id && this.toString() === Macro3.cachedAutoAttacks.get(this.name)) {
        return;
      }
      (0, import_kolmafia6.visitUrl)("account_combatmacros.php?macroid=".concat(id, "&name=").concat((0, import_kolmafia6.urlEncode)(this.name), "&macrotext=").concat((0, import_kolmafia6.urlEncode)(this.toString()), "&action=save"), true, true);
      (0, import_kolmafia6.visitUrl)("account.php?am=1&action=autoattack&value=".concat(99e6 + id, "&ajax=1"));
      Macro3.cachedAutoAttacks.set(this.name, this.toString());
    }
    /**
     * Renames the macro, then sets it as an autoattack.
     *
     * @param name The name to save the macro under as an autoattack.
     */
  }, {
    key: "setAutoAttackAs",
    value: function setAutoAttackAs(name) {
      this.name = name;
      this.setAutoAttack();
    }
    /**
     * Clear all cached autoattacks, and delete all stored macros server-side.
     */
  }, {
    key: "abort",
    value: (
      /**
       * Add an "abort" step to this macro.
       *
       * @returns {Macro} This object itself.
       */
      function abort5() {
        return this.step("abort");
      }
    )
    /**
     * Create a new macro with an "abort" step.
     *
     * @returns {Macro} This object itself.
     */
  }, {
    key: "abortWithWarning",
    value: (
      /**
       * Adds an "abort" step to this macro, with a warning message to print
       *
       * @param warning The warning message to print
       * @returns  {Macro} This object itself.
       */
      function abortWithWarning(warning) {
        return this.step('abort "'.concat(warning, '"'));
      }
    )
    /**
     * Create a new macro with an "abort" step to this macro, with a warning message to print
     *
     * @param warning The warning message to print
     * @returns  {Macro} This object itself.
     */
  }, {
    key: "runaway",
    value: (
      /**
       * Add a "runaway" step to this macro.
       *
       * @returns {Macro} This object itself.
       */
      function runaway() {
        return this.step("runaway");
      }
    )
    /**
     * Create a new macro with an "runaway" step.
     *
     * @returns {Macro} This object itself.
     */
  }, {
    key: "if_",
    value: (
      /**
       * Add an "if" statement to this macro.
       *
       * @param condition The BALLS condition for the if statement.
       * @param ifTrue Continuation if the condition is true.
       * @returns {Macro} This object itself.
       */
      function if_(condition, ifTrue) {
        return this.step("if ".concat(Macro3.makeBALLSPredicate(condition))).step(ifTrue).step("endif");
      }
    )
    /**
     * Create a new macro with an "if" statement.
     *
     * @param condition The BALLS condition for the if statement.
     * @param ifTrue Continuation if the condition is true.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "ifNot",
    value: (
      /**
       * Add an "if" statement to this macro, inverting the condition.
       *
       * @param condition The BALLS condition for the if statement.
       * @param ifTrue Continuation if the condition is true.
       * @returns {Macro} This object itself.
       */
      function ifNot(condition, ifTrue) {
        return this.step("if !(".concat(Macro3.makeBALLSPredicate(condition), ")")).step(ifTrue).step("endif");
      }
    )
    /**
     * Create a new macro with an "if" statement, inverting the condition.
     *
     * @param condition The BALLS condition for the if statement.
     * @param ifTrue Continuation if the condition is true.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "while_",
    value: (
      /**
       * Add a "while" statement to this macro.
       *
       * @param condition The BALLS condition for the if statement.
       * @param contents Loop to repeat while the condition is true.
       * @returns {Macro} This object itself.
       */
      function while_(condition, contents) {
        return this.step("while ".concat(condition)).step(contents).step("endwhile");
      }
    )
    /**
     * Create a new macro with a "while" statement.
     *
     * @param condition The BALLS condition for the if statement.
     * @param contents Loop to repeat while the condition is true.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "externalIf",
    value: (
      /**
       * Conditionally add a step to a macro based on a condition evaluated at the time of building the macro.
       *
       * @param condition The JS condition.
       * @param ifTrue Continuation to add if the condition is true.
       * @param ifFalse Optional input to turn this into an if...else statement.
       * @returns {Macro} This object itself.
       */
      function externalIf(condition, ifTrue, ifFalse) {
        if (condition)
          return this.step(ifTrue);
        else if (ifFalse)
          return this.step(ifFalse);
        else
          return this;
      }
    )
    /**
     * Create a new macro with a condition evaluated at the time of building the macro.
     *
     * @param condition The JS condition.
     * @param ifTrue Continuation to add if the condition is true.
     * @param ifFalse Optional input to turn this into an if...else statement.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "repeat",
    value: (
      /**
       * Add a repeat step to the macro.
       *
       * @returns {Macro} This object itself.
       */
      function repeat() {
        return this.step("repeat");
      }
    )
    /**
     * Add one or more skill cast steps to the macro.
     *
     * @param skills Skills to cast.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "skill",
    value: function skill() {
      for (var _len2 = arguments.length, skills2 = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        skills2[_key2] = arguments[_key2];
      }
      return this.step.apply(this, _toConsumableArray2(skills2.map(function(skill2) {
        return "skill ".concat(skillBallsMacroName(skill2));
      })));
    }
    /**
     * Create a new macro with one or more skill cast steps.
     *
     * @param skills Skills to cast.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "trySkill",
    value: (
      /**
       * Add one or more skill cast steps to the macro, where each step checks if you have the skill first.
       *
       * @param skills Skills to try casting.
       * @returns {Macro} This object itself.
       */
      function trySkill() {
        for (var _len3 = arguments.length, skills2 = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
          skills2[_key3] = arguments[_key3];
        }
        return this.step.apply(this, _toConsumableArray2(skills2.map(function(skill) {
          return Macro3.if_("hasskill ".concat(skillBallsMacroName(skill)), Macro3.skill(skill));
        })));
      }
    )
    /**
     * Create a new macro with one or more skill cast steps, where each step checks if you have the skill first.
     *
     * @param skills Skills to try casting.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "trySkillRepeat",
    value: (
      /**
       * Add one or more skill-cast-and-repeat steps to the macro, where each step checks if you have the skill first.
       *
       * @param skills Skills to try repeatedly casting.
       * @returns {Macro} This object itself.
       */
      function trySkillRepeat() {
        for (var _len4 = arguments.length, skills2 = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
          skills2[_key4] = arguments[_key4];
        }
        return this.step.apply(this, _toConsumableArray2(skills2.map(function(skill) {
          return Macro3.if_("hasskill ".concat(skillBallsMacroName(skill)), Macro3.skill(skill).repeat());
        })));
      }
    )
    /**
     * Create a new macro with one or more skill-cast-and-repeat steps, where each step checks if you have the skill first.
     *
     * @param skills Skills to try repeatedly casting.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "item",
    value: (
      /**
       * Add one or more item steps to the macro.
       *
       * @param items Items to use. Pass a tuple [item1, item2] to funksling.
       * @returns {Macro} This object itself.
       */
      function item9() {
        for (var _len5 = arguments.length, items = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
          items[_key5] = arguments[_key5];
        }
        return this.step.apply(this, _toConsumableArray2(items.map(function(itemOrItems) {
          return "use ".concat(itemOrItemsBallsMacroName(itemOrItems));
        })));
      }
    )
    /**
     * Create a new macro with one or more item steps.
     *
     * @param items Items to use. Pass a tuple [item1, item2] to funksling.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "tryItem",
    value: (
      /**
       * Add one or more item steps to the macro, where each step checks to see if you have the item first.
       *
       * @param items Items to try using. Pass a tuple [item1, item2] to funksling.
       * @returns {Macro} This object itself.
       */
      function tryItem() {
        for (var _len6 = arguments.length, items = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
          items[_key6] = arguments[_key6];
        }
        return this.step.apply(this, _toConsumableArray2(items.map(function(item9) {
          return Macro3.if_(itemOrItemsBallsMacroPredicate(item9), "use ".concat(itemOrItemsBallsMacroName(item9)));
        })));
      }
    )
    /**
     * Create a new macro with one or more item steps, where each step checks to see if you have the item first.
     *
     * @param items Items to try using. Pass a tuple [item1, item2] to funksling.
     * @returns {Macro} This object itself.
     */
  }, {
    key: "attack",
    value: (
      /**
       * Add an attack step to the macro.
       *
       * @returns {Macro} This object itself.
       */
      function attack() {
        return this.step("attack");
      }
    )
    /**
     * Create a new macro with an attack step.
     *
     * @returns {Macro} This object itself.
     */
  }, {
    key: "ifHolidayWanderer",
    value: (
      /**
       * Create an if_ statement based on what holiday of loathing it currently is. On non-holidays, returns the original macro, unmutated.
       *
       * @param macro The macro to place in the if_ statement
       * @returns This macro with supplied macro wapped in if statement matching holiday wanderers
       */
      function ifHolidayWanderer(macro) {
        var todaysWanderers = getTodaysHolidayWanderers();
        if (todaysWanderers.length === 0)
          return this;
        return this.if_(todaysWanderers.map(function(monster) {
          return "monsterid ".concat(monster.id);
        }).join(" || "), macro);
      }
    )
    /**
     * Create a new macro starting with an ifHolidayWanderer step.
     *
     * @param macro The macro to place inside the if_ statement
     * @returns New macro with supplied macro wrapped in if statement matching holiday wanderers
     */
  }, {
    key: "ifNotHolidayWanderer",
    value: (
      /**
       * Create an if_ statement based on what holiday of loathing it currently is. On non-holidays, returns the original macro, with the input macro appended.
       *
       * @param macro The macro to place in the if_ statement.
       * @returns This macro with supplied macro wrapped in if statement matching monsters that are not holiday wanderers
       */
      function ifNotHolidayWanderer(macro) {
        var todaysWanderers = getTodaysHolidayWanderers();
        if (todaysWanderers.length === 0)
          return this.step(macro);
        return this.if_(todaysWanderers.map(function(monster) {
          return "!monsterid ".concat(monster.id);
        }).join(" && "), macro);
      }
    )
    /**
     * Create a new macro starting with an ifNotHolidayWanderer step.
     *
     * @param macro The macro to place inside the if_ statement
     * @returns New macro with supplied macro wrapped in if statement matching monsters that are not holiday wanderers
     */
  }], [{
    key: "rename",
    value: function rename(name) {
      return new this().rename(name);
    }
  }, {
    key: "load",
    value: function load() {
      var _this;
      return (_this = new this()).step.apply(_this, _toConsumableArray2(get(Macro3.SAVED_MACRO_PROPERTY).split(";")));
    }
    /**
     * Clear the saved macro in the Mafia property.
     */
  }, {
    key: "clearSaved",
    value: function clearSaved() {
      (0, import_kolmafia6.removeProperty)(Macro3.SAVED_MACRO_PROPERTY);
    }
  }, {
    key: "step",
    value: function step() {
      var _this2;
      return (_this2 = new this()).step.apply(_this2, arguments);
    }
  }, {
    key: "clearAutoAttackMacros",
    value: function clearAutoAttackMacros() {
      var _iterator = _createForOfIteratorHelper4(Macro3.cachedAutoAttacks.keys()), _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done; ) {
          var _Macro$cachedMacroIds;
          var name = _step.value;
          var id = (_Macro$cachedMacroIds = Macro3.cachedMacroIds.get(name)) !== null && _Macro$cachedMacroIds !== void 0 ? _Macro$cachedMacroIds : getMacroId(name);
          (0, import_kolmafia6.visitUrl)("account_combatmacros.php?macroid=".concat(id, "&action=edit&what=Delete&confirm=1"));
          Macro3.cachedAutoAttacks.delete(name);
          Macro3.cachedMacroIds.delete(name);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "abort",
    value: function abort5() {
      return new this().abort();
    }
  }, {
    key: "abortWithWarning",
    value: function abortWithWarning(warning) {
      return new this().abortWithWarning(warning);
    }
  }, {
    key: "runaway",
    value: function runaway() {
      return new this().runaway();
    }
  }, {
    key: "makeBALLSPredicate",
    value: function makeBALLSPredicate(condition) {
      var ballsCondition = "";
      if (condition instanceof import_kolmafia6.Monster) {
        ballsCondition = "monsterid ".concat(condition.id);
      } else if (condition instanceof Array) {
        ballsCondition = condition.map(function(mon) {
          return "monsterid ".concat(mon.id);
        }).join(" || ");
        ballsCondition = "(".concat(ballsCondition, ")");
      } else if (condition instanceof import_kolmafia6.Effect) {
        ballsCondition = "haseffect ".concat(condition.id);
      } else if (condition instanceof import_kolmafia6.Skill) {
        ballsCondition = "hasskill ".concat(skillBallsMacroName(condition));
      } else if (condition instanceof import_kolmafia6.Item) {
        if (!condition.combat) {
          throw new InvalidMacroError("Item ".concat(condition, " cannot be made a valid BALLS predicate (it is not combat-usable)"));
        }
        ballsCondition = "hascombatitem ".concat(itemOrItemsBallsMacroName(condition));
      } else if (condition instanceof import_kolmafia6.Location) {
        var snarfblat = condition.id;
        if (snarfblat < 1) {
          throw new InvalidMacroError("Location ".concat(condition, " cannot be made a valid BALLS predicate (it has no location id)"));
        }
        ballsCondition = "snarfblat ".concat(snarfblat);
      } else if (condition instanceof import_kolmafia6.Class) {
        if (condition.id > 6) {
          throw new InvalidMacroError("Class ".concat(condition, " cannot be made a valid BALLS predicate (it is not a standard class)"));
        }
        ballsCondition = condition.toString().replaceAll(" ", "").toLowerCase();
      } else if (condition instanceof import_kolmafia6.Stat) {
        ballsCondition = "".concat(condition.toString().toLowerCase(), "class");
      } else {
        ballsCondition = condition;
      }
      return ballsCondition;
    }
  }, {
    key: "if_",
    value: function if_(condition, ifTrue) {
      return new this().if_(condition, ifTrue);
    }
  }, {
    key: "ifNot",
    value: function ifNot(condition, ifTrue) {
      return new this().ifNot(condition, ifTrue);
    }
  }, {
    key: "while_",
    value: function while_(condition, contents) {
      return new this().while_(condition, contents);
    }
  }, {
    key: "externalIf",
    value: function externalIf(condition, ifTrue, ifFalse) {
      return new this().externalIf(condition, ifTrue, ifFalse);
    }
  }, {
    key: "skill",
    value: function skill() {
      var _this3;
      return (_this3 = new this()).skill.apply(_this3, arguments);
    }
  }, {
    key: "trySkill",
    value: function trySkill() {
      var _this4;
      return (_this4 = new this()).trySkill.apply(_this4, arguments);
    }
  }, {
    key: "trySkillRepeat",
    value: function trySkillRepeat() {
      var _this5;
      return (_this5 = new this()).trySkillRepeat.apply(_this5, arguments);
    }
  }, {
    key: "item",
    value: function item9() {
      var _this6;
      return (_this6 = new this()).item.apply(_this6, arguments);
    }
  }, {
    key: "tryItem",
    value: function tryItem() {
      var _this7;
      return (_this7 = new this()).tryItem.apply(_this7, arguments);
    }
  }, {
    key: "attack",
    value: function attack() {
      return new this().attack();
    }
  }, {
    key: "ifHolidayWanderer",
    value: function ifHolidayWanderer(macro) {
      return new this().ifHolidayWanderer(macro);
    }
  }, {
    key: "ifNotHolidayWanderer",
    value: function ifNotHolidayWanderer(macro) {
      return new this().ifNotHolidayWanderer(macro);
    }
  }]);
  return Macro3;
}();
_defineProperty4(Macro, "SAVED_MACRO_PROPERTY", "libram_savedMacro");
_defineProperty4(Macro, "cachedMacroIds", /* @__PURE__ */ new Map());
_defineProperty4(Macro, "cachedAutoAttacks", /* @__PURE__ */ new Map());
var StrictMacro = /* @__PURE__ */ function(_Macro) {
  _inherits2(StrictMacro2, _Macro);
  var _super2 = _createSuper2(StrictMacro2);
  function StrictMacro2() {
    _classCallCheck5(this, StrictMacro2);
    return _super2.apply(this, arguments);
  }
  _createClass5(StrictMacro2, [{
    key: "skill",
    value: (
      /**
       * Add one or more skill cast steps to the macro.
       *
       * @param skills Skills to cast.
       * @returns {StrictMacro} This object itself.
       */
      function skill() {
        var _get22;
        for (var _len7 = arguments.length, skills2 = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
          skills2[_key7] = arguments[_key7];
        }
        return (_get22 = _get(_getPrototypeOf2(StrictMacro2.prototype), "skill", this)).call.apply(_get22, [this].concat(skills2));
      }
    )
    /**
     * Create a new macro with one or more skill cast steps.
     *
     * @param skills Skills to cast.
     * @returns {StrictMacro} This object itself.
     */
  }, {
    key: "item",
    value: (
      /**
       * Add one or more item steps to the macro.
       *
       * @param items Items to use. Pass a tuple [item1, item2] to funksling.
       * @returns {StrictMacro} This object itself.
       */
      function item9() {
        var _get3;
        for (var _len8 = arguments.length, items = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
          items[_key8] = arguments[_key8];
        }
        return (_get3 = _get(_getPrototypeOf2(StrictMacro2.prototype), "item", this)).call.apply(_get3, [this].concat(items));
      }
    )
    /**
     * Create a new macro with one or more item steps.
     *
     * @param items Items to use. Pass a tuple [item1, item2] to funksling.
     * @returns {StrictMacro} This object itself.
     */
  }, {
    key: "trySkill",
    value: (
      /**
       * Add one or more skill cast steps to the macro, where each step checks if you have the skill first.
       *
       * @param skills Skills to try casting.
       * @returns {StrictMacro} This object itself.
       */
      function trySkill() {
        var _get4;
        for (var _len9 = arguments.length, skills2 = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
          skills2[_key9] = arguments[_key9];
        }
        return (_get4 = _get(_getPrototypeOf2(StrictMacro2.prototype), "trySkill", this)).call.apply(_get4, [this].concat(skills2));
      }
    )
    /**
     * Create a new macro with one or more skill cast steps, where each step checks if you have the skill first.
     *
     * @param skills Skills to try casting.
     * @returns {StrictMacro} This object itself.
     */
  }, {
    key: "tryItem",
    value: (
      /**
       * Add one or more item steps to the macro, where each step checks to see if you have the item first.
       *
       * @param items Items to try using. Pass a tuple [item1, item2] to funksling.
       * @returns {StrictMacro} This object itself.
       */
      function tryItem() {
        var _get5;
        for (var _len10 = arguments.length, items = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
          items[_key10] = arguments[_key10];
        }
        return (_get5 = _get(_getPrototypeOf2(StrictMacro2.prototype), "tryItem", this)).call.apply(_get5, [this].concat(items));
      }
    )
    /**
     * Create a new macro with one or more item steps, where each step checks to see if you have the item first.
     *
     * @param items Items to try using. Pass a tuple [item1, item2] to funksling.
     * @returns {StrictMacro} This object itself.
     */
  }, {
    key: "trySkillRepeat",
    value: (
      /**
       * Add one or more skill-cast-and-repeat steps to the macro, where each step checks if you have the skill first.
       *
       * @param skills Skills to try repeatedly casting.
       * @returns {StrictMacro} This object itself.
       */
      function trySkillRepeat() {
        var _get6;
        for (var _len11 = arguments.length, skills2 = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
          skills2[_key11] = arguments[_key11];
        }
        return (_get6 = _get(_getPrototypeOf2(StrictMacro2.prototype), "trySkillRepeat", this)).call.apply(_get6, [this].concat(skills2));
      }
    )
    /**
     * Create a new macro with one or more skill-cast-and-repeat steps, where each step checks if you have the skill first.
     *
     * @param skills Skills to try repeatedly casting.
     * @returns {StrictMacro} This object itself.
     */
  }], [{
    key: "skill",
    value: function skill() {
      var _this8;
      return (_this8 = new this()).skill.apply(_this8, arguments);
    }
  }, {
    key: "item",
    value: function item9() {
      var _this9;
      return (_this9 = new this()).item.apply(_this9, arguments);
    }
  }, {
    key: "trySkill",
    value: function trySkill() {
      var _this10;
      return (_this10 = new this()).trySkill.apply(_this10, arguments);
    }
  }, {
    key: "tryItem",
    value: function tryItem() {
      var _this11;
      return (_this11 = new this()).tryItem.apply(_this11, arguments);
    }
  }, {
    key: "trySkillRepeat",
    value: function trySkillRepeat() {
      var _this12;
      return (_this12 = new this()).trySkillRepeat.apply(_this12, arguments);
    }
  }]);
  return StrictMacro2;
}(Macro);

// node_modules/libram/dist/maximize.js
var import_kolmafia7 = require("kolmafia");
var _templateObject4;
var _templateObject210;
var _templateObject35;
var _templateObject42;
var _templateObject52;
var _templateObject62;
var _templateObject72;
var _templateObject82;
var _templateObject92;
var _templateObject102;
var _templateObject112;
var _templateObject122;
var _templateObject132;
var _templateObject142;
var _templateObject152;
var _templateObject162;
var _templateObject172;
var _templateObject182;
var _templateObject192;
var _templateObject202;
var _templateObject212;
var _templateObject222;
var _templateObject232;
var _templateObject242;
var _templateObject252;
var _templateObject262;
var _templateObject272;
var _templateObject282;
var _templateObject292;
var _templateObject302;
var _templateObject312;
var _templateObject322;
var _templateObject332;
var _templateObject342;
var _templateObject352;
var _templateObject36;
var _templateObject37;
var _templateObject38;
var _templateObject39;
var _templateObject40;
var _templateObject41;
var _templateObject422;
var _templateObject43;
var _templateObject44;
var _templateObject45;
var _templateObject46;
var _templateObject47;
var _templateObject48;
var _templateObject49;
function _slicedToArray4(arr, i) {
  return _arrayWithHoles4(arr) || _iterableToArrayLimit4(arr, i) || _unsupportedIterableToArray6(arr, i) || _nonIterableRest4();
}
function _nonIterableRest4() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit4(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles4(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _classPrivateFieldInitSpec(obj, privateMap, value) {
  _checkPrivateRedeclaration(obj, privateMap);
  privateMap.set(obj, value);
}
function _checkPrivateRedeclaration(obj, privateCollection) {
  if (privateCollection.has(obj)) {
    throw new TypeError("Cannot initialize the same private elements twice on an object");
  }
}
function _classPrivateFieldGet(receiver, privateMap) {
  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, "get");
  return _classApplyDescriptorGet(receiver, descriptor);
}
function _classApplyDescriptorGet(receiver, descriptor) {
  if (descriptor.get) {
    return descriptor.get.call(receiver);
  }
  return descriptor.value;
}
function _classPrivateFieldSet(receiver, privateMap, value) {
  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, "set");
  _classApplyDescriptorSet(receiver, descriptor, value);
  return value;
}
function _classExtractFieldDescriptor(receiver, privateMap, action) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to " + action + " private field on non-instance");
  }
  return privateMap.get(receiver);
}
function _classApplyDescriptorSet(receiver, descriptor, value) {
  if (descriptor.set) {
    descriptor.set.call(receiver, value);
  } else {
    if (!descriptor.writable) {
      throw new TypeError("attempted to set read only private field");
    }
    descriptor.value = value;
  }
}
function _defineProperties6(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey6(descriptor.key), descriptor);
  }
}
function _createClass6(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties6(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties6(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _classCallCheck6(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _createForOfIteratorHelper5(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray6(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _taggedTemplateLiteral2(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function ownKeys3(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread3(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys3(Object(source), true).forEach(function(key) {
      _defineProperty5(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys3(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty5(obj, key, value) {
  key = _toPropertyKey6(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey6(arg) {
  var key = _toPrimitive6(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive6(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray3(arr) {
  return _arrayWithoutHoles3(arr) || _iterableToArray3(arr) || _unsupportedIterableToArray6(arr) || _nonIterableSpread3();
}
function _nonIterableSpread3() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray6(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray6(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray6(o, minLen);
}
function _iterableToArray3(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles3(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray6(arr);
}
function _arrayLikeToArray6(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function toMaximizerName(_ref) {
  var name = _ref.name, id = _ref.id;
  return name.includes(";") ? "\xB6".concat(id) : name;
}
function mergeMaximizeOptions(defaultOptions, addendums) {
  var _addendums$updateOnFa, _addendums$updateOnCa, _addendums$useOutfitC, _addendums$forceEquip, _addendums$preventEqu, _addendums$bonusEquip, _addendums$onlySlot, _addendums$preventSlo, _addendums$forceUpdat, _addendums$modes;
  return {
    updateOnFamiliarChange: (_addendums$updateOnFa = addendums.updateOnFamiliarChange) !== null && _addendums$updateOnFa !== void 0 ? _addendums$updateOnFa : defaultOptions.updateOnFamiliarChange,
    updateOnCanEquipChanged: (_addendums$updateOnCa = addendums.updateOnCanEquipChanged) !== null && _addendums$updateOnCa !== void 0 ? _addendums$updateOnCa : defaultOptions.updateOnCanEquipChanged,
    useOutfitCaching: (_addendums$useOutfitC = addendums.useOutfitCaching) !== null && _addendums$useOutfitC !== void 0 ? _addendums$useOutfitC : defaultOptions.useOutfitCaching,
    forceEquip: [].concat(_toConsumableArray3(defaultOptions.forceEquip), _toConsumableArray3((_addendums$forceEquip = addendums.forceEquip) !== null && _addendums$forceEquip !== void 0 ? _addendums$forceEquip : [])),
    preventEquip: [].concat(_toConsumableArray3(defaultOptions.preventEquip), _toConsumableArray3((_addendums$preventEqu = addendums.preventEquip) !== null && _addendums$preventEqu !== void 0 ? _addendums$preventEqu : [])).filter(function(item9) {
      var _addendums$forceEquip2;
      return !defaultOptions.forceEquip.includes(item9) && !((_addendums$forceEquip2 = addendums.forceEquip) !== null && _addendums$forceEquip2 !== void 0 && _addendums$forceEquip2.includes(item9));
    }),
    bonusEquip: new Map([].concat(_toConsumableArray3(defaultOptions.bonusEquip), _toConsumableArray3((_addendums$bonusEquip = addendums.bonusEquip) !== null && _addendums$bonusEquip !== void 0 ? _addendums$bonusEquip : []))),
    onlySlot: (_addendums$onlySlot = addendums.onlySlot) !== null && _addendums$onlySlot !== void 0 ? _addendums$onlySlot : defaultOptions.onlySlot,
    preventSlot: [].concat(_toConsumableArray3(defaultOptions.preventSlot), _toConsumableArray3((_addendums$preventSlo = addendums.preventSlot) !== null && _addendums$preventSlo !== void 0 ? _addendums$preventSlo : [])),
    forceUpdate: (_addendums$forceUpdat = addendums.forceUpdate) !== null && _addendums$forceUpdat !== void 0 ? _addendums$forceUpdat : defaultOptions.forceUpdate,
    modes: _objectSpread3(_objectSpread3({}, defaultOptions.modes), (_addendums$modes = addendums.modes) !== null && _addendums$modes !== void 0 ? _addendums$modes : {})
  };
}
var defaultMaximizeOptions = {
  updateOnFamiliarChange: true,
  updateOnCanEquipChanged: true,
  useOutfitCaching: true,
  forceEquip: [],
  preventEquip: [],
  bonusEquip: /* @__PURE__ */ new Map(),
  onlySlot: [],
  preventSlot: [],
  forceUpdate: false,
  modes: {}
};
function setDefaultMaximizeOptions(options) {
  Object.assign(defaultMaximizeOptions, options);
}
var modeableCommands = ["backupcamera", "umbrella", "snowsuit", "edpiece", "retrocape", "parka"];
var modeableItems = {
  backupcamera: $item(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral2(["backup camera"]))),
  umbrella: $item(_templateObject210 || (_templateObject210 = _taggedTemplateLiteral2(["unbreakable umbrella"]))),
  snowsuit: $item(_templateObject35 || (_templateObject35 = _taggedTemplateLiteral2(["Snow Suit"]))),
  edpiece: $item(_templateObject42 || (_templateObject42 = _taggedTemplateLiteral2(["The Crown of Ed the Undying"]))),
  retrocape: $item(_templateObject52 || (_templateObject52 = _taggedTemplateLiteral2(["unwrapped knock-off retro superhero cape"]))),
  parka: $item(_templateObject62 || (_templateObject62 = _taggedTemplateLiteral2(["Jurassic Parka"])))
};
var modeableState = {
  backupcamera: function() {
    return (0, import_kolmafia7.getProperty)("backupCameraMode");
  },
  umbrella: function() {
    return (0, import_kolmafia7.getProperty)("umbrellaState");
  },
  snowsuit: function() {
    return (0, import_kolmafia7.getProperty)("snowsuit");
  },
  edpiece: function() {
    return (0, import_kolmafia7.getProperty)("edPiece");
  },
  retrocape: function() {
    return (0, import_kolmafia7.getProperty)("retroCapeSuperhero") + " " + (0, import_kolmafia7.getProperty)("retroCapeWashingInstructions");
  },
  parka: function() {
    return (0, import_kolmafia7.getProperty)("parkaMode");
  }
};
function getCurrentModes() {
  var modes = {};
  var _iterator = _createForOfIteratorHelper5(modeableCommands), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var key = _step.value;
      if ((0, import_kolmafia7.haveEquipped)(modeableItems[key])) {
        modes[key] = modeableState[key]();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return modes;
}
function applyModes(modes) {
  var _iterator2 = _createForOfIteratorHelper5(modeableCommands), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var command = _step2.value;
      if ((0, import_kolmafia7.haveEquipped)(modeableItems[command]) && modes[command] !== void 0) {
        if (modeableState[command]() !== modes[command]) {
          (0, import_kolmafia7.cliExecute)(command + " " + modes[command]);
        }
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
}
var cachedSlots = $slots(_templateObject72 || (_templateObject72 = _taggedTemplateLiteral2(["hat, weapon, off-hand, back, shirt, pants, acc1, acc2, acc3, familiar"])));
var CacheEntry = /* @__PURE__ */ _createClass6(function CacheEntry2(equipment, rider, familiar4, canEquipItemCount2, modes) {
  _classCallCheck6(this, CacheEntry2);
  _defineProperty5(this, "equipment", void 0);
  _defineProperty5(this, "rider", void 0);
  _defineProperty5(this, "familiar", void 0);
  _defineProperty5(this, "canEquipItemCount", void 0);
  _defineProperty5(this, "modes", void 0);
  this.equipment = equipment;
  this.rider = rider;
  this.familiar = familiar4;
  this.canEquipItemCount = canEquipItemCount2;
  this.modes = modes;
});
var _outfitSlots = /* @__PURE__ */ new WeakMap();
var _useHistory = /* @__PURE__ */ new WeakMap();
var _maxSize = /* @__PURE__ */ new WeakMap();
var OutfitLRUCache = /* @__PURE__ */ function() {
  function OutfitLRUCache2(maxSize) {
    _classCallCheck6(this, OutfitLRUCache2);
    _classPrivateFieldInitSpec(this, _outfitSlots, {
      writable: true,
      value: []
    });
    _classPrivateFieldInitSpec(this, _useHistory, {
      writable: true,
      value: []
    });
    _classPrivateFieldInitSpec(this, _maxSize, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldSet(this, _maxSize, maxSize);
  }
  _createClass6(OutfitLRUCache2, [{
    key: "checkConsistent",
    value: function checkConsistent() {
      if (_classPrivateFieldGet(this, _useHistory).length !== _classPrivateFieldGet(this, _outfitSlots).length || !_toConsumableArray3(_classPrivateFieldGet(this, _useHistory)).sort().every(function(value, index) {
        return value === index;
      })) {
        throw new Error("Outfit cache consistency failed.");
      }
    }
  }, {
    key: "promote",
    value: function promote(index) {
      _classPrivateFieldSet(this, _useHistory, [index].concat(_toConsumableArray3(_classPrivateFieldGet(this, _useHistory).filter(function(i) {
        return i !== index;
      }))));
      this.checkConsistent();
    }
  }, {
    key: "get",
    value: function get4(key) {
      var index = _classPrivateFieldGet(this, _outfitSlots).indexOf(key);
      if (index < 0)
        return void 0;
      this.promote(index);
      return "".concat(OutfitLRUCache2.OUTFIT_PREFIX, " ").concat(index);
    }
  }, {
    key: "insert",
    value: function insert(key) {
      var lastUseIndex = void 0;
      if (_classPrivateFieldGet(this, _outfitSlots).length >= _classPrivateFieldGet(this, _maxSize)) {
        lastUseIndex = _classPrivateFieldGet(this, _useHistory).pop();
        if (lastUseIndex === void 0) {
          throw new Error("Outfit cache consistency failed.");
        }
        _classPrivateFieldGet(this, _useHistory).splice(0, 0, lastUseIndex);
        _classPrivateFieldGet(this, _outfitSlots)[lastUseIndex] = key;
        this.checkConsistent();
        return "".concat(OutfitLRUCache2.OUTFIT_PREFIX, " ").concat(lastUseIndex);
      } else {
        var index = _classPrivateFieldGet(this, _outfitSlots).push(key) - 1;
        _classPrivateFieldGet(this, _useHistory).splice(0, 0, index);
        this.checkConsistent();
        return "".concat(OutfitLRUCache2.OUTFIT_PREFIX, " ").concat(index);
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      _classPrivateFieldSet(this, _outfitSlots, []);
      _classPrivateFieldSet(this, _useHistory, []);
    }
  }]);
  return OutfitLRUCache2;
}();
_defineProperty5(OutfitLRUCache, "OUTFIT_PREFIX", "Script Outfit");
function saveOutfit(name) {
  (0, import_kolmafia7.cliExecute)("outfit save ".concat(name));
}
var cachedObjectives = {};
var outfitCache = new OutfitLRUCache(6);
var cachedStats = [0, 0, 0];
var cachedCanEquipItemCount = 0;
function canEquipItemCount() {
  var stats = $stats(_templateObject82 || (_templateObject82 = _taggedTemplateLiteral2(["Muscle, Mysticality, Moxie"]))).map(function(stat) {
    return Math.min((0, import_kolmafia7.myBasestat)(stat), 300);
  });
  if (stats.every(function(value, index) {
    return value === cachedStats[index];
  })) {
    return cachedCanEquipItemCount;
  }
  cachedStats = stats;
  cachedCanEquipItemCount = import_kolmafia7.Item.all().filter(function(item9) {
    return (0, import_kolmafia7.canEquip)(item9);
  }).length;
  return cachedCanEquipItemCount;
}
function checkCache(cacheKey, options) {
  var entry = cachedObjectives[cacheKey];
  if (!entry) {
    return null;
  }
  if (options.updateOnFamiliarChange && (0, import_kolmafia7.myFamiliar)() !== entry.familiar) {
    logger_default.warning("Equipment found in maximize cache but familiar is different.");
    return null;
  }
  if (options.updateOnCanEquipChanged && entry.canEquipItemCount !== canEquipItemCount()) {
    logger_default.warning("Equipment found in maximize cache but equippable item list is out of date.");
    return null;
  }
  return entry;
}
function applyCached(entry, options) {
  var outfitName = options.useOutfitCaching ? outfitCache.get(entry) : void 0;
  if (outfitName) {
    if (!(0, import_kolmafia7.isWearingOutfit)(outfitName)) {
      (0, import_kolmafia7.outfit)(outfitName);
    }
    var familiarEquip = entry.equipment.get($slot(_templateObject92 || (_templateObject92 = _taggedTemplateLiteral2(["familiar"]))));
    if (familiarEquip)
      (0, import_kolmafia7.equip)($slot(_templateObject102 || (_templateObject102 = _taggedTemplateLiteral2(["familiar"]))), familiarEquip);
  } else {
    var _iterator3 = _createForOfIteratorHelper5(entry.equipment), _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
        var _step3$value = _slicedToArray4(_step3.value, 2), slot = _step3$value[0], item9 = _step3$value[1];
        if ((0, import_kolmafia7.equippedItem)(slot) !== item9 && (0, import_kolmafia7.availableAmount)(item9) > 0) {
          (0, import_kolmafia7.equip)(slot, item9);
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    if (verifyCached(entry) && options.useOutfitCaching) {
      var _outfitName = outfitCache.insert(entry);
      logger_default.info("Saving equipment to outfit ".concat(_outfitName, "."));
      saveOutfit(_outfitName);
    }
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject112 || (_templateObject112 = _taggedTemplateLiteral2(["Crown of Thrones"])))) > 0 && entry.rider.get($item(_templateObject122 || (_templateObject122 = _taggedTemplateLiteral2(["Crown of Thrones"]))))) {
    (0, import_kolmafia7.enthroneFamiliar)(entry.rider.get($item(_templateObject132 || (_templateObject132 = _taggedTemplateLiteral2(["Crown of Thrones"])))) || $familiar.none);
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject142 || (_templateObject142 = _taggedTemplateLiteral2(["Buddy Bjorn"])))) > 0 && entry.rider.get($item(_templateObject152 || (_templateObject152 = _taggedTemplateLiteral2(["Buddy Bjorn"]))))) {
    (0, import_kolmafia7.bjornifyFamiliar)(entry.rider.get($item(_templateObject162 || (_templateObject162 = _taggedTemplateLiteral2(["Buddy Bjorn"])))) || $familiar.none);
  }
  applyModes(_objectSpread3(_objectSpread3({}, entry.modes), options.modes));
}
var slotStructure = [$slots(_templateObject172 || (_templateObject172 = _taggedTemplateLiteral2(["hat"]))), $slots(_templateObject182 || (_templateObject182 = _taggedTemplateLiteral2(["back"]))), $slots(_templateObject192 || (_templateObject192 = _taggedTemplateLiteral2(["shirt"]))), $slots(_templateObject202 || (_templateObject202 = _taggedTemplateLiteral2(["weapon, off-hand"]))), $slots(_templateObject212 || (_templateObject212 = _taggedTemplateLiteral2(["pants"]))), $slots(_templateObject222 || (_templateObject222 = _taggedTemplateLiteral2(["acc1, acc2, acc3"]))), $slots(_templateObject232 || (_templateObject232 = _taggedTemplateLiteral2(["familiar"])))];
function verifyCached(entry) {
  var warn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
  var success = true;
  var _iterator4 = _createForOfIteratorHelper5(slotStructure), _step4;
  try {
    for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
      var slotGroup = _step4.value;
      var desiredSlots = slotGroup.map(function(slot) {
        var _entry$equipment$get;
        return [slot, (_entry$equipment$get = entry.equipment.get(slot)) !== null && _entry$equipment$get !== void 0 ? _entry$equipment$get : null];
      }).filter(function(_ref2) {
        var _ref3 = _slicedToArray4(_ref2, 2), item9 = _ref3[1];
        return item9 !== null;
      });
      var desiredSet = desiredSlots.map(function(_ref4) {
        var _ref5 = _slicedToArray4(_ref4, 2), item9 = _ref5[1];
        return item9;
      });
      var equippedSet = desiredSlots.map(function(_ref6) {
        var _ref7 = _slicedToArray4(_ref6, 1), slot = _ref7[0];
        return (0, import_kolmafia7.equippedItem)(slot);
      });
      if (!setEqual(desiredSet, equippedSet)) {
        if (warn) {
          logger_default.warning("Failed to apply cached ".concat(desiredSet.join(", "), " in ").concat(slotGroup.join(", "), "."));
        }
        success = false;
      }
    }
  } catch (err) {
    _iterator4.e(err);
  } finally {
    _iterator4.f();
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject242 || (_templateObject242 = _taggedTemplateLiteral2(["Crown of Thrones"])))) > 0 && entry.rider.get($item(_templateObject252 || (_templateObject252 = _taggedTemplateLiteral2(["Crown of Thrones"]))))) {
    if (entry.rider.get($item(_templateObject262 || (_templateObject262 = _taggedTemplateLiteral2(["Crown of Thrones"])))) !== (0, import_kolmafia7.myEnthronedFamiliar)()) {
      if (warn) {
        logger_default.warning("Failed to apply ".concat(entry.rider.get($item(_templateObject272 || (_templateObject272 = _taggedTemplateLiteral2(["Crown of Thrones"])))), " in ").concat($item(_templateObject282 || (_templateObject282 = _taggedTemplateLiteral2(["Crown of Thrones"]))), "."));
      }
      success = false;
    }
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject292 || (_templateObject292 = _taggedTemplateLiteral2(["Buddy Bjorn"])))) > 0 && entry.rider.get($item(_templateObject302 || (_templateObject302 = _taggedTemplateLiteral2(["Buddy Bjorn"]))))) {
    if (entry.rider.get($item(_templateObject312 || (_templateObject312 = _taggedTemplateLiteral2(["Buddy Bjorn"])))) !== (0, import_kolmafia7.myBjornedFamiliar)()) {
      if (warn) {
        logger_default.warning("Failed to apply".concat(entry.rider.get($item(_templateObject322 || (_templateObject322 = _taggedTemplateLiteral2(["Buddy Bjorn"])))), " in ").concat($item(_templateObject332 || (_templateObject332 = _taggedTemplateLiteral2(["Buddy Bjorn"]))), "."));
      }
      success = false;
    }
  }
  return success;
}
function saveCached(cacheKey, options) {
  var equipment = /* @__PURE__ */ new Map();
  var rider = /* @__PURE__ */ new Map();
  var _iterator5 = _createForOfIteratorHelper5(cachedSlots), _step5;
  try {
    for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
      var _slot2 = _step5.value;
      equipment.set(_slot2, (0, import_kolmafia7.equippedItem)(_slot2));
    }
  } catch (err) {
    _iterator5.e(err);
  } finally {
    _iterator5.f();
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject342 || (_templateObject342 = _taggedTemplateLiteral2(["card sleeve"])))) > 0) {
    equipment.set($slot(_templateObject352 || (_templateObject352 = _taggedTemplateLiteral2(["card-sleeve"]))), (0, import_kolmafia7.equippedItem)($slot(_templateObject36 || (_templateObject36 = _taggedTemplateLiteral2(["card-sleeve"])))));
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject37 || (_templateObject37 = _taggedTemplateLiteral2(["Crown of Thrones"])))) > 0) {
    rider.set($item(_templateObject38 || (_templateObject38 = _taggedTemplateLiteral2(["Crown of Thrones"]))), (0, import_kolmafia7.myEnthronedFamiliar)());
  }
  if ((0, import_kolmafia7.equippedAmount)($item(_templateObject39 || (_templateObject39 = _taggedTemplateLiteral2(["Buddy Bjorn"])))) > 0) {
    rider.set($item(_templateObject40 || (_templateObject40 = _taggedTemplateLiteral2(["Buddy Bjorn"]))), (0, import_kolmafia7.myBjornedFamiliar)());
  }
  if (options.preventSlot && options.preventSlot.length > 0) {
    var _iterator6 = _createForOfIteratorHelper5(options.preventSlot), _step6;
    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done; ) {
        var slot = _step6.value;
        equipment.delete(slot);
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }
    if (options.preventSlot.includes($slot(_templateObject41 || (_templateObject41 = _taggedTemplateLiteral2(["buddy-bjorn"]))))) {
      rider.delete($item(_templateObject422 || (_templateObject422 = _taggedTemplateLiteral2(["Buddy Bjorn"]))));
    }
    if (options.preventSlot.includes($slot(_templateObject43 || (_templateObject43 = _taggedTemplateLiteral2(["crown-of-thrones"]))))) {
      rider.delete($item(_templateObject44 || (_templateObject44 = _taggedTemplateLiteral2(["Crown of Thrones"]))));
    }
  }
  if (options.onlySlot && options.onlySlot.length > 0) {
    var _iterator7 = _createForOfIteratorHelper5(import_kolmafia7.Slot.all()), _step7;
    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done; ) {
        var _slot = _step7.value;
        if (!options.onlySlot.includes(_slot)) {
          equipment.delete(_slot);
        }
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }
    if (!options.onlySlot.includes($slot(_templateObject45 || (_templateObject45 = _taggedTemplateLiteral2(["buddy-bjorn"]))))) {
      rider.delete($item(_templateObject46 || (_templateObject46 = _taggedTemplateLiteral2(["Buddy Bjorn"]))));
    }
    if (!options.onlySlot.includes($slot(_templateObject47 || (_templateObject47 = _taggedTemplateLiteral2(["crown-of-thrones"]))))) {
      rider.delete($item(_templateObject48 || (_templateObject48 = _taggedTemplateLiteral2(["Crown of Thrones"]))));
    }
  }
  var entry = new CacheEntry(equipment, rider, (0, import_kolmafia7.myFamiliar)(), canEquipItemCount(), _objectSpread3(_objectSpread3({}, getCurrentModes()), options.modes));
  cachedObjectives[cacheKey] = entry;
  if (options.useOutfitCaching) {
    var outfitName = outfitCache.insert(entry);
    logger_default.info("Saving equipment to outfit ".concat(outfitName, "."));
    saveOutfit(outfitName);
  }
}
function maximizeCached(objectives) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var fullOptions = mergeMaximizeOptions(defaultMaximizeOptions, options);
  var forceEquip = fullOptions.forceEquip, preventEquip = fullOptions.preventEquip, bonusEquip = fullOptions.bonusEquip, onlySlot = fullOptions.onlySlot, preventSlot = fullOptions.preventSlot, forceUpdate = fullOptions.forceUpdate;
  var objective = _toConsumableArray3(new Set([].concat(_toConsumableArray3(objectives.sort()), _toConsumableArray3(forceEquip.map(function(item9) {
    return '"equip '.concat(toMaximizerName(item9), '"');
  }).sort()), _toConsumableArray3(preventEquip.map(function(item9) {
    return '-"equip '.concat(toMaximizerName(item9), '"');
  }).sort()), _toConsumableArray3(onlySlot.map(function(slot) {
    return "".concat(slot);
  }).sort()), _toConsumableArray3(preventSlot.map(function(slot) {
    return "-".concat(slot);
  }).sort()), _toConsumableArray3(Array.from(bonusEquip.entries()).filter(function(_ref8) {
    var _ref9 = _slicedToArray4(_ref8, 2), bonus = _ref9[1];
    return bonus !== 0;
  }).map(function(_ref10) {
    var _ref11 = _slicedToArray4(_ref10, 2), item9 = _ref11[0], bonus = _ref11[1];
    return "".concat(Math.round(bonus * 100) / 100, ' "bonus ').concat(toMaximizerName(item9), '"');
  }).sort())))).join(", ");
  var untouchedSlots = cachedSlots.filter(function(slot) {
    return preventSlot.includes(slot) || onlySlot.length > 0 && !onlySlot.includes(slot);
  });
  var cacheKey = [objective].concat(_toConsumableArray3(untouchedSlots.map(function(slot) {
    return "".concat(slot, ":").concat((0, import_kolmafia7.equippedItem)(slot));
  }).sort()), [have($effect(_templateObject49 || (_templateObject49 = _taggedTemplateLiteral2(["Offhand Remarkable"]))))]).join("; ");
  var cacheEntry = checkCache(cacheKey, fullOptions);
  if (cacheEntry && !forceUpdate) {
    if (verifyCached(cacheEntry, false))
      return true;
    logger_default.info("Equipment found in maximize cache, equipping...");
    applyCached(cacheEntry, fullOptions);
    if (verifyCached(cacheEntry)) {
      logger_default.info("Equipped cached ".concat(cacheKey));
      return true;
    }
    logger_default.warning("Maximize cache application failed, maximizing...");
  }
  var result = (0, import_kolmafia7.maximize)(objective, false);
  saveCached(cacheKey, fullOptions);
  return result;
}
var _maximizeParameters = /* @__PURE__ */ new WeakMap();
var _maximizeOptions = /* @__PURE__ */ new WeakMap();
var Requirement = /* @__PURE__ */ function() {
  function Requirement2(maximizeParameters, maximizeOptions) {
    _classCallCheck6(this, Requirement2);
    _classPrivateFieldInitSpec(this, _maximizeParameters, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldInitSpec(this, _maximizeOptions, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldSet(this, _maximizeParameters, maximizeParameters);
    _classPrivateFieldSet(this, _maximizeOptions, maximizeOptions);
  }
  _createClass6(Requirement2, [{
    key: "maximizeParameters",
    get: function get4() {
      return _classPrivateFieldGet(this, _maximizeParameters);
    }
  }, {
    key: "maximizeOptions",
    get: function get4() {
      return _classPrivateFieldGet(this, _maximizeOptions);
    }
    /**
     * Merges two requirements, concanating relevant arrays. Typically used in static form.
     *
     * @param other Requirement to merge with.
     */
  }, {
    key: "merge",
    value: function merge(other) {
      var _optionsA$forceEquip, _other$maximizeOption, _optionsA$preventEqui, _other$maximizeOption3, _optionsA$bonusEquip$, _optionsA$bonusEquip, _optionsB$bonusEquip$, _optionsB$bonusEquip, _optionsA$onlySlot, _optionsB$onlySlot, _optionsA$preventSlot, _optionsB$preventSlot;
      var optionsA = this.maximizeOptions;
      var optionsB = other.maximizeOptions;
      return new Requirement2([].concat(_toConsumableArray3(this.maximizeParameters), _toConsumableArray3(other.maximizeParameters)), {
        updateOnFamiliarChange: optionsA.updateOnFamiliarChange || other.maximizeOptions.updateOnFamiliarChange,
        updateOnCanEquipChanged: optionsA.updateOnCanEquipChanged || other.maximizeOptions.updateOnCanEquipChanged,
        forceEquip: [].concat(_toConsumableArray3((_optionsA$forceEquip = optionsA.forceEquip) !== null && _optionsA$forceEquip !== void 0 ? _optionsA$forceEquip : []), _toConsumableArray3((_other$maximizeOption = other.maximizeOptions.forceEquip) !== null && _other$maximizeOption !== void 0 ? _other$maximizeOption : [])).filter(function(x) {
          var _other$maximizeOption2;
          return !((_other$maximizeOption2 = other.maximizeOptions.preventEquip) !== null && _other$maximizeOption2 !== void 0 && _other$maximizeOption2.includes(x));
        }),
        preventEquip: [].concat(_toConsumableArray3((_optionsA$preventEqui = optionsA.preventEquip) !== null && _optionsA$preventEqui !== void 0 ? _optionsA$preventEqui : []), _toConsumableArray3((_other$maximizeOption3 = other.maximizeOptions.preventEquip) !== null && _other$maximizeOption3 !== void 0 ? _other$maximizeOption3 : [])).filter(function(x) {
          var _other$maximizeOption4;
          return !((_other$maximizeOption4 = other.maximizeOptions.forceEquip) !== null && _other$maximizeOption4 !== void 0 && _other$maximizeOption4.includes(x));
        }),
        bonusEquip: new Map([].concat(_toConsumableArray3((_optionsA$bonusEquip$ = (_optionsA$bonusEquip = optionsA.bonusEquip) === null || _optionsA$bonusEquip === void 0 ? void 0 : _optionsA$bonusEquip.entries()) !== null && _optionsA$bonusEquip$ !== void 0 ? _optionsA$bonusEquip$ : []), _toConsumableArray3((_optionsB$bonusEquip$ = (_optionsB$bonusEquip = optionsB.bonusEquip) === null || _optionsB$bonusEquip === void 0 ? void 0 : _optionsB$bonusEquip.entries()) !== null && _optionsB$bonusEquip$ !== void 0 ? _optionsB$bonusEquip$ : []))),
        onlySlot: [].concat(_toConsumableArray3((_optionsA$onlySlot = optionsA.onlySlot) !== null && _optionsA$onlySlot !== void 0 ? _optionsA$onlySlot : []), _toConsumableArray3((_optionsB$onlySlot = optionsB.onlySlot) !== null && _optionsB$onlySlot !== void 0 ? _optionsB$onlySlot : [])),
        preventSlot: [].concat(_toConsumableArray3((_optionsA$preventSlot = optionsA.preventSlot) !== null && _optionsA$preventSlot !== void 0 ? _optionsA$preventSlot : []), _toConsumableArray3((_optionsB$preventSlot = optionsB.preventSlot) !== null && _optionsB$preventSlot !== void 0 ? _optionsB$preventSlot : [])),
        forceUpdate: optionsA.forceUpdate || optionsB.forceUpdate
      });
    }
    /**
     * Merges a set of requirements together, starting with an empty requirement.
     *
     * @param allRequirements Requirements to merge
     * @returns Merged requirements
     */
  }, {
    key: "maximize",
    value: (
      /**
       * Runs maximizeCached, using the maximizeParameters and maximizeOptions contained by this requirement.
       *
       * @returns Whether the maximize call succeeded.
       */
      function maximize7() {
        return maximizeCached(this.maximizeParameters, this.maximizeOptions);
      }
    )
    /**
     * Merges requirements, and then runs maximizeCached on the combined requirement.
     *
     * @param requirements Requirements to maximize on
     */
  }], [{
    key: "merge",
    value: function merge(allRequirements) {
      return allRequirements.reduce(function(x, y) {
        return x.merge(y);
      }, new Requirement2([], {}));
    }
  }, {
    key: "maximize",
    value: function maximize7() {
      for (var _len = arguments.length, requirements = new Array(_len), _key = 0; _key < _len; _key++) {
        requirements[_key] = arguments[_key];
      }
      Requirement2.merge(requirements).maximize();
    }
  }]);
  return Requirement2;
}();

// node_modules/libram/dist/actions/ActionSource.js
function _classCallCheck7(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties7(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey7(descriptor.key), descriptor);
  }
}
function _createClass7(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties7(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties7(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty6(obj, key, value) {
  key = _toPropertyKey7(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey7(arg) {
  var key = _toPrimitive7(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive7(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray4(arr) {
  return _arrayWithoutHoles4(arr) || _iterableToArray4(arr) || _unsupportedIterableToArray7(arr) || _nonIterableSpread4();
}
function _nonIterableSpread4() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray7(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray7(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray7(o, minLen);
}
function _iterableToArray4(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles4(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray7(arr);
}
function _arrayLikeToArray7(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function mergeConstraints() {
  for (var _len = arguments.length, allConstraints = new Array(_len), _key = 0; _key < _len; _key++) {
    allConstraints[_key] = arguments[_key];
  }
  var familiars = allConstraints.map(function(constraints) {
    return constraints.familiar;
  }).filter(function(familiar4) {
    return familiar4;
  });
  if (familiars.length > 1) {
    return null;
  }
  return {
    equipmentRequirements: function() {
      return Requirement.merge(_toConsumableArray4(allConstraints.map(function(constraints) {
        var _constraints$equipmen, _constraints$equipmen2;
        return (_constraints$equipmen = (_constraints$equipmen2 = constraints.equipmentRequirements) === null || _constraints$equipmen2 === void 0 ? void 0 : _constraints$equipmen2.call(constraints)) !== null && _constraints$equipmen !== void 0 ? _constraints$equipmen : new Requirement([], {});
      })));
    },
    preparation: function() {
      var success = true;
      for (var _i = 0, _allConstraints = allConstraints; _i < _allConstraints.length; _i++) {
        var constraints = _allConstraints[_i];
        success = success && (!constraints.preparation || constraints.preparation());
      }
      return success;
    },
    familiar: familiars.find(function(familiar4) {
      return familiar4;
    }),
    cost: function() {
      return sum(allConstraints, function(constraints) {
        var _constraints$cost, _constraints$cost2;
        return (_constraints$cost = (_constraints$cost2 = constraints.cost) === null || _constraints$cost2 === void 0 ? void 0 : _constraints$cost2.call(constraints)) !== null && _constraints$cost !== void 0 ? _constraints$cost : 0;
      });
    }
  };
}
var ActionSource = /* @__PURE__ */ function() {
  function ActionSource2(source, potential, macro) {
    var constraints = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    _classCallCheck7(this, ActionSource2);
    _defineProperty6(this, "source", void 0);
    _defineProperty6(this, "potential", void 0);
    _defineProperty6(this, "macro", void 0);
    _defineProperty6(this, "constraints", void 0);
    this.source = source;
    this.potential = potential;
    this.macro = macro;
    this.constraints = constraints;
  }
  _createClass7(ActionSource2, [{
    key: "name",
    value: function name() {
      return this.source.toString();
    }
    /**
     * @returns Whether the action is available.
     */
  }, {
    key: "available",
    value: function available3() {
      return this.potential() > 0;
    }
    /**
     * @returns Cost in meat per usage of the action.
     */
  }, {
    key: "cost",
    value: function cost() {
      return this.constraints.cost ? this.constraints.cost() : 0;
    }
    /**
     * @returns Whether the action costs 0 meat to use.
     */
  }, {
    key: "isFree",
    value: function isFree2() {
      return !this.cost || this.cost() === 0;
    }
    /**
     * @returns Whether unlimited uses of the action are available.
     */
  }, {
    key: "isUnlimited",
    value: function isUnlimited() {
      return this.potential() === Infinity;
    }
    /**
     * Create a compound action source with merged constraints.
     *
     * @param others Other actions to have available.
     * @returns Merged constraints, or null if they are inconsistent.
     */
  }, {
    key: "merge",
    value: function merge() {
      for (var _len2 = arguments.length, others = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        others[_key2] = arguments[_key2];
      }
      var actions = [this].concat(others);
      var constraints = mergeConstraints.apply(void 0, _toConsumableArray4(actions.map(function(action) {
        return action.constraints;
      })));
      if (constraints === null) {
        return null;
      }
      return new ActionSource2(_toConsumableArray4(flat(actions.map(function(action) {
        return action.source;
      }))), function() {
        return sum(actions, function(action) {
          return action.potential();
        });
      }, Macro.step.apply(Macro, _toConsumableArray4(actions.map(function(action) {
        return action.macro;
      }))), constraints);
    }
    /**
     * Perform all preparation necessary to make this action available.
     *
     * @param otherRequirements Any other equipment requirements.
     * @returns Whether preparation succeeded.
     */
  }, {
    key: "prepare",
    value: function prepare(otherRequirements) {
      var _this$constraints$fam, _this$constraints;
      if ((_this$constraints$fam = (_this$constraints = this.constraints).familiar) !== null && _this$constraints$fam !== void 0 && _this$constraints$fam.call(_this$constraints)) {
        if (!(0, import_kolmafia8.useFamiliar)(this.constraints.familiar()))
          return false;
      }
      if (this.constraints.equipmentRequirements) {
        var requirement = otherRequirements ? otherRequirements.merge(this.constraints.equipmentRequirements()) : this.constraints.equipmentRequirements();
        if (!requirement.maximize())
          return false;
      }
      if (this.constraints.preparation)
        return this.constraints.preparation();
      return true;
    }
    /**
     * Perform all preparation necessary to make this action available.
     * Throws an error if preparation fails.
     *
     * @param otherRequirements Any other equipment requirements.
     */
  }, {
    key: "ensure",
    value: function ensure(otherRequirements) {
      if (!this.prepare(otherRequirements)) {
        throw new Error("Failed to prepare action ".concat(this.name(), "."));
      }
    }
  }]);
  return ActionSource2;
}();
_defineProperty6(ActionSource, "defaultPriceFunction", function(item9) {
  return (0, import_kolmafia8.mallPrice)(item9) > 0 ? (0, import_kolmafia8.mallPrice)(item9) : Infinity;
});
function filterAction(action, constraints) {
  var _constraints$requireF, _constraints$requireU, _constraints$noFamili, _constraints$noRequir, _constraints$noPrepar, _constraints$maximumC, _constraints$maximumC2;
  return action.available() && (constraints.allowedAction === void 0 || constraints.allowedAction(action)) && !((_constraints$requireF = constraints.requireFamiliar) !== null && _constraints$requireF !== void 0 && _constraints$requireF.call(constraints) && !action.constraints.familiar) && !((_constraints$requireU = constraints.requireUnlimited) !== null && _constraints$requireU !== void 0 && _constraints$requireU.call(constraints) && !action.isUnlimited()) && !((_constraints$noFamili = constraints.noFamiliar) !== null && _constraints$noFamili !== void 0 && _constraints$noFamili.call(constraints) && action.constraints.familiar) && !((_constraints$noRequir = constraints.noRequirements) !== null && _constraints$noRequir !== void 0 && _constraints$noRequir.call(constraints) && action.constraints.equipmentRequirements) && !((_constraints$noPrepar = constraints.noPreparation) !== null && _constraints$noPrepar !== void 0 && _constraints$noPrepar.call(constraints) && action.constraints.preparation) && action.cost() <= ((_constraints$maximumC = (_constraints$maximumC2 = constraints.maximumCost) === null || _constraints$maximumC2 === void 0 ? void 0 : _constraints$maximumC2.call(constraints)) !== null && _constraints$maximumC !== void 0 ? _constraints$maximumC : 0);
}
function findActionSource(actions) {
  var constraints = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var validActions = actions.filter(function(actions2) {
    return filterAction(actions2, constraints);
  });
  if (validActions.length < 1)
    return null;
  return validActions.reduce(function(a, b) {
    return a.cost() <= b.cost() ? a : b;
  });
}

// node_modules/libram/dist/resources/2017/AsdonMartin.js
var AsdonMartin_exports = {};
__export(AsdonMartin_exports, {
  Driving: function() {
    return Driving;
  },
  drive: function() {
    return drive;
  },
  fillTo: function() {
    return fillTo;
  },
  fillWithInventoryTo: function() {
    return fillWithInventoryTo;
  },
  have: function() {
    return have2;
  },
  insertFuel: function() {
    return insertFuel;
  },
  installed: function() {
    return installed;
  },
  isFuelItem: function() {
    return isFuelItem;
  }
});
var import_kolmafia9 = require("kolmafia");
var _templateObject50;
var _templateObject211;
var _templateObject310;
var _templateObject410;
var _templateObject53;
var _templateObject63;
var _templateObject73;
var _templateObject83;
var _templateObject93;
var _templateObject103;
var _templateObject113;
var _templateObject123;
var _templateObject133;
function _slicedToArray5(arr, i) {
  return _arrayWithHoles5(arr) || _iterableToArrayLimit5(arr, i) || _unsupportedIterableToArray8(arr, i) || _nonIterableRest5();
}
function _nonIterableRest5() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray8(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray8(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray8(o, minLen);
}
function _arrayLikeToArray8(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit5(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles5(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral3(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var PriceAge;
(function(PriceAge2) {
  PriceAge2[PriceAge2["HISTORICAL"] = 0] = "HISTORICAL";
  PriceAge2[PriceAge2["RECENT"] = 1] = "RECENT";
  PriceAge2[PriceAge2["TODAY"] = 2] = "TODAY";
})(PriceAge || (PriceAge = {}));
function installed() {
  return (0, import_kolmafia9.getWorkshed)() === $item(_templateObject50 || (_templateObject50 = _taggedTemplateLiteral3(["Asdon Martin keyfob"])));
}
function have2() {
  return installed() || have($item(_templateObject211 || (_templateObject211 = _taggedTemplateLiteral3(["Asdon Martin keyfob"]))));
}
var fuelSkiplist = $items(_templateObject310 || (_templateObject310 = _taggedTemplateLiteral3(['cup of "tea", thermos of "whiskey", Lucky Lindy, Bee\'s Knees, Sockdollager, Ish Kabibble, Hot Socks, Phonus Balonus, Flivver, Sloppy Jalopy, glass of "milk"'])));
function priceTooOld(item9) {
  return (0, import_kolmafia9.historicalPrice)(item9) === 0 || (0, import_kolmafia9.historicalAge)(item9) >= 7;
}
function historicalPriceOrMax(item9) {
  var historical = (0, import_kolmafia9.historicalPrice)(item9);
  return historical < 0 ? 999999999 : historical;
}
function mallPriceOrMax(item9) {
  var mall = (0, import_kolmafia9.mallPrice)(item9);
  return mall < 0 ? 999999999 : mall;
}
function price(item9, priceAge) {
  switch (priceAge) {
    case PriceAge.HISTORICAL: {
      var historical = historicalPriceOrMax(item9);
      return historical === 0 ? mallPriceOrMax(item9) : historical;
    }
    case PriceAge.RECENT:
      return priceTooOld(item9) ? mallPriceOrMax(item9) : historicalPriceOrMax(item9);
    case PriceAge.TODAY:
      return mallPriceOrMax(item9);
  }
}
function inventoryItems() {
  return import_kolmafia9.Item.all().filter(isFuelItem).filter(function(item9) {
    return have(item9) && [100, (0, import_kolmafia9.autosellPrice)(item9)].includes(price(item9, PriceAge.RECENT));
  });
}
function calculateFuelUnitCost(it) {
  var priceAge = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : PriceAge.RECENT;
  var units = getAverageAdventures(it);
  return price(it, priceAge) / units;
}
function isFuelItem(it) {
  return !(0, import_kolmafia9.isNpcItem)(it) && it.fullness + it.inebriety > 0 && getAverageAdventures(it) > 0 && it.tradeable && it.discardable && !fuelSkiplist.includes(it);
}
function getBestFuels() {
  var allFuel = import_kolmafia9.Item.all().filter(isFuelItem);
  if (allFuel.filter(function(item9) {
    return (0, import_kolmafia9.historicalPrice)(item9) === 0;
  }).length > 100) {
    (0, import_kolmafia9.mallPrices)("food");
    (0, import_kolmafia9.mallPrices)("booze");
  }
  var keyHistorical = function(item9) {
    return calculateFuelUnitCost(item9, PriceAge.HISTORICAL);
  };
  allFuel.sort(function(x, y) {
    return keyHistorical(x) - keyHistorical(y);
  });
  var bestUnitCost = keyHistorical(allFuel[0]);
  var firstBadIndex = allFuel.findIndex(function(item9) {
    return keyHistorical(item9) > 5 * bestUnitCost;
  });
  var potentialFuel = firstBadIndex > 0 ? allFuel.slice(0, firstBadIndex) : allFuel;
  if (potentialFuel.filter(function(item9) {
    return priceTooOld(item9);
  }).length > 100) {
    (0, import_kolmafia9.mallPrices)("food");
    (0, import_kolmafia9.mallPrices)("booze");
  }
  var key1 = function(item9) {
    return -getAverageAdventures(item9);
  };
  var key2 = function(item9) {
    return calculateFuelUnitCost(item9, PriceAge.RECENT);
  };
  potentialFuel.sort(function(x, y) {
    return key1(x) - key1(y);
  });
  potentialFuel.sort(function(x, y) {
    return key2(x) - key2(y);
  });
  var candidates = potentialFuel.slice(0, 10);
  var key3 = function(item9) {
    return calculateFuelUnitCost(item9, PriceAge.TODAY);
  };
  candidates.sort(function(x, y) {
    return key3(x) - key3(y);
  });
  if (calculateFuelUnitCost(candidates[0], PriceAge.TODAY) > 100) {
    throw new Error("Could not identify any fuel with efficiency better than 100 meat per fuel. This means something went wrong.");
  }
  return candidates;
}
function insertFuel(it) {
  var quantity = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  var result = (0, import_kolmafia9.visitUrl)("campground.php?action=fuelconvertor&pwd&qty=".concat(quantity, "&iid=").concat(it.id, "&go=Convert%21"));
  return result.includes("The display updates with a");
}
function fillTo(targetUnits) {
  if (!installed())
    return false;
  while ((0, import_kolmafia9.getFuel)() < targetUnits) {
    var _ref = (0, import_kolmafia9.canInteract)() ? getBestFuels() : [$item(_templateObject410 || (_templateObject410 = _taggedTemplateLiteral3(["loaf of soda bread"]))), void 0], _ref2 = _slicedToArray5(_ref, 2), bestFuel = _ref2[0], secondBest = _ref2[1];
    var count = Math.ceil(targetUnits / getAverageAdventures(bestFuel));
    var ceiling = void 0;
    if (secondBest) {
      var efficiencyOfSecondBest = (0, import_kolmafia9.mallPrice)(secondBest) / getAverageAdventures(secondBest);
      ceiling = Math.ceil(efficiencyOfSecondBest * getAverageAdventures(bestFuel));
    }
    if (!(0, import_kolmafia9.canInteract)())
      (0, import_kolmafia9.retrieveItem)(count, bestFuel);
    else
      ceiling ? (0, import_kolmafia9.buy)(count, bestFuel, ceiling) : (0, import_kolmafia9.buy)(count, bestFuel);
    if (!insertFuel(bestFuel, Math.min((0, import_kolmafia9.itemAmount)(bestFuel), count))) {
      throw new Error("Failed to fuel Asdon Martin.");
    }
  }
  return (0, import_kolmafia9.getFuel)() >= targetUnits;
}
function fillWithBestInventoryItem(targetUnits) {
  var options = inventoryItems().sort(function(a, b) {
    return getAverageAdventures(b) / (0, import_kolmafia9.autosellPrice)(b) - getAverageAdventures(a) / (0, import_kolmafia9.autosellPrice)(a);
  });
  if (options.length === 0)
    return false;
  var best = options[0];
  if ((0, import_kolmafia9.autosellPrice)(best) / getAverageAdventures(best) > 100)
    return false;
  var amountToUse = clamp(Math.ceil(targetUnits / getAverageAdventures(best)), 0, (0, import_kolmafia9.itemAmount)(best));
  return insertFuel(best, amountToUse);
}
function fillWithInventoryTo(targetUnits) {
  if (!installed())
    return false;
  var continueFuelingFromInventory = true;
  while ((0, import_kolmafia9.getFuel)() < targetUnits && continueFuelingFromInventory) {
    continueFuelingFromInventory && (continueFuelingFromInventory = fillWithBestInventoryItem(targetUnits));
  }
  return fillTo(targetUnits);
}
var Driving = {
  Obnoxiously: $effect(_templateObject53 || (_templateObject53 = _taggedTemplateLiteral3(["Driving Obnoxiously"]))),
  Stealthily: $effect(_templateObject63 || (_templateObject63 = _taggedTemplateLiteral3(["Driving Stealthily"]))),
  Wastefully: $effect(_templateObject73 || (_templateObject73 = _taggedTemplateLiteral3(["Driving Wastefully"]))),
  Safely: $effect(_templateObject83 || (_templateObject83 = _taggedTemplateLiteral3(["Driving Safely"]))),
  Recklessly: $effect(_templateObject93 || (_templateObject93 = _taggedTemplateLiteral3(["Driving Recklessly"]))),
  Intimidatingly: $effect(_templateObject103 || (_templateObject103 = _taggedTemplateLiteral3(["Driving Intimidatingly"]))),
  Quickly: $effect(_templateObject113 || (_templateObject113 = _taggedTemplateLiteral3(["Driving Quickly"]))),
  Observantly: $effect(_templateObject123 || (_templateObject123 = _taggedTemplateLiteral3(["Driving Observantly"]))),
  Waterproofly: $effect(_templateObject133 || (_templateObject133 = _taggedTemplateLiteral3(["Driving Waterproofly"])))
};
function drive(style) {
  var turns2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  var preferInventory = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if (!Object.values(Driving).includes(style))
    return false;
  if (!installed())
    return false;
  if ((0, import_kolmafia9.haveEffect)(style) >= turns2)
    return true;
  var fuelNeeded = 37 * Math.ceil((turns2 - (0, import_kolmafia9.haveEffect)(style)) / 30);
  (preferInventory ? fillWithInventoryTo : fillTo)(fuelNeeded);
  while ((0, import_kolmafia9.getFuel)() >= 37 && (0, import_kolmafia9.haveEffect)(style) < turns2) {
    (0, import_kolmafia9.cliExecute)("asdonmartin drive ".concat(style.name.replace("Driving ", "")));
  }
  return (0, import_kolmafia9.haveEffect)(style) >= turns2;
}

// node_modules/libram/dist/actions/FreeRun.js
var import_kolmafia12 = require("kolmafia");

// node_modules/libram/dist/resources/2009/Bandersnatch.js
var import_kolmafia10 = require("kolmafia");
var _templateObject51;
var _templateObject213;
var _templateObject311;
function _taggedTemplateLiteral4(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var familiar = $familiar(_templateObject51 || (_templateObject51 = _taggedTemplateLiteral4(["Frumious Bandersnatch"])));
function have3() {
  return have(familiar);
}
function getRunaways() {
  return get("_banderRunaways");
}
function getMaxRunaways() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  var weightBuffs = considerWeightAdjustment ? (0, import_kolmafia10.weightAdjustment)() : 0;
  return Math.floor(((0, import_kolmafia10.familiarWeight)(familiar) + weightBuffs) / 5);
}
function getRemainingRunaways() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  return Math.max(0, getMaxRunaways(considerWeightAdjustment) - getRunaways());
}
function couldRunaway() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  return have3() && getRemainingRunaways(considerWeightAdjustment) > 0;
}
var odeSkill = $skill(_templateObject213 || (_templateObject213 = _taggedTemplateLiteral4(["The Ode to Booze"])));
var odeEffect = $effect(_templateObject311 || (_templateObject311 = _taggedTemplateLiteral4(["Ode to Booze"])));

// node_modules/libram/dist/resources/2011/StompingBoots.js
var import_kolmafia11 = require("kolmafia");
var _templateObject54;
function _taggedTemplateLiteral5(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var familiar2 = $familiar(_templateObject54 || (_templateObject54 = _taggedTemplateLiteral5(["Pair of Stomping Boots"])));
function have4() {
  return have(familiar2);
}
function getRunaways2() {
  return get("_banderRunaways");
}
function getMaxRunaways2() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  var weightBuffs = considerWeightAdjustment ? (0, import_kolmafia11.weightAdjustment)() : 0;
  return Math.floor(((0, import_kolmafia11.familiarWeight)(familiar2) + weightBuffs) / 5);
}
function getRemainingRunaways2() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  return Math.max(0, getMaxRunaways2(considerWeightAdjustment) - getRunaways2());
}
function couldRunaway2() {
  var considerWeightAdjustment = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  return have4() && getRemainingRunaways2(considerWeightAdjustment) > 0;
}

// node_modules/libram/dist/actions/FreeRun.js
var _templateObject55;
var _templateObject214;
var _templateObject313;
var _templateObject411;
var _templateObject56;
var _templateObject64;
var _templateObject74;
var _templateObject84;
var _templateObject94;
var _templateObject104;
var _templateObject114;
var _templateObject124;
var _templateObject134;
var _templateObject143;
var _templateObject153;
var _templateObject163;
var _templateObject173;
var _templateObject183;
var _templateObject193;
var _templateObject203;
var _templateObject215;
var _templateObject223;
var _templateObject233;
var _templateObject243;
var _templateObject253;
var _templateObject263;
var _templateObject273;
var _templateObject283;
var _templateObject293;
var _templateObject303;
var _templateObject314;
var _templateObject323;
var _templateObject333;
var _templateObject343;
var _templateObject353;
var _templateObject362;
var _templateObject372;
var _templateObject382;
var _templateObject392;
var _templateObject402;
var _templateObject412;
var _templateObject423;
var _templateObject432;
var _templateObject442;
var _templateObject452;
var _templateObject462;
var _templateObject472;
var _templateObject482;
var _templateObject492;
var _templateObject502;
var _templateObject512;
var _templateObject522;
var _templateObject532;
var _templateObject542;
var _templateObject552;
var _templateObject562;
var _templateObject57;
var _templateObject58;
var _templateObject59;
var _templateObject60;
var _templateObject61;
var _templateObject622;
function _toConsumableArray5(arr) {
  return _arrayWithoutHoles5(arr) || _iterableToArray5(arr) || _unsupportedIterableToArray9(arr) || _nonIterableSpread5();
}
function _nonIterableSpread5() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray9(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray9(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray9(o, minLen);
}
function _iterableToArray5(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles5(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray9(arr);
}
function _arrayLikeToArray9(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral6(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var scrapbookChargesLastUpdated = get("_lastCombatStarted");
var asdonMartinSource = new ActionSource($skill(_templateObject55 || (_templateObject55 = _taggedTemplateLiteral6(["Asdon Martin: Spring-Loaded Front Bumper"]))), function() {
  if (!installed())
    return 0;
  var banishes = get("banishedMonsters").split(":");
  var bumperIndex = banishes.map(function(string) {
    return string.toLowerCase();
  }).indexOf("spring-loaded front bumper");
  if (bumperIndex === -1)
    return 1;
  return (0, import_kolmafia12.myTurncount)() - parseInt(banishes[bumperIndex + 1]) > 30 ? 1 : 0;
}, Macro.trySkill($skill(_templateObject214 || (_templateObject214 = _taggedTemplateLiteral6(["Asdon Martin: Spring-Loaded Front Bumper"])))), {
  preparation: function() {
    return fillTo(50);
  }
});
var freeRunSources = [
  // Free limited sources
  new ActionSource($familiar(_templateObject313 || (_templateObject313 = _taggedTemplateLiteral6(["Frumious Bandersnatch"]))), function() {
    return (have($effect(_templateObject411 || (_templateObject411 = _taggedTemplateLiteral6(["Ode to Booze"])))) || getSongCount() < getSongLimit()) && couldRunaway() ? getRemainingRunaways() : 0;
  }, Macro.step("runaway"), {
    equipmentRequirements: function() {
      return new Requirement(["Familiar Weight"], {});
    },
    preparation: function() {
      ensureEffect($effect(_templateObject56 || (_templateObject56 = _taggedTemplateLiteral6(["Ode to Booze"]))));
      return have($effect(_templateObject64 || (_templateObject64 = _taggedTemplateLiteral6(["Ode to Booze"]))));
    },
    familiar: function() {
      return $familiar(_templateObject74 || (_templateObject74 = _taggedTemplateLiteral6(["Frumious Bandersnatch"])));
    }
  }),
  new ActionSource($familiar(_templateObject84 || (_templateObject84 = _taggedTemplateLiteral6(["Pair of Stomping Boots"]))), function() {
    return couldRunaway2() ? getRemainingRunaways2() : 0;
  }, Macro.step("runaway"), {
    equipmentRequirements: function() {
      return new Requirement(["Familiar Weight"], {});
    },
    familiar: function() {
      return $familiar(_templateObject94 || (_templateObject94 = _taggedTemplateLiteral6(["Pair of Stomping Boots"])));
    }
  }),
  new ActionSource($skill(_templateObject104 || (_templateObject104 = _taggedTemplateLiteral6(["Snokebomb"]))), function() {
    return have($skill(_templateObject114 || (_templateObject114 = _taggedTemplateLiteral6(["Snokebomb"])))) ? 3 - get("_snokebombUsed") : 0;
  }, Macro.skill($skill(_templateObject124 || (_templateObject124 = _taggedTemplateLiteral6(["Snokebomb"])))), {
    preparation: function() {
      return (0, import_kolmafia12.restoreMp)(50);
    }
  }),
  new ActionSource($skill(_templateObject134 || (_templateObject134 = _taggedTemplateLiteral6(["Emotionally Chipped"]))), function() {
    return have($skill(_templateObject143 || (_templateObject143 = _taggedTemplateLiteral6(["Emotionally Chipped"])))) ? 3 - get("_feelHatredUsed") : 0;
  }, Macro.skill($skill(_templateObject153 || (_templateObject153 = _taggedTemplateLiteral6(["Feel Hatred"]))))),
  new ActionSource($item(_templateObject163 || (_templateObject163 = _taggedTemplateLiteral6(["Kremlin's Greatest Briefcase"]))), function() {
    return have($item(_templateObject173 || (_templateObject173 = _taggedTemplateLiteral6(["Kremlin's Greatest Briefcase"])))) ? 3 - get("_kgbTranquilizerDartUses") : 0;
  }, Macro.skill($skill(_templateObject183 || (_templateObject183 = _taggedTemplateLiteral6(["KGB tranquilizer dart"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject193 || (_templateObject193 = _taggedTemplateLiteral6(["Kremlin's Greatest Briefcase"])))
      });
    }
  }),
  new ActionSource($item(_templateObject203 || (_templateObject203 = _taggedTemplateLiteral6(["latte lovers member's mug"]))), function() {
    return have($item(_templateObject215 || (_templateObject215 = _taggedTemplateLiteral6(["latte lovers member's mug"])))) && !get("_latteBanishUsed") ? 1 : 0;
  }, Macro.skill($skill(_templateObject223 || (_templateObject223 = _taggedTemplateLiteral6(["Throw Latte on Opponent"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject233 || (_templateObject233 = _taggedTemplateLiteral6(["latte lovers member's mug"])))
      });
    }
  }),
  new ActionSource($item(_templateObject243 || (_templateObject243 = _taggedTemplateLiteral6(["Lil' Doctor\u2122 bag"]))), function() {
    return have($item(_templateObject253 || (_templateObject253 = _taggedTemplateLiteral6(["Lil' Doctor\u2122 bag"])))) ? 3 - get("_reflexHammerUsed") : 0;
  }, Macro.skill($skill(_templateObject263 || (_templateObject263 = _taggedTemplateLiteral6(["Reflex Hammer"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject273 || (_templateObject273 = _taggedTemplateLiteral6(["Lil' Doctor\u2122 bag"])))
      });
    }
  }),
  new ActionSource($item(_templateObject283 || (_templateObject283 = _taggedTemplateLiteral6(["mafia middle finger ring"]))), function() {
    return have($item(_templateObject293 || (_templateObject293 = _taggedTemplateLiteral6(["mafia middle finger ring"])))) && (0, import_kolmafia12.canEquip)($item(_templateObject303 || (_templateObject303 = _taggedTemplateLiteral6(["mafia middle finger ring"])))) && !get("_mafiaMiddleFingerRingUsed") ? 1 : 0;
  }, Macro.skill($skill(_templateObject314 || (_templateObject314 = _taggedTemplateLiteral6(["Show them your ring"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject323 || (_templateObject323 = _taggedTemplateLiteral6(["mafia middle finger ring"])))
      });
    }
  }),
  new ActionSource($item(_templateObject333 || (_templateObject333 = _taggedTemplateLiteral6(["V for Vivala mask"]))), function() {
    return have($item(_templateObject343 || (_templateObject343 = _taggedTemplateLiteral6(["V for Vivala mask"])))) && !get("_vmaskBanisherUsed") ? 1 : 0;
  }, Macro.skill($skill(_templateObject353 || (_templateObject353 = _taggedTemplateLiteral6(["Creepy Grin"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject362 || (_templateObject362 = _taggedTemplateLiteral6(["V for Vivala mask"])))
      });
    },
    preparation: function() {
      return (0, import_kolmafia12.restoreMp)(30);
    }
  }),
  new ActionSource($item(_templateObject372 || (_templateObject372 = _taggedTemplateLiteral6(["stinky cheese eye"]))), function() {
    return getFoldGroup($item(_templateObject382 || (_templateObject382 = _taggedTemplateLiteral6(["stinky cheese eye"])))).some(function(item9) {
      return have(item9);
    }) && !get("_stinkyCheeseBanisherUsed") ? 1 : 0;
  }, Macro.skill($skill(_templateObject392 || (_templateObject392 = _taggedTemplateLiteral6(["Give Your Opponent the Stinkeye"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject402 || (_templateObject402 = _taggedTemplateLiteral6(["stinky cheese eye"])))
      });
    },
    preparation: function() {
      if (!have($item(_templateObject412 || (_templateObject412 = _taggedTemplateLiteral6(["stinky cheese eye"]))))) {
        (0, import_kolmafia12.cliExecute)("fold stinky cheese eye");
      }
      return have($item(_templateObject423 || (_templateObject423 = _taggedTemplateLiteral6(["stinky cheese eye"]))));
    }
  }),
  new ActionSource($item(_templateObject432 || (_templateObject432 = _taggedTemplateLiteral6(["navel ring of navel gazing"]))), function() {
    return have($item(_templateObject442 || (_templateObject442 = _taggedTemplateLiteral6(["navel ring of navel gazing"])))) ? Math.max(0, 3 - get("_navelRunaways")) : 0;
  }, Macro.step("runaway"), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject452 || (_templateObject452 = _taggedTemplateLiteral6(["navel ring of navel gazing"])))
      });
    }
  }),
  new ActionSource($item(_templateObject462 || (_templateObject462 = _taggedTemplateLiteral6(["Greatest American Pants"]))), function() {
    return have($item(_templateObject472 || (_templateObject472 = _taggedTemplateLiteral6(["Greatest American Pants"])))) ? Math.max(0, 3 - get("_navelRunaways")) : 0;
  }, Macro.step("runaway"), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject482 || (_templateObject482 = _taggedTemplateLiteral6(["Greatest American Pants"])))
      });
    }
  }),
  new ActionSource($skill(_templateObject492 || (_templateObject492 = _taggedTemplateLiteral6(["Show your boring familiar pictures"]))), function() {
    if (have($item(_templateObject502 || (_templateObject502 = _taggedTemplateLiteral6(["familiar scrapbook"]))))) {
      if (scrapbookChargesLastUpdated !== get("_lastCombatStarted")) {
        (0, import_kolmafia12.visitUrl)("desc_item.php?whichitem=463063785");
        scrapbookChargesLastUpdated = get("_lastCombatStarted");
      }
      return Math.floor(get("scrapbookCharges") / 100);
    }
    return 0;
  }, Macro.skill($skill(_templateObject512 || (_templateObject512 = _taggedTemplateLiteral6(["Show your boring familiar pictures"])))), {
    equipmentRequirements: function() {
      return new Requirement([], {
        forceEquip: $items(_templateObject522 || (_templateObject522 = _taggedTemplateLiteral6(["familiar scrapbook"])))
      });
    }
  }),
  new ActionSource($item(_templateObject532 || (_templateObject532 = _taggedTemplateLiteral6(["peppermint parasol"]))), function() {
    return Math.max(0, 3 - get("_navelRunaways"));
  }, Macro.item($item(_templateObject542 || (_templateObject542 = _taggedTemplateLiteral6(["peppermint parasol"])))), {
    preparation: function() {
      return (0, import_kolmafia12.retrieveItem)($item(_templateObject552 || (_templateObject552 = _taggedTemplateLiteral6(["peppermint parasol"]))));
    },
    cost: function() {
      return Math.min(ActionSource.defaultPriceFunction($item(_templateObject562 || (_templateObject562 = _taggedTemplateLiteral6(["peppermint sprout"])))) * 5, ActionSource.defaultPriceFunction($item(_templateObject57 || (_templateObject57 = _taggedTemplateLiteral6(["peppermint parasol"]))))) / 10;
    }
    // Breaks after 10 successful runaways.
  }),
  new ActionSource($item(_templateObject58 || (_templateObject58 = _taggedTemplateLiteral6(["human musk"]))), function() {
    return Math.max(0, 3 - get("_humanMuskUses"));
  }, Macro.item($item(_templateObject59 || (_templateObject59 = _taggedTemplateLiteral6(["human musk"])))), {
    preparation: function() {
      return (0, import_kolmafia12.retrieveItem)($item(_templateObject60 || (_templateObject60 = _taggedTemplateLiteral6(["human musk"]))));
    },
    cost: function() {
      return ActionSource.defaultPriceFunction($item(_templateObject61 || (_templateObject61 = _taggedTemplateLiteral6(["human musk"]))));
    }
  })
].concat(_toConsumableArray5($items(_templateObject622 || (_templateObject622 = _taggedTemplateLiteral6(["Louder Than Bomb, divine champagne popper, tennis ball"]))).map(function(item9) {
  return new ActionSource(item9, function() {
    return Infinity;
  }, Macro.item(item9), {
    preparation: function() {
      return (0, import_kolmafia12.retrieveItem)(item9);
    },
    cost: function() {
      return ActionSource.defaultPriceFunction(item9);
    }
  });
})));
function tryFindFreeRun(constraints) {
  var source = findActionSource(freeRunSources, constraints);
  if (source && asdonMartinSource.available()) {
    source = asdonMartinSource.merge(source);
  }
  return source;
}
function ensureFreeRun(constraints) {
  var source = tryFindFreeRun(constraints);
  if (!source) {
    throw new Error("Failed to ensure Free Run source");
  }
  return source;
}

// node_modules/libram/dist/resources/2010/CrownOfThrones.js
var CrownOfThrones_exports = {};
__export(CrownOfThrones_exports, {
  createModifierValueFunction: function() {
    return createModifierValueFunction;
  },
  createRiderMode: function() {
    return createRiderMode;
  },
  getModifier: function() {
    return getModifier;
  },
  hasRiderMode: function() {
    return hasRiderMode;
  },
  pickRider: function() {
    return pickRider;
  },
  ridingFamiliars: function() {
    return ridingFamiliars;
  },
  valueRider: function() {
    return valueRider;
  }
});
var import_kolmafia13 = require("kolmafia");
var _templateObject65;
var _templateObject216;
var _templateObject315;
var _templateObject413;
var _templateObject510;
var _templateObject66;
var _templateObject75;
var _templateObject85;
var _templateObject95;
var _templateObject105;
var _templateObject115;
var _templateObject125;
var _templateObject135;
var _templateObject144;
var _templateObject154;
var _templateObject164;
var _templateObject174;
var _templateObject184;
var _templateObject194;
var _templateObject204;
var _templateObject217;
var _templateObject224;
var _templateObject234;
var _templateObject244;
var _templateObject254;
var _templateObject264;
var _templateObject274;
var _templateObject284;
var _templateObject294;
var _templateObject304;
var _templateObject316;
var _templateObject324;
var _templateObject334;
var _templateObject344;
var _templateObject354;
var _templateObject363;
var _templateObject373;
var _templateObject383;
var _templateObject393;
var _templateObject403;
var _templateObject414;
var _templateObject424;
var _templateObject433;
var _templateObject443;
var _templateObject453;
var _templateObject463;
var _templateObject473;
var _templateObject483;
var _templateObject493;
var _templateObject503;
var _templateObject513;
var _templateObject523;
var _templateObject533;
var _templateObject543;
var _templateObject553;
var _templateObject563;
var _templateObject572;
var _templateObject582;
var _templateObject592;
var _templateObject602;
var _templateObject612;
var _templateObject623;
var _templateObject632;
var _templateObject642;
var _templateObject652;
var _templateObject662;
var _templateObject67;
var _templateObject68;
var _templateObject69;
var _templateObject70;
var _templateObject71;
var _templateObject722;
var _templateObject732;
var _templateObject742;
var _templateObject752;
var _templateObject76;
var _templateObject77;
var _templateObject78;
var _templateObject79;
var _templateObject80;
var _templateObject81;
var _templateObject822;
var _templateObject832;
var _templateObject842;
var _templateObject852;
var _templateObject86;
var _templateObject87;
var _templateObject88;
var _templateObject89;
var _templateObject90;
var _templateObject91;
var _templateObject922;
var _templateObject932;
var _templateObject942;
var _templateObject952;
var _templateObject96;
var _templateObject97;
var _templateObject98;
var _templateObject99;
function ownKeys4(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread4(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys4(Object(source), true).forEach(function(key) {
      _defineProperty7(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys4(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty7(obj, key, value) {
  key = _toPropertyKey8(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey8(arg) {
  var key = _toPrimitive8(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive8(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray6(arr) {
  return _arrayWithoutHoles6(arr) || _iterableToArray6(arr) || _unsupportedIterableToArray10(arr) || _nonIterableSpread6();
}
function _nonIterableSpread6() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray10(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray10(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray10(o, minLen);
}
function _iterableToArray6(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles6(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray10(arr);
}
function _arrayLikeToArray10(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral7(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var ridingFamiliars = [{
  familiar: $familiar(_templateObject65 || (_templateObject65 = _taggedTemplateLiteral7(["Puck Man"]))),
  drops: $items(_templateObject216 || (_templateObject216 = _taggedTemplateLiteral7(["yellow pixel"]))),
  probability: 0.25,
  dropPredicate: function() {
    return get("_yellowPixelDropsCrown") < 25;
  }
}, {
  familiar: $familiar(_templateObject315 || (_templateObject315 = _taggedTemplateLiteral7(["Ms. Puck Man"]))),
  drops: $items(_templateObject413 || (_templateObject413 = _taggedTemplateLiteral7(["yellow pixel"]))),
  probability: 0.25,
  dropPredicate: function() {
    return get("_yellowPixelDropsCrown") < 25;
  }
}, {
  familiar: $familiar(_templateObject510 || (_templateObject510 = _taggedTemplateLiteral7(["Grimstone Golem"]))),
  drops: $items(_templateObject66 || (_templateObject66 = _taggedTemplateLiteral7(["grimstone mask"]))),
  probability: 0.5,
  dropPredicate: function() {
    return get("_grimstoneMaskDropsCrown") < 1;
  }
}, {
  familiar: $familiar(_templateObject75 || (_templateObject75 = _taggedTemplateLiteral7(["Knob Goblin Organ Grinder"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject85 || (_templateObject85 = _taggedTemplateLiteral7(["Happy Medium"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject95 || (_templateObject95 = _taggedTemplateLiteral7(["Garbage Fire"]))),
  drops: $items(_templateObject105 || (_templateObject105 = _taggedTemplateLiteral7(["burning newspaper"]))),
  probability: 0.5,
  dropPredicate: function() {
    return get("_garbageFireDropsCrown") < 3;
  }
}, {
  familiar: $familiar(_templateObject115 || (_templateObject115 = _taggedTemplateLiteral7(["Machine Elf"]))),
  drops: $items(_templateObject125 || (_templateObject125 = _taggedTemplateLiteral7(["abstraction: sensation, abstraction: thought, abstraction: action, abstraction: category, abstraction: perception, abstraction: purpose"]))),
  probability: 0.2,
  dropPredicate: function() {
    return get("_abstractionDropsCrown") < 25;
  }
}, {
  familiar: $familiar(_templateObject135 || (_templateObject135 = _taggedTemplateLiteral7(["Trick-or-Treating Tot"]))),
  drops: $items(_templateObject144 || (_templateObject144 = _taggedTemplateLiteral7(["hoarded candy wad"]))),
  probability: 0.5,
  dropPredicate: function() {
    return get("_hoardedCandyDropsCrown") < 3;
  }
}, {
  familiar: $familiar(_templateObject154 || (_templateObject154 = _taggedTemplateLiteral7(["Warbear Drone"]))),
  drops: $items(_templateObject164 || (_templateObject164 = _taggedTemplateLiteral7(["warbear whosit"]))),
  probability: 1 / 4.5
}, {
  familiar: $familiar(_templateObject174 || (_templateObject174 = _taggedTemplateLiteral7(["Li'l Xenomorph"]))),
  drops: $items(_templateObject184 || (_templateObject184 = _taggedTemplateLiteral7(["lunar isotope"]))),
  probability: 0.05
}, {
  familiar: $familiar(_templateObject194 || (_templateObject194 = _taggedTemplateLiteral7(["Pottery Barn Owl"]))),
  drops: $items(_templateObject204 || (_templateObject204 = _taggedTemplateLiteral7(["volcanic ash"]))),
  probability: 0.1
}, {
  familiar: $familiar(_templateObject217 || (_templateObject217 = _taggedTemplateLiteral7(["Grim Brother"]))),
  drops: $items(_templateObject224 || (_templateObject224 = _taggedTemplateLiteral7(["grim fairy tale"]))),
  probability: 1,
  dropPredicate: function() {
    return get("_grimFairyTaleDropsCrown") < 2;
  }
}, {
  familiar: $familiar(_templateObject234 || (_templateObject234 = _taggedTemplateLiteral7(["Optimistic Candle"]))),
  drops: $items(_templateObject244 || (_templateObject244 = _taggedTemplateLiteral7(["glob of melted wax"]))),
  probability: 1,
  dropPredicate: function() {
    return get("_optimisticCandleDropsCrown") < 3;
  }
}, {
  familiar: $familiar(_templateObject254 || (_templateObject254 = _taggedTemplateLiteral7(["Adventurous Spelunker"]))),
  drops: $items(_templateObject264 || (_templateObject264 = _taggedTemplateLiteral7(["teflon ore, velcro ore, vinyl ore, cardboard ore, styrofoam ore, bubblewrap ore"]))),
  probability: 1,
  dropPredicate: function() {
    return get("_oreDropsCrown") < 6;
  }
}, {
  familiar: $familiar(_templateObject274 || (_templateObject274 = _taggedTemplateLiteral7(["Twitching Space Critter"]))),
  drops: $items(_templateObject284 || (_templateObject284 = _taggedTemplateLiteral7(["space beast fur"]))),
  probability: 1,
  dropPredicate: function() {
    return get("_spaceFurDropsCrown") < 1;
  }
}, {
  familiar: $familiar(_templateObject294 || (_templateObject294 = _taggedTemplateLiteral7(["Party Mouse"]))),
  drops: 50,
  probability: 0.05
}, {
  familiar: $familiar(_templateObject304 || (_templateObject304 = _taggedTemplateLiteral7(["Yule Hound"]))),
  drops: $items(_templateObject316 || (_templateObject316 = _taggedTemplateLiteral7(["candy cane"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject324 || (_templateObject324 = _taggedTemplateLiteral7(["Gluttonous Green Ghost"]))),
  drops: $items(_templateObject334 || (_templateObject334 = _taggedTemplateLiteral7(["bean burrito, enchanted bean burrito, jumping bean burrito"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject344 || (_templateObject344 = _taggedTemplateLiteral7(["Reassembled Blackbird"]))),
  drops: $items(_templateObject354 || (_templateObject354 = _taggedTemplateLiteral7(["blackberry"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject363 || (_templateObject363 = _taggedTemplateLiteral7(["Reconstituted Crow"]))),
  drops: $items(_templateObject373 || (_templateObject373 = _taggedTemplateLiteral7(["blackberry"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject383 || (_templateObject383 = _taggedTemplateLiteral7(["Hunchbacked Minion"]))),
  drops: /* @__PURE__ */ new Map([[$item(_templateObject393 || (_templateObject393 = _taggedTemplateLiteral7(["disembodied brain"]))), 0.02], [$item(_templateObject403 || (_templateObject403 = _taggedTemplateLiteral7(["skeleton bone"]))), 0.98]]),
  probability: 1
}, {
  familiar: $familiar(_templateObject414 || (_templateObject414 = _taggedTemplateLiteral7(["Reanimated Reanimator"]))),
  drops: $items(_templateObject424 || (_templateObject424 = _taggedTemplateLiteral7(["hot wing, broken skull"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject433 || (_templateObject433 = _taggedTemplateLiteral7(["Attention-Deficit Demon"]))),
  drops: $items(_templateObject443 || (_templateObject443 = _taggedTemplateLiteral7(["chorizo brownies, white chocolate and tomato pizza, carob chunk noodles"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject453 || (_templateObject453 = _taggedTemplateLiteral7(["Piano Cat"]))),
  drops: $items(_templateObject463 || (_templateObject463 = _taggedTemplateLiteral7(["beertini, papaya slung, salty slug, tomato daiquiri"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject473 || (_templateObject473 = _taggedTemplateLiteral7(["Golden Monkey"]))),
  drops: $items(_templateObject483 || (_templateObject483 = _taggedTemplateLiteral7(["gold nuggets"]))),
  probability: 0.5
}, {
  familiar: $familiar(_templateObject493 || (_templateObject493 = _taggedTemplateLiteral7(["Robot Reindeer"]))),
  drops: $items(_templateObject503 || (_templateObject503 = _taggedTemplateLiteral7(["candy cane, eggnog, fruitcake, gingerbread bugbear"]))),
  probability: 0.3
}, {
  familiar: $familiar(_templateObject513 || (_templateObject513 = _taggedTemplateLiteral7(["Stocking Mimic"]))),
  drops: $items(_templateObject523 || (_templateObject523 = _taggedTemplateLiteral7(["Angry Farmer candy, Cold Hots candy, Rock Pops, Tasty Fun Good rice candy, Wint-O-Fresh mint"]))),
  probability: 0.3
}, {
  familiar: $familiar(_templateObject533 || (_templateObject533 = _taggedTemplateLiteral7(["BRICKO chick"]))),
  drops: $items(_templateObject543 || (_templateObject543 = _taggedTemplateLiteral7(["BRICKO brick"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject553 || (_templateObject553 = _taggedTemplateLiteral7(["Cotton Candy Carnie"]))),
  drops: $items(_templateObject563 || (_templateObject563 = _taggedTemplateLiteral7(["cotton candy pinch"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject572 || (_templateObject572 = _taggedTemplateLiteral7(["Untamed Turtle"]))),
  drops: $items(_templateObject582 || (_templateObject582 = _taggedTemplateLiteral7(["snailmail bits, turtlemail bits, turtle wax"]))),
  probability: 0.35
}, {
  familiar: $familiar(_templateObject592 || (_templateObject592 = _taggedTemplateLiteral7(["Astral Badger"]))),
  drops: $items(_templateObject602 || (_templateObject602 = _taggedTemplateLiteral7(["spooky mushroom, Knob mushroom, Knoll mushroom"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject612 || (_templateObject612 = _taggedTemplateLiteral7(["Green Pixie"]))),
  drops: $items(_templateObject623 || (_templateObject623 = _taggedTemplateLiteral7(["bottle of tequila"]))),
  probability: 0.2
}, {
  familiar: $familiar(_templateObject632 || (_templateObject632 = _taggedTemplateLiteral7(["Angry Goat"]))),
  drops: $items(_templateObject642 || (_templateObject642 = _taggedTemplateLiteral7(["goat cheese pizza"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject652 || (_templateObject652 = _taggedTemplateLiteral7(["Adorable Seal Larva"]))),
  drops: $items(_templateObject662 || (_templateObject662 = _taggedTemplateLiteral7(["stench nuggets, spooky nuggets, hot nuggets, cold nuggets, sleaze nuggets"]))),
  probability: 0.35
}, {
  familiar: $familiar(_templateObject67 || (_templateObject67 = _taggedTemplateLiteral7(["Ancient Yuletide Troll"]))),
  drops: $items(_templateObject68 || (_templateObject68 = _taggedTemplateLiteral7(["candy cane, eggnog, fruitcake, gingerbread bugbear"]))),
  probability: 0.3
}, {
  familiar: $familiar(_templateObject69 || (_templateObject69 = _taggedTemplateLiteral7(["Sweet Nutcracker"]))),
  drops: $items(_templateObject70 || (_templateObject70 = _taggedTemplateLiteral7(["candy cane, eggnog, fruitcake, gingerbread bugbear"]))),
  probability: 0.3
}, {
  familiar: $familiar(_templateObject71 || (_templateObject71 = _taggedTemplateLiteral7(["Casagnova Gnome"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject722 || (_templateObject722 = _taggedTemplateLiteral7(["Coffee Pixie"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject732 || (_templateObject732 = _taggedTemplateLiteral7(["Dancing Frog"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject742 || (_templateObject742 = _taggedTemplateLiteral7(["Grouper Groupie"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject752 || (_templateObject752 = _taggedTemplateLiteral7(["Hand Turkey"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject76 || (_templateObject76 = _taggedTemplateLiteral7(["Hippo Ballerina"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject77 || (_templateObject77 = _taggedTemplateLiteral7(["Jitterbug"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject78 || (_templateObject78 = _taggedTemplateLiteral7(["Leprechaun"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject79 || (_templateObject79 = _taggedTemplateLiteral7(["Obtuse Angel"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject80 || (_templateObject80 = _taggedTemplateLiteral7(["Psychedelic Bear"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject81 || (_templateObject81 = _taggedTemplateLiteral7(["Robortender"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject822 || (_templateObject822 = _taggedTemplateLiteral7(["Ghost of Crimbo Commerce"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject832 || (_templateObject832 = _taggedTemplateLiteral7(["Hobo Monkey"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject842 || (_templateObject842 = _taggedTemplateLiteral7(["Rockin' Robin"]))),
  drops: 60,
  probability: 1
}, {
  familiar: $familiar(_templateObject852 || (_templateObject852 = _taggedTemplateLiteral7(["Feral Kobold"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject86 || (_templateObject86 = _taggedTemplateLiteral7(["Oily Woim"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject87 || (_templateObject87 = _taggedTemplateLiteral7(["Cat Burglar"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject88 || (_templateObject88 = _taggedTemplateLiteral7(["Misshapen Animal Skeleton"]))),
  drops: 30,
  probability: 1
}, {
  familiar: $familiar(_templateObject89 || (_templateObject89 = _taggedTemplateLiteral7(["Gelatinous Cubeling"]))),
  drops: 0,
  probability: 0
}, {
  familiar: $familiar(_templateObject90 || (_templateObject90 = _taggedTemplateLiteral7(["Frozen Gravy Fairy"]))),
  drops: $items(_templateObject91 || (_templateObject91 = _taggedTemplateLiteral7(["cold nuggets"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject922 || (_templateObject922 = _taggedTemplateLiteral7(["Stinky Gravy Fairy"]))),
  drops: $items(_templateObject932 || (_templateObject932 = _taggedTemplateLiteral7(["stench nuggets"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject942 || (_templateObject942 = _taggedTemplateLiteral7(["Sleazy Gravy Fairy"]))),
  drops: $items(_templateObject952 || (_templateObject952 = _taggedTemplateLiteral7(["sleaze nuggets"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject96 || (_templateObject96 = _taggedTemplateLiteral7(["Spooky Gravy Fairy"]))),
  drops: $items(_templateObject97 || (_templateObject97 = _taggedTemplateLiteral7(["spooky nuggets"]))),
  probability: 1
}, {
  familiar: $familiar(_templateObject98 || (_templateObject98 = _taggedTemplateLiteral7(["Flaming Gravy Fairy"]))),
  // drops a hot nugget every combat, 5 of which can be used to make a hot wad
  drops: $items(_templateObject99 || (_templateObject99 = _taggedTemplateLiteral7(["hot nuggets"]))),
  probability: 1
}];
var FULL_RIDING_LIST = [].concat(ridingFamiliars, _toConsumableArray6(import_kolmafia13.Familiar.all().filter(function(f) {
  return !ridingFamiliars.some(function(_ref) {
    var familiar4 = _ref.familiar;
    return familiar4 === f;
  });
}).map(function(familiar4) {
  return {
    familiar: familiar4,
    drops: 0,
    probability: 1
  };
})));
function valueRider(rider, modifierValueFunction, dropsValueFunction2) {
  var ignoreLimitedDrops = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
  var dropValue2 = !rider.dropPredicate || rider.dropPredicate() && !ignoreLimitedDrops ? rider.probability * (typeof rider.drops === "number" ? rider.drops : dropsValueFunction2(rider.drops)) : 0;
  var modifierValue = modifierValueFunction(rider.familiar);
  return dropValue2 + modifierValue;
}
var riderModes = /* @__PURE__ */ new Map();
var DEFAULTS = {
  modifierValueFunction: function() {
    return 0;
  },
  dropsValueFunction: function() {
    return 0;
  },
  ignoreLimitedDrops: false,
  excludeCurrentFamiliar: true
};
function createRiderMode(name, details) {
  return riderModes.set(name, _objectSpread4(_objectSpread4({}, DEFAULTS), details));
}
function hasRiderMode(name) {
  return riderModes.has(name);
}
var riderLists = /* @__PURE__ */ new Map();
function pickRider(mode) {
  var modeData = riderModes.get(mode);
  if (!modeData)
    return null;
  var modifierValueFunction = modeData.modifierValueFunction, dropsValueFunction2 = modeData.dropsValueFunction, ignoreLimitedDrops = modeData.ignoreLimitedDrops, excludeCurrentFamiliar = modeData.excludeCurrentFamiliar;
  if (!riderLists.has(mode)) {
    riderLists.set(mode, FULL_RIDING_LIST.filter(function(_ref2) {
      var familiar4 = _ref2.familiar;
      return have(familiar4);
    }).sort(function(a, b) {
      return valueRider(b, modifierValueFunction, dropsValueFunction2, ignoreLimitedDrops) - valueRider(a, modifierValueFunction, dropsValueFunction2, ignoreLimitedDrops);
    }));
  }
  var list = riderLists.get(mode);
  if (list) {
    var riderToReturn = list.find(function(_ref3) {
      var _dropPredicate;
      var dropPredicate = _ref3.dropPredicate, familiar4 = _ref3.familiar;
      return ((_dropPredicate = dropPredicate === null || dropPredicate === void 0 ? void 0 : dropPredicate()) !== null && _dropPredicate !== void 0 ? _dropPredicate : true) && (!excludeCurrentFamiliar || (0, import_kolmafia13.myFamiliar)() !== familiar4);
    });
    return riderToReturn !== null && riderToReturn !== void 0 ? riderToReturn : null;
  }
  return null;
}
function getModifier(modifier, familiar4) {
  return (0, import_kolmafia13.numericModifier)("Throne:".concat(familiar4), modifier);
}
function createModifierValueFunction(modifiers, functions) {
  return function(familiar4) {
    return sum(modifiers, function(modifier) {
      return functions[modifier](getModifier(modifier, familiar4));
    });
  };
}

// node_modules/libram/dist/Copier.js
function _defineProperties8(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey9(descriptor.key), descriptor);
  }
}
function _createClass8(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties8(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties8(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _classCallCheck8(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperty8(obj, key, value) {
  key = _toPropertyKey9(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey9(arg) {
  var key = _toPrimitive9(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive9(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var Copier = /* @__PURE__ */ _createClass8(function Copier2(couldCopy, prepare, canCopy, copiedMonster, fightCopy) {
  _classCallCheck8(this, Copier2);
  _defineProperty8(this, "couldCopy", void 0);
  _defineProperty8(this, "prepare", void 0);
  _defineProperty8(this, "canCopy", void 0);
  _defineProperty8(this, "copiedMonster", void 0);
  _defineProperty8(this, "fightCopy", null);
  this.couldCopy = couldCopy;
  this.prepare = prepare;
  this.canCopy = canCopy;
  this.copiedMonster = copiedMonster;
  if (fightCopy)
    this.fightCopy = fightCopy;
});

// node_modules/libram/dist/resources/2013/Florist.js
var Florist_exports = {};
__export(Florist_exports, {
  AloeGuvnor: function() {
    return AloeGuvnor;
  },
  ArcticMoss: function() {
    return ArcticMoss;
  },
  Artichoker: function() {
    return Artichoker;
  },
  BamBoo: function() {
    return BamBoo;
  },
  BlusteryPuffball: function() {
    return BlusteryPuffball;
  },
  CannedSpinach: function() {
    return CannedSpinach;
  },
  CeleryStalker: function() {
    return CeleryStalker;
  },
  Chillterelle: function() {
    return Chillterelle;
  },
  Crookweed: function() {
    return Crookweed;
  },
  DeadlyCinnamon: function() {
    return DeadlyCinnamon;
  },
  DisLichen: function() {
    return DisLichen;
  },
  Duckweed: function() {
    return Duckweed;
  },
  ElectricEelgrass: function() {
    return ElectricEelgrass;
  },
  FoulToadstool: function() {
    return FoulToadstool;
  },
  HornOfPlenty: function() {
    return HornOfPlenty;
  },
  Impatiens: function() {
    return Impatiens;
  },
  Kelptomaniac: function() {
    return Kelptomaniac;
  },
  LettuceSpray: function() {
    return LettuceSpray;
  },
  LooseMorels: function() {
    return LooseMorels;
  },
  MaxHeadshroom: function() {
    return MaxHeadshroom;
  },
  OrcaOrchid: function() {
    return OrcaOrchid;
  },
  PitcherPlant: function() {
    return PitcherPlant;
  },
  Portlybella: function() {
    return Portlybella;
  },
  RabidDogwood: function() {
    return RabidDogwood;
  },
  RadishRadish: function() {
    return RadishRadish;
  },
  RedFern: function() {
    return RedFern;
  },
  Rutabeggar: function() {
    return Rutabeggar;
  },
  Sargassum: function() {
    return Sargassum;
  },
  SeltzerWatercress: function() {
    return SeltzerWatercress;
  },
  ShuffleTruffle: function() {
    return ShuffleTruffle;
  },
  SkunkCabbage: function() {
    return SkunkCabbage;
  },
  SmokeRa: function() {
    return SmokeRa;
  },
  Snori: function() {
    return Snori;
  },
  Spankton: function() {
    return Spankton;
  },
  SpiderPlant: function() {
    return SpiderPlant;
  },
  StealingMagnolia: function() {
    return StealingMagnolia;
  },
  SubSeaRose: function() {
    return SubSeaRose;
  },
  UpSeaDaisy: function() {
    return UpSeaDaisy;
  },
  WarLily: function() {
    return WarLily;
  },
  WizardsWig: function() {
    return WizardsWig;
  },
  all: function() {
    return all;
  },
  flowersAvailableFor: function() {
    return flowersAvailableFor;
  },
  flowersIn: function() {
    return flowersIn;
  },
  have: function() {
    return have5;
  },
  isFull: function() {
    return isFull;
  }
});
var import_kolmafia15 = require("kolmafia");

// node_modules/libram/dist/modifier.js
var import_kolmafia14 = require("kolmafia");

// node_modules/libram/dist/modifierTypes.js
var booleanModifiers = ["Softcore Only", "Single Equip", "Never Fumble", "Weakens Monster", "Free Pull", "Variable", "Nonstackable Watch", "Cold Immunity", "Hot Immunity", "Sleaze Immunity", "Spooky Immunity", "Stench Immunity", "Cold Vulnerability", "Hot Vulnerability", "Sleaze Vulnerability", "Spooky Vulnerability", "Stench Vulnerability", "Moxie Controls MP", "Moxie May Control MP", "Four Songs", "Adventure Underwater", "Underwater Familiar", "Generic", "Unarmed", "No Pull", "Lasts Until Rollover", "Attacks Can't Miss", "Pirate", "Breakable", "Drops Items", "Drops Meat"];
var classModifiers = ["Class"];
var numericModifiers = ["Familiar Weight", "Monster Level", "Combat Rate", "Initiative", "Experience", "Item Drop", "Meat Drop", "Damage Absorption", "Damage Reduction", "Cold Resistance", "Hot Resistance", "Sleaze Resistance", "Spooky Resistance", "Stench Resistance", "Mana Cost", "Moxie", "Moxie Percent", "Muscle", "Muscle Percent", "Mysticality", "Mysticality Percent", "Maximum HP", "Maximum HP Percent", "Maximum MP", "Maximum MP Percent", "Weapon Damage", "Ranged Damage", "Spell Damage", "Spell Damage Percent", "Cold Damage", "Hot Damage", "Sleaze Damage", "Spooky Damage", "Stench Damage", "Cold Spell Damage", "Hot Spell Damage", "Sleaze Spell Damage", "Spooky Spell Damage", "Stench Spell Damage", "Underwater Combat Rate", "Fumble", "HP Regen Min", "HP Regen Max", "MP Regen Min", "MP Regen Max", "Adventures", "Familiar Weight Percent", "Weapon Damage Percent", "Ranged Damage Percent", "Stackable Mana Cost", "Hobo Power", "Base Resting HP", "Resting HP Percent", "Bonus Resting HP", "Base Resting MP", "Resting MP Percent", "Bonus Resting MP", "Critical Hit Percent", "PvP Fights", "Volleyball", "Sombrero", "Leprechaun", "Fairy", "Meat Drop Penalty", "Hidden Familiar Weight", "Item Drop Penalty", "Initiative Penalty", "Food Drop", "Booze Drop", "Hat Drop", "Weapon Drop", "Offhand Drop", "Shirt Drop", "Pants Drop", "Accessory Drop", "Volleyball Effectiveness", "Sombrero Effectiveness", "Leprechaun Effectiveness", "Fairy Effectiveness", "Familiar Weight Cap", "Slime Resistance", "Slime Hates It", "Spell Critical Percent", "Muscle Experience", "Mysticality Experience", "Moxie Experience", "Effect Duration", "Candy Drop", "DB Combat Damage", "Sombrero Bonus", "Familiar Experience", "Sporadic Meat Drop", "Sporadic Item Drop", "Meat Bonus", "Pickpocket Chance", "Combat Mana Cost", "Muscle Experience Percent", "Mysticality Experience Percent", "Moxie Experience Percent", "Minstrel Level", "Muscle Limit", "Mysticality Limit", "Moxie Limit", "Song Duration", "Prismatic Damage", "Smithsness", "Supercold Resistance", "Reduce Enemy Defense", "Pool Skill", "Surgeonosity", "Familiar Damage", "Gear Drop", "Maximum Hooch", "Water Level", "Crimbot Outfit Power", "Familiar Tuning Muscle", "Familiar Tuning Mysticality", "Familiar Tuning Moxie", "Random Monster Modifiers", "Luck", "Othello Skill", "Disco Style", "Rollover Effect Duration", "Sixgun Damage", "Fishing Skill", "Additional Song", "Sprinkle Drop", "Absorb Adventures", "Absorb Stats", "Rubee Drop", "Kruegerand Drop", "WarBear Armor Penetration", "Clowniness", "Maximum PP", "Plumber Power", "Drippy Damage", "Drippy Resistance", "Energy", "Scrap", "Familiar Action Bonus", "Water"];
var effectModifiers = ["Effect", "Rollover Effect"];
var monsterModifiers = ["Avatar"];
var skillModifiers = ["Skill"];
var statModifiers = ["Plumber Stat"];
var stringModifiers = ["Intrinsic Effect", "Equalize", "Wiki Name", "Modifiers", "Outfit", "Stat Tuning", "Equips On", "Familiar Effect", "Jiggle", "Equalize Muscle", "Equalize Mysticality", "Equalize Moxie", "Floor Buffed Muscle", "Floor Buffed Mysticality", "Floor Buffed Moxie"];

// node_modules/libram/dist/modifier.js
function ownKeys5(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread5(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys5(Object(source), true).forEach(function(key) {
      _defineProperty9(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys5(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty9(obj, key, value) {
  key = _toPropertyKey10(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey10(arg) {
  var key = _toPrimitive10(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive10(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function get2(name, subject) {
  if (arrayContains(name, booleanModifiers)) {
    return subject === void 0 ? (0, import_kolmafia14.booleanModifier)(name) : (0, import_kolmafia14.booleanModifier)(subject, name);
  }
  if (arrayContains(name, classModifiers)) {
    return (0, import_kolmafia14.classModifier)(subject, name);
  }
  if (arrayContains(name, effectModifiers)) {
    return (0, import_kolmafia14.effectModifier)(subject, name);
  }
  if (arrayContains(name, monsterModifiers)) {
    return (0, import_kolmafia14.monsterModifier)(subject, name);
  }
  if (arrayContains(name, numericModifiers)) {
    return subject === void 0 ? (0, import_kolmafia14.numericModifier)(name) : (0, import_kolmafia14.numericModifier)(subject, name);
  }
  if (arrayContains(name, skillModifiers)) {
    return (0, import_kolmafia14.skillModifier)(subject, name);
  }
  if (arrayContains(name, stringModifiers)) {
    return subject === void 0 ? (0, import_kolmafia14.stringModifier)(name) : (0, import_kolmafia14.stringModifier)(subject, name);
  }
  if (arrayContains(name, statModifiers)) {
    return (0, import_kolmafia14.statModifier)(subject, name);
  }
}
function pairwiseMerge(modifiers1, modifiers2) {
  var returnValue = _objectSpread5(_objectSpread5({}, modifiers1), modifiers2);
  for (var modifier in modifiers1) {
    if (Array.from(Object.values(modifiers2)).includes(modifier)) {
      if (arrayContains(modifier, numericModifiers)) {
        var _modifiers1$modifier, _modifiers2$modifier;
        returnValue[modifier] = ((_modifiers1$modifier = modifiers1[modifier]) !== null && _modifiers1$modifier !== void 0 ? _modifiers1$modifier : 0) + ((_modifiers2$modifier = modifiers2[modifier]) !== null && _modifiers2$modifier !== void 0 ? _modifiers2$modifier : 0);
      }
      if (arrayContains(modifier, booleanModifiers)) {
        var _modifiers1$modifier2, _modifiers2$modifier2;
        returnValue[modifier] = ((_modifiers1$modifier2 = modifiers1[modifier]) !== null && _modifiers1$modifier2 !== void 0 ? _modifiers1$modifier2 : false) || ((_modifiers2$modifier2 = modifiers2[modifier]) !== null && _modifiers2$modifier2 !== void 0 ? _modifiers2$modifier2 : false);
      }
    }
  }
  return returnValue;
}
function mergeModifiers() {
  for (var _len = arguments.length, modifierss = new Array(_len), _key = 0; _key < _len; _key++) {
    modifierss[_key] = arguments[_key];
  }
  return modifierss.reduce(function(a, b) {
    return pairwiseMerge(a, b);
  }, {});
}

// node_modules/libram/dist/resources/2013/Florist.js
function _toConsumableArray7(arr) {
  return _arrayWithoutHoles7(arr) || _iterableToArray7(arr) || _unsupportedIterableToArray11(arr) || _nonIterableSpread7();
}
function _nonIterableSpread7() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray11(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray11(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray11(o, minLen);
}
function _iterableToArray7(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles7(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray11(arr);
}
function _arrayLikeToArray11(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _classCallCheck9(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties9(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey11(descriptor.key), descriptor);
  }
}
function _createClass9(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties9(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties9(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty10(obj, key, value) {
  key = _toPropertyKey11(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey11(arg) {
  var key = _toPrimitive11(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive11(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var Flower = /* @__PURE__ */ function() {
  function Flower2(name, id, environment, modifier) {
    var territorial = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;
    _classCallCheck9(this, Flower2);
    _defineProperty10(this, "name", void 0);
    _defineProperty10(this, "id", void 0);
    _defineProperty10(this, "environment", void 0);
    _defineProperty10(this, "modifier", void 0);
    _defineProperty10(this, "territorial", void 0);
    this.name = name;
    this.id = id;
    this.environment = environment;
    this.modifier = modifier;
    this.territorial = territorial;
  }
  _createClass9(Flower2, [{
    key: "isPlantedHere",
    value: function isPlantedHere() {
      var _Flower$plantNamesInZ;
      var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
      var plantedHere = (_Flower$plantNamesInZ = Flower2.plantNamesInZone(location)) === null || _Flower$plantNamesInZ === void 0 ? void 0 : _Flower$plantNamesInZ.includes(this.name);
      return plantedHere !== void 0 && plantedHere;
    }
  }, {
    key: "available",
    value: function available3() {
      var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
      return this.environment === location.environment && !get("_floristPlantsUsed").includes(this.name) && !this.isPlantedHere(location);
    }
  }, {
    key: "dig",
    value: function dig() {
      if (!this.isPlantedHere())
        return false;
      var flowers = Flower2.plantNamesInZone();
      if (!flowers[2])
        return false;
      var plantNumber = flowers.indexOf(this.name);
      Flower2.visit();
      (0, import_kolmafia15.runChoice)(2, "plnti=".concat(plantNumber));
      return !this.isPlantedHere();
    }
  }, {
    key: "plant",
    value: function plant() {
      if (this.isPlantedHere())
        return true;
      if (isFull())
        return false;
      Flower2.visit();
      (0, import_kolmafia15.runChoice)(1, "plant=".concat(this.id));
      return this.isPlantedHere();
    }
  }], [{
    key: "visit",
    value: function visit() {
      (0, import_kolmafia15.visitUrl)("place.php?whichplace=forestvillage&action=fv_friar");
    }
  }, {
    key: "plantNamesInZone",
    value: function plantNamesInZone() {
      var _getFloristPlants$loc;
      var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
      return (_getFloristPlants$loc = (0, import_kolmafia15.getFloristPlants)()[location.toString()]) !== null && _getFloristPlants$loc !== void 0 ? _getFloristPlants$loc : [];
    }
  }, {
    key: "plantsInZone",
    value: function plantsInZone() {
      var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
      return this.plantNamesInZone(location).map(function(flowerName) {
        return toFlower(flowerName);
      }).filter(function(flower) {
        return flower !== void 0;
      });
    }
  }, {
    key: "modifiersInZone",
    value: function modifiersInZone() {
      var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
      var plants = this.plantsInZone(location);
      if (!plants)
        return {};
      var modifiers = plants.map(function(plant) {
        return plant.modifier;
      }).map(function(modifier) {
        return typeof modifier === "string" ? {} : modifier;
      });
      return mergeModifiers.apply(void 0, _toConsumableArray7(modifiers));
    }
  }]);
  return Flower2;
}();
function have5() {
  return (0, import_kolmafia15.floristAvailable)();
}
function toFlower(name) {
  return all.find(function(flower) {
    return name === flower.name;
  });
}
function flowersIn(location) {
  var returnValue = [];
  Flower.plantNamesInZone(location).map(toFlower).forEach(function(flower) {
    if (flower)
      returnValue.push(flower);
  });
  return returnValue;
}
function flowersAvailableFor() {
  var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
  return all.filter(function(flower) {
    return flower.available(location);
  });
}
function isFull() {
  var location = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia15.myLocation)();
  return flowersIn(location).length === 3;
}
var RabidDogwood = new Flower("Rabid Dogwood", 1, "outdoor", {
  "Monster Level": 30
}, true);
var Rutabeggar = new Flower("Rutabeggar", 2, "outdoor", {
  "Item Drop": 25
}, true);
var RadishRadish = new Flower("Rad-ish Radish", 3, "outdoor", {
  "Moxie Experience": 5
}, true);
var Artichoker = new Flower("Artichoker", 4, "outdoor", "Delevels Enemy");
var SmokeRa = new Flower("Smoke-ra", 5, "outdoor", "Blocks Attacks");
var SkunkCabbage = new Flower("Skunk Cabbage", 6, "outdoor", {
  "Stench Damage": 12.5
});
var DeadlyCinnamon = new Flower("Deadly Cinnamon", 7, "outdoor", {
  "Hot Damage": 12.5
});
var CeleryStalker = new Flower("Celery Stalker", 8, "outdoor", {
  "Spooky Damage": 12.5
});
var LettuceSpray = new Flower("Lettus Spray", 9, "outdoor", {
  "HP Regen Min": 10,
  "HP Regen Max": 29
});
var SeltzerWatercress = new Flower("Seltzer Watercress", 10, "outdoor", {
  "MP Regen Min": 5,
  "MP Regen Max": 15
});
var WarLily = new Flower("War Lily", 11, "indoor", {
  "Monster Level": 30
}, true);
var StealingMagnolia = new Flower("Stealing Magnolia", 12, "indoor", {
  "Item Drop": 25
}, true);
var CannedSpinach = new Flower("Canned Spinach", 13, "indoor", {
  "Muscle Experience": 5
}, true);
var Impatiens = new Flower("Impatiens", 14, "indoor", {
  Initiative: 25
});
var SpiderPlant = new Flower("Spider Plant", 15, "indoor", "Poison");
var RedFern = new Flower("Red Fern", 16, "indoor", "Delevels Enemy");
var BamBoo = new Flower("BamBOO!", 17, "indoor", {
  "Spooky Damage": 12.5
});
var ArcticMoss = new Flower("Arctic Moss", 18, "indoor", {
  "Cold Damage": 12.5
});
var AloeGuvnor = new Flower("Aloe Guv'nor", 19, "indoor", {
  "HP Regen Min": 10,
  "HP Regen Max": 30
});
var PitcherPlant = new Flower("Pitcher Plant", 20, "indoor", {
  "MP Regen Min": 5,
  "MP Regen Max": 15
});
var BlusteryPuffball = new Flower("Blustery Puffball", 21, "underground", {
  "Monster Level": 30
}, true);
var HornOfPlenty = new Flower("Horn of Plenty", 22, "underground", {
  "Item Drop": 25
}, true);
var WizardsWig = new Flower("Wizard's Wig", 23, "underground", {
  "Mysticality Experience": 5
}, true);
var ShuffleTruffle = new Flower("Shuffle Truffle", 24, "underground", {
  Initiative: 25
});
var DisLichen = new Flower("Dis Lichen", 25, "underground", "Delevels Enemy");
var LooseMorels = new Flower("Loose Morels", 26, "underground", {
  "Sleaze Damage": 12.5
});
var FoulToadstool = new Flower("Foul Toadstool", 27, "underground", {
  "Stench Damage": 12.5
});
var Chillterelle = new Flower("Chillterelle", 28, "underground", {
  "Cold Damage": 12.5
});
var Portlybella = new Flower("Portlybella", 29, "underground", {
  "HP Regen Min": 10,
  "HP Regen Max": 30
});
var MaxHeadshroom = new Flower("Max Headshroom", 30, "underground", {
  "MP Regen Min": 5,
  "MP Regen Max": 15
});
var Spankton = new Flower("Spankton", 31, "underwater", "Delevels Enemy", true);
var Kelptomaniac = new Flower("Kelptomaniac", 32, "underwater", {
  "Item Drop": 40
}, true);
var Crookweed = new Flower("Crookweed", 33, "underwater", {
  "Meat Drop": 60
}, true);
var ElectricEelgrass = new Flower("Electric Eelgrass", 34, "underwater", "Blocks Attacks");
var Duckweed = new Flower("Duckweed", 35, "underwater", "Blocks Attacks");
var OrcaOrchid = new Flower("Orca Orchid", 36, "underwater", {
  "Weapon Damage": 12.5
});
var Sargassum = new Flower("Sargassum", 37, "underwater", {
  "Stench Damage": 12.5
});
var SubSeaRose = new Flower("Sub-Sea Rose", 38, "underwater", {
  "Cold Damage": 12.5
});
var Snori = new Flower("Snori", 39, "underwater", {
  "HP Regen Min": 20,
  "HP Regen Max": 30,
  "MP Regen Min": 10,
  "MP Regen Max": 20
});
var UpSeaDaisy = new Flower("Up Sea Daisy", 40, "underwater", {
  Experience: 30
});
var all = Object.freeze([RabidDogwood, Rutabeggar, RadishRadish, Artichoker, SmokeRa, SkunkCabbage, DeadlyCinnamon, CeleryStalker, LettuceSpray, SeltzerWatercress, WarLily, StealingMagnolia, CannedSpinach, Impatiens, SpiderPlant, RedFern, BamBoo, ArcticMoss, AloeGuvnor, PitcherPlant, BlusteryPuffball, HornOfPlenty, WizardsWig, ShuffleTruffle, DisLichen, LooseMorels, FoulToadstool, Chillterelle, Portlybella, MaxHeadshroom, Spankton, Kelptomaniac, Crookweed, ElectricEelgrass, Duckweed, OrcaOrchid, Sargassum, SubSeaRose, Snori, UpSeaDaisy]);

// node_modules/libram/dist/resources/2014/CrimboShrub.js
var CrimboShrub_exports = {};
__export(CrimboShrub_exports, {
  decorate: function() {
    return decorate;
  },
  have: function() {
    return have6;
  }
});
var import_kolmafia16 = require("kolmafia");
var _templateObject100;
var _templateObject218;
var _templateObject317;
var _templateObject415;
function _taggedTemplateLiteral8(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function have6() {
  return have($familiar(_templateObject100 || (_templateObject100 = _taggedTemplateLiteral8(["Crimbo Shrub"]))));
}
var Toppers = {
  Muscle: 1,
  Mysticality: 2,
  Moxie: 3
};
var Lights = {
  "Prismatic Damage": 1,
  "Hot Damage": 2,
  "Cold Damage": 3,
  "Stench Damage": 4,
  "Spooky Damage": 5,
  "Sleaze Damage": 6
};
var Garland = {
  "HP Regen": 1,
  "PvP Fights": 2,
  Blocking: 3
};
var Gifts = {
  "Yellow Ray": 1,
  "Red Ray": 2,
  Gifts: 3
};
var Prefs = {
  Muscle: "Muscle",
  Mysticality: "Mysticality",
  Moxie: "Moxie",
  Prismatic: "Prismatic Damage",
  Hot: "Hot Damage",
  Cold: "Cold Damage",
  Stench: "Stench Damage",
  Spooky: "Spooky Damage",
  Sleaze: "Sleaze Damage",
  HP: "HP Regen",
  PvP: "PvP Fights",
  blocking: "Blocking",
  yellow: "Yellow Ray",
  meat: "Red Ray",
  gifts: "Gifts"
};
function isDecoratedWith(topper, lights, garland, gifts) {
  var decorations = [get("shrubTopper"), get("shrubLights"), get("shrubGarland"), get("shrubGifts")].map(function(x) {
    return Prefs[x];
  });
  return [topper, lights, garland, gifts].every(function(x, i) {
    return x === decorations[i];
  });
}
function decorate(topper, lights, garland, gifts) {
  if (!have6())
    return false;
  if (get("_shrubDecorated"))
    return isDecoratedWith(topper, lights, garland, gifts);
  if (!have($item(_templateObject218 || (_templateObject218 = _taggedTemplateLiteral8(["box of old Crimbo decorations"]))))) {
    (0, import_kolmafia16.useFamiliar)($familiar(_templateObject317 || (_templateObject317 = _taggedTemplateLiteral8(["Crimbo Shrub"]))));
  }
  directlyUse($item(_templateObject415 || (_templateObject415 = _taggedTemplateLiteral8(["box of old Crimbo decorations"]))));
  (0, import_kolmafia16.visitUrl)("choice.php?whichchoice=999&pwd=&option=1&topper=".concat(Toppers[topper], "&lights=").concat(Lights[lights], "&garland=").concat(Garland[garland], "&gift=").concat(Gifts[gifts]));
  return isDecoratedWith(topper, lights, garland, gifts);
}

// node_modules/libram/dist/resources/2014/DNALab.js
var DNALab_exports = {};
__export(DNALab_exports, {
  getEffect: function() {
    return getEffect2;
  },
  getTonic: function() {
    return getTonic;
  },
  have: function() {
    return have7;
  },
  hybridize: function() {
    return hybridize;
  },
  installed: function() {
    return installed2;
  },
  isHybridized: function() {
    return isHybridized;
  },
  makeTonic: function() {
    return makeTonic;
  },
  phylumFor: function() {
    return phylumFor;
  },
  tonicsLeft: function() {
    return tonicsLeft;
  }
});
var import_kolmafia17 = require("kolmafia");
var _templateObject101;
var _templateObject219;
var _templateObject318;
var _templateObject416;
var _templateObject511;
var _templateObject610;
var _templateObject710;
var _templateObject810;
var _templateObject910;
var _templateObject106;
var _templateObject116;
var _templateObject126;
var _templateObject136;
var _templateObject145;
var _templateObject155;
var _templateObject165;
var _templateObject175;
var _templateObject185;
var _templateObject195;
var _templateObject205;
var _templateObject2110;
var _templateObject225;
var _templateObject235;
var _templateObject245;
var _templateObject255;
var _templateObject265;
var _templateObject275;
var _templateObject285;
var _templateObject295;
var _templateObject305;
var _templateObject319;
var _templateObject325;
var _templateObject335;
var _templateObject345;
var _templateObject355;
var _templateObject364;
var _templateObject374;
var _templateObject384;
var _templateObject394;
var _templateObject404;
var _templateObject417;
var _templateObject425;
var _templateObject434;
var _templateObject444;
var _templateObject454;
var _templateObject464;
var _templateObject474;
var _templateObject484;
var _templateObject494;
var _templateObject504;
var _templateObject514;
var _templateObject524;
var _templateObject534;
var _templateObject544;
var _templateObject554;
var _templateObject564;
var _templateObject573;
var _templateObject583;
var _templateObject593;
var _templateObject603;
var _templateObject613;
var _templateObject624;
var _templateObject633;
var _templateObject643;
var _templateObject653;
var _templateObject663;
var _templateObject672;
var _templateObject682;
var _templateObject692;
var _templateObject702;
var _templateObject712;
var _templateObject723;
var _templateObject733;
var _templateObject743;
var _templateObject753;
var _templateObject762;
var _templateObject772;
var _templateObject782;
var _templateObject792;
var _templateObject802;
var _templateObject812;
var _templateObject823;
var _templateObject833;
var _templateObject843;
var _templateObject853;
function _slicedToArray6(arr, i) {
  return _arrayWithHoles6(arr) || _iterableToArrayLimit6(arr, i) || _unsupportedIterableToArray12(arr, i) || _nonIterableRest6();
}
function _nonIterableRest6() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray12(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray12(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray12(o, minLen);
}
function _arrayLikeToArray12(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit6(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles6(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral9(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var lab = $item(_templateObject101 || (_templateObject101 = _taggedTemplateLiteral9(["Little Geneticist DNA-Splicing Lab"])));
function have7() {
  return have(lab) || (0, import_kolmafia17.getWorkshed)() === lab;
}
function installed2() {
  return (0, import_kolmafia17.getWorkshed)() === lab;
}
var phylaEffects = /* @__PURE__ */ new Map([[$phylum(_templateObject219 || (_templateObject219 = _taggedTemplateLiteral9(["beast"]))), $effect(_templateObject318 || (_templateObject318 = _taggedTemplateLiteral9(["Human-Beast Hybrid"])))], [$phylum(_templateObject416 || (_templateObject416 = _taggedTemplateLiteral9(["bug"]))), $effect(_templateObject511 || (_templateObject511 = _taggedTemplateLiteral9(["Human-Insect Hybrid"])))], [$phylum(_templateObject610 || (_templateObject610 = _taggedTemplateLiteral9(["constellation"]))), $effect(_templateObject710 || (_templateObject710 = _taggedTemplateLiteral9(["Human-Constellation Hybrid"])))], [$phylum(_templateObject810 || (_templateObject810 = _taggedTemplateLiteral9(["construct"]))), $effect(_templateObject910 || (_templateObject910 = _taggedTemplateLiteral9(["Human-Machine Hybrid"])))], [$phylum(_templateObject106 || (_templateObject106 = _taggedTemplateLiteral9(["demon"]))), $effect(_templateObject116 || (_templateObject116 = _taggedTemplateLiteral9(["Human-Demon Hybrid"])))], [$phylum(_templateObject126 || (_templateObject126 = _taggedTemplateLiteral9(["dude"]))), $effect(_templateObject136 || (_templateObject136 = _taggedTemplateLiteral9(["Human-Human Hybrid"])))], [$phylum(_templateObject145 || (_templateObject145 = _taggedTemplateLiteral9(["elemental"]))), $effect(_templateObject155 || (_templateObject155 = _taggedTemplateLiteral9(["Human-Elemental Hybrid"])))], [$phylum(_templateObject165 || (_templateObject165 = _taggedTemplateLiteral9(["elf"]))), $effect(_templateObject175 || (_templateObject175 = _taggedTemplateLiteral9(["Human-Elf Hybrid"])))], [$phylum(_templateObject185 || (_templateObject185 = _taggedTemplateLiteral9(["fish"]))), $effect(_templateObject195 || (_templateObject195 = _taggedTemplateLiteral9(["Human-Fish Hybrid"])))], [$phylum(_templateObject205 || (_templateObject205 = _taggedTemplateLiteral9(["goblin"]))), $effect(_templateObject2110 || (_templateObject2110 = _taggedTemplateLiteral9(["Human-Goblin Hybrid"])))], [$phylum(_templateObject225 || (_templateObject225 = _taggedTemplateLiteral9(["hippy"]))), $effect(_templateObject235 || (_templateObject235 = _taggedTemplateLiteral9(["Human-Hobo Hybrid"])))], [$phylum(_templateObject245 || (_templateObject245 = _taggedTemplateLiteral9(["horror"]))), $effect(_templateObject255 || (_templateObject255 = _taggedTemplateLiteral9(["Human-Horror Hybrid"])))], [$phylum(_templateObject265 || (_templateObject265 = _taggedTemplateLiteral9(["humanoid"]))), $effect(_templateObject275 || (_templateObject275 = _taggedTemplateLiteral9(["Human-Humanoid Hybrid"])))], [$phylum(_templateObject285 || (_templateObject285 = _taggedTemplateLiteral9(["mer-kin"]))), $effect(_templateObject295 || (_templateObject295 = _taggedTemplateLiteral9(["Human-Mer-kin Hybrid"])))], [$phylum(_templateObject305 || (_templateObject305 = _taggedTemplateLiteral9(["orc"]))), $effect(_templateObject319 || (_templateObject319 = _taggedTemplateLiteral9(["Human-Orc Hybrid"])))], [$phylum(_templateObject325 || (_templateObject325 = _taggedTemplateLiteral9(["penguin"]))), $effect(_templateObject335 || (_templateObject335 = _taggedTemplateLiteral9(["Human-Penguin Hybrid"])))], [$phylum(_templateObject345 || (_templateObject345 = _taggedTemplateLiteral9(["pirate"]))), $effect(_templateObject355 || (_templateObject355 = _taggedTemplateLiteral9(["Human-Pirate Hybrid"])))], [$phylum(_templateObject364 || (_templateObject364 = _taggedTemplateLiteral9(["plant"]))), $effect(_templateObject374 || (_templateObject374 = _taggedTemplateLiteral9(["Human-Plant Hybrid"])))], [$phylum(_templateObject384 || (_templateObject384 = _taggedTemplateLiteral9(["slime"]))), $effect(_templateObject394 || (_templateObject394 = _taggedTemplateLiteral9(["Human-Slime Hybrid"])))], [$phylum(_templateObject404 || (_templateObject404 = _taggedTemplateLiteral9(["undead"]))), $effect(_templateObject417 || (_templateObject417 = _taggedTemplateLiteral9(["Human-Undead Hybrid"])))], [$phylum(_templateObject425 || (_templateObject425 = _taggedTemplateLiteral9(["weird"]))), $effect(_templateObject434 || (_templateObject434 = _taggedTemplateLiteral9(["Human-Weird Thing Hybrid"])))]]);
var phylaTonics = /* @__PURE__ */ new Map([[$phylum(_templateObject444 || (_templateObject444 = _taggedTemplateLiteral9(["beast"]))), $item(_templateObject454 || (_templateObject454 = _taggedTemplateLiteral9(["Gene Tonic: Beast"])))], [$phylum(_templateObject464 || (_templateObject464 = _taggedTemplateLiteral9(["bug"]))), $item(_templateObject474 || (_templateObject474 = _taggedTemplateLiteral9(["Gene Tonic: Insect"])))], [$phylum(_templateObject484 || (_templateObject484 = _taggedTemplateLiteral9(["constellation"]))), $item(_templateObject494 || (_templateObject494 = _taggedTemplateLiteral9(["Gene Tonic: Constellation"])))], [$phylum(_templateObject504 || (_templateObject504 = _taggedTemplateLiteral9(["construct"]))), $item(_templateObject514 || (_templateObject514 = _taggedTemplateLiteral9(["Gene Tonic: Construct"])))], [$phylum(_templateObject524 || (_templateObject524 = _taggedTemplateLiteral9(["demon"]))), $item(_templateObject534 || (_templateObject534 = _taggedTemplateLiteral9(["Gene Tonic: Demon"])))], [$phylum(_templateObject544 || (_templateObject544 = _taggedTemplateLiteral9(["dude"]))), $item(_templateObject554 || (_templateObject554 = _taggedTemplateLiteral9(["Gene Tonic: Humanoid"])))], [$phylum(_templateObject564 || (_templateObject564 = _taggedTemplateLiteral9(["elemental"]))), $item(_templateObject573 || (_templateObject573 = _taggedTemplateLiteral9(["Gene Tonic: Elemental"])))], [$phylum(_templateObject583 || (_templateObject583 = _taggedTemplateLiteral9(["elf"]))), $item(_templateObject593 || (_templateObject593 = _taggedTemplateLiteral9(["Gene Tonic: Elf"])))], [$phylum(_templateObject603 || (_templateObject603 = _taggedTemplateLiteral9(["fish"]))), $item(_templateObject613 || (_templateObject613 = _taggedTemplateLiteral9(["Gene Tonic: Fish"])))], [$phylum(_templateObject624 || (_templateObject624 = _taggedTemplateLiteral9(["goblin"]))), $item(_templateObject633 || (_templateObject633 = _taggedTemplateLiteral9(["Gene Tonic: Goblin"])))], [$phylum(_templateObject643 || (_templateObject643 = _taggedTemplateLiteral9(["hippy"]))), $item(_templateObject653 || (_templateObject653 = _taggedTemplateLiteral9(["Gene Tonic: Hobo"])))], [$phylum(_templateObject663 || (_templateObject663 = _taggedTemplateLiteral9(["horror"]))), $item(_templateObject672 || (_templateObject672 = _taggedTemplateLiteral9(["Gene Tonic: Horror"])))], [$phylum(_templateObject682 || (_templateObject682 = _taggedTemplateLiteral9(["humanoid"]))), $item(_templateObject692 || (_templateObject692 = _taggedTemplateLiteral9(["Gene Tonic: Humanoid"])))], [$phylum(_templateObject702 || (_templateObject702 = _taggedTemplateLiteral9(["mer-kin"]))), $item(_templateObject712 || (_templateObject712 = _taggedTemplateLiteral9(["Gene Tonic: Mer-kin"])))], [$phylum(_templateObject723 || (_templateObject723 = _taggedTemplateLiteral9(["orc"]))), $item(_templateObject733 || (_templateObject733 = _taggedTemplateLiteral9(["Gene Tonic: Orc"])))], [$phylum(_templateObject743 || (_templateObject743 = _taggedTemplateLiteral9(["penguin"]))), $item(_templateObject753 || (_templateObject753 = _taggedTemplateLiteral9(["Gene Tonic: Penguin"])))], [$phylum(_templateObject762 || (_templateObject762 = _taggedTemplateLiteral9(["pirate"]))), $item(_templateObject772 || (_templateObject772 = _taggedTemplateLiteral9(["Gene Tonic: Pirate"])))], [$phylum(_templateObject782 || (_templateObject782 = _taggedTemplateLiteral9(["plant"]))), $item(_templateObject792 || (_templateObject792 = _taggedTemplateLiteral9(["Gene Tonic: Plant"])))], [$phylum(_templateObject802 || (_templateObject802 = _taggedTemplateLiteral9(["slime"]))), $item(_templateObject812 || (_templateObject812 = _taggedTemplateLiteral9(["Gene Tonic: Slime"])))], [$phylum(_templateObject823 || (_templateObject823 = _taggedTemplateLiteral9(["undead"]))), $item(_templateObject833 || (_templateObject833 = _taggedTemplateLiteral9(["Gene Tonic: Undead"])))], [$phylum(_templateObject843 || (_templateObject843 = _taggedTemplateLiteral9(["weird"]))), $item(_templateObject853 || (_templateObject853 = _taggedTemplateLiteral9(["Gene Tonic: Weird"])))]]);
var tonicEffects = Array.from(phylaEffects.values());
function isHybridized(tonic) {
  if (!tonic)
    return installed2() && get("_dnaHybrid");
  var tonicEffect = tonic instanceof import_kolmafia17.Effect ? tonic : tonic instanceof import_kolmafia17.Phylum ? getEffect2(tonic) : get2("Effect", tonic);
  return tonicEffects.includes(tonicEffect) && (0, import_kolmafia17.haveEffect)(tonicEffect) === 2147483647;
}
function getTonic(phylum) {
  var _phylaTonics$get;
  return (_phylaTonics$get = phylaTonics.get(phylum)) !== null && _phylaTonics$get !== void 0 ? _phylaTonics$get : $item.none;
}
function getEffect2(phylum) {
  var _phylaEffects$get;
  return (_phylaEffects$get = phylaEffects.get(phylum)) !== null && _phylaEffects$get !== void 0 ? _phylaEffects$get : $effect.none;
}
function phylumFor(dnatype) {
  if (dnatype instanceof import_kolmafia17.Effect) {
    var phylumPair = Array.from(phylaEffects.entries()).find(function(_ref) {
      var _ref2 = _slicedToArray6(_ref, 2), effect2 = _ref2[1];
      return effect2 === dnatype;
    });
    return phylumPair ? phylumPair[0] : null;
  } else {
    var _phylumPair = Array.from(phylaTonics.entries()).find(function(_ref3) {
      var _ref4 = _slicedToArray6(_ref3, 2), tonic = _ref4[1];
      return tonic === dnatype;
    });
    return _phylumPair ? _phylumPair[0] : null;
  }
}
function hybridize() {
  if (get("_dnaHybrid"))
    return false;
  if (!installed2())
    return false;
  var currentSyringe = get("dnaSyringe");
  if (!currentSyringe)
    return false;
  var tonicPotion = getTonic(currentSyringe);
  var expectedEffect = get2("Effect", tonicPotion);
  (0, import_kolmafia17.cliExecute)("camp dnainject");
  return isHybridized(expectedEffect);
}
function makeTonic() {
  var amount = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;
  if (!installed2())
    return false;
  var currentSyringe = get("dnaSyringe");
  if (!currentSyringe)
    return false;
  var tonicPotion = getTonic(currentSyringe);
  var amountToMake = clamp(amount, 0, tonicsLeft());
  var startingAmount = (0, import_kolmafia17.itemAmount)(tonicPotion);
  (0, import_kolmafia17.cliExecute)("camp dnapotion ".concat(amountToMake));
  return (0, import_kolmafia17.itemAmount)(tonicPotion) - startingAmount === amountToMake;
}
function tonicsLeft() {
  return clamp(3 - get("_dnaPotionsMade"), 0, 3);
}

// node_modules/libram/dist/resources/2015/ChateauMantegna.js
var ChateauMantegna_exports = {};
__export(ChateauMantegna_exports, {
  ceilings: function() {
    return ceilings;
  },
  changeCeiling: function() {
    return changeCeiling;
  },
  changeDesk: function() {
    return changeDesk;
  },
  changeNightstand: function() {
    return changeNightstand;
  },
  desks: function() {
    return desks;
  },
  fightPainting: function() {
    return fightPainting;
  },
  getCeiling: function() {
    return getCeiling;
  },
  getDesk: function() {
    return getDesk;
  },
  getNightstand: function() {
    return getNightstand;
  },
  have: function() {
    return have8;
  },
  nightstands: function() {
    return nightstands;
  },
  paintingFought: function() {
    return paintingFought;
  },
  paintingMonster: function() {
    return paintingMonster;
  }
});
var import_kolmafia18 = require("kolmafia");
function have8() {
  return get("chateauAvailable");
}
function paintingMonster() {
  return get("chateauMonster");
}
function paintingFought() {
  return get("_chateauMonsterFought");
}
function fightPainting() {
  (0, import_kolmafia18.visitUrl)("place.php?whichplace=chateau&action=chateau_painting", false);
  return (0, import_kolmafia18.runCombat)();
}
var desks = ["fancy stationery set", "Swiss piggy bank", "continental juice bar"];
var ceilings = ["antler chandelier", "ceiling fan", "artificial skylight"];
var nightstands = ["foreign language tapes", "bowl of potpourri", "electric muscle stimulator"];
function getDesk() {
  var _desks$find;
  return (_desks$find = desks.find(function(desk) {
    return Object.keys((0, import_kolmafia18.getChateau)()).includes(desk);
  })) !== null && _desks$find !== void 0 ? _desks$find : null;
}
function getCeiling() {
  var _ceilings$find;
  return (_ceilings$find = ceilings.find(function(ceiling) {
    return Object.keys((0, import_kolmafia18.getChateau)()).includes(ceiling);
  })) !== null && _ceilings$find !== void 0 ? _ceilings$find : null;
}
function getNightstand() {
  var _nightstands$find;
  return (_nightstands$find = nightstands.find(function(nightstand) {
    return Object.keys((0, import_kolmafia18.getChateau)()).includes(nightstand);
  })) !== null && _nightstands$find !== void 0 ? _nightstands$find : null;
}
function changeDesk(desk) {
  if (getDesk() === desk)
    return true;
  if (!desks.includes(desk))
    return false;
  (0, import_kolmafia18.buy)(import_kolmafia18.Item.get(desk));
  return getDesk() === desk;
}
function changeCeiling(ceiling) {
  if (getCeiling() === ceiling)
    return true;
  if (!ceilings.includes(ceiling))
    return false;
  (0, import_kolmafia18.buy)(import_kolmafia18.Item.get(ceiling));
  return getCeiling() === ceiling;
}
function changeNightstand(nightstand) {
  if (getNightstand() === nightstand)
    return true;
  if (!nightstands.includes(nightstand))
    return false;
  (0, import_kolmafia18.buy)(import_kolmafia18.Item.get(nightstand));
  return getNightstand() === nightstand;
}

// node_modules/libram/dist/resources/2015/MayoClinic.js
var MayoClinic_exports = {};
__export(MayoClinic_exports, {
  Mayo: function() {
    return Mayo;
  },
  have: function() {
    return have9;
  },
  installed: function() {
    return installed3;
  },
  setMayoMinder: function() {
    return setMayoMinder;
  }
});
var import_kolmafia19 = require("kolmafia");
var _templateObject107;
var _templateObject220;
var _templateObject320;
var _templateObject418;
var _templateObject515;
var _templateObject611;
var _templateObject711;
var _templateObject811;
var _templateObject911;
var _templateObject108;
function _taggedTemplateLiteral10(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var Mayo = {
  nex: $item(_templateObject107 || (_templateObject107 = _taggedTemplateLiteral10(["Mayonex"]))),
  diol: $item(_templateObject220 || (_templateObject220 = _taggedTemplateLiteral10(["Mayodiol"]))),
  zapine: $item(_templateObject320 || (_templateObject320 = _taggedTemplateLiteral10(["Mayozapine"]))),
  flex: $item(_templateObject418 || (_templateObject418 = _taggedTemplateLiteral10(["Mayoflex"])))
};
function installed3() {
  return (0, import_kolmafia19.getWorkshed)() === $item(_templateObject515 || (_templateObject515 = _taggedTemplateLiteral10(["portable Mayo Clinic"])));
}
function have9() {
  return have($item(_templateObject611 || (_templateObject611 = _taggedTemplateLiteral10(["portable Mayo Clinic"])))) || installed3();
}
function setMayoMinder(mayo) {
  var quantity = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  if ((0, import_kolmafia19.getWorkshed)() !== $item(_templateObject711 || (_templateObject711 = _taggedTemplateLiteral10(["portable Mayo Clinic"]))))
    return false;
  if (!Object.values(Mayo).includes(mayo)) {
    logger_default.error("Invalid mayo selected");
    return false;
  }
  if (get("mayoInMouth") && get("mayoInMouth") !== mayo.name) {
    logger_default.error("Currently have incorrect mayo in mouth");
    return false;
  }
  (0, import_kolmafia19.retrieveItem)(quantity, mayo);
  if (!have($item(_templateObject811 || (_templateObject811 = _taggedTemplateLiteral10(["Mayo Minder\u2122"])))))
    (0, import_kolmafia19.buy)($item(_templateObject911 || (_templateObject911 = _taggedTemplateLiteral10(["Mayo Minder\u2122"]))));
  if (get("mayoMinderSetting") !== mayo.name) {
    withChoice(1076, mayo.id - 8260, function() {
      return (0, import_kolmafia19.use)($item(_templateObject108 || (_templateObject108 = _taggedTemplateLiteral10(["Mayo Minder\u2122"]))));
    });
  }
  return get("mayoMinderSetting") === mayo.name;
}

// node_modules/libram/dist/resources/2016/SourceTerminal.js
var SourceTerminal_exports = {};
__export(SourceTerminal_exports, {
  Buffs: function() {
    return Buffs;
  },
  Digitize: function() {
    return Digitize;
  },
  Items: function() {
    return Items;
  },
  RolloverBuffs: function() {
    return RolloverBuffs;
  },
  Skills: function() {
    return Skills;
  },
  canDigitize: function() {
    return canDigitize;
  },
  couldDigitize: function() {
    return couldDigitize;
  },
  duplicateUsesRemaining: function() {
    return duplicateUsesRemaining;
  },
  educate: function() {
    return educate;
  },
  enhance: function() {
    return enhance;
  },
  enhanceBuffDuration: function() {
    return enhanceBuffDuration;
  },
  enhanceUsesRemaining: function() {
    return enhanceUsesRemaining;
  },
  enquiry: function() {
    return enquiry;
  },
  enquiryBuffDuration: function() {
    return enquiryBuffDuration;
  },
  extrude: function() {
    return extrude;
  },
  getChips: function() {
    return getChips;
  },
  getDigitizeMonster: function() {
    return getDigitizeMonster;
  },
  getDigitizeMonsterCount: function() {
    return getDigitizeMonsterCount;
  },
  getDigitizeUses: function() {
    return getDigitizeUses;
  },
  getDigitizeUsesRemaining: function() {
    return getDigitizeUsesRemaining;
  },
  getDuplicateUses: function() {
    return getDuplicateUses;
  },
  getEnhanceUses: function() {
    return getEnhanceUses;
  },
  getMaximumDigitizeUses: function() {
    return getMaximumDigitizeUses;
  },
  getPortscanUses: function() {
    return getPortscanUses;
  },
  getSkills: function() {
    return getSkills;
  },
  have: function() {
    return have10;
  },
  isCurrentSkill: function() {
    return isCurrentSkill;
  },
  maximumDuplicateUses: function() {
    return maximumDuplicateUses;
  },
  maximumEnhanceUses: function() {
    return maximumEnhanceUses;
  },
  prepareDigitize: function() {
    return prepareDigitize;
  }
});
var import_kolmafia20 = require("kolmafia");
var _templateObject109;
var _templateObject221;
var _templateObject321;
var _templateObject419;
var _templateObject516;
var _templateObject614;
var _templateObject713;
var _templateObject813;
var _templateObject912;
var _templateObject1010;
var _templateObject117;
var _templateObject127;
var _templateObject137;
var _templateObject146;
var _templateObject156;
var _templateObject166;
var _templateObject176;
var _templateObject186;
var _templateObject196;
var _templateObject206;
var _templateObject2111;
var _templateObject226;
var _templateObject236;
var _templateObject246;
var _templateObject256;
var _templateObject266;
var _templateObject276;
function _createForOfIteratorHelper6(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray13(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray13(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray13(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray13(o, minLen);
}
function _arrayLikeToArray13(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral11(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item = $item(_templateObject109 || (_templateObject109 = _taggedTemplateLiteral11(["Source terminal"])));
function have10() {
  return haveInCampground(item);
}
var Buffs = {
  Items: $effect(_templateObject221 || (_templateObject221 = _taggedTemplateLiteral11(["items.enh"]))),
  Meat: $effect(_templateObject321 || (_templateObject321 = _taggedTemplateLiteral11(["meat.enh"]))),
  Init: $effect(_templateObject419 || (_templateObject419 = _taggedTemplateLiteral11(["init.enh"]))),
  Critical: $effect(_templateObject516 || (_templateObject516 = _taggedTemplateLiteral11(["critical.enh"]))),
  Damage: $effect(_templateObject614 || (_templateObject614 = _taggedTemplateLiteral11(["damage.enh"]))),
  Substats: $effect(_templateObject713 || (_templateObject713 = _taggedTemplateLiteral11(["substats.enh"])))
};
function enhance(buff) {
  if (!Object.values(Buffs).includes(buff)) {
    return false;
  }
  return (0, import_kolmafia20.cliExecute)("terminal enhance ".concat(buff.name));
}
var RolloverBuffs = {
  /** +5 Familiar Weight */
  Familiar: $effect(_templateObject813 || (_templateObject813 = _taggedTemplateLiteral11(["familiar.enq"]))),
  /** +25 ML */
  Monsters: $effect(_templateObject912 || (_templateObject912 = _taggedTemplateLiteral11(["monsters.enq"]))),
  /** +5 Prismatic Resistance */
  Protect: $effect(_templateObject1010 || (_templateObject1010 = _taggedTemplateLiteral11(["protect.enq"]))),
  /** +100% Muscle, +100% Mysticality, +100% Moxie */
  Stats: $effect(_templateObject117 || (_templateObject117 = _taggedTemplateLiteral11(["stats.enq"])))
};
function enquiry(rolloverBuff) {
  if (!Object.values(RolloverBuffs).includes(rolloverBuff)) {
    return false;
  }
  return (0, import_kolmafia20.cliExecute)("terminal enquiry ".concat(rolloverBuff.name));
}
var Skills = {
  /** Collect Source essence from enemies once per combat */
  Extract: $skill(_templateObject127 || (_templateObject127 = _taggedTemplateLiteral11(["Extract"]))),
  /** Stagger and create a wandering monster 1-3 times per day */
  Digitize: $skill(_templateObject137 || (_templateObject137 = _taggedTemplateLiteral11(["Digitize"]))),
  /** Stagger and deal 25% of enemy HP in damage once per combat */
  Compress: $skill(_templateObject146 || (_templateObject146 = _taggedTemplateLiteral11(["Compress"]))),
  /** Double monster's HP, attack, defence, attacks per round and item drops once per fight and once per day (five in The Source) */
  Duplicate: $skill(_templateObject156 || (_templateObject156 = _taggedTemplateLiteral11(["Duplicate"]))),
  /** Causes government agent/Source Agent wanderer next turn once per combat and three times per day */
  Portscan: $skill(_templateObject166 || (_templateObject166 = _taggedTemplateLiteral11(["Portscan"]))),
  /** Increase Max MP by 100% and recover 1000 MP once per combat with a 30 turn cooldown */
  Turbo: $skill(_templateObject176 || (_templateObject176 = _taggedTemplateLiteral11(["Turbo"])))
};
function educate(skills2) {
  var skillsArray = Array.isArray(skills2) ? skills2.slice(0, 2) : [skills2];
  if (arrayEquals(skillsArray, getSkills()))
    return true;
  var _iterator = _createForOfIteratorHelper6(skillsArray), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var skill = _step.value;
      if (!Object.values(Skills).includes(skill))
        return false;
      (0, import_kolmafia20.cliExecute)("terminal educate ".concat(skill.name.toLowerCase(), ".edu"));
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return true;
}
function getSkills() {
  return ["sourceTerminalEducate1", "sourceTerminalEducate2"].map(function(p) {
    return get(p);
  }).filter(function(s) {
    return s !== "";
  }).map(function(s) {
    return import_kolmafia20.Skill.get(s.slice(0, -4));
  });
}
function isCurrentSkill(skills2) {
  var currentSkills = getSkills();
  var skillsArray = Array.isArray(skills2) ? skills2.slice(0, 2) : [skills2];
  return skillsArray.every(function(skill) {
    return currentSkills.includes(skill);
  });
}
var Items = /* @__PURE__ */ new Map([[$item(_templateObject186 || (_templateObject186 = _taggedTemplateLiteral11(["browser cookie"]))), "food.ext"], [$item(_templateObject196 || (_templateObject196 = _taggedTemplateLiteral11(["hacked gibson"]))), "booze.ext"], [$item(_templateObject206 || (_templateObject206 = _taggedTemplateLiteral11(["Source shades"]))), "goggles.ext"], [$item(_templateObject2111 || (_templateObject2111 = _taggedTemplateLiteral11(["Source terminal GRAM chip"]))), "gram.ext"], [$item(_templateObject226 || (_templateObject226 = _taggedTemplateLiteral11(["Source terminal PRAM chip"]))), "pram.ext"], [$item(_templateObject236 || (_templateObject236 = _taggedTemplateLiteral11(["Source terminal SPAM chip"]))), "spam.ext"], [$item(_templateObject246 || (_templateObject246 = _taggedTemplateLiteral11(["Source terminal CRAM chip"]))), "cram.ext"], [$item(_templateObject256 || (_templateObject256 = _taggedTemplateLiteral11(["Source terminal DRAM chip"]))), "dram.ext"], [$item(_templateObject266 || (_templateObject266 = _taggedTemplateLiteral11(["Source terminal TRAM chip"]))), "tram.ext"], [$item(_templateObject276 || (_templateObject276 = _taggedTemplateLiteral11(["software bug"]))), "familiar.ext"]]);
function extrude(item9) {
  var fileName = Items.get(item9);
  if (!fileName)
    return false;
  return (0, import_kolmafia20.cliExecute)("terminal extrude ".concat(fileName));
}
function getChips() {
  return get("sourceTerminalChips").split(",");
}
function getDigitizeUses() {
  return get("_sourceTerminalDigitizeUses");
}
function getDigitizeMonster() {
  return get("_sourceTerminalDigitizeMonster");
}
function getDigitizeMonsterCount() {
  return get("_sourceTerminalDigitizeMonsterCount");
}
function getMaximumDigitizeUses() {
  var chips = getChips();
  return 1 + (chips.includes("TRAM") ? 1 : 0) + (chips.includes("TRIGRAM") ? 1 : 0);
}
function getDigitizeUsesRemaining() {
  return getMaximumDigitizeUses() - getDigitizeUses();
}
function couldDigitize() {
  return getDigitizeUses() < getMaximumDigitizeUses();
}
function prepareDigitize() {
  if (!isCurrentSkill(Skills.Digitize)) {
    return educate(Skills.Digitize);
  }
  return true;
}
function canDigitize() {
  return couldDigitize() && getSkills().includes(Skills.Digitize);
}
var Digitize = new Copier(function() {
  return couldDigitize();
}, function() {
  return prepareDigitize();
}, function() {
  return canDigitize();
}, function() {
  return getDigitizeMonster();
});
function getDuplicateUses() {
  return get("_sourceTerminalDuplicateUses");
}
function getEnhanceUses() {
  return get("_sourceTerminalEnhanceUses");
}
function getPortscanUses() {
  return get("_sourceTerminalPortscanUses");
}
function maximumDuplicateUses() {
  return (0, import_kolmafia20.myPath)() === import_kolmafia20.Path.get("The Source") ? 5 : 1;
}
function duplicateUsesRemaining() {
  return maximumDuplicateUses() - getDuplicateUses();
}
function maximumEnhanceUses() {
  return 1 + getChips().filter(function(chip) {
    return ["CRAM", "SCRAM"].includes(chip);
  }).length;
}
function enhanceUsesRemaining() {
  return maximumEnhanceUses() - getEnhanceUses();
}
function enhanceBuffDuration() {
  return 25 + get("sourceTerminalPram") * 5 + (getChips().includes("INGRAM") ? 25 : 0);
}
function enquiryBuffDuration() {
  return 50 + 10 * get("sourceTerminalGram") + (getChips().includes("DIAGRAM") ? 50 : 0);
}

// node_modules/libram/dist/resources/2016/Witchess.js
var Witchess_exports = {};
__export(Witchess_exports, {
  fightPiece: function() {
    return fightPiece;
  },
  fightsDone: function() {
    return fightsDone;
  },
  have: function() {
    return have11;
  },
  pieces: function() {
    return pieces;
  }
});
var import_kolmafia21 = require("kolmafia");
var _templateObject110;
function _taggedTemplateLiteral12(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item2 = $item(_templateObject110 || (_templateObject110 = _taggedTemplateLiteral12(["Witchess Set"])));
function have11() {
  return haveInCampground(item2);
}
function fightsDone() {
  return get("_witchessFights");
}
var pieces = import_kolmafia21.Monster.get(["Witchess Pawn", "Witchess Knight", "Witchess Bishop", "Witchess Rook", "Witchess Queen", "Witchess King", "Witchess Witch", "Witchess Ox"]);
function fightPiece(piece) {
  if (!pieces.includes(piece))
    throw new Error("That is not a valid piece.");
  if (!(0, import_kolmafia21.visitUrl)("campground.php?action=witchess").includes("whichchoice value=1181")) {
    throw new Error("Failed to open Witchess.");
  }
  if (!(0, import_kolmafia21.runChoice)(1).includes("whichchoice=1182")) {
    throw new Error("Failed to visit shrink ray.");
  }
  if (!(0, import_kolmafia21.visitUrl)("choice.php?option=1&pwd=".concat((0, import_kolmafia21.myHash)(), "&whichchoice=1182&piece=").concat(piece.id), false).includes(piece.name)) {
    throw new Error("Failed to start fight.");
  }
  return (0, import_kolmafia21.runCombat)();
}

// node_modules/libram/dist/resources/2017/Pantogram.js
var Pantogram_exports = {};
__export(Pantogram_exports, {
  findRequirements: function() {
    return findRequirements;
  },
  have: function() {
    return have12;
  },
  havePants: function() {
    return havePants;
  },
  makePants: function() {
    return makePants;
  },
  makePantsFromObject: function() {
    return makePantsFromObject;
  }
});
var import_kolmafia22 = require("kolmafia");
var _templateObject111;
var _templateObject227;
var _Alignment;
var _Element;
var _templateObject326;
var _templateObject420;
var _templateObject517;
var _templateObject615;
var _templateObject714;
var _templateObject814;
var _templateObject913;
var _LeftSacrifice;
var _templateObject1011;
var _templateObject118;
var _templateObject128;
var _templateObject138;
var _templateObject147;
var _templateObject157;
var _templateObject167;
var _templateObject177;
var _templateObject187;
var _MiddleSacrifice;
var _templateObject197;
var _templateObject207;
var _templateObject2112;
var _templateObject228;
var _templateObject237;
var _templateObject247;
var _templateObject257;
var _templateObject267;
var _templateObject277;
var _templateObject286;
var _RightSacrifice;
function _slicedToArray7(arr, i) {
  return _arrayWithHoles7(arr) || _iterableToArrayLimit7(arr, i) || _unsupportedIterableToArray14(arr, i) || _nonIterableRest7();
}
function _nonIterableRest7() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray14(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray14(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray14(o, minLen);
}
function _arrayLikeToArray14(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit7(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles7(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _defineProperty11(obj, key, value) {
  key = _toPropertyKey12(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey12(arg) {
  var key = _toPrimitive12(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive12(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _taggedTemplateLiteral13(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var pantogram = $item(_templateObject111 || (_templateObject111 = _taggedTemplateLiteral13(["portable pantogram"])));
var pants = $item(_templateObject227 || (_templateObject227 = _taggedTemplateLiteral13(["pantogram pants"])));
function have12() {
  return have(pantogram);
}
function havePants() {
  return have(pants);
}
var Alignment = (_Alignment = {}, _defineProperty11(_Alignment, "Muscle", 1), _defineProperty11(_Alignment, "Mysticality", 2), _defineProperty11(_Alignment, "Moxie", 3), _Alignment);
var Element3 = (_Element = {}, _defineProperty11(_Element, "Hot Resistance: 2", 1), _defineProperty11(_Element, "Cold Resistance: 2", 2), _defineProperty11(_Element, "Spooky Resistance: 2", 3), _defineProperty11(_Element, "Sleaze Resistance: 2", 4), _defineProperty11(_Element, "Stench Resistance: 2", 5), _Element);
var LeftSacrifice = (_LeftSacrifice = {}, _defineProperty11(_LeftSacrifice, "Maximum HP: 40", [-1, 0]), _defineProperty11(_LeftSacrifice, "Maximum MP: 20", [-2, 0]), _defineProperty11(_LeftSacrifice, "HP Regen Max: 10", [$item(_templateObject326 || (_templateObject326 = _taggedTemplateLiteral13(["red pixel potion"]))), 1]), _defineProperty11(_LeftSacrifice, "HP Regen Max: 15", [$item(_templateObject420 || (_templateObject420 = _taggedTemplateLiteral13(["royal jelly"]))), 1]), _defineProperty11(_LeftSacrifice, "HP Regen Max: 20", [$item(_templateObject517 || (_templateObject517 = _taggedTemplateLiteral13(["scented massage oil"]))), 1]), _defineProperty11(_LeftSacrifice, "MP Regen Max: 10", [$item(_templateObject615 || (_templateObject615 = _taggedTemplateLiteral13(["Cherry Cloaca Cola"]))), 1]), _defineProperty11(_LeftSacrifice, "MP Regen Max: 15", [$item(_templateObject714 || (_templateObject714 = _taggedTemplateLiteral13(["bubblin' crude"]))), 1]), _defineProperty11(_LeftSacrifice, "MP Regen Max: 20", [$item(_templateObject814 || (_templateObject814 = _taggedTemplateLiteral13(["glowing New Age crystal"]))), 1]), _defineProperty11(_LeftSacrifice, "Mana Cost: -3", [$item(_templateObject913 || (_templateObject913 = _taggedTemplateLiteral13(["baconstone"]))), 1]), _LeftSacrifice);
function getLeftSacPair(mod) {
  return LeftSacrifice[mod];
}
var MiddleSacrifice = (_MiddleSacrifice = {}, _defineProperty11(_MiddleSacrifice, "Combat Rate: -5", [-1, 0]), _defineProperty11(_MiddleSacrifice, "Combat Rate: 5", [-2, 0]), _defineProperty11(_MiddleSacrifice, "Critical Hit Percent: 10", [$item(_templateObject1011 || (_templateObject1011 = _taggedTemplateLiteral13(["hamethyst"]))), 1]), _defineProperty11(_MiddleSacrifice, "Initiative: 50", [$item(_templateObject118 || (_templateObject118 = _taggedTemplateLiteral13(["bar skin"]))), 1]), _defineProperty11(_MiddleSacrifice, "Familiar Weight: 10", [$item(_templateObject128 || (_templateObject128 = _taggedTemplateLiteral13(["lead necklace"]))), 11]), _defineProperty11(_MiddleSacrifice, "Candy Drop: 100", [$item(_templateObject138 || (_templateObject138 = _taggedTemplateLiteral13(["huge bowl of candy"]))), 1]), _defineProperty11(_MiddleSacrifice, "Item Drop Penalty: -10", [$item(_templateObject147 || (_templateObject147 = _taggedTemplateLiteral13(["sea salt crystal"]))), 11]), _defineProperty11(_MiddleSacrifice, "Fishing Skill: 5", [$item(_templateObject157 || (_templateObject157 = _taggedTemplateLiteral13(["wriggling worm"]))), 1]), _defineProperty11(_MiddleSacrifice, "Pool Skill: 5", [$item(_templateObject167 || (_templateObject167 = _taggedTemplateLiteral13(["8-ball"]))), 15]), _defineProperty11(_MiddleSacrifice, "Avatar: Purple", [$item(_templateObject177 || (_templateObject177 = _taggedTemplateLiteral13(["moxie weed"]))), 99]), _defineProperty11(_MiddleSacrifice, "Drops Items: true", [$item(_templateObject187 || (_templateObject187 = _taggedTemplateLiteral13(["ten-leaf clover"]))), 1]), _MiddleSacrifice);
function getMiddleSacPair(mod) {
  return MiddleSacrifice[mod];
}
var RightSacrifice = (_RightSacrifice = {}, _defineProperty11(_RightSacrifice, "Weapon Damage: 20", [-1, 0]), _defineProperty11(_RightSacrifice, "Spell Damage Percent: 20", [-2, 0]), _defineProperty11(_RightSacrifice, "Meat Drop: 30", [$item(_templateObject197 || (_templateObject197 = _taggedTemplateLiteral13(["taco shell"]))), 1]), _defineProperty11(_RightSacrifice, "Meat Drop: 60", [$item(_templateObject207 || (_templateObject207 = _taggedTemplateLiteral13(["porquoise"]))), 1]), _defineProperty11(_RightSacrifice, "Item Drop: 15", [$item(_templateObject2112 || (_templateObject2112 = _taggedTemplateLiteral13(["fairy gravy boat"]))), 1]), _defineProperty11(_RightSacrifice, "Item Drop: 30", [$item(_templateObject228 || (_templateObject228 = _taggedTemplateLiteral13(["tiny dancer"]))), 1]), _defineProperty11(_RightSacrifice, "Muscle Experience: 3", [$item(_templateObject237 || (_templateObject237 = _taggedTemplateLiteral13(["Knob Goblin firecracker"]))), 3]), _defineProperty11(_RightSacrifice, "Mysticality Experience: 3", [$item(_templateObject247 || (_templateObject247 = _taggedTemplateLiteral13(["razor-sharp can lid"]))), 3]), _defineProperty11(_RightSacrifice, "Moxie Experience: 3", [$item(_templateObject257 || (_templateObject257 = _taggedTemplateLiteral13(["spider web"]))), 3]), _defineProperty11(_RightSacrifice, "Muscle Experience Percent: 25", [$item(_templateObject267 || (_templateObject267 = _taggedTemplateLiteral13(["synthetic marrow"]))), 5]), _defineProperty11(_RightSacrifice, "Mysticality Experience Percent: 25", [$item(_templateObject277 || (_templateObject277 = _taggedTemplateLiteral13(["haunted battery"]))), 5]), _defineProperty11(_RightSacrifice, "Moxie Experience Percent: 25", [$item(_templateObject286 || (_templateObject286 = _taggedTemplateLiteral13(["the funk"]))), 5]), _RightSacrifice);
function getRightSacPair(mod) {
  return RightSacrifice[mod];
}
function findRequirements(modifiers) {
  var leftSac = modifiers.leftSac, rightSac = modifiers.rightSac, middleSac = modifiers.middleSac;
  var returnValue = /* @__PURE__ */ new Map();
  if (leftSac) {
    var _getLeftSacPair = getLeftSacPair(leftSac), _getLeftSacPair2 = _slicedToArray7(_getLeftSacPair, 2), sacrifice = _getLeftSacPair2[0], quantity = _getLeftSacPair2[1];
    if (sacrifice instanceof import_kolmafia22.Item) {
      returnValue.set(sacrifice, quantity);
    }
  }
  if (rightSac) {
    var _getRightSacPair = getRightSacPair(rightSac), _getRightSacPair2 = _slicedToArray7(_getRightSacPair, 2), _sacrifice = _getRightSacPair2[0], _quantity = _getRightSacPair2[1];
    if (_sacrifice instanceof import_kolmafia22.Item) {
      returnValue.set(_sacrifice, _quantity);
    }
  }
  if (middleSac) {
    var _getMiddleSacPair = getMiddleSacPair(middleSac), _getMiddleSacPair2 = _slicedToArray7(_getMiddleSacPair, 2), _sacrifice2 = _getMiddleSacPair2[0], _quantity2 = _getMiddleSacPair2[1];
    if (_sacrifice2 instanceof import_kolmafia22.Item) {
      returnValue.set(_sacrifice2, _quantity2);
    }
  }
  return returnValue;
}
function sacrificePairToURL(pair) {
  var _pair = _slicedToArray7(pair, 2), rawSacrifice = _pair[0], quantity = _pair[1];
  var sacrifice = rawSacrifice instanceof import_kolmafia22.Item ? rawSacrifice.id : rawSacrifice;
  return "".concat(sacrifice, ",").concat(quantity);
}
function makePants(alignment, element, leftSac, middleSac, rightSac) {
  if (have(pants) || !have(pantogram))
    return false;
  var requirements = findRequirements({
    alignment: alignment,
    element: element,
    leftSac: leftSac,
    rightSac: rightSac,
    middleSac: middleSac
  });
  if (Array.from(requirements.entries()).some(function(_ref) {
    var _ref2 = _slicedToArray7(_ref, 2), item9 = _ref2[0], quantity = _ref2[1];
    return !have(item9, quantity);
  })) {
    return false;
  }
  var s1 = sacrificePairToURL(getLeftSacPair(leftSac));
  var s2 = sacrificePairToURL(getRightSacPair(rightSac));
  var s3 = sacrificePairToURL(getMiddleSacPair(middleSac));
  var url = "choice.php?whichchoice=1270&pwd&option=1&m=".concat(Alignment[alignment], "&e=").concat(Element3[element], "&s1=").concat(s1, "&s2=").concat(s2, "&s3=").concat(s3);
  directlyUse(pantogram);
  (0, import_kolmafia22.visitUrl)(url);
  return have(pants);
}
function makePantsFromObject(pants2) {
  return makePants(pants2.alignment, pants2.element, pants2.leftSac, pants2.middleSac, pants2.rightSac);
}

// node_modules/libram/dist/resources/2017/Robortender.js
var Robortender_exports = {};
__export(Robortender_exports, {
  currentDrinks: function() {
    return currentDrinks;
  },
  drinks: function() {
    return drinks;
  },
  dropChance: function() {
    return dropChance;
  },
  dropFrom: function() {
    return dropFrom;
  },
  feed: function() {
    return feed;
  },
  have: function() {
    return have13;
  },
  majorDrinks: function() {
    return majorDrinks;
  },
  minorDrinks: function() {
    return minorDrinks;
  }
});
var import_kolmafia23 = require("kolmafia");
var _templateObject119;
var _templateObject229;
var _templateObject327;
var _templateObject421;
var _templateObject518;
var _templateObject616;
var _templateObject715;
var _templateObject815;
var _templateObject914;
var _templateObject1012;
var _templateObject1110;
var _templateObject129;
var _templateObject139;
var _templateObject148;
var _templateObject158;
var _templateObject168;
var _templateObject178;
var _templateObject188;
var _templateObject198;
var _templateObject208;
var _templateObject2113;
var _templateObject2210;
var _templateObject238;
var _templateObject248;
var _templateObject258;
var _templateObject268;
var _templateObject278;
var _templateObject287;
var _templateObject296;
var _templateObject306;
var _templateObject3110;
var _templateObject328;
var _templateObject336;
var _templateObject346;
var _templateObject356;
var _templateObject365;
var _templateObject375;
function _toConsumableArray8(arr) {
  return _arrayWithoutHoles8(arr) || _iterableToArray8(arr) || _unsupportedIterableToArray15(arr) || _nonIterableSpread8();
}
function _nonIterableSpread8() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray15(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray15(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray15(o, minLen);
}
function _iterableToArray8(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles8(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray15(arr);
}
function _arrayLikeToArray15(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral14(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var familiar3 = $familiar(_templateObject119 || (_templateObject119 = _taggedTemplateLiteral14(["Robortender"])));
function have13() {
  return (0, import_kolmafia23.haveFamiliar)(familiar3);
}
var phylumDrops = /* @__PURE__ */ new Map([
  [$phylum(_templateObject229 || (_templateObject229 = _taggedTemplateLiteral14(["Bug"]))), $item(_templateObject327 || (_templateObject327 = _taggedTemplateLiteral14(["pickled grasshopper"])))],
  // bottle of ans
  [$phylum(_templateObject421 || (_templateObject421 = _taggedTemplateLiteral14(["Constellation"]))), import_kolmafia23.Item.get(9348)],
  [$phylum(_templateObject518 || (_templateObject518 = _taggedTemplateLiteral14(["Demon"]))), $item(_templateObject616 || (_templateObject616 = _taggedTemplateLiteral14(["bottle of novelty hot sauce"])))],
  [$phylum(_templateObject715 || (_templateObject715 = _taggedTemplateLiteral14(["Elemental"]))), $item(_templateObject815 || (_templateObject815 = _taggedTemplateLiteral14(["elemental sugarcube"])))],
  [$phylum(_templateObject914 || (_templateObject914 = _taggedTemplateLiteral14(["Elf"]))), $item(_templateObject1012 || (_templateObject1012 = _taggedTemplateLiteral14(["peppermint sprig"])))],
  [$phylum(_templateObject1110 || (_templateObject1110 = _taggedTemplateLiteral14(["Fish"]))), $item(_templateObject129 || (_templateObject129 = _taggedTemplateLiteral14(["bottle of clam juice"])))],
  [$phylum(_templateObject139 || (_templateObject139 = _taggedTemplateLiteral14(["Goblin"]))), $item(_templateObject148 || (_templateObject148 = _taggedTemplateLiteral14(["cocktail mushroom"])))],
  [$phylum(_templateObject158 || (_templateObject158 = _taggedTemplateLiteral14(["Hippy"]))), $item(_templateObject168 || (_templateObject168 = _taggedTemplateLiteral14(["shot of granola liqueur"])))],
  [$phylum(_templateObject178 || (_templateObject178 = _taggedTemplateLiteral14(["Hobo"]))), $item(_templateObject188 || (_templateObject188 = _taggedTemplateLiteral14(["can of cherry-flavored sterno"])))],
  [$phylum(_templateObject198 || (_templateObject198 = _taggedTemplateLiteral14(["Horror"]))), $item(_templateObject208 || (_templateObject208 = _taggedTemplateLiteral14(["lump of black ichor"])))],
  [$phylum(_templateObject2113 || (_templateObject2113 = _taggedTemplateLiteral14(["Humanoid"]))), $item(_templateObject2210 || (_templateObject2210 = _taggedTemplateLiteral14(["bottle of gregnadigne"])))],
  // bottle of Crme de Fugu
  [$phylum(_templateObject238 || (_templateObject238 = _taggedTemplateLiteral14(["Mer-kin"]))), import_kolmafia23.Item.get(9358)],
  [$phylum(_templateObject248 || (_templateObject248 = _taggedTemplateLiteral14(["Orc"]))), $item(_templateObject258 || (_templateObject258 = _taggedTemplateLiteral14(["baby oil shooter"])))],
  [$phylum(_templateObject268 || (_templateObject268 = _taggedTemplateLiteral14(["Penguin"]))), $item(_templateObject278 || (_templateObject278 = _taggedTemplateLiteral14(["fish head"])))],
  [$phylum(_templateObject287 || (_templateObject287 = _taggedTemplateLiteral14(["Pirate"]))), $item(_templateObject296 || (_templateObject296 = _taggedTemplateLiteral14(["limepatch"])))],
  [$phylum(_templateObject306 || (_templateObject306 = _taggedTemplateLiteral14(["Plant"]))), $item(_templateObject3110 || (_templateObject3110 = _taggedTemplateLiteral14(["pile of dirt"])))],
  [$phylum(_templateObject328 || (_templateObject328 = _taggedTemplateLiteral14(["Slime"]))), $item(_templateObject336 || (_templateObject336 = _taggedTemplateLiteral14(["slime shooter"])))],
  [$phylum(_templateObject346 || (_templateObject346 = _taggedTemplateLiteral14(["Weird"]))), $item(_templateObject356 || (_templateObject356 = _taggedTemplateLiteral14(["imaginary lemon"])))]
]);
function dropFrom(target) {
  var _phylumDrops$get;
  var phylum = target instanceof import_kolmafia23.Monster ? target.phylum : target;
  return (_phylumDrops$get = phylumDrops.get(phylum)) !== null && _phylumDrops$get !== void 0 ? _phylumDrops$get : $item.none;
}
function dropChance() {
  var _dropNumber;
  var dropNumber = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : get("_roboDrops");
  return (_dropNumber = [1, 0.5, 0.4, 0.4, 0.4, 0.3, 0.3, 0.3][dropNumber]) !== null && _dropNumber !== void 0 ? _dropNumber : 0.2;
}
var minorDrinks = $items(_templateObject365 || (_templateObject365 = _taggedTemplateLiteral14(["literal grasshopper, double entendre, Phlegethon, Siberian sunrise, mentholated wine, low tide martini, shroomtini, morning dew, whiskey squeeze, great old fashioned, Gnomish sagngria, vodka stinger, extremely slippery nipple, piscatini, Churchill, soilzerac, London frog, nothingtini"])));
var majorDrinks = $items(_templateObject375 || (_templateObject375 = _taggedTemplateLiteral14(["eighth plague, single entendre, reverse Tantalus, elemental caipiroska, Feliz Navidad, Bloody Nora, moreltini, hell in a bucket, Newark, R'lyeh, Gnollish sangria, vodka barracuda, Mysterious Island iced tea, drive-by shooting, gunner's daughter, dirt julep, Simepore slime, Phil Collins"])));
var drinks = [].concat(_toConsumableArray8(minorDrinks), _toConsumableArray8(majorDrinks));
function currentDrinks() {
  var pref = get("_roboDrinks");
  if (!pref)
    return [];
  return pref.split(",").filter(function(x) {
    return x.trim();
  }).map(function(name) {
    return (0, import_kolmafia23.toItem)(name);
  }).filter(function(drink3) {
    return drinks.includes(drink3);
  });
}
function feed(beverage) {
  if (currentDrinks().includes(beverage))
    return true;
  if (currentDrinks().length >= 5)
    return false;
  if (!drinks.includes(beverage))
    return false;
  if (!(0, import_kolmafia23.itemAmount)(beverage))
    return false;
  if (!have13())
    return false;
  var priorFamiliar = (0, import_kolmafia23.myFamiliar)();
  (0, import_kolmafia23.useFamiliar)(familiar3);
  (0, import_kolmafia23.visitUrl)("inventory.php?action=robooze&which=1&whichitem=".concat(beverage.id));
  (0, import_kolmafia23.useFamiliar)(priorFamiliar);
  return currentDrinks().includes(beverage);
}

// node_modules/libram/dist/resources/2017/TunnelOfLove.js
var TunnelOfLove_exports = {};
__export(TunnelOfLove_exports, {
  LovEnamorang: function() {
    return LovEnamorang;
  },
  couldUseLoveEnamorang: function() {
    return couldUseLoveEnamorang;
  },
  fightAll: function() {
    return fightAll;
  },
  getLovEnamorangMonster: function() {
    return getLovEnamorangMonster;
  },
  getLovEnamorangUses: function() {
    return getLovEnamorangUses;
  },
  have: function() {
    return have14;
  },
  haveLovEnamorang: function() {
    return haveLovEnamorang;
  },
  isUsed: function() {
    return isUsed;
  }
});
var import_kolmafia24 = require("kolmafia");
var _templateObject120;
var _templateObject230;
function _taggedTemplateLiteral15(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function have14() {
  return get("loveTunnelAvailable");
}
function isUsed() {
  return get("_loveTunnelUsed");
}
function haveLovEnamorang() {
  return have($item(_templateObject120 || (_templateObject120 = _taggedTemplateLiteral15(["LOV Enamorang"]))));
}
function getLovEnamorangUses() {
  return get("_enamorangs");
}
function couldUseLoveEnamorang() {
  return !haveWandererCounter(Wanderer.Enamorang) && getLovEnamorangUses() < 3 && haveLovEnamorang();
}
function getLovEnamorangMonster() {
  return get("enamorangMonster");
}
var LovEnamorang = new Copier(function() {
  return couldUseLoveEnamorang();
}, null, function() {
  return couldUseLoveEnamorang();
}, function() {
  return getLovEnamorangMonster();
});
function equipmentChoice(equipment) {
  switch (equipment) {
    case "LOV Eardigan":
      return 1;
    case "LOV Epaulettes":
      return 2;
    case "LOV Earring":
      return 3;
  }
}
function effectChoice(effect2) {
  switch (effect2) {
    case "Lovebotamy":
      return 1;
    case "Open Heart Surgery":
      return 2;
    case "Wandering Eye Surgery":
      return 3;
  }
}
function extraChoice(extra) {
  switch (extra) {
    case "LOV Enamorang":
      return 1;
    case "LOV Emotionizer":
      return 2;
    case "LOV Extraterrestrial Chocolate":
      return 3;
    case "LOV Echinacea Bouquet":
      return 4;
    case "LOV Elephant":
      return 5;
    case "toast":
      return 6;
    case null:
      return 7;
  }
}
function fightAll(equipment, effect2, extra) {
  withChoices({
    1222: 1,
    1223: 1,
    1224: equipmentChoice(equipment),
    1225: 1,
    1226: effectChoice(effect2),
    1227: 1,
    1228: extraChoice(extra)
  }, function() {
    (0, import_kolmafia24.adv1)($location(_templateObject230 || (_templateObject230 = _taggedTemplateLiteral15(["The Tunnel of L.O.V.E."]))), 0, "");
  });
}

// node_modules/libram/dist/counter.js
var counter_exports = {};
__export(counter_exports, {
  exists: function() {
    return exists;
  },
  get: function() {
    return get3;
  },
  set: function() {
    return set;
  }
});
var import_kolmafia25 = require("kolmafia");
function get3(counter) {
  var value = (0, import_kolmafia25.getCounter)(counter);
  if (value === -1) {
    return (0, import_kolmafia25.getCounters)(counter, -1, -1).trim() === "" ? Infinity : -1;
  }
  return value;
}
function exists(counter) {
  return (0, import_kolmafia25.getCounter)(counter) !== -1 || (0, import_kolmafia25.getCounters)(counter, -1, -1).trim() !== "";
}
function set(counter, duration) {
  (0, import_kolmafia25.cliExecute)("counters add ".concat(duration, " ").concat(counter));
  return get3(counter) !== null;
}

// node_modules/libram/dist/resources/2018/SongBoom.js
var SongBoom_exports = {};
__export(SongBoom_exports, {
  dropProgress: function() {
    return dropProgress;
  },
  have: function() {
    return have15;
  },
  setSong: function() {
    return setSong;
  },
  song: function() {
    return song;
  },
  songBoomSongs: function() {
    return songBoomSongs;
  },
  songChangesLeft: function() {
    return songChangesLeft;
  }
});
var import_kolmafia26 = require("kolmafia");
var _templateObject121;
function _taggedTemplateLiteral16(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item3 = $item(_templateObject121 || (_templateObject121 = _taggedTemplateLiteral16(["SongBoom\u2122 BoomBox"])));
function have15() {
  return have(item3);
}
var keywords = {
  "Eye of the Giger": "spooky",
  "Food Vibrations": "food",
  "Remainin' Alive": "dr",
  "These Fists Were Made for Punchin'": "damage",
  "Total Eclipse of Your Meat": "meat"
};
var songBoomSongs = new Set(Object.keys(keywords));
function song() {
  var stored = get("boomBoxSong");
  return songBoomSongs.has(stored) ? stored : null;
}
function songChangesLeft() {
  return get("_boomBoxSongsLeft");
}
function setSong(newSong) {
  if (song() !== newSong) {
    if (songChangesLeft() === 0)
      throw new Error("Out of song changes!");
    (0, import_kolmafia26.cliExecute)("boombox ".concat(newSong ? keywords[newSong] : "none"));
    return true;
  } else {
    return false;
  }
}
function dropProgress() {
  return get("_boomBoxFights");
}

// node_modules/libram/dist/resources/2019/BeachComb.js
var BeachComb_exports = {};
__export(BeachComb_exports, {
  available: function() {
    return available;
  },
  canComb: function() {
    return canComb;
  },
  comb: function() {
    return comb;
  },
  freeCombs: function() {
    return freeCombs;
  },
  have: function() {
    return have16;
  },
  head: function() {
    return head;
  },
  headAvailable: function() {
    return headAvailable;
  },
  headBuffs: function() {
    return headBuffs;
  },
  tideLevel: function() {
    return tideLevel;
  },
  tryHead: function() {
    return tryHead;
  }
});
var import_kolmafia27 = require("kolmafia");
var _templateObject130;
var _templateObject231;
var _templateObject329;
var _templateObject426;
var _templateObject519;
var _templateObject617;
var _templateObject716;
var _templateObject816;
var _templateObject915;
var _templateObject1013;
var _templateObject1111;
var _templateObject1210;
var _templateObject1310;
var _templateObject149;
var _templateObject159;
var _templateObject169;
var _templateObject179;
var _templateObject189;
var _templateObject199;
var _templateObject209;
var _templateObject2114;
function _taggedTemplateLiteral17(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function have16() {
  return have(import_kolmafia27.Item.get("Beach Comb"));
}
function available() {
  return have16() || have(import_kolmafia27.Item.get("driftwood beach comb"));
}
var headBuffs = [$effect(_templateObject130 || (_templateObject130 = _taggedTemplateLiteral17(["Hot-Headed"]))), $effect(_templateObject231 || (_templateObject231 = _taggedTemplateLiteral17(["Cold as Nice"]))), $effect(_templateObject329 || (_templateObject329 = _taggedTemplateLiteral17(["A Brush with Grossness"]))), $effect(_templateObject426 || (_templateObject426 = _taggedTemplateLiteral17(["Does It Have a Skull In There??"]))), $effect(_templateObject519 || (_templateObject519 = _taggedTemplateLiteral17(["Oiled, Slick"]))), $effect(_templateObject617 || (_templateObject617 = _taggedTemplateLiteral17(["Lack of Body-Building"]))), $effect(_templateObject716 || (_templateObject716 = _taggedTemplateLiteral17(["We're All Made of Starfish"]))), $effect(_templateObject816 || (_templateObject816 = _taggedTemplateLiteral17(["Pomp & Circumsands"]))), $effect(_templateObject915 || (_templateObject915 = _taggedTemplateLiteral17(["Resting Beach Face"]))), $effect(_templateObject1013 || (_templateObject1013 = _taggedTemplateLiteral17(["Do I Know You From Somewhere?"]))), $effect(_templateObject1111 || (_templateObject1111 = _taggedTemplateLiteral17(["You Learned Something Maybe!"])))];
var head = {
  HOT: $effect(_templateObject1210 || (_templateObject1210 = _taggedTemplateLiteral17(["Hot-Headed"]))),
  COLD: $effect(_templateObject1310 || (_templateObject1310 = _taggedTemplateLiteral17(["Cold as Nice"]))),
  STENCH: $effect(_templateObject149 || (_templateObject149 = _taggedTemplateLiteral17(["A Brush with Grossness"]))),
  SPOOKY: $effect(_templateObject159 || (_templateObject159 = _taggedTemplateLiteral17(["Does It Have a Skull In There??"]))),
  SLEAZE: $effect(_templateObject169 || (_templateObject169 = _taggedTemplateLiteral17(["Oiled, Slick"]))),
  MUSCLE: $effect(_templateObject179 || (_templateObject179 = _taggedTemplateLiteral17(["Lack of Body-Building"]))),
  MYSTICALITY: $effect(_templateObject189 || (_templateObject189 = _taggedTemplateLiteral17(["We're All Made of Starfish"]))),
  INITIATIVE: $effect(_templateObject199 || (_templateObject199 = _taggedTemplateLiteral17(["Resting Beach Face"]))),
  FAMILIAR: $effect(_templateObject209 || (_templateObject209 = _taggedTemplateLiteral17(["Do I Know You From Somewhere?"]))),
  EXPERIENCE: $effect(_templateObject2114 || (_templateObject2114 = _taggedTemplateLiteral17(["You Learned Something Maybe!"])))
};
function tideLevel() {
  var day = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia27.gamedayToInt)();
  var dayOfMonth = 1 + day % 8;
  return 4 - Math.abs(4 - dayOfMonth);
}
function canComb(tile) {
  return tile.row > tideLevel();
}
function freeCombs() {
  return available() ? clamp(11 - get("_freeBeachWalksUsed"), 0, 11) : 0;
}
function comb() {
  for (var _len = arguments.length, tiles = new Array(_len), _key = 0; _key < _len; _key++) {
    tiles[_key] = arguments[_key];
  }
  if (!available() || !tiles.length)
    return;
  for (var _i = 0, _tiles = tiles; _i < _tiles.length; _i++) {
    var tile = _tiles[_i];
    if (canComb(tile)) {
      var minute = tile.minute, row = tile.row, column = tile.column;
      (0, import_kolmafia27.cliExecute)("beach wander ".concat(minute));
      (0, import_kolmafia27.cliExecute)("beach comb ".concat(row, " ").concat(column));
    }
  }
  if ((0, import_kolmafia27.handlingChoice)())
    (0, import_kolmafia27.runChoice)(5);
}
function headAvailable(target) {
  var effect2 = target instanceof import_kolmafia27.Effect ? target : head[target];
  var headNumber = 1 + headBuffs.indexOf(effect2);
  return (0, import_kolmafia27.getProperty)("beachHeadsUnlocked").split(",").includes(headNumber.toString()) && !(0, import_kolmafia27.getProperty)("_beachHeadsUsed").split(",").includes(headNumber.toString());
}
function tryHead(target) {
  var effect2 = target instanceof import_kolmafia27.Effect ? target : head[target];
  if (!headBuffs.includes(effect2))
    return false;
  if (!headAvailable(target))
    return false;
  (0, import_kolmafia27.cliExecute)(effect2.default);
  return have(effect2);
}

// node_modules/libram/dist/resources/2020/Guzzlr.js
var Guzzlr_exports = {};
__export(Guzzlr_exports, {
  Cocktails: function() {
    return Cocktails;
  },
  abandon: function() {
    return abandon;
  },
  acceptBronze: function() {
    return acceptBronze;
  },
  acceptGold: function() {
    return acceptGold;
  },
  acceptPlatinum: function() {
    return acceptPlatinum;
  },
  canAbandon: function() {
    return canAbandon;
  },
  canGold: function() {
    return canGold;
  },
  canPlatinum: function() {
    return canPlatinum;
  },
  expectedReward: function() {
    return expectedReward;
  },
  getBooze: function() {
    return getBooze;
  },
  getBronze: function() {
    return getBronze;
  },
  getCheapestPlatinumCocktail: function() {
    return getCheapestPlatinumCocktail;
  },
  getGold: function() {
    return getGold;
  },
  getGoldToday: function() {
    return getGoldToday;
  },
  getLocation: function() {
    return getLocation2;
  },
  getPlatinum: function() {
    return getPlatinum;
  },
  getPlatinumToday: function() {
    return getPlatinumToday;
  },
  getTier: function() {
    return getTier;
  },
  have: function() {
    return have17;
  },
  haveBooze: function() {
    return haveBooze;
  },
  haveFullBronzeBonus: function() {
    return haveFullBronzeBonus;
  },
  haveFullGoldBonus: function() {
    return haveFullGoldBonus;
  },
  haveFullPlatinumBonus: function() {
    return haveFullPlatinumBonus;
  },
  havePlatinumBooze: function() {
    return havePlatinumBooze;
  },
  ingredientToPlatinumCocktail: function() {
    return ingredientToPlatinumCocktail;
  },
  isQuestActive: function() {
    return isQuestActive;
  },
  platinumCocktailToIngredient: function() {
    return platinumCocktailToIngredient;
  },
  turnsLeftOnQuest: function() {
    return turnsLeftOnQuest;
  }
});
var import_kolmafia28 = require("kolmafia");
var _templateObject131;
var _templateObject239;
var _templateObject330;
var _templateObject427;
var _templateObject520;
var _templateObject618;
var _templateObject717;
var _templateObject817;
var _templateObject916;
var _templateObject1014;
var _templateObject1112;
var _templateObject1211;
var _templateObject1311;
function _slicedToArray8(arr, i) {
  return _arrayWithHoles8(arr) || _iterableToArrayLimit8(arr, i) || _unsupportedIterableToArray16(arr, i) || _nonIterableRest8();
}
function _nonIterableRest8() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit8(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles8(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _toConsumableArray9(arr) {
  return _arrayWithoutHoles9(arr) || _iterableToArray9(arr) || _unsupportedIterableToArray16(arr) || _nonIterableSpread9();
}
function _nonIterableSpread9() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray16(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray16(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray16(o, minLen);
}
function _iterableToArray9(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles9(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray16(arr);
}
function _arrayLikeToArray16(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral18(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item4 = $item(_templateObject131 || (_templateObject131 = _taggedTemplateLiteral18(["Guzzlr tablet"])));
function have17() {
  return have(item4);
}
function useTabletWithChoice(option) {
  withChoice(1412, option, function() {
    return (0, import_kolmafia28.use)(1, item4);
  });
}
function isQuestActive() {
  return get("questGuzzlr") !== "unstarted";
}
function getPlatinum() {
  return get("guzzlrPlatinumDeliveries");
}
function getPlatinumToday() {
  return get("_guzzlrPlatinumDeliveries");
}
function canPlatinum() {
  return !isQuestActive() && getGold() >= 5 && getPlatinumToday() < 1;
}
function haveFullPlatinumBonus() {
  return getPlatinum() >= 30;
}
function acceptPlatinum() {
  if (!canPlatinum())
    return false;
  useTabletWithChoice(4);
  return true;
}
function getGold() {
  return get("guzzlrGoldDeliveries");
}
function getGoldToday() {
  return get("_guzzlrGoldDeliveries");
}
function canGold() {
  return !isQuestActive() && getBronze() >= 5 && getGoldToday() < 3;
}
function haveFullGoldBonus() {
  return getGold() >= 150;
}
function acceptGold() {
  if (!canGold())
    return false;
  useTabletWithChoice(3);
  return true;
}
function getBronze() {
  return get("guzzlrBronzeDeliveries");
}
function haveFullBronzeBonus() {
  return getBronze() >= 196;
}
function acceptBronze() {
  if (isQuestActive())
    return false;
  useTabletWithChoice(2);
  return true;
}
function canAbandon() {
  return isQuestActive() && !get("_guzzlrQuestAbandoned");
}
function abandon() {
  if (!canAbandon())
    return false;
  (0, import_kolmafia28.visitUrl)("inventory.php?tap=guzzlr", false);
  (0, import_kolmafia28.runChoice)(1);
  (0, import_kolmafia28.runChoice)(5);
  return true;
}
function getLocation2() {
  return get("guzzlrQuestLocation");
}
function getTier() {
  var tier = get("guzzlrQuestTier");
  return tier === "" ? null : tier;
}
function getBooze() {
  var booze = get("guzzlrQuestBooze");
  if (booze === "")
    return null;
  return import_kolmafia28.Item.get(booze);
}
var Cocktails = $items(_templateObject239 || (_templateObject239 = _taggedTemplateLiteral18(["Buttery Boy, Steamboat, Ghiaccio Colada, Nog-on-the-Cob, Sourfinger"])));
function havePlatinumBooze() {
  return Cocktails.some(function(cock) {
    return (0, import_kolmafia28.itemAmount)(cock) > 0;
  });
}
function haveBooze() {
  var booze = getBooze();
  switch (booze) {
    case null:
      return false;
    case $item(_templateObject330 || (_templateObject330 = _taggedTemplateLiteral18(["Guzzlr cocktail set"]))):
      return havePlatinumBooze();
    default:
      return (0, import_kolmafia28.itemAmount)(booze) > 0;
  }
}
var ingredientToPlatinumCocktail = /* @__PURE__ */ new Map([[$item(_templateObject427 || (_templateObject427 = _taggedTemplateLiteral18(["miniature boiler"]))), $item(_templateObject520 || (_templateObject520 = _taggedTemplateLiteral18(["Steamboat"])))], [$item(_templateObject618 || (_templateObject618 = _taggedTemplateLiteral18(["cold wad"]))), $item(_templateObject717 || (_templateObject717 = _taggedTemplateLiteral18(["Ghiaccio Colada"])))], [$item(_templateObject817 || (_templateObject817 = _taggedTemplateLiteral18(["robin's egg"]))), $item(_templateObject916 || (_templateObject916 = _taggedTemplateLiteral18(["Nog-on-the-Cob"])))], [$item(_templateObject1014 || (_templateObject1014 = _taggedTemplateLiteral18(["mangled finger"]))), $item(_templateObject1112 || (_templateObject1112 = _taggedTemplateLiteral18(["Sourfinger"])))], [$item(_templateObject1211 || (_templateObject1211 = _taggedTemplateLiteral18(["Dish of Clarified Butter"]))), $item(_templateObject1311 || (_templateObject1311 = _taggedTemplateLiteral18(["Buttery Boy"])))]]);
var platinumCocktailToIngredient = invertMap(ingredientToPlatinumCocktail);
function getCheapestPlatinumCocktail() {
  var freeCraft = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  if (freeCraft) {
    return maxBy(Array.from(ingredientToPlatinumCocktail), function(ingredientAndCocktail) {
      return Math.min.apply(Math, _toConsumableArray9(ingredientAndCocktail.map(function(item9) {
        return (0, import_kolmafia28.mallPrice)(item9);
      })));
    }, true)[1];
  } else {
    return maxBy(Array.from(ingredientToPlatinumCocktail), function(_ref) {
      var _ref2 = _slicedToArray8(_ref, 2), cocktail = _ref2[1];
      return (0, import_kolmafia28.mallPrice)(cocktail);
    })[1];
  }
}
function turnsLeftOnQuest() {
  var useShoes = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  var progressPerTurn = useShoes ? Math.floor((10 - get("_guzzlrDeliveries")) * 1.5) : 10 - get("_guzzlrDeliveries");
  return Math.ceil((100 - get("guzzlrDeliveryProgress")) / progressPerTurn);
}
function expectedReward() {
  var usePants = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  switch (getTier()) {
    case "platinum":
      return 22.5 + (usePants ? 5 : 0);
    case "gold":
      return 6 + (usePants ? 3 : 0);
    case "bronze":
      return 3 + (usePants ? 3 : 0);
    default:
      return 0;
  }
}

// node_modules/libram/dist/resources/2021/CrystalBall.js
var CrystalBall_exports = {};
__export(CrystalBall_exports, {
  have: function() {
    return have18;
  },
  orb: function() {
    return orb;
  },
  ponder: function() {
    return ponder;
  }
});
var import_kolmafia29 = require("kolmafia");
function _slicedToArray9(arr, i) {
  return _arrayWithHoles9(arr) || _iterableToArrayLimit9(arr, i) || _unsupportedIterableToArray17(arr, i) || _nonIterableRest9();
}
function _nonIterableRest9() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray17(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray17(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray17(o, minLen);
}
function _arrayLikeToArray17(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit9(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles9(arr) {
  if (Array.isArray(arr))
    return arr;
}
var orb = import_kolmafia29.Item.get("miniature crystal ball");
function have18() {
  return (0, import_kolmafia29.availableAmount)(orb) > 0;
}
var parsedProp = function() {
  return get("crystalBallPredictions").split("|").map(function(element) {
    return element.split(":");
  }).map(function(_ref) {
    var _ref2 = _slicedToArray9(_ref, 3), location = _ref2[1], monster = _ref2[2];
    return [(0, import_kolmafia29.toLocation)(location), (0, import_kolmafia29.toMonster)(monster)];
  });
};
function ponder() {
  if (!have18())
    return /* @__PURE__ */ new Map();
  if (canVisitUrl()) {
    logger_default.debug("Now pondering Crystal Ball.");
    (0, import_kolmafia29.visitUrl)("inventory.php?ponder=1", false);
  } else {
    logger_default.debug("Failed to ponder Crystall Ball.");
  }
  return new Map(parsedProp());
}

// node_modules/libram/dist/resources/2021/DaylightShavings.js
var DaylightShavings_exports = {};
__export(DaylightShavings_exports, {
  buffAvailable: function() {
    return buffAvailable;
  },
  buffCycle: function() {
    return buffCycle;
  },
  buffs: function() {
    return buffs;
  },
  buffsUntil: function() {
    return buffsUntil;
  },
  hasBuff: function() {
    return hasBuff;
  },
  have: function() {
    return have19;
  },
  nextBuff: function() {
    return nextBuff;
  }
});
var import_kolmafia30 = require("kolmafia");
var _templateObject140;
var _templateObject240;
function _taggedTemplateLiteral19(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var helmet = $item(_templateObject140 || (_templateObject140 = _taggedTemplateLiteral19(["Daylight Shavings Helmet"])));
function have19() {
  return have(helmet);
}
var buffs = $effects(_templateObject240 || (_templateObject240 = _taggedTemplateLiteral19(["Spectacle Moustache, Toiletbrush Moustache, Barbell Moustache, Grizzly Beard, Surrealist's Moustache, Musician's Musician's Moustache, Gull-Wing Moustache, Space Warlord's Beard, Pointy Wizard Beard, Cowboy Stache, Friendly Chops"])));
function hasBuff() {
  return buffs.some(function(buff) {
    return have(buff);
  });
}
function buffAvailable() {
  return !buffs.some(function(buff) {
    return have(buff, 2);
  });
}
function buffCycle() {
  var playerclass = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : (0, import_kolmafia30.myClass)();
  if (playerclass.id <= 0)
    return [];
  var returnValue = [];
  var id = playerclass.id;
  var seed = id > 6 ? id % 6 + 1 : id;
  for (var i = 1; i < 12; i++) {
    var index = i * seed % 11;
    returnValue.push(buffs[index]);
  }
  return returnValue;
}
function nextBuff() {
  var currentBuff = (0, import_kolmafia30.toEffect)(get("lastBeardBuff").toFixed(0));
  var cycle2 = buffCycle();
  var index = cycle2.indexOf(currentBuff);
  var newIndex = (1 + index) % 11;
  return cycle2[newIndex];
}
function buffsUntil(buff) {
  if (!buffs.includes(buff))
    return null;
  var currentIndex = buffs.indexOf(nextBuff()) - 1;
  var newIndex = buffs.indexOf(buff);
  var diff = (newIndex - currentIndex) % 11;
  return diff === 0 ? 11 : diff;
}

// node_modules/libram/dist/resources/2022/AutumnAton.js
var AutumnAton_exports = {};
__export(AutumnAton_exports, {
  available: function() {
    return available2;
  },
  availableLocations: function() {
    return availableLocations;
  },
  currentUpgrades: function() {
    return currentUpgrades;
  },
  currentlyIn: function() {
    return currentlyIn;
  },
  getUniques: function() {
    return getUniques;
  },
  have: function() {
    return have20;
  },
  legs: function() {
    return legs;
  },
  possibleUpgrades: function() {
    return possibleUpgrades;
  },
  seasonalItems: function() {
    return seasonalItems;
  },
  sendTo: function() {
    return sendTo;
  },
  turnsForQuest: function() {
    return turnsForQuest;
  },
  turnsLeft: function() {
    return turnsLeft;
  },
  upgrade: function() {
    return upgrade;
  },
  visualAcuity: function() {
    return visualAcuity;
  },
  zoneItems: function() {
    return zoneItems;
  }
});
var import_kolmafia31 = require("kolmafia");
var _templateObject141;
var _templateObject241;
var _templateObject331;
var _templateObject428;
var _templateObject521;
var _templateObject619;
var _templateObject718;
var _templateObject818;
var _templateObject917;
function _taggedTemplateLiteral20(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item5 = import_kolmafia31.Item.get("autumn-aton");
function available2() {
  return (0, import_kolmafia31.availableAmount)(item5) > 0;
}
function have20() {
  return get("hasAutumnaton") || available2();
}
function checkLocations(html) {
  return (0, import_kolmafia31.xpath)(html, '//select[@name="heythereprogrammer"]//option[position()>1]/text()').map(function(name) {
    return (0, import_kolmafia31.toLocation)(name);
  });
}
function currentlyIn() {
  return get("autumnatonQuestLocation");
}
function sendTo(target) {
  var upgrade2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
  if (!available2())
    return null;
  var pageHtml = directlyUse(item5);
  if (upgrade2 && (0, import_kolmafia31.availableChoiceOptions)()[1])
    (0, import_kolmafia31.runChoice)(1);
  var locationsAvailable = checkLocations(pageHtml);
  var location = target instanceof import_kolmafia31.Location ? target : Array.isArray(target) ? target.find(function(l) {
    return locationsAvailable.includes(l);
  }) : target(locationsAvailable);
  if (!location)
    return null;
  if (!locationsAvailable.includes(location))
    return null;
  if (!(0, import_kolmafia31.handlingChoice)())
    directlyUse(item5);
  (0, import_kolmafia31.runChoice)(2, "heythereprogrammer=".concat(location.id));
  if ((0, import_kolmafia31.handlingChoice)())
    (0, import_kolmafia31.visitUrl)("main.php");
  return location;
}
function upgrade() {
  directlyUse(item5);
  var canUpgrade = (0, import_kolmafia31.availableChoiceOptions)()[1] !== void 0;
  if (canUpgrade)
    (0, import_kolmafia31.runChoice)(1);
  (0, import_kolmafia31.visitUrl)("main.php");
  return canUpgrade;
}
function availableLocations() {
  if (!available2())
    return [];
  var pageHtml = directlyUse(item5);
  (0, import_kolmafia31.visitUrl)("main.php");
  return checkLocations(pageHtml);
}
var possibleUpgrades = ["leftarm1", "leftleg1", "rightarm1", "rightleg1", "base_blackhat", "cowcatcher", "periscope", "radardish", "dualexhaust"];
function currentUpgrades() {
  return get("autumnatonUpgrades").split(",");
}
function turnsLeft() {
  return get("autumnatonQuestTurn") - (0, import_kolmafia31.totalTurnsPlayed)();
}
function legs() {
  return currentUpgrades().filter(function(u) {
    return u.includes("leg");
  }).length;
}
function turnsForQuest() {
  return 11 * Math.max(1, get("_autumnatonQuests") - legs());
}
function visualAcuity() {
  var visualUpgrades = ["periscope", "radardish"];
  return 1 + currentUpgrades().filter(function(u) {
    return visualUpgrades.includes(u);
  }).length;
}
function zoneItems() {
  return 3 + currentUpgrades().filter(function(u) {
    return u.includes("arm");
  }).length;
}
function seasonalItems() {
  return currentUpgrades().includes("cowcatcher") ? 2 : 1;
}
var difficulties = ["low", "mid", "high"];
var UNIQUES = {
  outdoor: {
    low: {
      index: 4,
      item: $item(_templateObject141 || (_templateObject141 = _taggedTemplateLiteral20(["autumn leaf"])))
    },
    mid: {
      index: 2,
      item: $item(_templateObject241 || (_templateObject241 = _taggedTemplateLiteral20(["autumn debris shield"])))
    },
    high: {
      index: 6,
      item: $item(_templateObject331 || (_templateObject331 = _taggedTemplateLiteral20(["autumn leaf pendant"])))
    }
  },
  indoor: {
    low: {
      index: 0,
      item: $item(_templateObject428 || (_templateObject428 = _taggedTemplateLiteral20(["AutumnFest ale"])))
    },
    mid: {
      index: 3,
      item: $item(_templateObject521 || (_templateObject521 = _taggedTemplateLiteral20(["autumn-spice donut"])))
    },
    high: {
      index: 7,
      item: $item(_templateObject619 || (_templateObject619 = _taggedTemplateLiteral20(["autumn breeze"])))
    }
  },
  underground: {
    low: {
      index: 1,
      item: $item(_templateObject718 || (_templateObject718 = _taggedTemplateLiteral20(["autumn sweater-weather sweater"])))
    },
    mid: {
      index: 5,
      item: $item(_templateObject818 || (_templateObject818 = _taggedTemplateLiteral20(["autumn dollar"])))
    },
    high: {
      index: 8,
      item: $item(_templateObject917 || (_templateObject917 = _taggedTemplateLiteral20(["autumn years wisdom"])))
    }
  }
};
function getUniques(location) {
  var env = location.environment;
  var difficulty = location.difficultyLevel;
  if (arrayContains(env, ["outdoor", "indoor", "underground"]) && arrayContains(difficulty, difficulties)) {
    var _UNIQUES$env$difficul = UNIQUES[env][difficulty], index = _UNIQUES$env$difficul.index, _item = _UNIQUES$env$difficul.item;
    return {
      upgrade: possibleUpgrades[index],
      item: _item
    };
  }
  return null;
}

// node_modules/libram/dist/resources/2022/CombatLoversLocket.js
var CombatLoversLocket_exports = {};
__export(CombatLoversLocket_exports, {
  availableLocketMonsters: function() {
    return availableLocketMonsters;
  },
  findMonster: function() {
    return findMonster;
  },
  have: function() {
    return have21;
  },
  monstersReminisced: function() {
    return monstersReminisced;
  },
  reminisce: function() {
    return reminisce;
  },
  reminiscesLeft: function() {
    return reminiscesLeft;
  },
  unlockedLocketMonsters: function() {
    return unlockedLocketMonsters;
  }
});
var import_kolmafia32 = require("kolmafia");
var _templateObject150;
function _slicedToArray10(arr, i) {
  return _arrayWithHoles10(arr) || _iterableToArrayLimit10(arr, i) || _unsupportedIterableToArray18(arr, i) || _nonIterableRest10();
}
function _nonIterableRest10() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray18(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray18(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray18(o, minLen);
}
function _arrayLikeToArray18(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit10(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles10(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral21(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var locket = $item(_templateObject150 || (_templateObject150 = _taggedTemplateLiteral21(["combat lover's locket"])));
function have21() {
  return have(locket);
}
function availableLocketMonsters() {
  if (reminiscesLeft() === 0)
    return [];
  return Object.entries((0, import_kolmafia32.getLocketMonsters)()).filter(function(_ref) {
    var _ref2 = _slicedToArray10(_ref, 2), unused = _ref2[1];
    return unused;
  }).map(function(_ref3) {
    var _ref4 = _slicedToArray10(_ref3, 1), name = _ref4[0];
    return (0, import_kolmafia32.toMonster)(name);
  });
}
function unlockedLocketMonsters() {
  return Object.entries((0, import_kolmafia32.getLocketMonsters)()).map(function(_ref5) {
    var _ref6 = _slicedToArray10(_ref5, 1), name = _ref6[0];
    return (0, import_kolmafia32.toMonster)(name);
  });
}
function parseLocketProperty() {
  return get("_locketMonstersFought").split(",").filter(function(id) {
    return id.trim().length > 0;
  });
}
function reminiscesLeft() {
  return have21() ? clamp(3 - parseLocketProperty().length, 0, 3) : 0;
}
function monstersReminisced() {
  return parseLocketProperty().map(function(id) {
    return (0, import_kolmafia32.toMonster)(id);
  });
}
function reminisce(monster) {
  if (!have21() || reminiscesLeft() === 0 || !(0, import_kolmafia32.getLocketMonsters)()[monster.name]) {
    return false;
  }
  (0, import_kolmafia32.cliExecute)("reminisce ".concat(monster));
  (0, import_kolmafia32.runCombat)();
  return monstersReminisced().includes(monster);
}
function findMonster(criteria) {
  var value = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : function() {
    return 1;
  };
  if (!have21() || reminiscesLeft() === 0)
    return null;
  var options = availableLocketMonsters().filter(criteria);
  if (!options.length)
    return null;
  return options.reduce(function(a, b) {
    return value(a) > value(b) ? a : b;
  });
}

// node_modules/libram/dist/resources/2022/JuneCleaver.js
var JuneCleaver_exports = {};
__export(JuneCleaver_exports, {
  choices: function() {
    return choices;
  },
  choicesAvailable: function() {
    return choicesAvailable;
  },
  cleaver: function() {
    return cleaver;
  },
  damage: function() {
    return damage;
  },
  getInterval: function() {
    return getInterval;
  },
  getSkippedInterval: function() {
    return getSkippedInterval;
  },
  have: function() {
    return have22;
  },
  queue: function() {
    return queue;
  },
  skipsRemaining: function() {
    return skipsRemaining;
  }
});
var import_kolmafia33 = require("kolmafia");
var cleaver = (0, import_kolmafia33.toItem)("June cleaver");
function have22() {
  return (0, import_kolmafia33.availableAmount)(cleaver) > 0;
}
function getInterval() {
  var _encounters;
  var encounters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : get("_juneCleaverEncounters");
  return (_encounters = [1, 6, 10, 12, 15, 20][encounters]) !== null && _encounters !== void 0 ? _encounters : 30;
}
function getSkippedInterval() {
  var _encounters2;
  var encounters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : get("_juneCleaverEncounters");
  return (_encounters2 = [1, 2, 3, 3, 4, 5][encounters]) !== null && _encounters2 !== void 0 ? _encounters2 : 8;
}
function damage(element) {
  return get("_juneCleaver".concat(element));
}
function skipsRemaining() {
  return 5 - get("_juneCleaverSkips");
}
var choices = [1467, 1468, 1469, 1470, 1471, 1472, 1473, 1474, 1475];
function queue() {
  return get("juneCleaverQueue").split(",").filter(function(x) {
    return x.trim().length > 0;
  }).map(function(x) {
    return parseInt(x);
  });
}
function choicesAvailable() {
  var currentQueue = queue();
  return choices.filter(function(choice) {
    return !currentQueue.includes(choice);
  });
}

// node_modules/libram/dist/resources/2022/TrainSet.js
var TrainSet_exports = {};
__export(TrainSet_exports, {
  Station: function() {
    return Station;
  },
  canConfigure: function() {
    return canConfigure;
  },
  cycle: function() {
    return cycle;
  },
  doubledEffect: function() {
    return doubledEffect;
  },
  effect: function() {
    return effect;
  },
  have: function() {
    return have23;
  },
  installed: function() {
    return installed4;
  },
  next: function() {
    return next;
  },
  nextConfigurable: function() {
    return nextConfigurable;
  },
  setConfiguration: function() {
    return setConfiguration;
  }
});
var import_kolmafia34 = require("kolmafia");
var _templateObject151;
function _taggedTemplateLiteral22(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item6 = $item(_templateObject151 || (_templateObject151 = _taggedTemplateLiteral22(["model train set"])));
function installed4() {
  return (0, import_kolmafia34.getWorkshed)() === item6;
}
function have23() {
  return installed4() || have(item6);
}
var Station;
(function(Station2) {
  Station2["UNKNOWN"] = "";
  Station2["EMPTY"] = "empty";
  Station2["GAIN_MEAT"] = "meat_mine";
  Station2["TOWER_FIZZY"] = "tower_fizzy";
  Station2["VIEWING_PLATFORM"] = "viewing_platform";
  Station2["TOWER_FROZEN"] = "tower_frozen";
  Station2["SPOOKY_GRAVEYARD"] = "spooky_graveyard";
  Station2["LOGGING_MILL"] = "logging_mill";
  Station2["CANDY_FACTORY"] = "candy_factory";
  Station2["COAL_HOPPER"] = "coal_hopper";
  Station2["TOWER_SEWAGE"] = "tower_sewage";
  Station2["OIL_REFINERY"] = "oil_refinery";
  Station2["OIL_BRIDGE"] = "oil_bridge";
  Station2["WATER_BRIDGE"] = "water_bridge";
  Station2["GROIN_SILO"] = "groin_silo";
  Station2["GRAIN_SILO"] = "grain_silo";
  Station2["BRAIN_SILO"] = "brain_silo";
  Station2["BRAWN_SILO"] = "brawn_silo";
  Station2["PRAWN_SILO"] = "prawn_silo";
  Station2["TRACKSIDE_DINER"] = "trackside_diner";
  Station2["ORE_HOPPER"] = "ore_hopper";
})(Station || (Station = {}));
var trainsetEffects = /* @__PURE__ */ new Map([[Station.TOWER_FIZZY, import_kolmafia34.Effect.get("Carbonated")], [Station.TOWER_FROZEN, import_kolmafia34.Effect.get("Frozen")], [Station.SPOOKY_GRAVEYARD, import_kolmafia34.Effect.get("Shivering Spine")], [Station.TOWER_SEWAGE, import_kolmafia34.Effect.get("Hot Soupy Garbage")], [Station.OIL_BRIDGE, import_kolmafia34.Effect.get("Burningly Oiled")], [Station.OIL_REFINERY, import_kolmafia34.Effect.get("Spookily Greasy")], [Station.WATER_BRIDGE, import_kolmafia34.Effect.get("Troubled Waters")], [Station.PRAWN_SILO, import_kolmafia34.Effect.get("Craving Prawns")]]);
var trainsetEffectsDoubled = /* @__PURE__ */ new Map([[Station.TOWER_FIZZY, import_kolmafia34.Effect.get("Double Carbonated")], [Station.TOWER_FROZEN, import_kolmafia34.Effect.get("Double Frozen")], [Station.SPOOKY_GRAVEYARD, import_kolmafia34.Effect.get("Doubly Shivering Spine")], [Station.TOWER_SEWAGE, import_kolmafia34.Effect.get("Double Hot Soupy Garbage")], [Station.OIL_BRIDGE, import_kolmafia34.Effect.get("Doubly Burningly Oiled")], [Station.OIL_REFINERY, import_kolmafia34.Effect.get("Doubly Spookily Greasy")], [Station.WATER_BRIDGE, import_kolmafia34.Effect.get("Doubly Troubled Waters")], [Station.PRAWN_SILO, import_kolmafia34.Effect.get("Doubly Craving Prawns")]]);
function effect(station) {
  var _trainsetEffects$get;
  return (_trainsetEffects$get = trainsetEffects.get(station)) !== null && _trainsetEffects$get !== void 0 ? _trainsetEffects$get : null;
}
function doubledEffect(station) {
  var _trainsetEffectsDoubl;
  return (_trainsetEffectsDoubl = trainsetEffectsDoubled.get(station)) !== null && _trainsetEffectsDoubl !== void 0 ? _trainsetEffectsDoubl : null;
}
function cycle() {
  return get("trainsetConfiguration").split(",");
}
function nextConfigurable() {
  return clamp(get("lastTrainsetConfiguration") + 40 - get("trainsetPosition"), 0, 40);
}
function canConfigure() {
  return installed4() && !nextConfigurable();
}
var pieces2 = [Station.EMPTY, Station.GAIN_MEAT, Station.TOWER_FIZZY, Station.VIEWING_PLATFORM, Station.TOWER_FROZEN, Station.SPOOKY_GRAVEYARD, Station.LOGGING_MILL, Station.CANDY_FACTORY, Station.COAL_HOPPER, Station.TOWER_SEWAGE, Station.UNKNOWN, Station.OIL_REFINERY, Station.OIL_BRIDGE, Station.WATER_BRIDGE, Station.GROIN_SILO, Station.GRAIN_SILO, Station.BRAIN_SILO, Station.BRAWN_SILO, Station.PRAWN_SILO, Station.TRACKSIDE_DINER, Station.ORE_HOPPER];
function stationToInt(station) {
  return pieces2.indexOf(station);
}
function setConfiguration(configuration) {
  if (!canConfigure())
    return false;
  (0, import_kolmafia34.visitUrl)("campground.php?action=workshed");
  (0, import_kolmafia34.runChoice)(1, "forceoption=0".concat(configuration.map(function(station, index) {
    return "&slot[".concat(index, "]=").concat(stationToInt(station));
  }).join("")));
  (0, import_kolmafia34.visitUrl)("main.php");
  var currentConfiguration = cycle();
  return configuration.every(function(station, index) {
    return station === currentConfiguration[index];
  });
}
function next() {
  return cycle()[get("trainsetPosition") % 8];
}

// node_modules/libram/dist/resources/2023/AugustScepter.js
var AugustScepter_exports = {};
__export(AugustScepter_exports, {
  SKILLS: function() {
    return SKILLS;
  },
  getAugustCast: function() {
    return getAugustCast;
  },
  getTodayCast: function() {
    return getTodayCast;
  },
  have: function() {
    return have24;
  },
  todaysSkill: function() {
    return todaysSkill;
  }
});
var import_kolmafia35 = require("kolmafia");
var _templateObject160;
var _templateObject249;
function _taggedTemplateLiteral23(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function have24() {
  return have($item(_templateObject160 || (_templateObject160 = _taggedTemplateLiteral23(["august scepter"]))));
}
var SKILLS = Object.freeze($skills(_templateObject249 || (_templateObject249 = _taggedTemplateLiteral23(["Aug. 1st: Mountain Climbing Day!, Aug. 2nd: Find an Eleven-Leaf Clover Day, Aug. 3rd: Watermelon Day!, Aug. 4th: Water Balloon Day!, Aug. 5th: Oyster Day!, Aug. 6th: Fresh Breath Day!, Aug. 7th: Lighthouse Day!, Aug. 8th: Cat Day!, Aug. 9th: Hand Holding Day!, Aug. 10th: World Lion Day!, Aug. 11th: Presidential Joke Day!, Aug. 12th: Elephant Day!, Aug. 13th: Left/Off Hander's Day!, Aug. 14th: Financial Awareness  Day!, Aug. 15th: Relaxation Day!, Aug. 16th: Roller Coaster Day!, Aug. 17th: Thriftshop Day!, Aug. 18th: Serendipity Day!, Aug. 19th: Honey Bee Awareness Day!, Aug. 20th: Mosquito Day!, Aug. 21st: Spumoni Day!, Aug. 22nd: Tooth Fairy Day!, Aug. 23rd: Ride the Wind Day!, Aug. 24th: Waffle Day!, Aug. 25th: Banana Split Day!, Aug. 26th: Toilet Paper Day!, Aug. 27th: Just Because Day!, Aug. 28th: Race Your Mouse Day!, Aug. 29th: More Herbs, Less Salt  Day!, Aug. 30th: Beach Day!, Aug. 31st: Cabernet Sauvignon  Day!"], ["Aug. 1st: Mountain Climbing Day!, Aug. 2nd: Find an Eleven-Leaf Clover Day, Aug. 3rd: Watermelon Day!, Aug. 4th: Water Balloon Day!, Aug. 5th: Oyster Day!, Aug. 6th: Fresh Breath Day!, Aug. 7th: Lighthouse Day!, Aug. 8th: Cat Day!, Aug. 9th: Hand Holding Day!, Aug. 10th: World Lion Day!, Aug. 11th: Presidential Joke Day!, Aug. 12th: Elephant Day!, Aug. 13th: Left/Off Hander's Day!, Aug. 14th: Financial Awareness  Day!, Aug. 15th: Relaxation Day!, Aug. 16th: Roller Coaster Day!, Aug. 17th: Thriftshop Day!, Aug. 18th: Serendipity Day!, Aug. 19th: Honey Bee Awareness Day!, Aug. 20th: Mosquito Day!, Aug. 21st: Spumoni Day!, Aug. 22nd: Tooth Fairy Day!, Aug. 23rd: Ride the Wind Day!, Aug. 24th: Waffle Day!, Aug. 25th: Banana Split Day!, Aug. 26th: Toilet Paper Day!, Aug. 27th: Just Because Day!, Aug. 28th: Race Your Mouse Day!, Aug. 29th: More Herbs\\, Less Salt  Day!, Aug. 30th: Beach Day!, Aug. 31st: Cabernet Sauvignon  Day!"]))));
var today = function() {
  return Number((0, import_kolmafia35.todayToString)()) % 100;
};
function todaysSkill() {
  return (0, import_kolmafia35.toSkill)((today() + 7451).toFixed(0));
}
function getAugustCast(skillNum) {
  return get("_aug".concat(skillNum, "Cast"));
}
function getTodayCast() {
  return get("_augTodayCast");
}

// node_modules/libram/dist/resources/2023/CinchoDeMayo.js
var CinchoDeMayo_exports = {};
__export(CinchoDeMayo_exports, {
  cinchRestoredBy: function() {
    return cinchRestoredBy;
  },
  currentCinch: function() {
    return currentCinch;
  },
  have: function() {
    return have25;
  },
  skills: function() {
    return skills;
  },
  totalAvailableCinch: function() {
    return totalAvailableCinch;
  }
});
var import_kolmafia36 = require("kolmafia");
var _templateObject161;
var _templateObject250;
var _templateObject337;
var _templateObject429;
var _templateObject525;
var _templateObject620;
var _templateObject719;
function _taggedTemplateLiteral24(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var cincho = $item(_templateObject161 || (_templateObject161 = _taggedTemplateLiteral24(["Cincho de Mayo"])));
function have25() {
  return have(cincho);
}
function currentCinch() {
  return have25() ? clamp(100 - get("_cinchUsed"), 0, 100) : 0;
}
function cinchRestoredBy() {
  var currentRests = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : get("_cinchoRests");
  return have25() ? clamp(50 - currentRests * 5, 5, 30) : 0;
}
function totalAvailableCinch() {
  var remainingRests = Math.max(0, (0, import_kolmafia36.totalFreeRests)() - get("timesRested"));
  return have25() ? currentCinch() + sum(new Array(remainingRests).fill(null).map(function(_, i) {
    return i + get("_cinchoRests");
  }), function(restNumber) {
    return cinchRestoredBy(restNumber);
  }) : 0;
}
var skills = {
  SaltAndLime: $skill(_templateObject250 || (_templateObject250 = _taggedTemplateLiteral24(["Cincho: Dispense Salt and Lime"]))),
  PartySoundtrack: $skill(_templateObject337 || (_templateObject337 = _taggedTemplateLiteral24(["Cincho: Party Soundtrack"]))),
  FiestaExit: $skill(_templateObject429 || (_templateObject429 = _taggedTemplateLiteral24(["Cincho: Fiesta Exit"]))),
  ProjectilePi\u00F1ata: $skill(_templateObject525 || (_templateObject525 = _taggedTemplateLiteral24(["Cincho: Projectile Pi\xF1ata"]))),
  PartyFoul: $skill(_templateObject620 || (_templateObject620 = _taggedTemplateLiteral24(["Cincho: Party Foul"]))),
  ConfettiExtrava: $skill(_templateObject719 || (_templateObject719 = _taggedTemplateLiteral24(["Cincho: Confetti Extravaganza"])))
};

// node_modules/libram/dist/resources/2023/ClosedCircuitPayphone.js
var ClosedCircuitPayphone_exports = {};
__export(ClosedCircuitPayphone_exports, {
  byIngress: function() {
    return byIngress;
  },
  chooseQuest: function() {
    return chooseQuest;
  },
  chooseRift: function() {
    return chooseRift;
  },
  currentIngress: function() {
    return currentIngress;
  },
  currentRift: function() {
    return currentRift;
  },
  have: function() {
    return have26;
  },
  rifts: function() {
    return rifts;
  },
  rufusTarget: function() {
    return rufusTarget;
  },
  submitQuest: function() {
    return submitQuest;
  }
});
var import_kolmafia37 = require("kolmafia");
var _templateObject170;
var _templateObject251;
var _templateObject338;
var _templateObject430;
var _templateObject526;
var _templateObject621;
var _templateObject720;
var _templateObject819;
var _templateObject918;
var _templateObject1015;
var _templateObject1113;
var _templateObject1212;
var _templateObject1312;
var _templateObject1410;
function _taggedTemplateLiteral25(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item7 = $item(_templateObject170 || (_templateObject170 = _taggedTemplateLiteral25(["closed-circuit pay phone"])));
function have26() {
  return have(item7);
}
function rufusTarget() {
  var target = get("rufusQuestTarget");
  switch (get("rufusQuestType")) {
    case "entity":
      return import_kolmafia37.Monster.get(target);
    case "artifact":
    case "items":
      return import_kolmafia37.Item.get(target);
    default:
      return null;
  }
}
var INGRESS_RIFTS = {
  desertbeach: $location(_templateObject251 || (_templateObject251 = _taggedTemplateLiteral25(["Shadow Rift (Desert Beach)"]))),
  forestvillage: $location(_templateObject338 || (_templateObject338 = _taggedTemplateLiteral25(["Shadow Rift (Forest Village)"]))),
  mclargehuge: $location(_templateObject430 || (_templateObject430 = _taggedTemplateLiteral25(["Shadow Rift (Mt. McLargeHuge)"]))),
  beanstalk: $location(_templateObject526 || (_templateObject526 = _taggedTemplateLiteral25(["Shadow Rift (Somewhere Over the Beanstalk)"]))),
  manor3: $location(_templateObject621 || (_templateObject621 = _taggedTemplateLiteral25(["Shadow Rift (Spookyraven Manor Third Floor)"]))),
  "8bit": $location(_templateObject720 || (_templateObject720 = _taggedTemplateLiteral25(["Shadow Rift (The 8-Bit Realm)"]))),
  pyramid: $location(_templateObject819 || (_templateObject819 = _taggedTemplateLiteral25(["Shadow Rift (The Ancient Buried Pyramid)"]))),
  giantcastle: $location(_templateObject918 || (_templateObject918 = _taggedTemplateLiteral25(["Shadow Rift (The Castle in the Clouds in the Sky)"]))),
  woods: $location(_templateObject1015 || (_templateObject1015 = _taggedTemplateLiteral25(["Shadow Rift (The Distant Woods)"]))),
  hiddencity: $location(_templateObject1113 || (_templateObject1113 = _taggedTemplateLiteral25(["Shadow Rift (The Hidden City)"]))),
  cemetery: $location(_templateObject1212 || (_templateObject1212 = _taggedTemplateLiteral25(["Shadow Rift (The Misspelled Cemetary)"]))),
  plains: $location(_templateObject1312 || (_templateObject1312 = _taggedTemplateLiteral25(["Shadow Rift (The Nearby Plains)"]))),
  town_right: $location(_templateObject1410 || (_templateObject1410 = _taggedTemplateLiteral25(["Shadow Rift (The Right Side of the Tracks)"])))
};
function currentIngress() {
  return get("shadowRiftIngress");
}
function currentRift() {
  var ingress = currentIngress();
  return ingress ? INGRESS_RIFTS[ingress] : null;
}
var RIFTS = Array.from(Object.values(INGRESS_RIFTS));
function chooseRift(options) {
  var filterFunction = function(l) {
    var _options$monsters, _options$drops, _options$otherFilter, _options$otherFilter2;
    var monsters = (0, import_kolmafia37.getMonsters)(l);
    if (options.canAdventure && !(0, import_kolmafia37.canAdventure)(l))
      return false;
    if ((_options$monsters = options.monsters) !== null && _options$monsters !== void 0 && _options$monsters.some(function(m) {
      return !monsters.includes(m);
    }))
      return false;
    if ((_options$drops = options.drops) !== null && _options$drops !== void 0 && _options$drops.every(function(i) {
      return !monsters.some(function(m) {
        return i.name in (0, import_kolmafia37.itemDrops)(m);
      });
    }))
      return false;
    return (_options$otherFilter = (_options$otherFilter2 = options.otherFilter) === null || _options$otherFilter2 === void 0 ? void 0 : _options$otherFilter2.call(options, l)) !== null && _options$otherFilter !== void 0 ? _options$otherFilter : true;
  };
  var validRifts = [].concat(RIFTS).filter(filterFunction);
  if (!validRifts.length)
    return null;
  return options.sortBy ? maxBy(validRifts, options.sortBy) : validRifts[0];
}
function chooseQuest(chooser) {
  if (get("questRufus") !== "unstarted")
    return false;
  if (!have26())
    return false;
  withChoice(1497, "", function() {
    var _get3;
    directlyUse(item7);
    (0, import_kolmafia37.runChoice)(chooser({
      artifact: (0, import_kolmafia37.toItem)(get("rufusDesiredArtifact")),
      entity: (_get3 = get("rufusDesiredEntity")) !== null && _get3 !== void 0 ? _get3 : $monster.none,
      items: (0, import_kolmafia37.toItem)(get("rufusDesiredItems"))
    }));
  });
  return get("questRufus") !== "unstarted";
}
function rifts() {
  return [].concat(RIFTS);
}
var byIngress = makeByXFunction(currentIngress);
function submitQuest() {
  if (questStep("questRufus") === 1) {
    withChoice(1498, 1, function() {
      return (0, import_kolmafia37.use)(item7);
    });
    return questStep("questRufus") === -1;
  }
  return false;
}

// node_modules/libram/dist/resources/2023/CursedMonkeyPaw.js
var CursedMonkeyPaw_exports = {};
__export(CursedMonkeyPaw_exports, {
  getUnwishableEffects: function() {
    return getUnwishableEffects;
  },
  have: function() {
    return have27;
  },
  isWishable: function() {
    return isWishable;
  },
  wishFor: function() {
    return wishFor;
  },
  wishableItems: function() {
    return wishableItems;
  },
  wishes: function() {
    return wishes;
  }
});
var import_kolmafia38 = require("kolmafia");
var _templateObject171;
function _taggedTemplateLiteral26(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var item8 = $item(_templateObject171 || (_templateObject171 = _taggedTemplateLiteral26(["cursed monkey's paw"])));
function have27() {
  return have(item8);
}
function wishes() {
  return clamp(5 - get("_monkeyPawWishesUsed"), 0, 5);
}
function wishableItems() {
  var filters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return new Set(flat(import_kolmafia38.Location.all().filter(function(l) {
    var _filters$location, _filters$location2;
    return (0, import_kolmafia38.canAdventure)(l) && ((_filters$location = (_filters$location2 = filters.location) === null || _filters$location2 === void 0 ? void 0 : _filters$location2.call(filters, l)) !== null && _filters$location !== void 0 ? _filters$location : true);
  }).map(function(l) {
    return (0, import_kolmafia38.getMonsters)(l).filter(function(m) {
      var _filters$monster, _filters$monster2;
      return m.copyable && ((_filters$monster = (_filters$monster2 = filters.monster) === null || _filters$monster2 === void 0 ? void 0 : _filters$monster2.call(filters, m)) !== null && _filters$monster !== void 0 ? _filters$monster : true);
    }).map(function(m) {
      return (0, import_kolmafia38.itemDropsArray)(m).filter(function(_ref) {
        var _filters$drop, _filters$drop2;
        var type = _ref.type, rate = _ref.rate, drop = _ref.drop;
        return !drop.quest && (type !== "c" || rate >= 1) && // Remove random roll drops
        ((_filters$drop = (_filters$drop2 = filters.drop) === null || _filters$drop2 === void 0 ? void 0 : _filters$drop2.call(filters, {
          type: type,
          rate: rate,
          drop: drop
        })) !== null && _filters$drop !== void 0 ? _filters$drop : true);
      }).map(function(_ref2) {
        var drop = _ref2.drop;
        return drop;
      });
    });
  })));
}
var INVALID_CHARACTERS = /[^a-z\d -]/g;
var _unwishableEffects;
function unwishableEffects() {
  var names = import_kolmafia38.Effect.all().filter(function(e) {
    return !e.attributes.includes("nohookah");
  }).map(function(e) {
    var name = e.name.toLowerCase();
    return {
      name: name,
      splitName: name.split(INVALID_CHARACTERS)
    };
  });
  return names.filter(function(_ref3) {
    var name = _ref3.name, splitName = _ref3.splitName;
    return (
      // Any effect that doesn't contain an INVALID_CHARACTER is fine
      splitName.length > 1 && // To be unwishable, there can't be any substrings that uniquely match a genie-wishable effect
      splitName.every(function(s) {
        return (
          // So we check every maximal substring against every one of our genie-wishable effects, excluding the effect we're currently looking at
          // if one of the substrings matches a substring associated with another effect, we're screwed.
          names.some(function(_ref4) {
            var n = _ref4.name;
            return n !== name && n.includes(s);
          })
        );
      })
    );
  }).map(function(_ref5) {
    var name = _ref5.name;
    return (0, import_kolmafia38.toEffect)(name);
  });
}
function getUnwishableEffects() {
  var _unwishableEffects2;
  return (_unwishableEffects2 = _unwishableEffects) !== null && _unwishableEffects2 !== void 0 ? _unwishableEffects2 : _unwishableEffects = unwishableEffects();
}
function isWishable(wish) {
  if (wish instanceof import_kolmafia38.Item) {
    return wishableItems().has(wish);
  } else {
    if (wish.attributes.includes("nohookah"))
      return false;
    if (!wish.name.match(/[.,']/))
      return true;
    return !getUnwishableEffects().includes(wish);
  }
}
function wishFor(wish) {
  if (wishes() <= 0)
    return false;
  if (wish instanceof import_kolmafia38.Effect)
    return (0, import_kolmafia38.monkeyPaw)(wish);
  var locations = import_kolmafia38.Location.all().filter(function(l) {
    return (0, import_kolmafia38.canAdventure)(l) && (0, import_kolmafia38.getMonsters)(l).some(function(m) {
      return m.copyable && (0, import_kolmafia38.itemDropsArray)(m).some(function(_ref6) {
        var drop = _ref6.drop;
        return drop === wish;
      });
    });
  });
  try {
    if (locations.length) {
      (0, import_kolmafia38.cliExecute)("checkpoint");
      (0, import_kolmafia38.prepareForAdventure)(locations[0]);
    }
    var result = (0, import_kolmafia38.monkeyPaw)(wish);
    if (!result) {
      logger_default.debug("Failed to monkeyPaw wish for ".concat(wish, "; assumed it was available in locations ").concat(locations.join(", ")));
    }
    return result;
  } finally {
    if (locations.length)
      (0, import_kolmafia38.cliExecute)("outfit checkpoint");
  }
}

// node_modules/libram/dist/resources/2007/CandyHearts.js
var _templateObject180;
var _templateObject259;
var _templateObject339;
var _templateObject431;
var _templateObject527;
var _templateObject625;
var _templateObject721;
function _taggedTemplateLiteral27(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill = $skill(_templateObject180 || (_templateObject180 = _taggedTemplateLiteral27(["Summon Candy Heart"])));
var libramChance = 1 / 6;
var libramExpected = /* @__PURE__ */ new Map([[$item(_templateObject259 || (_templateObject259 = _taggedTemplateLiteral27(["green candy heart"]))), libramChance], [$item(_templateObject339 || (_templateObject339 = _taggedTemplateLiteral27(["lavender candy heart"]))), libramChance], [$item(_templateObject431 || (_templateObject431 = _taggedTemplateLiteral27(["orange candy heart"]))), libramChance], [$item(_templateObject527 || (_templateObject527 = _taggedTemplateLiteral27(["pink candy heart"]))), libramChance], [$item(_templateObject625 || (_templateObject625 = _taggedTemplateLiteral27(["white candy heart"]))), libramChance], [$item(_templateObject721 || (_templateObject721 = _taggedTemplateLiteral27(["yellow candy heart"]))), libramChance]]);
function have28() {
  return have(summonSkill);
}
function expected() {
  return libramExpected;
}

// node_modules/libram/dist/resources/2008/DivineFavors.js
var _templateObject181;
var _templateObject260;
var _templateObject340;
var _templateObject435;
var _templateObject528;
var _templateObject626;
var _templateObject724;
function _taggedTemplateLiteral28(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill2 = $skill(_templateObject181 || (_templateObject181 = _taggedTemplateLiteral28(["Summon Party Favor"])));
function have29() {
  return have(summonSkill2);
}
function expected2() {
  var rareSummons = get("_favorRareSummons");
  var totalRareChance = 1 / Math.pow(2, rareSummons + 1);
  var commonChance2 = (1 - totalRareChance) / 3;
  var rareChance2 = totalRareChance / 3;
  return /* @__PURE__ */ new Map([[$item(_templateObject260 || (_templateObject260 = _taggedTemplateLiteral28(["divine blowout"]))), commonChance2], [$item(_templateObject340 || (_templateObject340 = _taggedTemplateLiteral28(["divine can of silly string"]))), commonChance2], [$item(_templateObject435 || (_templateObject435 = _taggedTemplateLiteral28(["divine noisemaker"]))), commonChance2], [$item(_templateObject528 || (_templateObject528 = _taggedTemplateLiteral28(["divine champagne flute"]))), rareChance2], [$item(_templateObject626 || (_templateObject626 = _taggedTemplateLiteral28(["divine champagne popper"]))), rareChance2], [$item(_templateObject724 || (_templateObject724 = _taggedTemplateLiteral28(["divine cracker"]))), rareChance2]]);
}

// node_modules/libram/dist/resources/2009/LoveSongs.js
var _templateObject190;
var _templateObject261;
var _templateObject341;
var _templateObject436;
var _templateObject529;
var _templateObject627;
var _templateObject725;
function _taggedTemplateLiteral29(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill3 = $skill(_templateObject190 || (_templateObject190 = _taggedTemplateLiteral29(["Summon Love Song"])));
var libramChance2 = 1 / 6;
var libramExpected2 = /* @__PURE__ */ new Map([[$item(_templateObject261 || (_templateObject261 = _taggedTemplateLiteral29(["love song of disturbing obsession"]))), libramChance2], [$item(_templateObject341 || (_templateObject341 = _taggedTemplateLiteral29(["love song of icy revenge"]))), libramChance2], [$item(_templateObject436 || (_templateObject436 = _taggedTemplateLiteral29(["love song of naughty innuendo"]))), libramChance2], [$item(_templateObject529 || (_templateObject529 = _taggedTemplateLiteral29(["love song of smoldering passion"]))), libramChance2], [$item(_templateObject627 || (_templateObject627 = _taggedTemplateLiteral29(["love song of sugary cuteness"]))), libramChance2], [$item(_templateObject725 || (_templateObject725 = _taggedTemplateLiteral29(["love song of vague ambiguity"]))), libramChance2]]);
function have30() {
  return have(summonSkill3);
}
function expected3() {
  return libramExpected2;
}

// node_modules/libram/dist/resources/2010/Brickos.js
var _templateObject191;
var _templateObject269;
var _templateObject347;
function _taggedTemplateLiteral30(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill4 = $skill(_templateObject191 || (_templateObject191 = _taggedTemplateLiteral30(["Summon BRICKOs"])));
function have31() {
  return have(summonSkill4);
}
function expected4() {
  var eyeSummons = get("_brickoEyeSummons");
  var eyeChance = eyeSummons === 3 ? 0 : eyeSummons === 0 ? 0.5 : 1 / 3;
  return /* @__PURE__ */ new Map([[$item(_templateObject269 || (_templateObject269 = _taggedTemplateLiteral30(["BRICKO eye brick"]))), eyeChance], [$item(_templateObject347 || (_templateObject347 = _taggedTemplateLiteral30(["BRICKO brick"]))), 3 - eyeChance]]);
}

// node_modules/libram/dist/resources/2011/Gygaxian.js
var _templateObject200;
var _templateObject270;
var _templateObject348;
var _templateObject437;
var _templateObject530;
var _templateObject628;
var _templateObject726;
function _taggedTemplateLiteral31(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill5 = $skill(_templateObject200 || (_templateObject200 = _taggedTemplateLiteral31(["Summon Dice"])));
var libramChance3 = 1 / 6;
var libramExpected3 = /* @__PURE__ */ new Map([[$item(_templateObject270 || (_templateObject270 = _taggedTemplateLiteral31(["d4"]))), libramChance3], [$item(_templateObject348 || (_templateObject348 = _taggedTemplateLiteral31(["d6"]))), libramChance3], [$item(_templateObject437 || (_templateObject437 = _taggedTemplateLiteral31(["d8"]))), libramChance3], [$item(_templateObject530 || (_templateObject530 = _taggedTemplateLiteral31(["d10"]))), libramChance3], [$item(_templateObject628 || (_templateObject628 = _taggedTemplateLiteral31(["d12"]))), libramChance3], [$item(_templateObject726 || (_templateObject726 = _taggedTemplateLiteral31(["d20"]))), libramChance3]]);
function have32() {
  return have(summonSkill5);
}
function expected5() {
  return libramExpected3;
}

// node_modules/libram/dist/resources/2012/Resolutions.js
var _templateObject201;
var _templateObject271;
var _templateObject349;
var _templateObject438;
var _templateObject531;
var _templateObject629;
var _templateObject727;
var _templateObject820;
var _templateObject919;
var _templateObject1016;
function _taggedTemplateLiteral32(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill6 = $skill(_templateObject201 || (_templateObject201 = _taggedTemplateLiteral32(["Summon Resolutions"])));
var commonChance = 0.98 / 6;
var rareChance = 0.02 / 3;
var libramExpected4 = /* @__PURE__ */ new Map([[$item(_templateObject271 || (_templateObject271 = _taggedTemplateLiteral32(["resolution: be feistier"]))), commonChance], [$item(_templateObject349 || (_templateObject349 = _taggedTemplateLiteral32(["resolution: be happier"]))), commonChance], [$item(_templateObject438 || (_templateObject438 = _taggedTemplateLiteral32(["resolution: be sexier"]))), commonChance], [$item(_templateObject531 || (_templateObject531 = _taggedTemplateLiteral32(["resolution: be smarter"]))), commonChance], [$item(_templateObject629 || (_templateObject629 = _taggedTemplateLiteral32(["resolution: be stronger"]))), commonChance], [$item(_templateObject727 || (_templateObject727 = _taggedTemplateLiteral32(["resolution: be wealthier"]))), commonChance], [$item(_templateObject820 || (_templateObject820 = _taggedTemplateLiteral32(["resolution: be kinder"]))), rareChance], [$item(_templateObject919 || (_templateObject919 = _taggedTemplateLiteral32(["resolution: be luckier"]))), rareChance], [$item(_templateObject1016 || (_templateObject1016 = _taggedTemplateLiteral32(["resolution: be more adventurous"]))), rareChance]]);
function have33() {
  return have(summonSkill6);
}
function expected6() {
  return libramExpected4;
}

// node_modules/libram/dist/resources/2013/PulledTaffy.js
var _templateObject279;
var _templateObject280;
var _templateObject350;
var _templateObject439;
var _templateObject535;
var _templateObject630;
var _templateObject728;
var _templateObject821;
function _taggedTemplateLiteral33(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var summonSkill7 = $skill(_templateObject279 || (_templateObject279 = _taggedTemplateLiteral33(["Summon Taffy"])));
function have34() {
  return have(summonSkill7);
}
function expected7() {
  var rareSummons = get("_taffyRareSummons");
  var yellowSummons = get("_taffyYellowSummons");
  var onlyYellow = yellowSummons === 0 && rareSummons === 3;
  var totalRareChance = rareSummons < 4 ? 1 / Math.pow(2, rareSummons + 1) : 0;
  var commonChance2 = (1 - totalRareChance) / 4;
  var rareChance2 = onlyYellow ? 0 : totalRareChance / (3 - get("_taffyYellowSummons"));
  var yellowChance = yellowSummons === 1 ? 0 : onlyYellow ? totalRareChance : rareChance2;
  return /* @__PURE__ */ new Map([[$item(_templateObject280 || (_templateObject280 = _taggedTemplateLiteral33(["pulled blue taffy"]))), commonChance2], [$item(_templateObject350 || (_templateObject350 = _taggedTemplateLiteral33(["pulled orange taffy"]))), commonChance2], [$item(_templateObject439 || (_templateObject439 = _taggedTemplateLiteral33(["pulled violet taffy"]))), commonChance2], [$item(_templateObject535 || (_templateObject535 = _taggedTemplateLiteral33(["pulled red taffy"]))), commonChance2], [$item(_templateObject630 || (_templateObject630 = _taggedTemplateLiteral33(["pulled indigo taffy"]))), rareChance2], [$item(_templateObject728 || (_templateObject728 = _taggedTemplateLiteral33(["pulled green taffy"]))), rareChance2], [$item(_templateObject821 || (_templateObject821 = _taggedTemplateLiteral33(["pulled yellow taffy"]))), yellowChance]]);
}

// node_modules/libram/dist/resources/LibramSummon.js
var _templateObject824;
var _templateObject920;
var _templateObject1017;
var _templateObject1114;
var _templateObject1213;
var _templateObject1313;
var _templateObject1411;
function _slicedToArray11(arr, i) {
  return _arrayWithHoles11(arr) || _iterableToArrayLimit11(arr, i) || _unsupportedIterableToArray19(arr, i) || _nonIterableRest11();
}
function _nonIterableRest11() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray19(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray19(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray19(o, minLen);
}
function _arrayLikeToArray19(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit11(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles11(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral34(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function possibleLibramSummons() {
  var results = /* @__PURE__ */ new Map();
  if (have28()) {
    results.set($skill(_templateObject824 || (_templateObject824 = _taggedTemplateLiteral34(["Summon Candy Heart"]))), expected());
  }
  if (have29()) {
    results.set($skill(_templateObject920 || (_templateObject920 = _taggedTemplateLiteral34(["Summon Party Favor"]))), expected2());
  }
  if (have30()) {
    results.set($skill(_templateObject1017 || (_templateObject1017 = _taggedTemplateLiteral34(["Summon Love Song"]))), expected3());
  }
  if (have31()) {
    results.set($skill(_templateObject1114 || (_templateObject1114 = _taggedTemplateLiteral34(["Summon BRICKOs"]))), expected4());
  }
  if (have32()) {
    results.set($skill(_templateObject1213 || (_templateObject1213 = _taggedTemplateLiteral34(["Summon Dice"]))), expected5());
  }
  if (have33()) {
    results.set($skill(_templateObject1313 || (_templateObject1313 = _taggedTemplateLiteral34(["Summon Resolutions"]))), expected6());
  }
  if (have34()) {
    results.set($skill(_templateObject1411 || (_templateObject1411 = _taggedTemplateLiteral34(["Summon Taffy"]))), expected7());
  }
  return results;
}
function bestLibramToCast() {
  var arr = Array.from(possibleLibramSummons().entries());
  if (!arr.length)
    return null;
  return maxBy(arr, function(_ref) {
    var _ref2 = _slicedToArray11(_ref, 2), itemMap = _ref2[1];
    return sum(Array.from(itemMap.entries()), function(_ref3) {
      var _ref4 = _slicedToArray11(_ref3, 2), item9 = _ref4[0], weight = _ref4[1];
      return weight * getSaleValue(item9);
    });
  })[0];
}

// node_modules/libram/dist/Clan.js
var import_html_entities = __toESM(require_lib());
var import_kolmafia39 = require("kolmafia");
function _toConsumableArray10(arr) {
  return _arrayWithoutHoles10(arr) || _iterableToArray10(arr) || _unsupportedIterableToArray20(arr) || _nonIterableSpread10();
}
function _nonIterableSpread10() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray10(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles10(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray20(arr);
}
function _createForOfIteratorHelper7(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray20(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray12(arr, i) {
  return _arrayWithHoles12(arr) || _iterableToArrayLimit12(arr, i) || _unsupportedIterableToArray20(arr, i) || _nonIterableRest12();
}
function _nonIterableRest12() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray20(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray20(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray20(o, minLen);
}
function _arrayLikeToArray20(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit12(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles12(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _classCallCheck10(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties10(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey13(descriptor.key), descriptor);
  }
}
function _createClass10(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties10(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties10(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty12(obj, key, value) {
  key = _toPropertyKey13(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey13(arg) {
  var key = _toPrimitive13(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive13(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _wrapRegExp() {
  _wrapRegExp = function _wrapRegExp2(re, groups) {
    return new BabelRegExp(re, void 0, groups);
  };
  var _super = RegExp.prototype, _groups = /* @__PURE__ */ new WeakMap();
  function BabelRegExp(re, flags, groups) {
    var _this = new RegExp(re, flags);
    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf3(_this, BabelRegExp.prototype);
  }
  function buildGroups(result, re) {
    var g = _groups.get(re);
    return Object.keys(g).reduce(function(groups, name) {
      var i = g[name];
      if ("number" == typeof i)
        groups[name] = result[i];
      else {
        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length; )
          k++;
        groups[name] = result[i[k]];
      }
      return groups;
    }, /* @__PURE__ */ Object.create(null));
  }
  return _inherits3(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function(str) {
    var result = _super.exec.call(this, str);
    if (result) {
      result.groups = buildGroups(result, this);
      var indices = result.indices;
      indices && (indices.groups = buildGroups(indices, this));
    }
    return result;
  }, BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {
    if ("string" == typeof substitution) {
      var groups = _groups.get(this);
      return _super[Symbol.replace].call(this, str, substitution.replace(/\$<([^>]+)>/g, function(_, name) {
        var group = groups[name];
        return "$" + (Array.isArray(group) ? group.join("$") : group);
      }));
    }
    if ("function" == typeof substitution) {
      var _this = this;
      return _super[Symbol.replace].call(this, str, function() {
        var args = arguments;
        return "object" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);
      });
    }
    return _super[Symbol.replace].call(this, str, substitution);
  }, _wrapRegExp.apply(this, arguments);
}
function _inherits3(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf3(subClass, superClass);
}
function _setPrototypeOf3(o, p) {
  _setPrototypeOf3 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf3(o, p);
}
var clanIdCache = {};
var toPlayerId = function(player) {
  return typeof player === "string" ? (0, import_kolmafia39.getPlayerId)(player) : player;
};
var LOG_FAX_PATTERN = /* @__PURE__ */ _wrapRegExp(/(\d{2}\/\d{2}\/\d{2}, \d{2}:\d{2}(?:AM|PM): )<a [^>]+>([^<]+)<\/a>(?: faxed in a (.*?))<br>/, {
  monster: 3
});
var WHITELIST_DEGREE_PATTERN = /* @__PURE__ */ _wrapRegExp(/(.*?) \(\xB0(\d+)\)/, {
  name: 1,
  degree: 2
});
var Clan = /* @__PURE__ */ function() {
  function Clan2(id, name) {
    _classCallCheck10(this, Clan2);
    _defineProperty12(this, "id", void 0);
    _defineProperty12(this, "name", void 0);
    this.id = id;
    this.name = name;
  }
  _createClass10(Clan2, [{
    key: "_check",
    value: function _check() {
      if (this.id !== (0, import_kolmafia39.getClanId)()) {
        throw new Error("You are no longer a member of this clan");
      }
    }
    /**
     * Join clan
     *
     * @returns Joined clan
     */
  }, {
    key: "join",
    value: function join() {
      return Clan2.join(this.id);
    }
    /**
     * Check that this clan is the player's current clan
     *
     * @returns Whether this is the current clan
     */
  }, {
    key: "check",
    value: function check() {
      return (0, import_kolmafia39.visitUrl)("clan_hall.php").includes("<b>".concat(this.name, "</b>"));
    }
    /**
     * Determine the monster that is currently in the current clan's fax machine if any
     *
     * @returns The current fax monster
     */
  }, {
    key: "getCurrentFax",
    value: function getCurrentFax() {
      this._check();
      var logs = (0, import_kolmafia39.visitUrl)("clan_log.php");
      var lastFax = logs.match(LOG_FAX_PATTERN);
      if (!lastFax)
        return null;
      var _lastFax = _slicedToArray12(lastFax, 4), monsterName = _lastFax[3];
      if (!monsterName)
        return null;
      return import_kolmafia39.Monster.get(monsterName);
    }
    /**
     * List available ranks (name, degree and id) from the current clan
     *
     * @returns List of ranks
     */
  }, {
    key: "getRanks",
    value: function getRanks() {
      this._check();
      var page = (0, import_kolmafia39.visitUrl)("clan_whitelist.php");
      return (0, import_kolmafia39.xpath)(page, '//select[@name="level"]//option').map(function(option) {
        var validHtml = "<select>".concat(option, "</select>");
        var match = (0, import_kolmafia39.xpath)(validHtml, "//text()")[0].match(WHITELIST_DEGREE_PATTERN);
        var id = (0, import_kolmafia39.xpath)(validHtml, "//@value")[0];
        if (!match || !id)
          return null;
        var _match = _slicedToArray12(match, 3), encodedName = _match[1], degree = _match[2];
        return {
          name: (0, import_html_entities.decode)(encodedName),
          degree: Number.parseInt(degree),
          id: Number.parseInt(id)
        };
      }).filter(notNull);
    }
    /**
     * Add a player to the current clan's whitelist.
     * If the player is already in the whitelist this will change their rank or title.
     *
     * @param player Player id or name
     * @param rankName Rank to give the player. If not provided they will be given the lowest rank
     * @param title Title to give the player. If not provided, will be blank
     * @returns Success
     */
  }, {
    key: "addPlayerToWhitelist",
    value: function addPlayerToWhitelist(player, rankName) {
      var title = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
      this._check();
      var playerId = toPlayerId(player);
      var ranks = this.getRanks();
      var rank = rankName ? ranks.find(function(r) {
        return r.name === rankName;
      }) : ranks.sort(function(a, b) {
        return a.degree - b.degree;
      })[0];
      if (!rank)
        return false;
      var result = (0, import_kolmafia39.visitUrl)("clan_whitelist.php?action=add&pwd&addwho=".concat(playerId, "&level=").concat(rank.id, "&title=").concat(title));
      return result.includes("added to whitelist.") || result.includes("That player is already on the whitelist");
    }
    /**
     * Remove a player from the current clan's whitelist
     *
     * @param player Player id or name
     * @returns Success
     */
  }, {
    key: "removePlayerFromWhitelist",
    value: function removePlayerFromWhitelist(player) {
      this._check();
      var playerId = toPlayerId(player);
      var result = (0, import_kolmafia39.visitUrl)("clan_whitelist.php?action=updatewl&pwd&who=".concat(playerId, "&remove=Remove"));
      return result.includes("Whitelist updated.");
    }
    /**
     * Return the amount of meat in the current clan's coffer
     *
     * @returns Amount of meat
     */
  }, {
    key: "getMeatInCoffer",
    value: function getMeatInCoffer() {
      this._check();
      var page = (0, import_kolmafia39.visitUrl)("clan_stash.php");
      var _ref = page.match(/Your <b>Clan Coffer<\/b> contains ([\d,]+) Meat./) || ["0", "0"], _ref2 = _slicedToArray12(_ref, 2), meat = _ref2[1];
      return parseNumber(meat);
    }
    /**
     * Add the given amount of meat to the current clan's coffer.
     *
     * @param amount Amount of meat to put in coffer
     * @returns Success
     */
  }, {
    key: "putMeatInCoffer",
    value: function putMeatInCoffer(amount) {
      this._check();
      var result = (0, import_kolmafia39.visitUrl)("clan_stash.php?pwd&action=contribute&howmuch=".concat(amount));
      return result.includes("You contributed");
    }
  }, {
    key: "take",
    value: function take(items) {
      this._check();
      var map = arrayToCountedMap(items);
      map.forEach(function(quantity, item9) {
        var needed = Math.max(0, quantity - (0, import_kolmafia39.availableAmount)(item9));
        if (needed === 0) {
          return map.set(item9, 0);
        }
        var foldGroup = getFoldGroup(item9);
        var _iterator = _createForOfIteratorHelper7(foldGroup), _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
            var foldable = _step.value;
            var quantityToFold = Math.min(needed, (0, import_kolmafia39.availableAmount)(foldable));
            for (var _i3 = 0; _i3 < quantityToFold; _i3++) {
              (0, import_kolmafia39.cliExecute)("fold ".concat(item9.name));
              needed--;
            }
            return map.set(item9, needed);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        (0, import_kolmafia39.refreshStash)();
        for (var _i2 = 0, _arr2 = [item9].concat(_toConsumableArray10(foldGroup)); _i2 < _arr2.length; _i2++) {
          var matchingItem = _arr2[_i2];
          var quantityToTake = Math.min(needed, (0, import_kolmafia39.stashAmount)(matchingItem));
          if (quantityToTake === 0)
            continue;
          if (!(0, import_kolmafia39.takeStash)(quantityToTake, matchingItem))
            return;
          if (matchingItem === item9) {
            needed -= quantityToTake;
          } else {
            for (var i = 0; i < quantityToTake; i++) {
              (0, import_kolmafia39.cliExecute)("fold ".concat(matchingItem.name));
              needed--;
            }
          }
        }
      });
      return Array.isArray(items) ? countedMapToArray(map) : map;
    }
  }, {
    key: "put",
    value: function put(items) {
      this._check();
      var map = arrayToCountedMap(items);
      if (!this.check())
        throw new Error("Wanted to return ".concat(countedMapToString(map), " to ").concat(this.name, " but KoLmafia's clan data is out of sync"));
      map.forEach(function(quantity, item9) {
        (0, import_kolmafia39.retrieveItem)(quantity, item9);
        var returned = Math.min(quantity, (0, import_kolmafia39.availableAmount)(item9));
        (0, import_kolmafia39.putStash)(returned, item9);
        map.set(item9, quantity - returned);
      });
      return Array.isArray(items) ? countedMapToArray(map) : map;
    }
  }, {
    key: "withStash",
    value: function withStash2(items, callback) {
      var _this = this;
      this._check();
      var map = arrayToCountedMap(items);
      return Clan2._withStash(function() {
        return _this.take(map);
      }, function(borrowed) {
        return _this.put(borrowed);
      }, callback);
    }
  }], [{
    key: "_join",
    value: function _join(id) {
      var result = (0, import_kolmafia39.visitUrl)("showclan.php?recruiter=1&whichclan=".concat(id, "&pwd&whichclan=").concat(id, "&action=joinclan&apply=Apply+to+this+Clan&confirm=on"));
      if (!result.includes("clanhalltop.gif")) {
        throw new Error("Could not join clan");
      }
      return Clan2.get();
    }
  }, {
    key: "_withStash",
    value: function _withStash(borrowFn, returnFn, callback) {
      var borrowed = borrowFn();
      var map = arrayToCountedMap(borrowed);
      try {
        return callback(borrowed);
      } finally {
        if (map.size > 0) {
          var returned = arrayToCountedMap(returnFn(borrowed));
          map.forEach(function(quantity, item9) {
            var remaining = quantity - (returned.get(item9) || 0);
            if (remaining > 0) {
              map.set(item9, remaining);
            } else {
              map.delete(item9);
            }
          });
          if (map.size > 0) {
            logger_default.error("Failed to return <b>".concat(countedMapToString(map), "</b> to <b>").concat(this.name, "</b> stash"));
          }
        }
      }
    }
    /**
     * Join a clan
     *
     * @param clanIdOrName Clan id or name
     * @returns Instance of joined clan
     */
  }, {
    key: "join",
    value: function join(clanIdOrName) {
      var clanId;
      if (typeof clanIdOrName === "string") {
        var clanName = clanIdOrName.toLowerCase();
        if (clanName === (0, import_kolmafia39.getClanName)().toLowerCase()) {
          return Clan2.get();
        }
        if (!(clanName in clanIdCache)) {
          var clan = Clan2.getWhitelisted().find(function(c) {
            return c.name.toLowerCase() === clanName;
          });
          if (!clan) {
            throw new Error("Player is not whitelisted to clan");
          }
          clanIdCache[clanName] = clan.id;
        }
        clanId = clanIdCache[clanName];
      } else {
        clanId = clanIdOrName;
        if (clanId === (0, import_kolmafia39.getClanId)()) {
          return Clan2.get();
        }
      }
      return Clan2._join(clanId);
    }
    /**
     * Execute callback as a member of a clan and then restore prior membership
     *
     * @param clanIdOrName Clan id or name
     * @param callback Actions to carry out while member of specified can
     * @returns Return value from callback
     */
  }, {
    key: "with",
    value: function _with(clanIdOrName, callback) {
      var startingClan = Clan2.get();
      var clan = Clan2.join(clanIdOrName);
      try {
        return callback(clan);
      } finally {
        startingClan.join();
      }
    }
  }, {
    key: "withStash",
    value: function withStash2(clanIdOrName, items, callback) {
      return Clan2._withStash(function() {
        return Clan2.with(clanIdOrName, function(clan) {
          return clan.take(items);
        });
      }, function(borrowed) {
        return Clan2.with(clanIdOrName, function(clan) {
          return clan.put(borrowed);
        });
      }, callback);
    }
    /**
     * Get the player's current clan
     *
     * @returns Player's clan
     */
  }, {
    key: "get",
    value: function get4() {
      return new Clan2((0, import_kolmafia39.getClanId)(), (0, import_kolmafia39.getClanName)());
    }
    /**
     * Get list of clans to which the player is whitelisted
     *
     * @returns List of clans
     */
  }, {
    key: "getWhitelisted",
    value: function getWhitelisted() {
      var page = (0, import_kolmafia39.visitUrl)("clan_signup.php");
      return (0, import_kolmafia39.xpath)(page, '//select[@name="whichclan"]//option').map(function(option) {
        var validHtml = "<select>".concat(option, "</select>");
        var id = Number.parseInt((0, import_kolmafia39.xpath)(validHtml, "//@value")[0]);
        var name = (0, import_html_entities.decode)((0, import_kolmafia39.xpath)(validHtml, "//text()")[0]);
        return new Clan2(id, name);
      });
    }
  }]);
  return Clan2;
}();

// node_modules/libram/dist/diet/index.js
var import_kolmafia40 = require("kolmafia");

// node_modules/libram/dist/diet/knapsack.js
function _toConsumableArray11(arr) {
  return _arrayWithoutHoles11(arr) || _iterableToArray11(arr) || _unsupportedIterableToArray21(arr) || _nonIterableSpread11();
}
function _nonIterableSpread11() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray11(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles11(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray21(arr);
}
function _slicedToArray13(arr, i) {
  return _arrayWithHoles13(arr) || _iterableToArrayLimit13(arr, i) || _unsupportedIterableToArray21(arr, i) || _nonIterableRest13();
}
function _nonIterableRest13() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit13(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles13(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper8(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray21(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray21(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray21(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray21(o, minLen);
}
function _arrayLikeToArray21(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _defineProperties11(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey14(descriptor.key), descriptor);
  }
}
function _createClass11(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties11(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties11(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _classCallCheck11(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperty13(obj, key, value) {
  key = _toPropertyKey14(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey14(arg) {
  var key = _toPrimitive14(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive14(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var Not = /* @__PURE__ */ _createClass11(function Not2(thing) {
  _classCallCheck11(this, Not2);
  _defineProperty13(this, "thing", void 0);
  this.thing = thing;
});
function aggregate(list, isEqual) {
  var aggregatedList = [];
  var _iterator = _createForOfIteratorHelper8(list), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var item9 = _step.value;
      if (aggregatedList.length === 0) {
        aggregatedList.push([item9, 1]);
      } else {
        var last = aggregatedList[aggregatedList.length - 1];
        var _last = _slicedToArray13(last, 1), lastItem = _last[0];
        if (isEqual ? isEqual(item9, lastItem) : item9 === lastItem) {
          last[1]++;
        } else {
          aggregatedList.push([item9, 1]);
        }
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return aggregatedList;
}
function knapsack(values, capacity) {
  var _ref5;
  if (!Number.isFinite(capacity)) {
    throw new Error("Invalid capacity.");
  }
  var valuesInverted = values.map(function(_ref) {
    var _ref2 = _slicedToArray13(_ref, 4), thing = _ref2[0], value2 = _ref2[1], weight = _ref2[2], maximum2 = _ref2[3];
    return weight < 0 && maximum2 !== void 0 ? [new Not(thing), -value2, -weight, maximum2] : [thing, value2, weight, maximum2];
  });
  var capacityAdjustment = sum(values, function(_ref3) {
    var _ref4 = _slicedToArray13(_ref3, 4), weight = _ref4[2], maximum2 = _ref4[3];
    return weight < 0 && maximum2 !== void 0 ? -weight * maximum2 : 0;
  });
  var adjustedCapacity = capacity + capacityAdjustment;
  if (adjustedCapacity < 0) {
    return [-Infinity, []];
  }
  var valuesSorted = _toConsumableArray11(valuesInverted).sort(function(x, y) {
    return x[2] - y[2];
  });
  var values01 = (_ref5 = []).concat.apply(_ref5, _toConsumableArray11(valuesSorted.map(function(_ref6) {
    var _ref7 = _slicedToArray13(_ref6, 4), thing = _ref7[0], value2 = _ref7[1], weight = _ref7[2], maximum2 = _ref7[3];
    if (!Number.isFinite(weight) || weight < 0) {
      throw new Error("Invalid weight ".concat(weight, " for ").concat(thing instanceof Not ? "not ".concat(thing.thing) : thing));
    }
    var maxQuantity = Math.floor(maximum2 !== null && maximum2 !== void 0 ? maximum2 : adjustedCapacity / weight);
    if (maxQuantity < 0) {
      throw new Error("Invalid max quantity ".concat(maxQuantity, " for ").concat(thing instanceof Not ? "not ".concat(thing.thing) : thing));
    }
    return new Array(maxQuantity).fill([thing, value2, weight]);
  })));
  var memoizationTable = new Array(values01.length);
  for (var i = 0; i < values01.length; i++) {
    memoizationTable[i] = new Array(adjustedCapacity).fill(null);
  }
  var _bestSolution = bestSolution(memoizationTable, values01, values01.length - 1, adjustedCapacity), _bestSolution2 = _slicedToArray13(_bestSolution, 2), value = _bestSolution2[0], invertedSolution = _bestSolution2[1];
  var aggregatedSolution = aggregate(invertedSolution);
  var countMap = new Map(aggregatedSolution);
  var valueAdjustment = 0;
  var solution = aggregatedSolution.filter(function(_ref8) {
    var _ref9 = _slicedToArray13(_ref8, 1), thingOrNot2 = _ref9[0];
    return !(thingOrNot2 instanceof Not);
  });
  var _iterator2 = _createForOfIteratorHelper8(valuesSorted), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var _step2$value = _slicedToArray13(_step2.value, 4), thingOrNot = _step2$value[0], _value = _step2$value[1], maximum = _step2$value[3];
      if (thingOrNot instanceof Not) {
        var _countMap$get;
        var notCount = (_countMap$get = countMap.get(thingOrNot)) !== null && _countMap$get !== void 0 ? _countMap$get : 0;
        if (maximum === void 0) {
          throw new Error("Cannot find maximum for item ".concat(thingOrNot.thing, "."));
        }
        if (notCount > maximum) {
          throw new Error("Somehow picked ".concat(notCount, " more than the maximum ").concat(notCount, " for item ").concat(thingOrNot.thing, "."));
        }
        if (notCount < maximum) {
          solution.push([thingOrNot.thing, maximum - notCount]);
        }
        valueAdjustment -= maximum * _value;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  return [value + valueAdjustment, solution];
}
function bestSolution(memoizationTable, values, currentIndex, remainingCapacity) {
  if (remainingCapacity < 0)
    return [-Infinity, []];
  if (remainingCapacity === 0 || currentIndex < 0)
    return [0, []];
  var memoized = memoizationTable[currentIndex][remainingCapacity - 1];
  if (memoized !== null)
    return memoized;
  var _values$currentIndex = _slicedToArray13(values[currentIndex], 3), item9 = _values$currentIndex[0], value = _values$currentIndex[1], weight = _values$currentIndex[2];
  var _bestSolution3 = bestSolution(memoizationTable, values, currentIndex - 1, remainingCapacity - weight), _bestSolution4 = _slicedToArray13(_bestSolution3, 2), valueIncludeRest = _bestSolution4[0], itemsInclude = _bestSolution4[1];
  var valueInclude = valueIncludeRest + value;
  var _bestSolution5 = bestSolution(memoizationTable, values, currentIndex - 1, remainingCapacity), _bestSolution6 = _slicedToArray13(_bestSolution5, 2), valueExclude = _bestSolution6[0], itemsExclude = _bestSolution6[1];
  var result = valueInclude > valueExclude ? [valueInclude, [].concat(_toConsumableArray11(itemsInclude), [item9])] : [valueExclude, itemsExclude];
  memoizationTable[currentIndex][remainingCapacity - 1] = result;
  return result;
}

// node_modules/libram/dist/diet/index.js
var _templateObject281;
var _templateObject288;
var _templateObject351;
var _templateObject440;
var _templateObject536;
var _templateObject631;
var _templateObject729;
var _templateObject825;
var _templateObject921;
var _templateObject1018;
var _templateObject1115;
var _templateObject1214;
var _templateObject1314;
var _templateObject1412;
var _templateObject1510;
var _templateObject1610;
var _templateObject1710;
var _templateObject1810;
var _templateObject1910;
var _templateObject2010;
var _templateObject2115;
var _templateObject2211;
var _templateObject2310;
var _templateObject2410;
var _templateObject2510;
var _templateObject2610;
var _templateObject2710;
var _templateObject289;
var _templateObject297;
var _templateObject307;
var _templateObject3111;
var _templateObject3210;
var _templateObject3310;
var _templateObject3410;
var _templateObject357;
var _templateObject366;
var _templateObject376;
var _templateObject385;
var _templateObject395;
var _templateObject405;
var _templateObject4110;
var _templateObject4210;
var _templateObject4310;
var _templateObject445;
var _templateObject455;
var _templateObject465;
var _templateObject475;
var _templateObject485;
var _templateObject495;
var _templateObject505;
var _templateObject5110;
var _templateObject5210;
var _templateObject537;
var _templateObject545;
var _templateObject555;
var _templateObject565;
var _templateObject574;
var _templateObject584;
var _templateObject594;
function _createForOfIteratorHelper9(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray22(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function ownKeys6(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread6(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys6(Object(source), true).forEach(function(key) {
      _defineProperty14(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys6(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _classCallCheck12(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties12(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey15(descriptor.key), descriptor);
  }
}
function _createClass12(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties12(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties12(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty14(obj, key, value) {
  key = _toPropertyKey15(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey15(arg) {
  var key = _toPrimitive15(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive15(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray12(arr) {
  return _arrayWithoutHoles12(arr) || _iterableToArray12(arr) || _unsupportedIterableToArray22(arr) || _nonIterableSpread12();
}
function _nonIterableSpread12() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray12(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles12(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray22(arr);
}
function _slicedToArray14(arr, i) {
  return _arrayWithHoles14(arr) || _iterableToArrayLimit14(arr, i) || _unsupportedIterableToArray22(arr, i) || _nonIterableRest14();
}
function _nonIterableRest14() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray22(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray22(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray22(o, minLen);
}
function _arrayLikeToArray22(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit14(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles14(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral35(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function isMonday() {
  return get2("Muscle Percent", $item(_templateObject281 || (_templateObject281 = _taggedTemplateLiteral35(["Tuesday's ruby"])))) > 0;
}
function _expectedAdventures(item9, modifiers) {
  var _item$notes, _item$notes2, _item$notes3, _item$notes4, _item$notes5;
  if (item9.adventures === "")
    return 0;
  var _item$adventures$spli = item9.adventures.split(/[-]/).map(function(s) {
    return parseInt(s);
  }), _item$adventures$spli2 = _slicedToArray14(_item$adventures$spli, 2), min = _item$adventures$spli2[0], recordedMax = _item$adventures$spli2[1];
  var max = recordedMax !== null && recordedMax !== void 0 ? recordedMax : min;
  var interpolated = _toConsumableArray12(new Array(max - min + 1).keys()).map(function(n) {
    return n + min;
  });
  var forkMugMultiplier = (0, import_kolmafia40.itemType)(item9) === "food" && (_item$notes = item9.notes) !== null && _item$notes !== void 0 && _item$notes.includes("SALAD") || (0, import_kolmafia40.itemType)(item9) === "booze" && (_item$notes2 = item9.notes) !== null && _item$notes2 !== void 0 && _item$notes2.includes("BEER") ? 1.5 : 1.3;
  var seasoningAdventures = max - min <= 1 ? 1 : 0.5;
  var garish = modifiers.garish && ((_item$notes3 = item9.notes) === null || _item$notes3 === void 0 ? void 0 : _item$notes3.includes("LASAGNA")) && !isMonday();
  var refinedPalate = modifiers.refinedPalate && ((_item$notes4 = item9.notes) === null || _item$notes4 === void 0 ? void 0 : _item$notes4.includes("WINE"));
  var pinkyRing = modifiers.pinkyRing && ((_item$notes5 = item9.notes) === null || _item$notes5 === void 0 ? void 0 : _item$notes5.includes("WINE"));
  return sum(interpolated, function(baseAdventures) {
    var _item$notes6, _item$notes7;
    var adventures = baseAdventures;
    if (modifiers.forkMug) {
      adventures = Math.floor(adventures * forkMugMultiplier);
    }
    if ((_item$notes6 = item9.notes) !== null && _item$notes6 !== void 0 && _item$notes6.includes("SAUCY") && modifiers.saucemaven) {
      adventures += (0, import_kolmafia40.myPrimestat)() === $stat(_templateObject288 || (_templateObject288 = _taggedTemplateLiteral35(["Mysticality"]))) ? 5 : 3;
    }
    if (garish)
      adventures += 5;
    if (refinedPalate)
      adventures = Math.floor(adventures * 1.25);
    if (pinkyRing)
      adventures = Math.round(adventures * 1.125);
    if ((_item$notes7 = item9.notes) !== null && _item$notes7 !== void 0 && _item$notes7.includes("MARTINI") && modifiers.tuxedoShirt) {
      adventures += 2;
    }
    if ((0, import_kolmafia40.itemType)(item9) === "food" && modifiers.mayoflex)
      adventures++;
    if ((0, import_kolmafia40.itemType)(item9) === "food" && modifiers.seasoning)
      adventures += seasoningAdventures;
    return adventures;
  }) / interpolated.length;
}
var MenuItem = /* @__PURE__ */ function() {
  function MenuItem2(item9) {
    var _MenuItem$defaultOpti;
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    _classCallCheck12(this, MenuItem2);
    _defineProperty14(this, "item", void 0);
    _defineProperty14(this, "organ", void 0);
    _defineProperty14(this, "size", void 0);
    _defineProperty14(this, "maximum", void 0);
    _defineProperty14(this, "additionalValue", void 0);
    _defineProperty14(this, "effect", void 0);
    _defineProperty14(this, "priceOverride", void 0);
    _defineProperty14(this, "mayo", void 0);
    _defineProperty14(this, "data", void 0);
    var _options = _objectSpread6(_objectSpread6({}, options), (_MenuItem$defaultOpti = MenuItem2.defaultOptions().get(item9)) !== null && _MenuItem$defaultOpti !== void 0 ? _MenuItem$defaultOpti : {}), size = _options.size, organ = _options.organ, maximum = _options.maximum, additionalValue = _options.additionalValue, effect2 = _options.effect, priceOverride = _options.priceOverride, mayo = _options.mayo, data = _options.data;
    this.item = item9;
    this.maximum = maximum === "auto" ? item9.dailyusesleft : maximum;
    this.additionalValue = additionalValue;
    this.effect = effect2;
    this.priceOverride = priceOverride;
    this.mayo = mayo;
    this.data = data;
    var typ = (0, import_kolmafia40.itemType)(this.item);
    this.organ = organ !== null && organ !== void 0 ? organ : isOrgan(typ) ? typ : void 0;
    this.size = size !== null && size !== void 0 ? size : this.organ === "food" ? this.item.fullness : this.organ === "booze" ? this.item.inebriety : this.organ === "spleen item" ? this.item.spleen : 0;
  }
  _createClass12(MenuItem2, [{
    key: "equals",
    value: function equals(other) {
      return this.item === other.item && this.effect === other.effect;
    }
  }, {
    key: "toString",
    value: function toString() {
      if (this.effect) {
        return "".concat(this.item, ":").concat(this.effect);
      }
      return this.item.toString();
    }
  }, {
    key: "price",
    value: function price2() {
      var _this$priceOverride, _MenuItem$defaultPric;
      return (_this$priceOverride = this.priceOverride) !== null && _this$priceOverride !== void 0 ? _this$priceOverride : (_MenuItem$defaultPric = MenuItem2.defaultPriceFunction) === null || _MenuItem$defaultPric === void 0 ? void 0 : _MenuItem$defaultPric.call(MenuItem2, this.item);
    }
  }], [{
    key: "defaultOptions",
    value: function defaultOptions() {
      return /* @__PURE__ */ new Map([[$item(_templateObject351 || (_templateObject351 = _taggedTemplateLiteral35(["distention pill"]))), {
        organ: "food",
        maximum: !have($item(_templateObject440 || (_templateObject440 = _taggedTemplateLiteral35(["distention pill"])))) || get("_distentionPillUsed") ? 0 : 1,
        size: -1
      }], [$item(_templateObject536 || (_templateObject536 = _taggedTemplateLiteral35(["synthetic dog hair pill"]))), {
        organ: "booze",
        maximum: !have($item(_templateObject631 || (_templateObject631 = _taggedTemplateLiteral35(["synthetic dog hair pill"])))) || get("_syntheticDogHairPillUsed") ? 0 : 1,
        size: -1
      }], [$item(_templateObject729 || (_templateObject729 = _taggedTemplateLiteral35(["cuppa Voraci tea"]))), {
        organ: "food",
        maximum: get("_voraciTeaUsed") ? 0 : 1,
        size: -1
      }], [$item(_templateObject825 || (_templateObject825 = _taggedTemplateLiteral35(["cuppa Sobrie tea"]))), {
        organ: "booze",
        maximum: get("_sobrieTeaUsed") ? 0 : 1,
        size: -1
      }], [$item(_templateObject921 || (_templateObject921 = _taggedTemplateLiteral35(["mojo filter"]))), {
        organ: "spleen item",
        maximum: 3 - get("currentMojoFilters"),
        size: -1
      }], [$item(_templateObject1018 || (_templateObject1018 = _taggedTemplateLiteral35(["spice melange"]))), {
        maximum: get("spiceMelangeUsed") ? 0 : 1
      }], [$item(_templateObject1115 || (_templateObject1115 = _taggedTemplateLiteral35(["Ultra Mega Sour Ball"]))), {
        maximum: get("_ultraMegaSourBallUsed") ? 0 : 1
      }], [$item(_templateObject1214 || (_templateObject1214 = _taggedTemplateLiteral35(["The Plumber's mushroom stew"]))), {
        maximum: get("_plumbersMushroomStewEaten") ? 0 : 1
      }], [$item(_templateObject1314 || (_templateObject1314 = _taggedTemplateLiteral35(["The Mad Liquor"]))), {
        maximum: get("_madLiquorDrunk") ? 0 : 1
      }], [$item(_templateObject1412 || (_templateObject1412 = _taggedTemplateLiteral35(["Doc Clock's thyme cocktail"]))), {
        maximum: get("_docClocksThymeCocktailDrunk") ? 0 : 1
      }], [$item(_templateObject1510 || (_templateObject1510 = _taggedTemplateLiteral35(["Mr. Burnsger"]))), {
        maximum: get("_mrBurnsgerEaten") ? 0 : 1
      }]]);
    }
  }]);
  return MenuItem2;
}();
_defineProperty14(MenuItem, "defaultPriceFunction", function(item9) {
  return (0, import_kolmafia40.npcPrice)(item9) > 0 ? (0, import_kolmafia40.npcPrice)(item9) : (0, import_kolmafia40.mallPrice)(item9);
});
var organs = ["food", "booze", "spleen item"];
function isOrgan(x) {
  return organs.includes(x);
}
var DietPlanner = /* @__PURE__ */ function() {
  function DietPlanner2(mpa, menu3) {
    var _this2 = this;
    var _this = this;
    _classCallCheck12(this, DietPlanner2);
    _defineProperty14(this, "mpa", void 0);
    _defineProperty14(this, "menu", void 0);
    _defineProperty14(this, "mayoLookup", void 0);
    _defineProperty14(this, "fork", void 0);
    _defineProperty14(this, "mug", void 0);
    _defineProperty14(this, "seasoning", void 0);
    _defineProperty14(this, "spleenValue", 0);
    this.mpa = mpa;
    this.fork = menu3.find(function(item9) {
      return item9.item === $item(_templateObject1610 || (_templateObject1610 = _taggedTemplateLiteral35(["Ol' Scratch's salad fork"])));
    });
    this.mug = menu3.find(function(item9) {
      return item9.item === $item(_templateObject1710 || (_templateObject1710 = _taggedTemplateLiteral35(["Frosty's frosty mug"])));
    });
    this.seasoning = menu3.find(function(item9) {
      return item9.item === $item(_templateObject1810 || (_templateObject1810 = _taggedTemplateLiteral35(["Special Seasoning"])));
    });
    this.mayoLookup = /* @__PURE__ */ new Map();
    if (installed3()) {
      var _loop = function _loop2() {
        var mayo = _arr2[_i2];
        var menuItem = menu3.find(function(item9) {
          return item9.item === mayo;
        });
        if (menuItem)
          _this.mayoLookup.set(mayo, menuItem);
      };
      for (var _i2 = 0, _arr2 = [Mayo.flex, Mayo.zapine]; _i2 < _arr2.length; _i2++) {
        _loop();
      }
    }
    this.menu = menu3.filter(function(item9) {
      return item9.organ;
    });
    if (menu3.filter(function(item9) {
      return (0, import_kolmafia40.historicalPrice)(item9.item) === 0 || (0, import_kolmafia40.historicalAge)(item9.item) >= 1;
    }).length > 100) {
      (0, import_kolmafia40.mallPrices)("food");
      (0, import_kolmafia40.mallPrices)("booze");
    }
    var spleenItems = menu3.filter(function(item9) {
      return (0, import_kolmafia40.itemType)(item9.item) === "spleen item";
    });
    spleenItems.sort(function(x, y) {
      return -(_this2.consumptionValue(x) / x.item.spleen - _this2.consumptionValue(y) / y.item.spleen);
    });
    if (spleenItems.length > 0) {
      var bestMarginalSpleenItem = spleenItems.find(function(spleenItem) {
        return spleenItem.maximum === void 0 || spleenItem.maximum * spleenItem.size >= (0, import_kolmafia40.spleenLimit)() - (0, import_kolmafia40.mySpleenUse)();
      });
      if (bestMarginalSpleenItem) {
        this.spleenValue = Math.max(0, this.consumptionValue(bestMarginalSpleenItem) / bestMarginalSpleenItem.size);
      }
    }
  }
  _createClass12(DietPlanner2, [{
    key: "consumptionValue",
    value: function consumptionValue(menuItem) {
      return this.consumptionHelpersAndValue(menuItem, {})[1];
    }
    /**
     * Determine which helpers will be used with a menu item and its resulting value.
     *
     * @param menuItem Menu item to check.
     * @param overrideModifiers Overrides for consumption modifiers, if any.
     * @returns Pair [array of helpers and base menu item, value].
     */
  }, {
    key: "consumptionHelpersAndValue",
    value: function consumptionHelpersAndValue(menuItem, overrideModifiers) {
      var _menuItem$additionalV, _menuItem$additionalV2;
      var helpers = [];
      if ((0, import_kolmafia40.itemType)(menuItem.item) === "food" && this.mayoLookup.size) {
        var mayo = menuItem.mayo ? this.mayoLookup.get(menuItem.mayo) : this.mayoLookup.get(Mayo.flex);
        if (mayo)
          helpers.push(mayo);
      }
      var defaultModifiers = _objectSpread6({
        forkMug: false,
        seasoning: this.seasoning ? helpers.includes(this.seasoning) : false,
        mayoflex: this.mayoLookup.size ? helpers.some(function(item9) {
          return item9.item === Mayo.flex;
        }) : false,
        refinedPalate: have($effect(_templateObject1910 || (_templateObject1910 = _taggedTemplateLiteral35(["Refined Palate"])))),
        garish: have($effect(_templateObject2010 || (_templateObject2010 = _taggedTemplateLiteral35(["Gar-ish"])))),
        saucemaven: have($skill(_templateObject2115 || (_templateObject2115 = _taggedTemplateLiteral35(["Saucemaven"])))),
        pinkyRing: have($item(_templateObject2211 || (_templateObject2211 = _taggedTemplateLiteral35(["mafia pinky ring"])))) && (0, import_kolmafia40.canEquip)($item(_templateObject2310 || (_templateObject2310 = _taggedTemplateLiteral35(["mafia pinky ring"])))),
        tuxedoShirt: have($item(_templateObject2410 || (_templateObject2410 = _taggedTemplateLiteral35(["tuxedo shirt"])))) && (0, import_kolmafia40.canEquip)($item(_templateObject2510 || (_templateObject2510 = _taggedTemplateLiteral35(["tuxedo shirt"]))))
      }, overrideModifiers);
      if (this.seasoning && (0, import_kolmafia40.itemType)(menuItem.item) === "food" && this.mpa * (_expectedAdventures(menuItem.item, _objectSpread6(_objectSpread6({}, defaultModifiers), {}, {
        seasoning: true
      })) - _expectedAdventures(menuItem.item, _objectSpread6(_objectSpread6({}, defaultModifiers), {}, {
        seasoning: false
      }))) > (0, import_kolmafia40.mallPrice)($item(_templateObject2610 || (_templateObject2610 = _taggedTemplateLiteral35(["Special Seasoning"]))))) {
        helpers.push(this.seasoning);
      }
      var forkMug = (0, import_kolmafia40.itemType)(menuItem.item) === "food" ? this.fork : (0, import_kolmafia40.itemType)(menuItem.item) === "booze" ? this.mug : null;
      var forkMugPrice = forkMug ? forkMug.price() : Infinity;
      var baseCost = menuItem.price() + sum(helpers, function(item9) {
        return item9.price();
      });
      var valueRaw = _expectedAdventures(menuItem.item, defaultModifiers) * this.mpa - baseCost + ((_menuItem$additionalV = menuItem.additionalValue) !== null && _menuItem$additionalV !== void 0 ? _menuItem$additionalV : 0);
      var valueForkMug = _expectedAdventures(menuItem.item, _objectSpread6(_objectSpread6({}, defaultModifiers), {}, {
        forkMug: true
      })) * this.mpa - baseCost - forkMugPrice + ((_menuItem$additionalV2 = menuItem.additionalValue) !== null && _menuItem$additionalV2 !== void 0 ? _menuItem$additionalV2 : 0);
      var valueSpleen = $items(_templateObject2710 || (_templateObject2710 = _taggedTemplateLiteral35(["jar of fermented pickle juice, extra-greasy slider"]))).includes(menuItem.item) ? 5 * this.spleenValue : 0;
      return forkMug && valueForkMug > valueRaw ? [[].concat(helpers, [forkMug, menuItem]), valueForkMug + valueSpleen] : [[].concat(helpers, [menuItem]), valueRaw + valueSpleen];
    }
    /**
     * Plan an individual organ.
     *
     * @param organ Organ to plan
     * @param capacity Organ capacity.
     * @param overrideModifiers Overrides for consumption modifiers, if any.
     * @returns Pair of [value, menu items and quantities].
     */
  }, {
    key: "planOrgan",
    value: function planOrgan(organ, capacity) {
      var _this = this;
      var overrideModifiers = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      var submenu = this.menu.filter(function(menuItem) {
        return menuItem.organ === organ && (0, import_kolmafia40.myLevel)() >= menuItem.item.levelreq;
      });
      var knapsackValues = submenu.map(function(menuItem) {
        return [].concat(_toConsumableArray12(_this.consumptionHelpersAndValue(menuItem, overrideModifiers)), [menuItem.size, menuItem.maximum]);
      });
      return knapsack(knapsackValues, capacity);
    }
    /**
     * Plan organs.
     *
     * @param organCapacities Organ capacities.
     * @param overrideModifiers Overrides for consumption modifiers, if any.
     * @returns Pair of [value, menu items and quantities].
     */
  }, {
    key: "planOrgans",
    value: function planOrgans(organCapacities) {
      var _this = this;
      var _ref5;
      var overrideModifiers = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
      var valuePlans = organCapacities.map(function(_ref) {
        var _ref2 = _slicedToArray14(_ref, 2), organ = _ref2[0], capacity = _ref2[1];
        return _this.planOrgan(organ, capacity, overrideModifiers);
      });
      return [sum(valuePlans, function(_ref3) {
        var _ref4 = _slicedToArray14(_ref3, 1), value = _ref4[0];
        return value;
      }), (_ref5 = []).concat.apply(_ref5, _toConsumableArray12(valuePlans.map(function(_ref6) {
        var _ref7 = _slicedToArray14(_ref6, 2), plan = _ref7[1];
        return plan;
      })))];
    }
    /**
     * Plan organs, retrying with and without each trial item. Runtime is
     * proportional to 2 ^ trialItems.length.
     *
     * @param organCapacities Organ capacities.
     * @param trialItems Items to rerun solver with and without.
     * @param overrideModifiers Overrides for consumption modifiers, if any.
     * @returns Pair of [value, menu items and quantities].
     */
  }, {
    key: "planOrgansWithTrials",
    value: function planOrgansWithTrials(organCapacities, trialItems, overrideModifiers) {
      if (trialItems.length === 0) {
        return this.planOrgans(organCapacities, overrideModifiers);
      }
      var _trialItems$ = _slicedToArray14(trialItems[0], 2), trialItem = _trialItems$[0], organSizes = _trialItems$[1];
      if (trialItem.maximum !== void 0 && trialItem.maximum <= 0) {
        return this.planOrgansWithTrials(organCapacities, trialItems.slice(1), overrideModifiers);
      }
      var organCapacitiesWithMap = new Map(organCapacities);
      var _iterator = _createForOfIteratorHelper9(organSizes), _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done; ) {
          var _step$value = _slicedToArray14(_step.value, 2), organ = _step$value[0], size = _step$value[1];
          var current = organCapacitiesWithMap.get(organ);
          if (current !== void 0) {
            organCapacitiesWithMap.set(organ, current - size);
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var organCapacitiesWith = _toConsumableArray12(organCapacitiesWithMap);
      var isRefinedPalate = trialItem.item === $item(_templateObject289 || (_templateObject289 = _taggedTemplateLiteral35(["pocket wish"]))) && trialItem.effect === $effect(_templateObject297 || (_templateObject297 = _taggedTemplateLiteral35(["Refined Palate"]))) || trialItem.item === $item(_templateObject307 || (_templateObject307 = _taggedTemplateLiteral35(["toasted brie"])));
      var isGarish = trialItem.item === $item(_templateObject3111 || (_templateObject3111 = _taggedTemplateLiteral35(["pocket wish"]))) && trialItem.effect === $effect(_templateObject3210 || (_templateObject3210 = _taggedTemplateLiteral35(["Gar-ish"]))) || trialItem.item === $item(_templateObject3310 || (_templateObject3310 = _taggedTemplateLiteral35(["potion of the field gar"])));
      var _this$planOrgansWithT = this.planOrgansWithTrials(organCapacities, trialItems.slice(1), overrideModifiers), _this$planOrgansWithT2 = _slicedToArray14(_this$planOrgansWithT, 2), valueWithout = _this$planOrgansWithT2[0], planWithout = _this$planOrgansWithT2[1];
      var _this$planOrgansWithT3 = this.planOrgansWithTrials(organCapacitiesWith, trialItems.slice(1), _objectSpread6(_objectSpread6(_objectSpread6({}, overrideModifiers), isRefinedPalate ? {
        refinedPalate: true
      } : {}), isGarish ? {
        garish: true
      } : {})), _this$planOrgansWithT4 = _slicedToArray14(_this$planOrgansWithT3, 2), valueWith = _this$planOrgansWithT4[0], planWith = _this$planOrgansWithT4[1];
      var _this$consumptionHelp = this.consumptionHelpersAndValue(trialItem, {}), _this$consumptionHelp2 = _slicedToArray14(_this$consumptionHelp, 2), helpersAndItem = _this$consumptionHelp2[0], value = _this$consumptionHelp2[1];
      return valueWithout > valueWith + value ? [valueWithout, planWithout] : [valueWith + value, [].concat(_toConsumableArray12(planWith), [[helpersAndItem, 1]])];
    }
  }]);
  return DietPlanner2;
}();
var interactingItems = [[$item(_templateObject3410 || (_templateObject3410 = _taggedTemplateLiteral35(["spice melange"]))), [["food", -3], ["booze", -3]]], [$item(_templateObject357 || (_templateObject357 = _taggedTemplateLiteral35(["Ultra Mega Sour Ball"]))), [["food", -3], ["booze", -3]]], [$item(_templateObject366 || (_templateObject366 = _taggedTemplateLiteral35(["The Plumber's mushroom stew"]))), [["food", 3], ["booze", -1]]], [$item(_templateObject376 || (_templateObject376 = _taggedTemplateLiteral35(["The Mad Liquor"]))), [["food", -1], ["booze", 3]]], [$item(_templateObject385 || (_templateObject385 = _taggedTemplateLiteral35(["Doc Clock's thyme cocktail"]))), [["food", -2], ["booze", 4]]], [$item(_templateObject395 || (_templateObject395 = _taggedTemplateLiteral35(["Mr. Burnsger"]))), [["food", 4], ["booze", -2]]], [$effect(_templateObject405 || (_templateObject405 = _taggedTemplateLiteral35(["Refined Palate"]))), []], [$item(_templateObject4110 || (_templateObject4110 = _taggedTemplateLiteral35(["toasted brie"]))), [["food", 2]]], [$effect(_templateObject4210 || (_templateObject4210 = _taggedTemplateLiteral35(["Gar-ish"]))), []], [$item(_templateObject4310 || (_templateObject4310 = _taggedTemplateLiteral35(["potion of the field gar"]))), []]];
function planDiet(mpa, menu3) {
  var organCapacities = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [["food", null], ["booze", null], ["spleen item", null]];
  var resolvedOrganCapacities = organCapacities.map(function(_ref8) {
    var _ref9 = _slicedToArray14(_ref8, 2), organ = _ref9[0], size = _ref9[1];
    return [organ, size !== null && size !== void 0 ? size : organ === "food" ? (0, import_kolmafia40.fullnessLimit)() - (0, import_kolmafia40.myFullness)() : organ === "booze" ? (0, import_kolmafia40.inebrietyLimit)() - (0, import_kolmafia40.myInebriety)() : organ === "spleen item" ? (0, import_kolmafia40.spleenLimit)() - (0, import_kolmafia40.mySpleenUse)() : 0];
  });
  var includedInteractingItems = menu3.map(function(menuItem) {
    var interacting = interactingItems.find(function(_ref10) {
      var _ref11 = _slicedToArray14(_ref10, 1), itemOrEffect = _ref11[0];
      return menuItem.item === itemOrEffect || menuItem.item === $item(_templateObject445 || (_templateObject445 = _taggedTemplateLiteral35(["pocket wish"]))) && menuItem.effect === itemOrEffect;
    });
    if (interacting) {
      var _interacting = _slicedToArray14(interacting, 2), organSizes = _interacting[1];
      return [menuItem, organSizes];
    } else {
      return null;
    }
  }).filter(function(value) {
    return value !== null;
  });
  var dietPlanner = new DietPlanner(mpa, menu3.filter(function(menuItem) {
    return !includedInteractingItems.some(function(_ref12) {
      var _ref13 = _slicedToArray14(_ref12, 1), interacting = _ref13[0];
      return interacting === menuItem;
    });
  }));
  var _dietPlanner$planOrga = dietPlanner.planOrgansWithTrials(resolvedOrganCapacities.filter(function(_ref14) {
    var _ref15 = _slicedToArray14(_ref14, 2), organ = _ref15[0], capacity = _ref15[1];
    return ["food", "booze"].includes(organ) && capacity >= 0;
  }), includedInteractingItems, {}), _dietPlanner$planOrga2 = _slicedToArray14(_dietPlanner$planOrga, 2), planFoodBooze = _dietPlanner$planOrga2[1];
  var spleenCapacity = resolvedOrganCapacities.find(function(_ref16) {
    var _ref17 = _slicedToArray14(_ref16, 1), organ = _ref17[0];
    return organ === "spleen item";
  });
  if (spleenCapacity) {
    var additionalSpleen = sum(planFoodBooze, function(_ref18) {
      var _ref19 = _slicedToArray14(_ref18, 2), items = _ref19[0], number = _ref19[1];
      return items.some(function(menuItem) {
        return $items(_templateObject455 || (_templateObject455 = _taggedTemplateLiteral35(["jar of fermented pickle juice, extra-greasy slider"]))).includes(menuItem.item);
      }) ? 5 * number : 0;
    });
    var _spleenCapacity = _slicedToArray14(spleenCapacity, 2), availableSpleen = _spleenCapacity[1];
    var _dietPlanner$planOrga3 = dietPlanner.planOrgan("spleen item", availableSpleen + additionalSpleen), _dietPlanner$planOrga4 = _slicedToArray14(_dietPlanner$planOrga3, 2), planSpleen = _dietPlanner$planOrga4[1];
    return [].concat(_toConsumableArray12(planFoodBooze), _toConsumableArray12(planSpleen));
  } else {
    return planFoodBooze;
  }
}
var DietEntry = /* @__PURE__ */ function() {
  function DietEntry2(menuItems, quantity) {
    _classCallCheck12(this, DietEntry2);
    _defineProperty14(this, "menuItems", void 0);
    _defineProperty14(this, "quantity", void 0);
    this.menuItems = menuItems;
    this.quantity = quantity;
  }
  _createClass12(DietEntry2, [{
    key: "target",
    value: function target() {
      return this.menuItems[this.menuItems.length - 1];
    }
  }, {
    key: "helpers",
    value: function helpers() {
      if (this.menuItems.length > 1) {
        return this.menuItems.slice(0, -1);
      }
      return [];
    }
  }, {
    key: "expectedAdventures",
    value: function expectedAdventures(diet) {
      {
        if (this.menuItems.length === 0 || this.quantity === 0) {
          return 0;
        } else {
          var items = this.menuItems.map(function(m) {
            return m.item;
          });
          var targetItem = this.menuItems[this.menuItems.length - 1].item;
          var fork = (0, import_kolmafia40.itemType)(targetItem) === "food" && items.includes($item(_templateObject465 || (_templateObject465 = _taggedTemplateLiteral35(["Ol' Scratch's salad fork"]))));
          var mug = (0, import_kolmafia40.itemType)(targetItem) === "booze" && items.includes($item(_templateObject475 || (_templateObject475 = _taggedTemplateLiteral35(["Frosty's frosty mug"]))));
          return this.quantity * _expectedAdventures(this.menuItems[this.menuItems.length - 1].item, {
            forkMug: fork || mug,
            seasoning: items.includes($item(_templateObject485 || (_templateObject485 = _taggedTemplateLiteral35(["Special Seasoning"])))),
            mayoflex: items.includes(Mayo.flex),
            refinedPalate: diet.refinedPalate,
            garish: diet.garish,
            saucemaven: diet.saucemaven,
            pinkyRing: diet.pinkyRing,
            tuxedoShirt: diet.tuxedoShirt
          });
        }
      }
    }
  }, {
    key: "expectedValue",
    value: function expectedValue(mpa, diet) {
      var method = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "gross";
      var gross = mpa * this.expectedAdventures(diet) + this.quantity * sum(this.menuItems, function(menuItem) {
        var _menuItem$additionalV3;
        return (_menuItem$additionalV3 = menuItem.additionalValue) !== null && _menuItem$additionalV3 !== void 0 ? _menuItem$additionalV3 : 0;
      });
      if (method === "gross") {
        return gross;
      } else {
        return gross - this.expectedPrice();
      }
    }
  }, {
    key: "expectedPrice",
    value: function expectedPrice() {
      return this.quantity * sum(this.menuItems, function(menuItem) {
        return menuItem.price();
      });
    }
  }]);
  return DietEntry2;
}();
var Diet = /* @__PURE__ */ function() {
  function Diet2() {
    var entries = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
    _classCallCheck12(this, Diet2);
    _defineProperty14(this, "entries", void 0);
    this.entries = entries;
  }
  _createClass12(Diet2, [{
    key: "refinedPalate",
    get: function get4() {
      return this.entries.some(function(dietEntry) {
        return dietEntry.menuItems.some(function(trialItem) {
          return trialItem.item === $item(_templateObject495 || (_templateObject495 = _taggedTemplateLiteral35(["pocket wish"]))) && trialItem.effect === $effect(_templateObject505 || (_templateObject505 = _taggedTemplateLiteral35(["Refined Palate"]))) || trialItem.item === $item(_templateObject5110 || (_templateObject5110 = _taggedTemplateLiteral35(["toasted brie"])));
        });
      });
    }
  }, {
    key: "garish",
    get: function get4() {
      return this.entries.some(function(dietEntry) {
        return dietEntry.menuItems.some(function(trialItem) {
          return trialItem.item === $item(_templateObject5210 || (_templateObject5210 = _taggedTemplateLiteral35(["pocket wish"]))) && trialItem.effect === $effect(_templateObject537 || (_templateObject537 = _taggedTemplateLiteral35(["Gar-ish"]))) || trialItem.item === $item(_templateObject545 || (_templateObject545 = _taggedTemplateLiteral35(["potion of the field gar"])));
        });
      });
    }
  }, {
    key: "saucemaven",
    get: function get4() {
      return have($skill(_templateObject555 || (_templateObject555 = _taggedTemplateLiteral35(["Saucemaven"]))));
    }
  }, {
    key: "tuxedoShirt",
    get: function get4() {
      return have($item(_templateObject565 || (_templateObject565 = _taggedTemplateLiteral35(["tuxedo shirt"])))) && (0, import_kolmafia40.canEquip)($item(_templateObject574 || (_templateObject574 = _taggedTemplateLiteral35(["tuxedo shirt"]))));
    }
  }, {
    key: "pinkyRing",
    get: function get4() {
      return have($item(_templateObject584 || (_templateObject584 = _taggedTemplateLiteral35(["mafia pinky ring"])))) && (0, import_kolmafia40.canEquip)($item(_templateObject594 || (_templateObject594 = _taggedTemplateLiteral35(["mafia pinky ring"]))));
    }
  }, {
    key: "expectedAdventures",
    value: function expectedAdventures() {
      var _this = this;
      return sum(this.entries, function(dietEntry) {
        return dietEntry.expectedAdventures(_this);
      });
    }
  }, {
    key: "expectedValue",
    value: function expectedValue(mpa) {
      var _this = this;
      var method = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "gross";
      return sum(this.entries, function(dietEntry) {
        return dietEntry.expectedValue(mpa, _this, method);
      });
    }
  }, {
    key: "expectedPrice",
    value: function expectedPrice() {
      return sum(this.entries, function(dietEntry) {
        return dietEntry.expectedPrice();
      });
    }
  }, {
    key: "copy",
    value: function copy() {
      return new Diet2(_toConsumableArray12(this.entries));
    }
  }], [{
    key: "from",
    value: function from(rawDiet) {
      var diet = rawDiet.map(function(item9) {
        var _item = _slicedToArray14(item9, 2), menuItems = _item[0], quantity = _item[1];
        return new DietEntry(menuItems, quantity);
      });
      return new Diet2(diet);
    }
  }, {
    key: "plan",
    value: function plan(mpa, menu3) {
      var organCapacities = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {
        food: "auto",
        booze: "auto",
        spleen: "auto"
      };
      var food = organCapacities.food, booze = organCapacities.booze, spleen = organCapacities.spleen;
      var plannerCapacity = [];
      if (food) {
        plannerCapacity.push(["food", food === "auto" ? null : food]);
      }
      if (booze) {
        plannerCapacity.push(["booze", booze === "auto" ? null : booze]);
      }
      if (spleen) {
        plannerCapacity.push(["spleen item", spleen === "auto" ? null : spleen]);
      }
      return Diet2.from(planDiet(mpa, menu3, plannerCapacity));
    }
  }]);
  return Diet2;
}();

// node_modules/libram/dist/mood.js
var import_kolmafia41 = require("kolmafia");
var _templateObject290;
var _templateObject291;
var _templateObject358;
var _templateObject441;
var _templateObject538;
var _templateObject634;
var _templateObject730;
var _templateObject826;
var _templateObject923;
var _templateObject1019;
function ownKeys7(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread7(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys7(Object(source), true).forEach(function(key) {
      _defineProperty15(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys7(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _createForOfIteratorHelper10(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray23(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray23(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray23(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray23(o, minLen);
}
function _arrayLikeToArray23(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral36(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _inherits4(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf4(subClass, superClass);
}
function _setPrototypeOf4(o, p) {
  _setPrototypeOf4 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf4(o, p);
}
function _createSuper3(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct3();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf3(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf3(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn3(this, result);
  };
}
function _possibleConstructorReturn3(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized3(self2);
}
function _assertThisInitialized3(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _isNativeReflectConstruct3() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf3(o) {
  _getPrototypeOf3 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf3(o);
}
function _defineProperty15(obj, key, value) {
  key = _toPropertyKey16(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _classCallCheck13(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties13(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey16(descriptor.key), descriptor);
  }
}
function _createClass13(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties13(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties13(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey16(arg) {
  var key = _toPrimitive16(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive16(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var MpSource = /* @__PURE__ */ function() {
  function MpSource2() {
    _classCallCheck13(this, MpSource2);
  }
  _createClass13(MpSource2, [{
    key: "usesRemaining",
    value: function usesRemaining() {
      return 0;
    }
  }, {
    key: "availableMpMax",
    value: function availableMpMax() {
      return this.availableMpMin();
    }
  }]);
  return MpSource2;
}();
var OscusSoda = /* @__PURE__ */ function(_MpSource) {
  _inherits4(OscusSoda2, _MpSource);
  var _super = _createSuper3(OscusSoda2);
  function OscusSoda2() {
    _classCallCheck13(this, OscusSoda2);
    return _super.apply(this, arguments);
  }
  _createClass13(OscusSoda2, [{
    key: "available",
    value: function available3() {
      return have($item(_templateObject290 || (_templateObject290 = _taggedTemplateLiteral36(["Oscus's neverending soda"]))));
    }
  }, {
    key: "usesRemaining",
    value: function usesRemaining() {
      return get("oscusSodaUsed") ? 0 : 1;
    }
  }, {
    key: "availableMpMin",
    value: function availableMpMin() {
      return this.available() && this.usesRemaining() > 0 ? 200 : 0;
    }
  }, {
    key: "availableMpMax",
    value: function availableMpMax() {
      return this.available() && this.usesRemaining() > 0 ? 300 : 0;
    }
  }, {
    key: "execute",
    value: function execute() {
      (0, import_kolmafia41.use)($item(_templateObject291 || (_templateObject291 = _taggedTemplateLiteral36(["Oscus's neverending soda"]))));
    }
  }]);
  return OscusSoda2;
}(MpSource);
_defineProperty15(OscusSoda, "instance", new OscusSoda());
var MagicalSausages = /* @__PURE__ */ function(_MpSource2) {
  _inherits4(MagicalSausages2, _MpSource2);
  var _super2 = _createSuper3(MagicalSausages2);
  function MagicalSausages2() {
    _classCallCheck13(this, MagicalSausages2);
    return _super2.apply(this, arguments);
  }
  _createClass13(MagicalSausages2, [{
    key: "available",
    value: function available3() {
      return have($item(_templateObject358 || (_templateObject358 = _taggedTemplateLiteral36(["Kramco Sausage-o-Matic\u2122"]))));
    }
  }, {
    key: "usesRemaining",
    value: function usesRemaining() {
      var maxSausages = (0, import_kolmafia41.availableAmount)($item(_templateObject441 || (_templateObject441 = _taggedTemplateLiteral36(["magical sausage"])))) + (0, import_kolmafia41.availableAmount)($item(_templateObject538 || (_templateObject538 = _taggedTemplateLiteral36(["magical sausage casing"]))));
      return this.available() ? clamp(23 - get("_sausagesEaten"), 0, maxSausages) : 0;
    }
  }, {
    key: "availableMpMin",
    value: function availableMpMin() {
      return this.available() ? Math.min((0, import_kolmafia41.myMaxmp)(), 999) * this.usesRemaining() : 0;
    }
  }, {
    key: "execute",
    value: function execute() {
      var mpSpaceAvailable = (0, import_kolmafia41.myMaxmp)() - (0, import_kolmafia41.myMp)();
      if (mpSpaceAvailable < 700)
        return;
      var maxSausages = Math.min(this.usesRemaining(), Math.floor(((0, import_kolmafia41.myMaxmp)() - (0, import_kolmafia41.myMp)()) / Math.min((0, import_kolmafia41.myMaxmp)() - (0, import_kolmafia41.myMp)(), 999)));
      (0, import_kolmafia41.retrieveItem)(maxSausages, $item(_templateObject634 || (_templateObject634 = _taggedTemplateLiteral36(["magical sausage"]))));
      (0, import_kolmafia41.eat)(maxSausages, $item(_templateObject730 || (_templateObject730 = _taggedTemplateLiteral36(["magical sausage"]))));
    }
  }]);
  return MagicalSausages2;
}(MpSource);
_defineProperty15(MagicalSausages, "instance", new MagicalSausages());
var MoodElement = /* @__PURE__ */ function() {
  function MoodElement2() {
    _classCallCheck13(this, MoodElement2);
  }
  _createClass13(MoodElement2, [{
    key: "mpCostPerTurn",
    value: function mpCostPerTurn() {
      return 0;
    }
  }, {
    key: "turnIncrement",
    value: function turnIncrement() {
      return 1;
    }
  }]);
  return MoodElement2;
}();
var SkillMoodElement = /* @__PURE__ */ function(_MoodElement) {
  _inherits4(SkillMoodElement2, _MoodElement);
  var _super3 = _createSuper3(SkillMoodElement2);
  function SkillMoodElement2(skill) {
    var _this;
    _classCallCheck13(this, SkillMoodElement2);
    _this = _super3.call(this);
    _defineProperty15(_assertThisInitialized3(_this), "skill", void 0);
    _this.skill = skill;
    return _this;
  }
  _createClass13(SkillMoodElement2, [{
    key: "mpCostPerTurn",
    value: function mpCostPerTurn() {
      var turns2 = (0, import_kolmafia41.turnsPerCast)(this.skill);
      return turns2 > 0 ? (0, import_kolmafia41.mpCost)(this.skill) / turns2 : 0;
    }
  }, {
    key: "turnIncrement",
    value: function turnIncrement() {
      return (0, import_kolmafia41.turnsPerCast)(this.skill);
    }
  }, {
    key: "execute",
    value: function execute(mood, ensureTurns) {
      var effect2 = (0, import_kolmafia41.toEffect)(this.skill);
      var initialTurns = (0, import_kolmafia41.haveEffect)(effect2);
      if (!(0, import_kolmafia41.haveSkill)(this.skill))
        return false;
      if (initialTurns >= ensureTurns)
        return true;
      if (mood.options.songSlots.length > 0 && isSong(this.skill) && !have(effect2)) {
        var activeSongs = getActiveSongs();
        var _iterator = _createForOfIteratorHelper10(activeSongs), _step;
        try {
          var _loop = function _loop2() {
            var song2 = _step.value;
            var slot = mood.options.songSlots.find(function(slot2) {
              return slot2.includes(song2);
            });
            if (!slot || slot.includes(effect2)) {
              (0, import_kolmafia41.cliExecute)("shrug ".concat(song2));
              return "break";
            }
          };
          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
            var _ret = _loop();
            if (_ret === "break")
              break;
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      var oldRemainingCasts = -1;
      var remainingCasts = Math.ceil((ensureTurns - (0, import_kolmafia41.haveEffect)(effect2)) / (0, import_kolmafia41.turnsPerCast)(this.skill));
      while (remainingCasts > 0 && oldRemainingCasts !== remainingCasts) {
        var maxCasts = void 0;
        if ((0, import_kolmafia41.hpCost)(this.skill) > 0) {
          maxCasts = Math.max(0, Math.floor(((0, import_kolmafia41.myHp)() - 1) / (0, import_kolmafia41.hpCost)(this.skill)));
        } else {
          var cost = (0, import_kolmafia41.mpCost)(this.skill);
          maxCasts = Math.floor(Math.min(mood.availableMp(), (0, import_kolmafia41.myMp)()) / cost);
          if (maxCasts < remainingCasts) {
            var bestMp = Math.min(remainingCasts * (0, import_kolmafia41.mpCost)(this.skill), (0, import_kolmafia41.myMaxmp)());
            mood.moreMp(bestMp);
            maxCasts = Math.floor(Math.min(mood.availableMp(), (0, import_kolmafia41.myMp)()) / cost);
          }
        }
        var casts = clamp(remainingCasts, 0, Math.min(100, maxCasts));
        (0, import_kolmafia41.useSkill)(casts, this.skill);
        oldRemainingCasts = remainingCasts;
        remainingCasts = Math.ceil((ensureTurns - (0, import_kolmafia41.haveEffect)(effect2)) / (0, import_kolmafia41.turnsPerCast)(this.skill));
      }
      return (0, import_kolmafia41.haveEffect)(effect2) > ensureTurns;
    }
  }]);
  return SkillMoodElement2;
}(MoodElement);
var PotionMoodElement = /* @__PURE__ */ function(_MoodElement2) {
  _inherits4(PotionMoodElement2, _MoodElement2);
  var _super4 = _createSuper3(PotionMoodElement2);
  function PotionMoodElement2(potion, maxPricePerTurn) {
    var _this2;
    _classCallCheck13(this, PotionMoodElement2);
    _this2 = _super4.call(this);
    _defineProperty15(_assertThisInitialized3(_this2), "potion", void 0);
    _defineProperty15(_assertThisInitialized3(_this2), "maxPricePerTurn", void 0);
    _this2.potion = potion;
    _this2.maxPricePerTurn = maxPricePerTurn;
    return _this2;
  }
  _createClass13(PotionMoodElement2, [{
    key: "execute",
    value: function execute(mood, ensureTurns) {
      var effect2 = (0, import_kolmafia41.effectModifier)(this.potion, "Effect");
      var effectTurns = (0, import_kolmafia41.haveEffect)(effect2);
      var turnsPerUse = (0, import_kolmafia41.numericModifier)(this.potion, "Effect Duration");
      if ((0, import_kolmafia41.mallPrice)(this.potion) > this.maxPricePerTurn * turnsPerUse) {
        return false;
      }
      if (effectTurns < ensureTurns) {
        var uses = Math.floor((ensureTurns - effectTurns) / turnsPerUse);
        var quantityToBuy = clamp(uses - (0, import_kolmafia41.availableAmount)(this.potion), 0, 100);
        (0, import_kolmafia41.buy)(quantityToBuy, this.potion, Math.floor(this.maxPricePerTurn * turnsPerUse));
        var quantityToUse = clamp(uses, 0, (0, import_kolmafia41.availableAmount)(this.potion));
        (0, import_kolmafia41.use)(quantityToUse, this.potion);
      }
      var remainingDifference = ensureTurns - (0, import_kolmafia41.haveEffect)(effect2);
      if (remainingDifference > 0) {
        var price2 = Math.floor(this.maxPricePerTurn * remainingDifference);
        if (price2 <= (0, import_kolmafia41.mallPrice)(this.potion)) {
          if ((0, import_kolmafia41.availableAmount)(this.potion) || (0, import_kolmafia41.buy)(1, this.potion, price2)) {
            (0, import_kolmafia41.use)(1, this.potion);
          }
        }
      }
      return (0, import_kolmafia41.haveEffect)(effect2) >= ensureTurns;
    }
  }]);
  return PotionMoodElement2;
}(MoodElement);
var GenieMoodElement = /* @__PURE__ */ function(_MoodElement3) {
  _inherits4(GenieMoodElement2, _MoodElement3);
  var _super5 = _createSuper3(GenieMoodElement2);
  function GenieMoodElement2(effect2) {
    var _this3;
    _classCallCheck13(this, GenieMoodElement2);
    _this3 = _super5.call(this);
    _defineProperty15(_assertThisInitialized3(_this3), "effect", void 0);
    _this3.effect = effect2;
    return _this3;
  }
  _createClass13(GenieMoodElement2, [{
    key: "execute",
    value: function execute(mood, ensureTurns) {
      if ((0, import_kolmafia41.haveEffect)(this.effect) >= ensureTurns)
        return true;
      var neededWishes = Math.ceil(((0, import_kolmafia41.haveEffect)(this.effect) - ensureTurns) / 20);
      var wishesToBuy = clamp(neededWishes - (0, import_kolmafia41.availableAmount)($item(_templateObject826 || (_templateObject826 = _taggedTemplateLiteral36(["pocket wish"])))), 0, 20);
      (0, import_kolmafia41.buy)(wishesToBuy, $item(_templateObject923 || (_templateObject923 = _taggedTemplateLiteral36(["pocket wish"]))), 5e4);
      var wishesToUse = clamp(neededWishes, 0, (0, import_kolmafia41.availableAmount)($item(_templateObject1019 || (_templateObject1019 = _taggedTemplateLiteral36(["pocket wish"])))));
      for (; wishesToUse > 0; wishesToUse--) {
        (0, import_kolmafia41.cliExecute)("genie effect ".concat(this.effect.name));
      }
      return (0, import_kolmafia41.haveEffect)(this.effect) >= ensureTurns;
    }
  }]);
  return GenieMoodElement2;
}(MoodElement);
var CustomMoodElement = /* @__PURE__ */ function(_MoodElement4) {
  _inherits4(CustomMoodElement2, _MoodElement4);
  var _super6 = _createSuper3(CustomMoodElement2);
  function CustomMoodElement2(effect2, gainEffect) {
    var _this4;
    _classCallCheck13(this, CustomMoodElement2);
    _this4 = _super6.call(this);
    _defineProperty15(_assertThisInitialized3(_this4), "effect", void 0);
    _defineProperty15(_assertThisInitialized3(_this4), "gainEffect", void 0);
    _this4.effect = effect2;
    _this4.gainEffect = gainEffect !== null && gainEffect !== void 0 ? gainEffect : function() {
      return (0, import_kolmafia41.cliExecute)(effect2.default);
    };
    return _this4;
  }
  _createClass13(CustomMoodElement2, [{
    key: "execute",
    value: function execute(mood, ensureTurns) {
      var currentTurns = (0, import_kolmafia41.haveEffect)(this.effect);
      var lastCurrentTurns = -1;
      while (currentTurns < ensureTurns && currentTurns !== lastCurrentTurns) {
        this.gainEffect();
        lastCurrentTurns = currentTurns;
        currentTurns = (0, import_kolmafia41.haveEffect)(this.effect);
      }
      return (0, import_kolmafia41.haveEffect)(this.effect) > ensureTurns;
    }
  }]);
  return CustomMoodElement2;
}(MoodElement);
var AsdonMoodElement = /* @__PURE__ */ function(_MoodElement5) {
  _inherits4(AsdonMoodElement2, _MoodElement5);
  var _super7 = _createSuper3(AsdonMoodElement2);
  function AsdonMoodElement2(effect2) {
    var _this5;
    var preferInventory = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
    _classCallCheck13(this, AsdonMoodElement2);
    _this5 = _super7.call(this);
    _defineProperty15(_assertThisInitialized3(_this5), "effect", void 0);
    _defineProperty15(_assertThisInitialized3(_this5), "preferInventory", void 0);
    _this5.effect = effect2;
    _this5.preferInventory = preferInventory;
    return _this5;
  }
  _createClass13(AsdonMoodElement2, [{
    key: "execute",
    value: function execute(mood, ensureTurns) {
      return AsdonMartin_exports.drive(this.effect, ensureTurns, this.preferInventory);
    }
  }]);
  return AsdonMoodElement2;
}(MoodElement);
var Mood = /* @__PURE__ */ function() {
  function Mood2() {
    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    _classCallCheck13(this, Mood2);
    _defineProperty15(this, "options", void 0);
    _defineProperty15(this, "elements", []);
    this.options = _objectSpread7(_objectSpread7({}, Mood2.defaultOptions), options);
  }
  _createClass13(Mood2, [{
    key: "availableMp",
    value: function availableMp() {
      return this.options.useNativeRestores ? Infinity : sum(this.options.mpSources, function(mpSource) {
        return mpSource.availableMpMin();
      }) + Math.max((0, import_kolmafia41.myMp)() - this.options.reserveMp, 0);
    }
  }, {
    key: "moreMp",
    value: function moreMp(minimumTarget) {
      if ((0, import_kolmafia41.myMp)() >= minimumTarget)
        return;
      var _iterator2 = _createForOfIteratorHelper10(this.options.mpSources), _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          var mpSource = _step2.value;
          if (mpSource.usesRemaining() > 0) {
            mpSource.execute();
            if ((0, import_kolmafia41.myMp)() >= minimumTarget)
              break;
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (this.options.useNativeRestores) {
        (0, import_kolmafia41.restoreMp)(minimumTarget);
      }
    }
    /**
     * Add a skill to the mood.
     *
     * @param skill Skill to add.
     * @returns This mood to enable chaining
     */
  }, {
    key: "skill",
    value: function skill(_skill) {
      this.elements.push(new SkillMoodElement(_skill));
      return this;
    }
    /**
     * Add an effect to the mood, with casting based on {effect.default}.
     *
     * @param effect Effect to add.
     * @param gainEffect How to gain the effect. Only runs if we don't have the effect.
     * @returns This mood to enable chaining
     */
  }, {
    key: "effect",
    value: function effect2(_effect, gainEffect) {
      var skill = (0, import_kolmafia41.toSkill)(_effect);
      if (!gainEffect && skill !== $skill.none) {
        this.skill(skill);
      } else {
        this.elements.push(new CustomMoodElement(_effect, gainEffect));
      }
      return this;
    }
    /**
     * Add a potion to the mood.
     *
     * @param potion Potion to add.
     * @param maxPricePerTurn Maximum price to pay per turn of the effect.
     * @returns This mood to enable chaining
     */
  }, {
    key: "potion",
    value: function potion(_potion, maxPricePerTurn) {
      this.elements.push(new PotionMoodElement(_potion, maxPricePerTurn));
      return this;
    }
    /**
     * Add an effect to acquire via pocket wishes to the mood.
     *
     * @param effect Effect to wish for in the mood.
     * @returns This mood to enable chaining
     */
  }, {
    key: "genie",
    value: function genie(effect2) {
      this.elements.push(new GenieMoodElement(effect2));
      return this;
    }
    /**
     * Add an Asdon Martin driving style to the mood.
     *
     * @param effect Driving style to add to the mood.
     * @returns This mood to enable chaining
     */
  }, {
    key: "drive",
    value: function drive2(effect2) {
      if (Object.values(AsdonMartin_exports.Driving).includes(effect2) && AsdonMartin_exports.installed()) {
        this.elements.push(new AsdonMoodElement(effect2));
      }
      return this;
    }
    /**
     * Execute the mood, trying to ensure {ensureTurns} of each effect.
     *
     * @param ensureTurns Turns of each effect to try and achieve.
     * @returns Whether or not we successfully got this many turns of every effect in the mood.
     */
  }, {
    key: "execute",
    value: function execute() {
      var ensureTurns = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;
      var availableMp = this.availableMp();
      var totalMpPerTurn = sum(this.elements, function(element2) {
        return element2.mpCostPerTurn();
      });
      var potentialTurns = Math.floor(availableMp / totalMpPerTurn);
      var completeSuccess = true;
      var _iterator3 = _createForOfIteratorHelper10(this.elements), _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
          var element = _step3.value;
          var elementTurns = ensureTurns;
          if (element.mpCostPerTurn() > 0) {
            var elementPotentialTurns = Math.floor(potentialTurns / element.turnIncrement()) * element.turnIncrement();
            elementTurns = Math.min(ensureTurns, elementPotentialTurns);
          }
          completeSuccess = element.execute(this, elementTurns) && completeSuccess;
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this.moreMp(this.options.reserveMp);
      return completeSuccess;
    }
  }], [{
    key: "setDefaultOptions",
    value: (
      /**
       * Set default options for new Mood instances.
       *
       * @param options Default options for new Mood instances.
       */
      function setDefaultOptions(options) {
        Mood2.defaultOptions = _objectSpread7(_objectSpread7({}, Mood2.defaultOptions), options);
      }
    )
  }]);
  return Mood2;
}();
_defineProperty15(Mood, "defaultOptions", {
  songSlots: [],
  mpSources: [MagicalSausages.instance, OscusSoda.instance],
  reserveMp: 0,
  useNativeRestores: false
});

// node_modules/libram/dist/since.js
var import_kolmafia42 = require("kolmafia");
function _defineProperties14(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey17(descriptor.key), descriptor);
  }
}
function _createClass14(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties14(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties14(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey17(arg) {
  var key = _toPrimitive17(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive17(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _classCallCheck14(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _inherits5(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf5(subClass, superClass);
}
function _createSuper4(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct4();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf4(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf4(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn4(this, result);
  };
}
function _possibleConstructorReturn4(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized4(self2);
}
function _assertThisInitialized4(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _wrapNativeSuper3(Class5) {
  var _cache = typeof Map === "function" ? /* @__PURE__ */ new Map() : void 0;
  _wrapNativeSuper3 = function _wrapNativeSuper4(Class6) {
    if (Class6 === null || !_isNativeFunction3(Class6))
      return Class6;
    if (typeof Class6 !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }
    if (typeof _cache !== "undefined") {
      if (_cache.has(Class6))
        return _cache.get(Class6);
      _cache.set(Class6, Wrapper);
    }
    function Wrapper() {
      return _construct3(Class6, arguments, _getPrototypeOf4(this).constructor);
    }
    Wrapper.prototype = Object.create(Class6.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } });
    return _setPrototypeOf5(Wrapper, Class6);
  };
  return _wrapNativeSuper3(Class5);
}
function _construct3(Parent, args, Class5) {
  if (_isNativeReflectConstruct4()) {
    _construct3 = Reflect.construct.bind();
  } else {
    _construct3 = function _construct4(Parent2, args2, Class6) {
      var a = [null];
      a.push.apply(a, args2);
      var Constructor = Function.bind.apply(Parent2, a);
      var instance = new Constructor();
      if (Class6)
        _setPrototypeOf5(instance, Class6.prototype);
      return instance;
    };
  }
  return _construct3.apply(null, arguments);
}
function _isNativeReflectConstruct4() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _isNativeFunction3(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}
function _setPrototypeOf5(o, p) {
  _setPrototypeOf5 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf5(o, p);
}
function _getPrototypeOf4(o) {
  _getPrototypeOf4 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf4(o);
}
var KolmafiaVersionError = /* @__PURE__ */ function(_Error) {
  _inherits5(KolmafiaVersionError2, _Error);
  var _super = _createSuper4(KolmafiaVersionError2);
  function KolmafiaVersionError2(message) {
    var _this;
    _classCallCheck14(this, KolmafiaVersionError2);
    _this = _super.call(this, message);
    Object.setPrototypeOf(_assertThisInitialized4(_this), KolmafiaVersionError2.prototype);
    return _this;
  }
  return _createClass14(KolmafiaVersionError2);
}(/* @__PURE__ */ _wrapNativeSuper3(Error));
KolmafiaVersionError.prototype.name = "KolmafiaVersionError";
function getScriptName() {
  var _require$main;
  var scriptName = (_require$main = require.main) === null || _require$main === void 0 ? void 0 : _require$main.id;
  return scriptName ? "'".concat(scriptName, "'") : "This script";
}
function sinceKolmafiaRevision(revision) {
  if (!Number.isInteger(revision)) {
    throw new TypeError("Invalid revision number ".concat(revision, " (must be an integer)"));
  }
  var currentRevision = (0, import_kolmafia42.getRevision)();
  if (currentRevision > 0 && currentRevision < revision) {
    throw new KolmafiaVersionError("".concat(getScriptName(), " requires revision r").concat(revision, " of kolmafia or higher (current: ").concat((0, import_kolmafia42.getRevision)(), "). Up-to-date builds can be found at https://ci.kolmafia.us/."));
  }
}

// node_modules/libram/dist/Kmail.js
var import_kolmafia43 = require("kolmafia");
function _createForOfIteratorHelper11(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray24(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray13(arr) {
  return _arrayWithoutHoles13(arr) || _iterableToArray13(arr) || _unsupportedIterableToArray24(arr) || _nonIterableSpread13();
}
function _nonIterableSpread13() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray13(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles13(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray24(arr);
}
function _slicedToArray15(arr, i) {
  return _arrayWithHoles15(arr) || _iterableToArrayLimit15(arr, i) || _unsupportedIterableToArray24(arr, i) || _nonIterableRest15();
}
function _nonIterableRest15() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray24(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray24(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray24(o, minLen);
}
function _arrayLikeToArray24(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit15(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles15(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _classCallCheck15(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties15(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey18(descriptor.key), descriptor);
  }
}
function _createClass15(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties15(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties15(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty16(obj, key, value) {
  key = _toPropertyKey18(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey18(arg) {
  var key = _toPrimitive18(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive18(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var Kmail = /* @__PURE__ */ function() {
  function Kmail2(rawKmail) {
    _classCallCheck15(this, Kmail2);
    _defineProperty16(this, "id", void 0);
    _defineProperty16(this, "date", void 0);
    _defineProperty16(this, "type", void 0);
    _defineProperty16(this, "senderId", void 0);
    _defineProperty16(this, "senderName", void 0);
    _defineProperty16(this, "rawMessage", void 0);
    var date = new Date(rawKmail.localtime);
    date.setFullYear(date.getFullYear() + 100);
    this.id = Number(rawKmail.id);
    this.date = date;
    this.type = rawKmail.type;
    this.senderId = Number(rawKmail.fromid);
    this.senderName = rawKmail.fromname;
    this.rawMessage = rawKmail.message;
  }
  _createClass15(Kmail2, [{
    key: "delete",
    value: function _delete() {
      return Kmail2.delete([this]) === 1;
    }
    /**
     * Get message contents without any HTML from items or meat
     *
     * @returns Cleaned message contents
     */
  }, {
    key: "message",
    get: function get4() {
      var match = this.rawMessage.match(/^([\s\S]*?)</);
      return match ? match[1] : this.rawMessage;
    }
    /**
     * Get items attached to the kmail
     *
     * @returns Map of items attached to the kmail and their quantities
     */
  }, {
    key: "items",
    value: function items() {
      return new Map(Object.entries((0, import_kolmafia43.extractItems)(this.rawMessage)).map(function(_ref) {
        var _ref2 = _slicedToArray15(_ref, 2), itemName = _ref2[0], quantity = _ref2[1];
        return [import_kolmafia43.Item.get(itemName), quantity];
      }));
    }
    /**
     * Get meat attached to the kmail
     *
     * @returns Meat attached to the kmail
     */
  }, {
    key: "meat",
    value: function meat() {
      return (0, import_kolmafia43.extractMeat)(this.rawMessage);
    }
    /**
     * Reply to kmail
     *
     * @param message Message with which to reply
     * @param items Items to send
     * @param meat Meat to send
     * @see Kmail.send
     * @returns True if the kmail was successfully sent
     */
  }, {
    key: "reply",
    value: function reply() {
      var message = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
      var items = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
      var meat = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
      return Kmail2.send(this.senderId, message, items, meat);
    }
  }], [{
    key: "parse",
    value: (
      /**
       * Parses a kmail from KoL's native format
       *
       * @param rawKmail Kmail in the format supplies by api.php
       * @returns Parsed kmail
       */
      function parse(rawKmail) {
        return new Kmail2(rawKmail);
      }
    )
    /**
     * Returns all of the player's kmails
     *
     * @param count Number of kmails to fetch
     * @returns Parsed kmails
     */
  }, {
    key: "inbox",
    value: function inbox() {
      var count = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 100;
      return JSON.parse((0, import_kolmafia43.visitUrl)("api.php?what=kmail&for=libram&count=".concat(count))).map(Kmail2.parse);
    }
    /**
     * Bulk delete kmails
     *
     * @param kmails Kmails to delete
     * @returns Number of kmails deleted
     */
  }, {
    key: "delete",
    value: function _delete(kmails) {
      var _results$match$, _results$match;
      var results = (0, import_kolmafia43.visitUrl)("messages.php?the_action=delete&box=Inbox&pwd&".concat(kmails.map(function(k) {
        return "sel".concat(k.id, "=on");
      }).join("&")));
      return Number((_results$match$ = (_results$match = results.match(/<td>(\d) messages? deleted.<\/td>/)) === null || _results$match === void 0 ? void 0 : _results$match[1]) !== null && _results$match$ !== void 0 ? _results$match$ : 0);
    }
  }, {
    key: "_genericSend",
    value: function _genericSend(to, message, items, meat, chunkSize, constructUrl, successString) {
      var m = meat;
      var sendableItems = _toConsumableArray13(arrayToCountedMap(items).entries()).filter(function(_ref3) {
        var _ref4 = _slicedToArray15(_ref3, 1), item9 = _ref4[0];
        return (0, import_kolmafia43.isGiftable)(item9);
      });
      var result = true;
      var chunks = chunk(sendableItems, chunkSize);
      var _iterator = _createForOfIteratorHelper11(chunks.length > 0 ? chunks : [null]), _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done; ) {
          var c = _step.value;
          var itemsQuery = c === null ? [] : c.map(function(_ref5, index) {
            var _ref6 = _slicedToArray15(_ref5, 2), item9 = _ref6[0], quantity = _ref6[1];
            return "whichitem".concat(index + 1, "=").concat(item9.id, "&howmany").concat(index + 1, "=").concat(quantity);
          });
          var r = (0, import_kolmafia43.visitUrl)(constructUrl(m, itemsQuery.join("&"), itemsQuery.length));
          if (r.includes("That player cannot receive Meat or items")) {
            return Kmail2.gift(to, message, items, meat);
          }
          m = 0;
          result && (result = r.includes(successString));
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return result;
    }
    /**
     * Sends a kmail to a player
     *
     * Sends multiple kmails if more than 11 unique item types are attached.
     * Ignores any ungiftable items.
     * Sends a gift package to players in run
     *
     * @param to The player name or id to receive the kmail
     * @param message The text contents of the message
     * @param items The items to be attached
     * @param meat The quantity of meat to be attached
     * @returns True if the kmail was successfully sent
     */
  }, {
    key: "send",
    value: function send(to) {
      var message = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
      var items = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
      var meat = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;
      return Kmail2._genericSend(to, message, items, meat, 11, function(meat2, itemsQuery) {
        return "sendmessage.php?action=send&pwd&towho=".concat(to, "&message=").concat(message).concat(itemsQuery ? "&".concat(itemsQuery) : "", "&sendmeat=").concat(meat2);
      }, ">Message sent.</");
    }
    /**
     * Sends a gift to a player
     *
     * Sends multiple kmails if more than 3 unique item types are attached.
     * Ignores any ungiftable items.
     *
     * @param to The player name or id to receive the gift
     * @param message Message to send
     * @param items The items to be attached
     * @param meat The quantity of meat to be attached
     * @param insideNote The note on the inside of the gift
     * @returns True if the gift was successfully sent
     */
  }, {
    key: "gift",
    value: function gift(to) {
      var message = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
      var items = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
      var meat = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;
      var insideNote = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "";
      var baseUrl = "town_sendgift.php?action=Yep.&pwd&fromwhere=0&note=".concat(message, "&insidenote=").concat(insideNote, "&towho=").concat(to);
      return Kmail2._genericSend(to, message, items, meat, 3, function(m, itemsQuery, chunkSize) {
        return "".concat(baseUrl, "&whichpackage=").concat(chunkSize).concat(itemsQuery ? "&".concat(itemsQuery) : "", "&sendmeat=").concat(m);
      }, ">Package sent.</");
    }
  }]);
  return Kmail2;
}();

// node_modules/libram/dist/session.js
var import_kolmafia44 = require("kolmafia");
var _templateObject298;
var _templateObject299;
var _templateObject359;
var _templateObject446;
var _templateObject539;
var _templateObject635;
var _templateObject731;
var _templateObject827;
var _templateObject924;
var _templateObject1020;
var _templateObject1116;
var _templateObject1215;
var _templateObject1315;
var _templateObject1413;
var _templateObject1511;
var _templateObject1611;
var _templateObject1711;
var _templateObject1811;
var _templateObject1911;
var _templateObject2011;
var _templateObject2116;
var _templateObject2212;
var _templateObject2311;
var _templateObject2411;
var _templateObject2511;
var _templateObject2611;
var _templateObject2711;
var _templateObject2810;
var _templateObject2910;
var _templateObject308;
var _templateObject3112;
var _templateObject3211;
var _templateObject3311;
function _classCallCheck16(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties16(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey19(descriptor.key), descriptor);
  }
}
function _createClass16(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties16(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties16(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty17(obj, key, value) {
  key = _toPropertyKey19(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey19(arg) {
  var key = _toPrimitive19(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive19(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _createForOfIteratorHelper12(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray25(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray16(arr, i) {
  return _arrayWithHoles16(arr) || _iterableToArrayLimit16(arr, i) || _unsupportedIterableToArray25(arr, i) || _nonIterableRest16();
}
function _nonIterableRest16() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit16(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles16(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral37(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray14(arr) {
  return _arrayWithoutHoles14(arr) || _iterableToArray14(arr) || _unsupportedIterableToArray25(arr) || _nonIterableSpread14();
}
function _nonIterableSpread14() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray25(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray25(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray25(o, minLen);
}
function _iterableToArray14(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles14(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray25(arr);
}
function _arrayLikeToArray25(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function mySessionItemsWrapper() {
  var sessionOnly = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  var manyToOne = function(primary, mapped) {
    return mapped.map(function(target) {
      return [target, primary];
    });
  };
  var foldable = function(item10) {
    return manyToOne(item10, getFoldGroup(item10));
  };
  var itemMappings = new Map([].concat(_toConsumableArray14(foldable($item(_templateObject298 || (_templateObject298 = _taggedTemplateLiteral37(["liar's pants"]))))), _toConsumableArray14(foldable($item(_templateObject299 || (_templateObject299 = _taggedTemplateLiteral37(["ice pick"]))))), _toConsumableArray14(manyToOne($item(_templateObject359 || (_templateObject359 = _taggedTemplateLiteral37(["Spooky Putty sheet"]))), [$item(_templateObject446 || (_templateObject446 = _taggedTemplateLiteral37(["Spooky Putty monster"])))].concat(_toConsumableArray14(getFoldGroup($item(_templateObject539 || (_templateObject539 = _taggedTemplateLiteral37(["Spooky Putty sheet"])))))))), _toConsumableArray14(foldable($item(_templateObject635 || (_templateObject635 = _taggedTemplateLiteral37(["stinky cheese sword"]))))), _toConsumableArray14(foldable($item(_templateObject731 || (_templateObject731 = _taggedTemplateLiteral37(["naughty paper shuriken"]))))), _toConsumableArray14(foldable($item(_templateObject827 || (_templateObject827 = _taggedTemplateLiteral37(["Loathing Legion knife"]))))), _toConsumableArray14(foldable($item(_templateObject924 || (_templateObject924 = _taggedTemplateLiteral37(["deceased crimbo tree"]))))), _toConsumableArray14(foldable($item(_templateObject1020 || (_templateObject1020 = _taggedTemplateLiteral37(["makeshift turban"]))))), _toConsumableArray14(foldable($item(_templateObject1116 || (_templateObject1116 = _taggedTemplateLiteral37(["turtle wax shield"]))))), _toConsumableArray14(foldable($item(_templateObject1215 || (_templateObject1215 = _taggedTemplateLiteral37(["metallic foil bow"]))))), _toConsumableArray14(foldable($item(_templateObject1315 || (_templateObject1315 = _taggedTemplateLiteral37(["ironic moustache"]))))), _toConsumableArray14(foldable($item(_templateObject1413 || (_templateObject1413 = _taggedTemplateLiteral37(["bugged balaclava"]))))), _toConsumableArray14(foldable($item(_templateObject1511 || (_templateObject1511 = _taggedTemplateLiteral37(["toggle switch (Bartend)"]))))), _toConsumableArray14(foldable($item(_templateObject1611 || (_templateObject1611 = _taggedTemplateLiteral37(["mushroom cap"]))))), _toConsumableArray14(manyToOne($item(_templateObject1711 || (_templateObject1711 = _taggedTemplateLiteral37(["can of Rain-Doh"]))), $items(_templateObject1811 || (_templateObject1811 = _taggedTemplateLiteral37(["empty Rain-Doh can"]))))), _toConsumableArray14(manyToOne($item(_templateObject1911 || (_templateObject1911 = _taggedTemplateLiteral37(["meteorite fragment"]))), $items(_templateObject2011 || (_templateObject2011 = _taggedTemplateLiteral37(["meteorite earring, meteorite necklace, meteorite ring"]))))), _toConsumableArray14(manyToOne($item(_templateObject2116 || (_templateObject2116 = _taggedTemplateLiteral37(["Sneaky Pete's leather jacket"]))), $items(_templateObject2212 || (_templateObject2212 = _taggedTemplateLiteral37(["Sneaky Pete's leather jacket (collar popped)"]))))), _toConsumableArray14(manyToOne($item(_templateObject2311 || (_templateObject2311 = _taggedTemplateLiteral37(["Boris's Helm"]))), $items(_templateObject2411 || (_templateObject2411 = _taggedTemplateLiteral37(["Boris's Helm (askew)"]))))), _toConsumableArray14(manyToOne($item(_templateObject2511 || (_templateObject2511 = _taggedTemplateLiteral37(["Jarlsberg's pan"]))), $items(_templateObject2611 || (_templateObject2611 = _taggedTemplateLiteral37(["Jarlsberg's pan (Cosmic portal mode)"]))))), _toConsumableArray14(manyToOne($item(_templateObject2711 || (_templateObject2711 = _taggedTemplateLiteral37(["tiny plastic sword"]))), $items(_templateObject2810 || (_templateObject2810 = _taggedTemplateLiteral37(["grogtini, bodyslam, dirty martini, vesper, cherry bomb, sangria del diablo"]))))), _toConsumableArray14(manyToOne($item(_templateObject2910 || (_templateObject2910 = _taggedTemplateLiteral37(["earthenware muffin tin"]))), $items(_templateObject308 || (_templateObject308 = _taggedTemplateLiteral37(["blueberry muffin, bran muffin, chocolate chip muffin"]))))), _toConsumableArray14(manyToOne($item(_templateObject3112 || (_templateObject3112 = _taggedTemplateLiteral37(["ChibiBuddy\u2122 (on)"]))), $items(_templateObject3211 || (_templateObject3211 = _taggedTemplateLiteral37(["ChibiBuddy\u2122 (off)"])))))));
  var inventory = /* @__PURE__ */ new Map();
  var invLocations = sessionOnly ? [import_kolmafia44.mySessionItems] : [import_kolmafia44.mySessionItems, import_kolmafia44.getCloset, import_kolmafia44.getDisplay, import_kolmafia44.getStorage];
  for (var _i = 0, _invLocations = invLocations; _i < _invLocations.length; _i++) {
    var inventoryFunc = _invLocations[_i];
    for (var _i2 = 0, _Object$entries = Object.entries(inventoryFunc()); _i2 < _Object$entries.length; _i2++) {
      var _itemMappings$get, _inventory$get;
      var _Object$entries$_i = _slicedToArray16(_Object$entries[_i2], 2), itemStr = _Object$entries$_i[0], quantity = _Object$entries$_i[1];
      var item9 = (0, import_kolmafia44.toItem)(itemStr);
      var mappedItem = (_itemMappings$get = itemMappings.get(item9)) !== null && _itemMappings$get !== void 0 ? _itemMappings$get : item9;
      inventory.set(mappedItem, quantity + ((_inventory$get = inventory.get(mappedItem)) !== null && _inventory$get !== void 0 ? _inventory$get : 0));
    }
  }
  for (var _i3 = 0, _Object$entries2 = Object.entries((0, import_kolmafia44.getCampground)()); _i3 < _Object$entries2.length; _i3++) {
    var _itemMappings$get2, _inventory$get2;
    var _Object$entries2$_i = _slicedToArray16(_Object$entries2[_i3], 2), _itemStr = _Object$entries2$_i[0], _quantity = _Object$entries2$_i[1];
    var _item = (0, import_kolmafia44.toItem)(_itemStr);
    if (_item === $item(_templateObject3311 || (_templateObject3311 = _taggedTemplateLiteral37(["big rock"]))))
      continue;
    var _mappedItem = (_itemMappings$get2 = itemMappings.get(_item)) !== null && _itemMappings$get2 !== void 0 ? _itemMappings$get2 : _item;
    inventory.set(_mappedItem, _quantity + ((_inventory$get2 = inventory.get(_mappedItem)) !== null && _inventory$get2 !== void 0 ? _inventory$get2 : 0));
  }
  return inventory;
}
function inventoryOperation(a, b, op) {
  var difference = /* @__PURE__ */ new Map();
  var _iterator = _createForOfIteratorHelper12(new Set([].concat(_toConsumableArray14(a.keys()), _toConsumableArray14(b.keys())))), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _a$get, _b$get;
      var item9 = _step.value;
      difference.set(item9, op((_a$get = a.get(item9)) !== null && _a$get !== void 0 ? _a$get : 0, (_b$get = b.get(item9)) !== null && _b$get !== void 0 ? _b$get : 0));
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var diffEntries = _toConsumableArray14(difference.entries());
  return new Map(diffEntries.filter(function(value) {
    return value[1] !== 0;
  }));
}
var Session = /* @__PURE__ */ function() {
  function Session2(meat, items) {
    _classCallCheck16(this, Session2);
    _defineProperty17(this, "meat", void 0);
    _defineProperty17(this, "items", void 0);
    this.meat = meat;
    this.items = items;
  }
  _createClass16(Session2, [{
    key: "register",
    value: function register(target, quantity) {
      if (target === "meat") {
        this.meat += quantity;
      } else {
        var _this$items$get;
        this.items.set(target, ((_this$items$get = this.items.get(target)) !== null && _this$items$get !== void 0 ? _this$items$get : 0) + quantity);
      }
    }
    /**
     * Value this session
     *
     * @param itemValue a function that, when given an item, will give a meat value of the item
     * @returns ItemResult with the full value of this session given the input function
     */
  }, {
    key: "value",
    value: function value(itemValue) {
      var meat = Math.floor(this.meat);
      var itemDetails = _toConsumableArray14(this.items.entries()).map(function(_ref) {
        var _ref2 = _slicedToArray16(_ref, 2), item9 = _ref2[0], quantity = _ref2[1];
        return {
          item: item9,
          quantity: quantity,
          value: itemValue(item9) * quantity
        };
      });
      var items = Math.floor(sum(itemDetails, "value"));
      return {
        meat: meat,
        items: items,
        total: meat + items,
        itemDetails: itemDetails
      };
    }
    /**
     * Subtract the contents of another session from this one, removing any items that have a resulting quantity of 0
     *  (this will ignore elements in b but not in a)
     *
     * @param other the session from which to pull values to remove from this session
     * @returns a new session representing the difference between this session and the other session
     */
  }, {
    key: "diff",
    value: function diff(other) {
      return new Session2(this.meat - other.meat, inventoryOperation(this.items, other.items, function(a, b) {
        return a - b;
      }));
    }
    /**
     * Subtract the contents of snasphot b from session a, removing any items that have a resulting quantity of 0
     *  (this will ignore elements in b but not in a)
     *
     * @param a the session from which to subtract elements
     * @param b the session from which to add elements
     * @returns a new session representing the difference between a and b
     */
  }, {
    key: "add",
    value: (
      /**
       * Generate a new session combining multiple sessions together
       *
       * @param other the session from which to add elements to this set
       * @returns a new session representing the addition of other to this
       */
      function add(other) {
        return new Session2(this.meat + other.meat, inventoryOperation(this.items, other.items, function(a, b) {
          return a + b;
        }));
      }
    )
    /**
     * Combine the contents of sessions
     *
     * @param sessions the set of sessions to combine together
     * @returns a new session representing the difference between a and b
     */
  }, {
    key: "toFile",
    value: (
      /**
       * Export this session to a file in the data/ directory. Conventionally this file should end in ".json"
       *
       * @param filename The file into which to export
       */
      function toFile(filename) {
        var val = {
          meat: this.meat,
          items: Object.fromEntries(this.items)
        };
        (0, import_kolmafia44.bufferToFile)(JSON.stringify(val), Session2.getFilepath(filename));
      }
    )
    /**
     * Import a session from a file in the data/ directory. Conventionally the file should end in ".json"
     *
     * @param filename The file from which to import
     * @returns the session represented by the file
     */
  }], [{
    key: "diff",
    value: function diff(a, b) {
      return a.diff(b);
    }
  }, {
    key: "add",
    value: function add() {
      for (var _len = arguments.length, sessions = new Array(_len), _key = 0; _key < _len; _key++) {
        sessions[_key] = arguments[_key];
      }
      return sessions.reduce(function(previousSession, currentSession) {
        return previousSession.add(currentSession);
      });
    }
  }, {
    key: "getFilepath",
    value: function getFilepath(filename) {
      return filename.endsWith(".json") ? filename : "snapshots/".concat((0, import_kolmafia44.myName)(), "/").concat((0, import_kolmafia44.todayToString)(), "_").concat(filename, ".json");
    }
  }, {
    key: "fromFile",
    value: function fromFile(filename) {
      var fileValue = (0, import_kolmafia44.fileToBuffer)(Session2.getFilepath(filename));
      if (fileValue.length > 0) {
        var val = JSON.parse(fileValue);
        var parsedItems = Object.entries(val.items).map(function(_ref3) {
          var _ref4 = _slicedToArray16(_ref3, 2), itemStr = _ref4[0], quantity = _ref4[1];
          return [(0, import_kolmafia44.toItem)(itemStr), quantity];
        });
        return new Session2(val.meat, new Map(parsedItems));
      } else {
        return new Session2(0, /* @__PURE__ */ new Map());
      }
    }
    /**
     * Return the meat and items for the current session
     *
     * @param sessionOnly should closet, DC, and storage be ignored for the session calculation
     * @returns current session
     */
  }, {
    key: "current",
    value: function current() {
      var sessionOnly = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
      var meat = sessionOnly ? [import_kolmafia44.mySessionMeat] : [import_kolmafia44.mySessionMeat, import_kolmafia44.myClosetMeat, import_kolmafia44.myStorageMeat];
      return new Session2(sum(meat, function(f) {
        return f();
      }), mySessionItemsWrapper(sessionOnly));
    }
  }]);
  return Session2;
}();

// node_modules/grimoire-kolmafia/dist/combat.js
function _inherits6(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf6(subClass, superClass);
}
function _setPrototypeOf6(o, p) {
  _setPrototypeOf6 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf6(o, p);
}
function _createSuper5(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct5();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf5(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf5(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn5(this, result);
  };
}
function _possibleConstructorReturn5(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized5(self2);
}
function _assertThisInitialized5(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _isNativeReflectConstruct5() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf5(o) {
  _getPrototypeOf5 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf5(o);
}
function _toConsumableArray15(arr) {
  return _arrayWithoutHoles15(arr) || _iterableToArray15(arr) || _unsupportedIterableToArray26(arr) || _nonIterableSpread15();
}
function _nonIterableSpread15() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray15(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles15(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray26(arr);
}
function _createForOfIteratorHelper13(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray26(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray26(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray26(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray26(o, minLen);
}
function _arrayLikeToArray26(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _classCallCheck17(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties17(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey20(descriptor.key), descriptor);
  }
}
function _createClass17(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties17(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties17(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey20(arg) {
  var key = _toPrimitive20(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive20(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var CombatStrategy = /* @__PURE__ */ function() {
  function CombatStrategy2() {
    _classCallCheck17(this, CombatStrategy2);
    this.macros = /* @__PURE__ */ new Map();
    this.autoattacks = /* @__PURE__ */ new Map();
    this.actions = /* @__PURE__ */ new Map();
    this.ccs_entries = /* @__PURE__ */ new Map();
  }
  _createClass17(CombatStrategy2, [{
    key: "macro",
    value: function macro(_macro2, monsters, prepend) {
      var _a, _b;
      if (monsters === void 0) {
        if (this.default_macro === void 0)
          this.default_macro = [];
        if (prepend)
          this.default_macro.unshift(_macro2);
        else
          this.default_macro.push(_macro2);
      } else {
        if (monsters instanceof import_kolmafia45.Monster)
          monsters = [monsters];
        var _iterator = _createForOfIteratorHelper13(monsters), _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
            var monster = _step.value;
            if (!this.macros.has(monster))
              this.macros.set(monster, []);
            if (prepend)
              (_a = this.macros.get(monster)) === null || _a === void 0 ? void 0 : _a.unshift(_macro2);
            else
              (_b = this.macros.get(monster)) === null || _b === void 0 ? void 0 : _b.push(_macro2);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      return this;
    }
    /**
     * Add a macro to perform as an autoattack for this monster. If multiple
     * macros are given for the same monster, they are concatinated.
     *
     * @param macro The macro to perform as autoattack.
     * @param monsters Which monsters to use the macro on. If not given, add the
     *  macro as a general macro.
     * @param prepend If true, add the macro before all previous autoattack
     *    macros for the same monster. If false, add after all previous macros.
     * @returns this
     */
  }, {
    key: "autoattack",
    value: function autoattack(macro, monsters, prepend) {
      var _a, _b;
      if (monsters === void 0) {
        if (this.default_autoattack === void 0)
          this.default_autoattack = [];
        if (prepend)
          this.default_autoattack.unshift(macro);
        else
          this.default_autoattack.push(macro);
      } else {
        if (monsters instanceof import_kolmafia45.Monster)
          monsters = [monsters];
        var _iterator2 = _createForOfIteratorHelper13(monsters), _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
            var monster = _step2.value;
            if (!this.autoattacks.has(monster))
              this.autoattacks.set(monster, []);
            if (prepend)
              (_a = this.autoattacks.get(monster)) === null || _a === void 0 ? void 0 : _a.unshift(macro);
            else
              (_b = this.autoattacks.get(monster)) === null || _b === void 0 ? void 0 : _b.push(macro);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
      return this;
    }
    /**
     * Add a macro to perform at the start of combat.
     * @param macro The macro to perform.
     * @param prepend If true, add the macro before all previous starting
     *    macros. If false, add after all previous starting macros.
     * @returns this
     */
  }, {
    key: "startingMacro",
    value: function startingMacro(macro, prepend) {
      if (this.starting_macro === void 0)
        this.starting_macro = [];
      if (prepend)
        this.starting_macro.unshift(macro);
      else
        this.starting_macro.push(macro);
      return this;
    }
    /**
     * Add an action to perform for this monster. Only one action can be set for
     * each monster; any previous actions are overwritten.
     *
     * @param action The action to perform.
     * @param monsters Which monsters to use the action on. If not given, set the
     *  action as the general action for all monsters.
     * @returns this
     */
  }, {
    key: "action",
    value: function action(_action, monsters) {
      if (monsters === void 0) {
        this.default_action = _action;
      } else if (monsters instanceof import_kolmafia45.Monster) {
        this.actions.set(monsters, _action);
      } else {
        var _iterator3 = _createForOfIteratorHelper13(monsters), _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
            var monster = _step3.value;
            this.actions.set(monster, _action);
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      }
      return this;
    }
    /**
     * Add a separate entry in the grimoire-generated CCS file for the specified
     * monster. If multiple entries are given for the same monster, they are
     * concatinated.
     *
     * This should typically be only used rarely, on monsters for which KoL does
     * not support macros in combat (e.g. rampaging adding machine).
     *
     * @param entry The entry to add for the given monster.
     * @param monsters Which monsters to add the entry to.
     * @param prepend If true, add the entry before all previous entries. If
     *   false, add after all previous entries.
     */
  }, {
    key: "ccs",
    value: function ccs(entry, monsters, prepend) {
      var _a, _b;
      if (monsters instanceof import_kolmafia45.Monster)
        monsters = [monsters];
      var _iterator4 = _createForOfIteratorHelper13(monsters), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var monster = _step4.value;
          if (!this.ccs_entries.has(monster))
            this.ccs_entries.set(monster, []);
          if (prepend)
            (_a = this.ccs_entries.get(monster)) === null || _a === void 0 ? void 0 : _a.unshift(entry);
          else
            (_b = this.ccs_entries.get(monster)) === null || _b === void 0 ? void 0 : _b.push(entry);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      return this;
    }
    /**
     * Check if the provided action was requested for any monsters, or for the
     * general action.
     */
  }, {
    key: "can",
    value: function can(action) {
      if (action === this.default_action)
        return true;
      return Array.from(this.actions.values()).includes(action);
    }
    /**
     * Return the general action (if it exists).
     */
  }, {
    key: "getDefaultAction",
    value: function getDefaultAction() {
      return this.default_action;
    }
    /**
     * Return all monsters where the provided action was requested.
     */
  }, {
    key: "where",
    value: function where(action) {
      var _this = this;
      return Array.from(this.actions.keys()).filter(function(key) {
        return _this.actions.get(key) === action;
      });
    }
    /**
     * Return the requested action (if it exists) for the provided monster.
     */
  }, {
    key: "currentStrategy",
    value: function currentStrategy(monster) {
      var _a;
      return (_a = this.actions.get(monster)) !== null && _a !== void 0 ? _a : this.default_action;
    }
    /**
     * Perform a deep copy of this combat strategy.
     */
  }, {
    key: "clone",
    value: function clone() {
      var result = new CombatStrategy2();
      if (this.starting_macro)
        result.starting_macro = _toConsumableArray15(this.starting_macro);
      if (this.default_macro)
        result.default_macro = _toConsumableArray15(this.default_macro);
      var _iterator5 = _createForOfIteratorHelper13(this.macros), _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
          var pair = _step5.value;
          result.macros.set(pair[0], _toConsumableArray15(pair[1]));
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      if (this.default_autoattack)
        result.default_autoattack = _toConsumableArray15(this.default_autoattack);
      var _iterator6 = _createForOfIteratorHelper13(this.autoattacks), _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done; ) {
          var _pair = _step6.value;
          result.autoattacks.set(_pair[0], _toConsumableArray15(_pair[1]));
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      result.default_action = this.default_action;
      var _iterator7 = _createForOfIteratorHelper13(this.actions), _step7;
      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done; ) {
          var _pair2 = _step7.value;
          result.actions.set(_pair2[0], _pair2[1]);
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
      var _iterator8 = _createForOfIteratorHelper13(this.ccs_entries), _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done; ) {
          var _pair3 = _step8.value;
          result.ccs_entries.set(_pair3[0], _toConsumableArray15(_pair3[1]));
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
      return result;
    }
    /**
     * Compile this combat strategy into a complete macro.
     *
     * @param resources The resources to use to fulfil actions.
     * @param defaults Macros to perform for each action without a resource.
     * @param location The adventuring location, if known.
     * @returns The compiled macro.
     */
  }, {
    key: "compile",
    value: function compile(resources, defaults, location) {
      var _a, _b;
      var result = new Macro();
      if (this.starting_macro) {
        result.step.apply(result, _toConsumableArray15(this.starting_macro.map(undelay)));
      }
      var monster_macros = new CompressedMacro();
      this.macros.forEach(function(value, key) {
        var _Macro;
        monster_macros.add(key, (_Macro = new Macro()).step.apply(_Macro, _toConsumableArray15(value.map(undelay))));
      });
      result.step(monster_macros.compile());
      if (this.default_macro)
        result.step.apply(result, _toConsumableArray15(this.default_macro.map(undelay)));
      var monster_actions = new CompressedMacro();
      this.actions.forEach(function(action, key) {
        var _a2, _b2;
        var macro2 = (_a2 = resources.getMacro(action)) !== null && _a2 !== void 0 ? _a2 : (_b2 = defaults === null || defaults === void 0 ? void 0 : defaults[action]) === null || _b2 === void 0 ? void 0 : _b2.call(defaults, key);
        if (macro2)
          monster_actions.add(key, new Macro().step(macro2));
      });
      result.step(monster_actions.compile());
      if (this.default_action) {
        var macro = (_a = resources.getMacro(this.default_action)) !== null && _a !== void 0 ? _a : (_b = defaults === null || defaults === void 0 ? void 0 : defaults[this.default_action]) === null || _b === void 0 ? void 0 : _b.call(defaults, location);
        if (macro)
          result.step(macro);
      }
      return result;
    }
    /**
     * Compile the autoattack of this combat strategy into a complete macro.
     *
     * @returns The compiled autoattack macro.
     */
  }, {
    key: "compileAutoattack",
    value: function compileAutoattack() {
      var result = new Macro();
      var monster_macros = new CompressedMacro();
      this.autoattacks.forEach(function(value, key) {
        var _Macro2;
        monster_macros.add(key, (_Macro2 = new Macro()).step.apply(_Macro2, _toConsumableArray15(value.map(undelay))));
      });
      result.step(monster_macros.compile());
      if (this.default_autoattack)
        result.step.apply(result, _toConsumableArray15(this.default_autoattack.map(undelay)));
      return result;
    }
    /**
     * Compile the CCS entries of this combat strategy into a single array.
     *
     * @returns The lines of a CCS file, not including the [default] macro.
     */
  }, {
    key: "compileCcs",
    value: function compileCcs() {
      var result = [];
      var _iterator9 = _createForOfIteratorHelper13(this.ccs_entries), _step9;
      try {
        for (_iterator9.s(); !(_step9 = _iterator9.n()).done; ) {
          var ccs_entry = _step9.value;
          result.push.apply(result, ["[".concat(ccs_entry[0].name, "]")].concat(_toConsumableArray15(ccs_entry[1])));
        }
      } catch (err) {
        _iterator9.e(err);
      } finally {
        _iterator9.f();
      }
      return result;
    }
    /**
     * For advanced users, this method will generate a fluent API for requesting
     * actions. That is, it allows you to do
     *   combat.banish(monster1).kill(monster2)
     * instead of
     *   combat.action("banish", monster1).action("kill", monster2)
     *
     * Example usage:
     *   const myActions = ["kill", "banish"] as const;
     *   class MyCombatStrategy extends CombatStrategy.withActions(myActions) {}
     *
     *   const foo: MyCombatStrategy = new MyCombatStrategy();
     *   const bar: MyCombatStrategy = foo.banish($monster`crate`).kill($monster`tumbleweed`);
     */
  }], [{
    key: "withActions",
    value: function withActions(actions) {
      var CombatStrategyWithActions = /* @__PURE__ */ function(_this) {
        _inherits6(CombatStrategyWithActions2, _this);
        var _super = _createSuper5(CombatStrategyWithActions2);
        function CombatStrategyWithActions2() {
          _classCallCheck17(this, CombatStrategyWithActions2);
          return _super.apply(this, arguments);
        }
        return _createClass17(CombatStrategyWithActions2);
      }(this);
      var proto = CombatStrategyWithActions.prototype;
      var _iterator10 = _createForOfIteratorHelper13(actions), _step10;
      try {
        var _loop = function _loop2() {
          var action = _step10.value;
          proto[action] = function(monsters) {
            return this.action(action, monsters);
          };
        };
        for (_iterator10.s(); !(_step10 = _iterator10.n()).done; ) {
          _loop();
        }
      } catch (err) {
        _iterator10.e(err);
      } finally {
        _iterator10.f();
      }
      return CombatStrategyWithActions;
    }
  }]);
  return CombatStrategy2;
}();
var CompressedMacro = /* @__PURE__ */ function() {
  function CompressedMacro2() {
    _classCallCheck17(this, CompressedMacro2);
    this.components = /* @__PURE__ */ new Map();
  }
  _createClass17(CompressedMacro2, [{
    key: "add",
    value: function add(monster, macro) {
      var _a;
      var macro_text = macro.toString();
      if (macro_text.length === 0)
        return;
      if (!this.components.has(macro_text))
        this.components.set(macro_text, [monster]);
      else
        (_a = this.components.get(macro_text)) === null || _a === void 0 ? void 0 : _a.push(monster);
    }
    /**
     * Compile the compressed form of the macro.
     */
  }, {
    key: "compile",
    value: function compile() {
      var result = new Macro();
      this.components.forEach(function(monsters, macro) {
        var condition = monsters.map(function(mon) {
          return "monsterid ".concat(mon.id);
        }).join(" || ");
        result.if_(condition, macro);
      });
      return result;
    }
  }]);
  return CompressedMacro2;
}();
var CombatResources = /* @__PURE__ */ function() {
  function CombatResources2() {
    _classCallCheck17(this, CombatResources2);
    this.resources = /* @__PURE__ */ new Map();
  }
  _createClass17(CombatResources2, [{
    key: "provide",
    value: function provide(action, resource) {
      if (resource === void 0)
        return;
      this.resources.set(action, resource);
    }
    /**
     * Return true if the provided action has a resource provided.
     */
  }, {
    key: "has",
    value: function has(action) {
      return this.resources.has(action);
    }
    /**
     * Return all provided combat resources.
     */
  }, {
    key: "all",
    value: function all2() {
      return Array.from(this.resources.values());
    }
    /**
     * Get the macro provided by the resource for this action, or undefined if
     * no resource was provided.
     */
  }, {
    key: "getMacro",
    value: function getMacro(action) {
      var resource = this.resources.get(action);
      if (resource === void 0)
        return void 0;
      if (resource.do instanceof import_kolmafia45.Item)
        return new Macro().item(resource.do);
      if (resource.do instanceof import_kolmafia45.Skill)
        return new Macro().skill(resource.do);
      return undelay(resource.do);
    }
  }]);
  return CombatResources2;
}();

// node_modules/grimoire-kolmafia/dist/engine.js
var import_kolmafia47 = require("kolmafia");

// node_modules/grimoire-kolmafia/dist/outfit.js
var import_kolmafia46 = require("kolmafia");
var _templateObject300;
var _templateObject2100;
var _templateObject360;
var _templateObject447;
var _templateObject540;
var _templateObject636;
var _templateObject734;
var _templateObject828;
var _templateObject925;
var _templateObject1021;
var _templateObject1117;
var _templateObject1216;
var _templateObject1316;
var _templateObject1414;
var _templateObject1512;
var _templateObject1612;
var _templateObject1712;
var _templateObject1812;
var _templateObject1912;
var _templateObject2012;
var _templateObject2117;
var _templateObject2213;
var _templateObject2312;
var _templateObject2412;
var _templateObject2512;
var _templateObject2612;
var _templateObject2712;
var _templateObject2811;
var _templateObject2911;
var _templateObject309;
var _templateObject3113;
var _templateObject3212;
var _templateObject3312;
var _templateObject3411;
var _templateObject3510;
var _templateObject367;
var _templateObject377;
var _templateObject386;
var _templateObject396;
var _templateObject406;
var _templateObject4111;
var _templateObject4211;
var _templateObject4311;
var _templateObject448;
var _templateObject456;
var _templateObject466;
var _templateObject476;
var _templateObject486;
var _templateObject496;
var _templateObject506;
var _templateObject5111;
var _templateObject5211;
var _templateObject5310;
var _templateObject546;
var _templateObject556;
var _templateObject566;
var _templateObject575;
var _templateObject585;
var _templateObject595;
var _templateObject604;
var _templateObject6110;
var _templateObject6210;
var _templateObject637;
var _templateObject644;
var _templateObject654;
var _templateObject664;
var _templateObject673;
function ownKeys8(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread8(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys8(Object(source), true).forEach(function(key) {
      _defineProperty18(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys8(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty18(obj, key, value) {
  key = _toPropertyKey21(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _slicedToArray17(arr, i) {
  return _arrayWithHoles17(arr) || _iterableToArrayLimit17(arr, i) || _unsupportedIterableToArray27(arr, i) || _nonIterableRest17();
}
function _nonIterableRest17() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit17(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles17(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper14(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray27(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _taggedTemplateLiteral38(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray16(arr) {
  return _arrayWithoutHoles16(arr) || _iterableToArray16(arr) || _unsupportedIterableToArray27(arr) || _nonIterableSpread16();
}
function _nonIterableSpread16() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray27(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray27(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray27(o, minLen);
}
function _iterableToArray16(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles16(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray27(arr);
}
function _arrayLikeToArray27(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _classCallCheck18(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties18(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey21(descriptor.key), descriptor);
  }
}
function _createClass18(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties18(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties18(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey21(arg) {
  var key = _toPrimitive21(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive21(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var FORCE_REFRESH_REQUIREMENT = new Requirement([], {
  forceUpdate: true
});
var outfitSlots = ["hat", "back", "weapon", "offhand", "shirt", "pants", "acc1", "acc2", "acc3", "famequip"];
var weaponHands = function(i) {
  return i ? (0, import_kolmafia46.weaponHands)(i) : 0;
};
var modeableCommands2 = ["backupcamera", "umbrella", "snowsuit", "edpiece", "retrocape", "parka"];
var Outfit = /* @__PURE__ */ function() {
  function Outfit2() {
    _classCallCheck18(this, Outfit2);
    this.equips = /* @__PURE__ */ new Map();
    this.riders = /* @__PURE__ */ new Map();
    this.modes = {};
    this.skipDefaults = false;
    this.modifier = [];
    this.avoid = [];
    this.bonuses = /* @__PURE__ */ new Map();
    this.postActions = [];
    this.preActions = [];
  }
  _createClass18(Outfit2, [{
    key: "equippedAmount",
    value: (
      /**
       * Check how many of an item is equipped on the outfit.
       */
      function equippedAmount5(item9) {
        return _toConsumableArray16(this.equips.values()).filter(function(i) {
          return i === item9;
        }).length;
      }
    )
  }, {
    key: "isAvailable",
    value: function isAvailable(item9) {
      var _a;
      if ((_a = this.avoid) === null || _a === void 0 ? void 0 : _a.includes(item9))
        return false;
      if (!have(item9, this.equippedAmount(item9) + 1))
        return false;
      if ((0, import_kolmafia46.booleanModifier)(item9, "Single Equip") && this.equippedAmount(item9) > 0)
        return false;
      return true;
    }
    /**
     * Check whether an item is equipped on the outfit, optionally in a specific slot.
     */
  }, {
    key: "haveEquipped",
    value: function haveEquipped9(item9, slot) {
      if (slot === void 0)
        return this.equippedAmount(item9) > 0;
      return this.equips.get(slot) === item9;
    }
  }, {
    key: "equipItemNone",
    value: function equipItemNone(item9, slot) {
      if (item9 !== $item.none)
        return false;
      if (slot === void 0)
        return true;
      if (this.equips.has(slot))
        return false;
      this.equips.set(slot, item9);
      return true;
    }
  }, {
    key: "equipNonAccessory",
    value: function equipNonAccessory(item9, slot) {
      if ($slots(_templateObject300 || (_templateObject300 = _taggedTemplateLiteral38(["acc1, acc2, acc3"]))).includes((0, import_kolmafia46.toSlot)(item9)))
        return false;
      if (slot !== void 0 && slot !== (0, import_kolmafia46.toSlot)(item9))
        return false;
      if (this.equips.has((0, import_kolmafia46.toSlot)(item9)))
        return false;
      switch ((0, import_kolmafia46.toSlot)(item9)) {
        case $slot(_templateObject2100 || (_templateObject2100 = _taggedTemplateLiteral38(["off-hand"]))):
          if (this.equips.has($slot(_templateObject360 || (_templateObject360 = _taggedTemplateLiteral38(["weapon"])))) && weaponHands(this.equips.get($slot(_templateObject447 || (_templateObject447 = _taggedTemplateLiteral38(["weapon"]))))) !== 1) {
            return false;
          }
          break;
        case $slot(_templateObject540 || (_templateObject540 = _taggedTemplateLiteral38(["familiar"]))):
          if (this.familiar !== void 0 && !(0, import_kolmafia46.canEquip)(this.familiar, item9))
            return false;
      }
      if ((0, import_kolmafia46.toSlot)(item9) !== $slot(_templateObject636 || (_templateObject636 = _taggedTemplateLiteral38(["familiar"]))) && !(0, import_kolmafia46.canEquip)(item9))
        return false;
      this.equips.set((0, import_kolmafia46.toSlot)(item9), item9);
      return true;
    }
  }, {
    key: "equipAccessory",
    value: function equipAccessory(item9, slot) {
      var _this = this;
      if (![void 0].concat(_toConsumableArray16($slots(_templateObject734 || (_templateObject734 = _taggedTemplateLiteral38(["acc1, acc2, acc3"]))))).includes(slot))
        return false;
      if ((0, import_kolmafia46.toSlot)(item9) !== $slot(_templateObject828 || (_templateObject828 = _taggedTemplateLiteral38(["acc1"]))))
        return false;
      if (!(0, import_kolmafia46.canEquip)(item9))
        return false;
      if (slot === void 0) {
        var empty = $slots(_templateObject925 || (_templateObject925 = _taggedTemplateLiteral38(["acc1, acc2, acc3"]))).find(function(s) {
          return !_this.equips.has(s);
        });
        if (empty === void 0)
          return false;
        this.equips.set(empty, item9);
      } else {
        if (this.equips.has(slot))
          return false;
        this.equips.set(slot, item9);
      }
      return true;
    }
  }, {
    key: "equipUsingDualWield",
    value: function equipUsingDualWield(item9, slot) {
      if (![void 0, $slot(_templateObject1021 || (_templateObject1021 = _taggedTemplateLiteral38(["off-hand"])))].includes(slot))
        return false;
      if ((0, import_kolmafia46.toSlot)(item9) !== $slot(_templateObject1117 || (_templateObject1117 = _taggedTemplateLiteral38(["weapon"]))))
        return false;
      if (this.equips.has($slot(_templateObject1216 || (_templateObject1216 = _taggedTemplateLiteral38(["weapon"])))) && weaponHands(this.equips.get($slot(_templateObject1316 || (_templateObject1316 = _taggedTemplateLiteral38(["weapon"]))))) !== 1) {
        return false;
      }
      if (this.equips.has($slot(_templateObject1414 || (_templateObject1414 = _taggedTemplateLiteral38(["off-hand"])))))
        return false;
      if (!have($skill(_templateObject1512 || (_templateObject1512 = _taggedTemplateLiteral38(["Double-Fisted Skull Smashing"])))))
        return false;
      if (weaponHands(item9) !== 1)
        return false;
      if (!(0, import_kolmafia46.canEquip)(item9))
        return false;
      this.equips.set($slot(_templateObject1612 || (_templateObject1612 = _taggedTemplateLiteral38(["off-hand"]))), item9);
      return true;
    }
  }, {
    key: "getHoldingFamiliar",
    value: function getHoldingFamiliar(item9) {
      switch ((0, import_kolmafia46.toSlot)(item9)) {
        case $slot(_templateObject1712 || (_templateObject1712 = _taggedTemplateLiteral38(["weapon"]))):
          return $familiar(_templateObject1812 || (_templateObject1812 = _taggedTemplateLiteral38(["Disembodied Hand"])));
        case $slot(_templateObject1912 || (_templateObject1912 = _taggedTemplateLiteral38(["off-hand"]))):
          return $familiar(_templateObject2012 || (_templateObject2012 = _taggedTemplateLiteral38(["Left-Hand Man"])));
        default:
          return void 0;
      }
    }
    /**
     * Returns the bonus value associated with a given item.
     *
     * @param item The item to check the bonus of.
     * @returns The bonus assigned to that item.
     */
  }, {
    key: "getBonus",
    value: function getBonus(item9) {
      var _a;
      return (_a = this.bonuses.get(item9)) !== null && _a !== void 0 ? _a : 0;
    }
    /**
     * Applies a value to any existing bonus this item has, using a rule assigned by the `reducer` parameter
     *
     * @param item The item to try to apply a bonus to.
     * @param value The value to try to apply.
     * @param reducer Function that combines new and current bonus
     * @returns The total assigned bonus to that item.
     */
  }, {
    key: "applyBonus",
    value: function applyBonus(item9, value, reducer) {
      var previous = this.getBonus(item9);
      return this.setBonus(item9, reducer(value, previous));
    }
    /**
     * Sets the bonus value of an item equal to a given value, overriding any current bonus assigned.
     *
     * @param item The item to try to apply a bonus to.
     * @param value The value to try to apply.
     * @returns The total assigned bonus to that item.
     */
  }, {
    key: "setBonus",
    value: function setBonus(item9, value) {
      this.bonuses.set(item9, value);
      return value;
    }
    /**
     * Adds a value to any existing bonus this item has
     *
     * @param item The item to try to add a bonus to.
     * @param value The value to try to add.
     * @returns The total assigned bonus to that item.
     */
  }, {
    key: "addBonus",
    value: function addBonus(item9, value) {
      return this.applyBonus(item9, value, function(a, b) {
        return a + b;
      });
    }
    /**
     * Apply the given items' bonuses to the outfit, using a rule given by the reducer
     *
     * @param items A map containing items and their bonuses
     * @param reducer A way of combining new bonuses with existing bonuses
     */
  }, {
    key: "applyBonuses",
    value: function applyBonuses(items, reducer) {
      var _iterator = _createForOfIteratorHelper14(items), _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done; ) {
          var _step$value = _slicedToArray17(_step.value, 2), item9 = _step$value[0], value = _step$value[1];
          this.applyBonus(item9, value, reducer);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
    /**
     * Sets the bonuses of the given items, overriding existing bonuses
     *
     * @param items Map containing items and bonuses
     */
  }, {
    key: "setBonuses",
    value: function setBonuses(items) {
      this.applyBonuses(items, function(a) {
        return a;
      });
    }
    /**
     * Adds the bonuses of the given items to any existing bonuses they ahave
     *
     * @param items Map containing items and bonuses
     */
  }, {
    key: "addBonuses",
    value: function addBonuses(items) {
      this.applyBonuses(items, function(a, b) {
        return a + b;
      });
    }
  }, {
    key: "equipUsingFamiliar",
    value: function equipUsingFamiliar(item9, slot) {
      if (![void 0, $slot(_templateObject2117 || (_templateObject2117 = _taggedTemplateLiteral38(["familiar"])))].includes(slot))
        return false;
      if (this.equips.has($slot(_templateObject2213 || (_templateObject2213 = _taggedTemplateLiteral38(["familiar"])))))
        return false;
      if ((0, import_kolmafia46.booleanModifier)(item9, "Single Equip"))
        return false;
      var familiar4 = this.getHoldingFamiliar(item9);
      if (familiar4 === void 0 || !this.equip(familiar4))
        return false;
      this.equips.set($slot(_templateObject2312 || (_templateObject2312 = _taggedTemplateLiteral38(["familiar"]))), item9);
      return true;
    }
  }, {
    key: "equipItem",
    value: function equipItem(item9, slot) {
      return this.haveEquipped(item9, slot) || this.equipItemNone(item9, slot) || this.isAvailable(item9) && (this.equipNonAccessory(item9, slot) || this.equipAccessory(item9, slot) || this.equipUsingDualWield(item9, slot) || this.equipUsingFamiliar(item9, slot));
    }
  }, {
    key: "equipFamiliar",
    value: function equipFamiliar(familiar4) {
      if (familiar4 === this.familiar)
        return true;
      if (this.familiar !== void 0)
        return false;
      if (familiar4 !== $familiar.none) {
        if (!have(familiar4))
          return false;
        if (Array.from(this.riders.values()).includes(familiar4))
          return false;
      }
      var item9 = this.equips.get($slot(_templateObject2412 || (_templateObject2412 = _taggedTemplateLiteral38(["familiar"]))));
      if (item9 !== void 0 && item9 !== $item.none && !(0, import_kolmafia46.canEquip)(familiar4, item9))
        return false;
      this.familiar = familiar4;
      return true;
    }
  }, {
    key: "equipSpec",
    value: function equipSpec(spec) {
      var _this$avoid;
      var _a, _b, _c, _d, _e, _f;
      var succeeded = true;
      for (var _i2 = 0, _outfitSlots2 = outfitSlots; _i2 < _outfitSlots2.length; _i2++) {
        var slotName = _outfitSlots2[_i2];
        var slot = (_a = (/* @__PURE__ */ new Map([["famequip", $slot(_templateObject2512 || (_templateObject2512 = _taggedTemplateLiteral38(["familiar"])))], ["offhand", $slot(_templateObject2612 || (_templateObject2612 = _taggedTemplateLiteral38(["off-hand"])))]])).get(slotName)) !== null && _a !== void 0 ? _a : (0, import_kolmafia46.toSlot)(slotName);
        var itemOrItems = spec[slotName];
        if (itemOrItems !== void 0 && !this.equip(itemOrItems, slot))
          succeeded = false;
      }
      var _iterator2 = _createForOfIteratorHelper14((_b = spec === null || spec === void 0 ? void 0 : spec.equip) !== null && _b !== void 0 ? _b : []), _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          var item9 = _step2.value;
          if (!this.equip(item9))
            succeeded = false;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if ((spec === null || spec === void 0 ? void 0 : spec.familiar) !== void 0) {
        if (!this.equip(spec.familiar))
          succeeded = false;
      }
      (_this$avoid = this.avoid).push.apply(_this$avoid, _toConsumableArray16((_c = spec === null || spec === void 0 ? void 0 : spec.avoid) !== null && _c !== void 0 ? _c : []));
      this.skipDefaults = this.skipDefaults || ((_d = spec.skipDefaults) !== null && _d !== void 0 ? _d : false);
      if (spec.modifier) {
        var _this$modifier;
        if (Array.isArray(spec.modifier))
          (_this$modifier = this.modifier).push.apply(_this$modifier, _toConsumableArray16(spec.modifier));
        else
          this.modifier.push(spec.modifier);
      }
      if (spec.modes) {
        if (!this.setModes(spec.modes)) {
          succeeded = false;
        }
      }
      if (spec.riders) {
        if (spec.riders["buddy-bjorn"] && !this.bjornify(spec.riders["buddy-bjorn"]))
          succeeded = false;
        if (spec.riders["crown-of-thrones"] && !this.enthrone(spec.riders["crown-of-thrones"]))
          succeeded = false;
      }
      if (spec.bonuses) {
        this.addBonuses(spec.bonuses);
      }
      this.beforeDress.apply(this, _toConsumableArray16((_e = spec.beforeDress) !== null && _e !== void 0 ? _e : []));
      this.afterDress.apply(this, _toConsumableArray16((_f = spec.afterDress) !== null && _f !== void 0 ? _f : []));
      return succeeded;
    }
    /**
     * Equip the first thing that can be equipped to the outfit.
     *
     * @param things The things to equip.
     * @param slot The slot to equip them.
     * @returns True if one of the things is equipped, and false otherwise.
     */
  }, {
    key: "equipFirst",
    value: function equipFirst(things, slot) {
      var _this = this;
      if (things.length === 0)
        return true;
      return things.some(function(val) {
        return _this.equip(val, slot);
      });
    }
    /**
     * Equip a thing to the outfit.
     *
     * If no slot is given, then the thing will be equipped wherever possible
     * (possibly using dual-wielding, any of the accessory slots, or as
     * familiar equipment). If it is impossible to add this thing anywhere to
     * the outfit, this function will return false.
     *
     * If a slot is given, the item will be equipped only in that slot. If the
     * slot is filled with a different item, this function will return false.
     *
     * If the thing is already equipped in the provided slot, or if no slot is
     * given and the thing is already equipped in any slot, this function will
     * return true and not change the outfit.
     *
     * @param thing The thing or things to equip.
     * @param slot The slot to equip them.
     * @returns True if the thing was sucessfully equipped, and false otherwise.
     */
  }, {
    key: "equip",
    value: function equip14(thing, slot) {
      var _this = this;
      if (Array.isArray(thing)) {
        if (slot !== void 0)
          return this.equipFirst(thing, slot);
        return thing.every(function(val) {
          return _this.equip(val);
        });
      }
      if (thing instanceof import_kolmafia46.Item)
        return this.equipItem(thing, slot);
      if (thing instanceof import_kolmafia46.Familiar)
        return this.equipFamiliar(thing);
      if (thing instanceof Outfit2)
        return this.equipSpec(thing.spec());
      return this.equipSpec(thing);
    }
  }, {
    key: "bjornify",
    value: (
      /**
       * Add a bjornified familiar to the outfit.
       *
       * This function does *not* equip the buddy bjorn itself; it must be equipped separately.
       *
       * If a familiar is already specified for the buddy bjorn that is different from the provided target, this function will return false and not change the buddy bjorn.
       * @param target The familiar to bjornify, or a ranked list of familiars to try to bjornify.
       * @returns True if we successfully set the bjorn to a valid target.
       */
      function bjornify(target) {
        var _this = this;
        var current = this.riders.get($slot(_templateObject2712 || (_templateObject2712 = _taggedTemplateLiteral38(["buddy-bjorn"]))));
        if (current) {
          if (Array.isArray(target) ? target.includes(current) : current === target) {
            return true;
          }
          return false;
        }
        if (Array.isArray(target)) {
          var fam2 = target.find(function(f) {
            return have(f) && _this.familiar !== f && _this.riders.get($slot(_templateObject2811 || (_templateObject2811 = _taggedTemplateLiteral38(["crown-of-thrones"])))) !== f;
          });
          if (fam2) {
            this.riders.set($slot(_templateObject2911 || (_templateObject2911 = _taggedTemplateLiteral38(["buddy-bjorn"]))), fam2);
            return true;
          }
          return false;
        } else {
          if (have(target) && this.familiar !== target && !Array.from(this.riders.values()).includes(target)) {
            this.riders.set($slot(_templateObject309 || (_templateObject309 = _taggedTemplateLiteral38(["buddy-bjorn"]))), target);
            return true;
          }
          return false;
        }
      }
    )
    /**
     * Add anenthroned familiar to the outfit.
     *
     * This function does *not* equip the crown of thrones itself; it must be equipped separately.
     *
     * If a familiar is already specified for the crown of thrones that is different from the provided target, this function will return false and not change the crown of thrones.
     * @param target The familiar to enthrone, or a ranked list of familiars to try to enthrone.
     * @returns True if we successfully set the enthrone to a valid target.
     */
  }, {
    key: "enthrone",
    value: function enthrone(target) {
      var _this = this;
      var current = this.riders.get($slot(_templateObject3113 || (_templateObject3113 = _taggedTemplateLiteral38(["crown-of-thrones"]))));
      if (current) {
        if (Array.isArray(target) ? target.includes(current) : current === target) {
          return true;
        }
        return false;
      }
      if (Array.isArray(target)) {
        var fam2 = target.find(function(f) {
          return have(f) && _this.familiar !== f && _this.riders.get($slot(_templateObject3212 || (_templateObject3212 = _taggedTemplateLiteral38(["buddy-bjorn"])))) !== f;
        });
        if (fam2) {
          this.riders.set($slot(_templateObject3312 || (_templateObject3312 = _taggedTemplateLiteral38(["crown-of-thrones"]))), fam2);
          return true;
        }
        return false;
      } else {
        if (have(target) && this.familiar !== target && !Array.from(this.riders.values()).includes(target)) {
          this.riders.set($slot(_templateObject3411 || (_templateObject3411 = _taggedTemplateLiteral38(["crown-of-thrones"]))), target);
          return true;
        }
        return false;
      }
    }
    /**
     * Set the provided modes for items that may be equipped in the outfit.
     *
     * This function does *not* equip items for the set modes; they must be
     * equipped separately.
     *
     * If a mode is already set for an item that is different from the provided
     * mode, this function will return false and not change the mode for that
     * item. (But other modes might still be changed if they are compatible.)
     *
     * Note that the superhero and instuctions of a retrocape can be set
     * independently (`undefined` is treated as "don't care").
     *
     * @param modes Modes to set in this outfit.
     * @returns True if all modes were sucessfully set, and false otherwise.
     */
  }, {
    key: "setModes",
    value: function setModes(modes) {
      var _a, _b;
      var compatible = true;
      for (var _i3 = 0, _modeableCommands = modeableCommands2; _i3 < _modeableCommands.length; _i3++) {
        var mode = _modeableCommands[_i3];
        if (mode === "retrocape")
          continue;
        if (this.modes[mode] && modes[mode] && this.modes[mode] !== modes[mode]) {
          compatible = false;
        }
      }
      if (this.modes["retrocape"] && modes["retrocape"]) {
        if (this.modes["retrocape"][0] && modes["retrocape"][0] && this.modes["retrocape"][0] !== modes["retrocape"][0]) {
          compatible = false;
        }
        if (this.modes["retrocape"][1] && modes["retrocape"][1] && this.modes["retrocape"][1] !== modes["retrocape"][1]) {
          compatible = false;
        }
        this.modes["retrocape"][0] = (_a = this.modes["retrocape"][0]) !== null && _a !== void 0 ? _a : modes["retrocape"][0];
        this.modes["retrocape"][1] = (_b = this.modes["retrocape"][1]) !== null && _b !== void 0 ? _b : modes["retrocape"][1];
      }
      this.modes = _objectSpread8(_objectSpread8({}, modes), this.modes);
      return compatible;
    }
    /**
     * Check if it is possible to equip a thing to this outfit using .equip().
     *
     * This does not change the current outfit.
     *
     * @param thing The thing to equip.
     * @param slot The slot to equip them.
     * @returns True if this thing can be equipped.
     */
  }, {
    key: "canEquip",
    value: function canEquip15(thing, slot) {
      var outfit3 = this.clone();
      return outfit3.equip(thing, slot);
    }
    /**
     * Check if it is possible to equip a thing to this outfit using .equip(); if it is, do so.
     *
     * This does change the current outfit.
     * @param thing The thing to equip.
     * @param slot The slot to equip them.
     * @returns True if this thing was successfully equipped.
     */
  }, {
    key: "tryEquip",
    value: function tryEquip(thing, slot) {
      return this.canEquip(thing, slot) && this.equip(thing, slot);
    }
  }, {
    key: "afterDress",
    value: function afterDress() {
      var _this$postActions;
      (_this$postActions = this.postActions).push.apply(_this$postActions, arguments);
    }
  }, {
    key: "beforeDress",
    value: function beforeDress() {
      var _this$preActions;
      (_this$preActions = this.preActions).push.apply(_this$preActions, arguments);
    }
    /**
     * Equip this outfit.
     */
  }, {
    key: "_dress",
    value: function _dress(refreshed) {
      var _this = this;
      if (this.familiar)
        (0, import_kolmafia46.useFamiliar)(this.familiar);
      var targetEquipment = Array.from(this.equips.values());
      var usedSlots = /* @__PURE__ */ new Set();
      var nonaccessorySlots = $slots(_templateObject3510 || (_templateObject3510 = _taggedTemplateLiteral38(["weapon, off-hand, hat, back, shirt, pants, familiar"])));
      var bjorn = this.riders.get($slot(_templateObject367 || (_templateObject367 = _taggedTemplateLiteral38(["buddy-bjorn"]))));
      if (bjorn && (this.equips.get($slot(_templateObject377 || (_templateObject377 = _taggedTemplateLiteral38(["back"])))) === $item(_templateObject386 || (_templateObject386 = _taggedTemplateLiteral38(["Buddy Bjorn"]))) || this.getBonus($item(_templateObject396 || (_templateObject396 = _taggedTemplateLiteral38(["Buddy Bjorn"])))))) {
        usedSlots.add($slot(_templateObject406 || (_templateObject406 = _taggedTemplateLiteral38(["buddy-bjorn"]))));
        usedSlots.add($slot(_templateObject4111 || (_templateObject4111 = _taggedTemplateLiteral38(["crown-of-thrones"]))));
      }
      var crown = this.riders.get($slot(_templateObject4211 || (_templateObject4211 = _taggedTemplateLiteral38(["crown-of-thrones"]))));
      if (crown && (this.equips.get($slot(_templateObject4311 || (_templateObject4311 = _taggedTemplateLiteral38(["hat"])))) === $item(_templateObject448 || (_templateObject448 = _taggedTemplateLiteral38(["Crown of Thrones"]))) || this.getBonus($item(_templateObject456 || (_templateObject456 = _taggedTemplateLiteral38(["Crown of Thrones"])))))) {
        usedSlots.add($slot(_templateObject466 || (_templateObject466 = _taggedTemplateLiteral38(["buddy-bjorn"]))));
        usedSlots.add($slot(_templateObject476 || (_templateObject476 = _taggedTemplateLiteral38(["crown-of-thrones"]))));
      }
      var _iterator3 = _createForOfIteratorHelper14(nonaccessorySlots), _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
          var slot = _step3.value;
          if (targetEquipment.includes((0, import_kolmafia46.equippedItem)(slot)) && this.equips.get(slot) !== (0, import_kolmafia46.equippedItem)(slot) || this.avoid.includes((0, import_kolmafia46.equippedItem)(slot)) || slot === $slot(_templateObject556 || (_templateObject556 = _taggedTemplateLiteral38(["weapon"]))) && weaponHands((0, import_kolmafia46.equippedItem)(slot)) !== 1 && this.equips.has($slot(_templateObject566 || (_templateObject566 = _taggedTemplateLiteral38(["offhand"])))) && !this.equips.has($slot(_templateObject575 || (_templateObject575 = _taggedTemplateLiteral38(["weapon"])))))
            (0, import_kolmafia46.equip)(slot, $item.none);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      var _iterator4 = _createForOfIteratorHelper14(nonaccessorySlots), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var _slot = _step4.value;
          var equipment = this.equips.get(_slot);
          if (equipment) {
            (0, import_kolmafia46.equip)(_slot, equipment);
            usedSlots.add(_slot);
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      var accessorySlots = $slots(_templateObject486 || (_templateObject486 = _taggedTemplateLiteral38(["acc1, acc2, acc3"])));
      var accessoryEquips = accessorySlots.map(function(slot2) {
        return _this.equips.get(slot2);
      }).filter(function(item9) {
        return item9 !== void 0;
      });
      var missingAccessories = [];
      var _iterator5 = _createForOfIteratorHelper14(accessoryEquips), _step5;
      try {
        var _loop = function _loop3() {
          var accessory2 = _step5.value;
          var alreadyEquipped = accessorySlots.find(function(slot2) {
            return !usedSlots.has(slot2) && (0, import_kolmafia46.equippedItem)(slot2) === accessory2;
          });
          if (alreadyEquipped) {
            usedSlots.add(alreadyEquipped);
          } else {
            missingAccessories.push(accessory2);
          }
        };
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
          _loop();
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      for (var _i4 = 0, _missingAccessories = missingAccessories; _i4 < _missingAccessories.length; _i4++) {
        var accessory = _missingAccessories[_i4];
        var unusedSlot = accessorySlots.find(function(slot2) {
          return !usedSlots.has(slot2);
        });
        if (unusedSlot === void 0) {
          throw "No accessory slots remaining";
        }
        (0, import_kolmafia46.equip)(unusedSlot, accessory);
        usedSlots.add(unusedSlot);
      }
      var modes = convertToLibramModes(this.modes);
      if (this.modifier.length > 0) {
        var allRequirements = [new Requirement(this.modifier, {
          preventSlot: _toConsumableArray16(usedSlots),
          preventEquip: this.avoid,
          modes: modes,
          bonusEquip: this.bonuses
        })];
        if (refreshed)
          allRequirements.push(FORCE_REFRESH_REQUIREMENT);
        if (!Requirement.merge(allRequirements).maximize()) {
          if (!refreshed) {
            (0, import_kolmafia46.cliExecute)("refresh inventory");
            this._dress(true);
            return;
          } else
            throw new Error("Failed to maximize properly!");
        }
        (0, import_kolmafia46.logprint)("Maximize: ".concat(this.modifier));
      }
      applyModes(modes);
      if (bjorn && (0, import_kolmafia46.haveEquipped)($item(_templateObject496 || (_templateObject496 = _taggedTemplateLiteral38(["Buddy Bjorn"]))))) {
        if ((0, import_kolmafia46.myEnthronedFamiliar)() === bjorn)
          (0, import_kolmafia46.enthroneFamiliar)($familiar.none);
        if ((0, import_kolmafia46.myBjornedFamiliar)() !== bjorn)
          (0, import_kolmafia46.bjornifyFamiliar)(bjorn);
      }
      if (crown && (0, import_kolmafia46.haveEquipped)($item(_templateObject506 || (_templateObject506 = _taggedTemplateLiteral38(["Crown of Thrones"]))))) {
        if ((0, import_kolmafia46.myBjornedFamiliar)() === crown)
          (0, import_kolmafia46.bjornifyFamiliar)($familiar.none);
        if ((0, import_kolmafia46.myEnthronedFamiliar)() !== crown)
          (0, import_kolmafia46.enthroneFamiliar)(crown);
      }
      if (this.familiar !== void 0 && (0, import_kolmafia46.myFamiliar)() !== this.familiar)
        throw "Failed to fully dress (expected: familiar ".concat(this.familiar, ")");
      var _iterator6 = _createForOfIteratorHelper14(nonaccessorySlots), _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done; ) {
          var _slot2 = _step6.value;
          if (this.equips.has(_slot2) && (0, import_kolmafia46.equippedItem)(_slot2) !== this.equips.get(_slot2)) {
            throw "Failed to fully dress (expected: ".concat(_slot2, " ").concat(this.equips.get(_slot2), ")");
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      var _iterator7 = _createForOfIteratorHelper14(accessoryEquips), _step7;
      try {
        var _loop2 = function _loop22() {
          var accessory2 = _step7.value;
          if ((0, import_kolmafia46.equippedAmount)(accessory2) < accessoryEquips.filter(function(acc) {
            return acc === accessory2;
          }).length) {
            throw "Failed to fully dress (expected: acc ".concat(accessory2, ")");
          }
        };
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done; ) {
          _loop2();
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
      for (var _i5 = 0, _arr2 = [[$slot(_templateObject5111 || (_templateObject5111 = _taggedTemplateLiteral38(["buddy-bjorn"]))), $item(_templateObject5211 || (_templateObject5211 = _taggedTemplateLiteral38(["Buddy Bjorn"]))), import_kolmafia46.myBjornedFamiliar], [$slot(_templateObject5310 || (_templateObject5310 = _taggedTemplateLiteral38(["crown-of-thrones"]))), $item(_templateObject546 || (_templateObject546 = _taggedTemplateLiteral38(["Crown of Thrones"]))), import_kolmafia46.myEnthronedFamiliar]]; _i5 < _arr2.length; _i5++) {
        var _arr2$_i = _slicedToArray17(_arr2[_i5], 3), rider = _arr2$_i[0], throne = _arr2$_i[1], checkingFunction = _arr2$_i[2];
        var wanted = this.riders.get(rider);
        if (_toConsumableArray16(this.equips.values()).includes(throne) && wanted && checkingFunction() !== wanted) {
          throw "Failed to fully dress: (expected ".concat(rider, " ").concat(wanted, ")");
        }
      }
    }
  }, {
    key: "dress",
    value: function dress() {
      var _iterator8 = _createForOfIteratorHelper14(this.preActions), _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done; ) {
          var action = _step8.value;
          action();
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
      this._dress(false);
      var _iterator9 = _createForOfIteratorHelper14(this.postActions), _step9;
      try {
        for (_iterator9.s(); !(_step9 = _iterator9.n()).done; ) {
          var _action = _step9.value;
          _action();
        }
      } catch (err) {
        _iterator9.e(err);
      } finally {
        _iterator9.f();
      }
    }
    /**
     * Build an Outfit identical to this outfit.
     */
  }, {
    key: "clone",
    value: function clone() {
      var result = new Outfit2();
      result.equips = new Map(this.equips);
      result.skipDefaults = this.skipDefaults;
      result.familiar = this.familiar;
      result.modifier = _toConsumableArray16(this.modifier);
      result.avoid = _toConsumableArray16(this.avoid);
      result.modes = _objectSpread8({}, this.modes);
      result.riders = new Map(this.riders);
      result.bonuses = new Map(this.bonuses);
      result.beforeDress.apply(result, _toConsumableArray16(this.preActions));
      result.afterDress.apply(result, _toConsumableArray16(this.postActions));
      return result;
    }
    /**
     * Build an OutfitSpec identical to this outfit.
     */
  }, {
    key: "spec",
    value: function spec() {
      var _a;
      var result = {
        modifier: _toConsumableArray16(this.modifier),
        avoid: _toConsumableArray16(this.avoid),
        skipDefaults: this.skipDefaults,
        modes: _objectSpread8({}, this.modes),
        bonuses: new Map(this.bonuses)
      };
      if (this.familiar)
        result.familiar = this.familiar;
      for (var _i6 = 0, _outfitSlots2 = outfitSlots; _i6 < _outfitSlots2.length; _i6++) {
        var slotName = _outfitSlots2[_i6];
        var entry = this.equips.get((_a = (/* @__PURE__ */ new Map([["famequip", $slot(_templateObject585 || (_templateObject585 = _taggedTemplateLiteral38(["familiar"])))], ["offhand", $slot(_templateObject595 || (_templateObject595 = _taggedTemplateLiteral38(["off-hand"])))]])).get(slotName)) !== null && _a !== void 0 ? _a : (0, import_kolmafia46.toSlot)(slotName));
        if (entry)
          result[slotName] = entry;
      }
      var riders = {};
      var buddyRider = this.riders.get($slot(_templateObject604 || (_templateObject604 = _taggedTemplateLiteral38(["buddy-bjorn"]))));
      if (buddyRider !== void 0)
        riders["buddy-bjorn"] = buddyRider;
      var throneRider = this.riders.get($slot(_templateObject6110 || (_templateObject6110 = _taggedTemplateLiteral38(["crown-of-thrones"]))));
      if (throneRider !== void 0)
        riders["crown-of-thrones"] = throneRider;
      if (buddyRider !== void 0 || throneRider !== void 0)
        result.riders = riders;
      if (this.preActions.length)
        result.beforeDress = this.preActions;
      if (this.postActions.length)
        result.afterDress = this.postActions;
      return result;
    }
  }], [{
    key: "current",
    value: function current() {
      var _a;
      var outfit3 = new Outfit2();
      var familiar4 = (0, import_kolmafia46.myFamiliar)();
      if (outfit3.equip(familiar4)) {
        throw "Failed to create outfit from current state (expected: familiar ".concat(familiar4, ")");
      }
      for (var _i7 = 0, _outfitSlots3 = outfitSlots; _i7 < _outfitSlots3.length; _i7++) {
        var slotName = _outfitSlots3[_i7];
        var slot = (_a = (/* @__PURE__ */ new Map([["famequip", $slot(_templateObject6210 || (_templateObject6210 = _taggedTemplateLiteral38(["familiar"])))], ["offhand", $slot(_templateObject637 || (_templateObject637 = _taggedTemplateLiteral38(["off-hand"])))]])).get(slotName)) !== null && _a !== void 0 ? _a : (0, import_kolmafia46.toSlot)(slotName);
        var item9 = (0, import_kolmafia46.equippedItem)(slot);
        if (!outfit3.equip(item9, slot)) {
          throw "Failed to create outfit from current state (expected: ".concat(slot, " ").concat(item9, ")");
        }
      }
      if ((0, import_kolmafia46.haveEquipped)($item(_templateObject644 || (_templateObject644 = _taggedTemplateLiteral38(["Crown of Thrones"])))))
        outfit3.riders.set($slot(_templateObject654 || (_templateObject654 = _taggedTemplateLiteral38(["crown-of-thrones"]))), (0, import_kolmafia46.myEnthronedFamiliar)());
      if ((0, import_kolmafia46.haveEquipped)($item(_templateObject664 || (_templateObject664 = _taggedTemplateLiteral38(["Buddy Bjorn"])))))
        outfit3.riders.set($slot(_templateObject673 || (_templateObject673 = _taggedTemplateLiteral38(["buddy-bjorn"]))), (0, import_kolmafia46.myBjornedFamiliar)());
      outfit3.setModes(getCurrentModes2());
      return outfit3;
    }
  }, {
    key: "from",
    value: function from(spec) {
      var error = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
      var _a;
      var outfit3 = new Outfit2();
      if (spec instanceof Requirement) {
        var result = {};
        result.modifier = spec.maximizeParameters;
        if ((_a = spec.maximizeOptions.forceEquip) === null || _a === void 0 ? void 0 : _a.length) {
          result.equip = spec.maximizeOptions.forceEquip;
        }
        result.avoid = spec.maximizeOptions.preventEquip;
        result.bonuses = spec.maximizeOptions.bonusEquip;
        if (spec.maximizeOptions.modes) {
          result.modes = convertFromLibramModes(spec.maximizeOptions.modes);
        }
        var cleanedResult = Object.fromEntries(_toConsumableArray16(Object.entries(result)).filter(function(_ref) {
          var _ref2 = _slicedToArray17(_ref, 2), v = _ref2[1];
          return v !== void 0;
        }));
        return Outfit2.from(cleanedResult);
      }
      var success = outfit3.equip(spec);
      if (!success && error)
        throw error;
      return success ? outfit3 : null;
    }
  }]);
  return Outfit2;
}();
function convertToLibramModes(modes) {
  var _a;
  return {
    backupcamera: modes["backupcamera"],
    umbrella: modes["umbrella"],
    snowsuit: modes["snowsuit"],
    edpiece: modes["edpiece"],
    retrocape: (_a = modes["retrocape"]) === null || _a === void 0 ? void 0 : _a.filter(function(s) {
      return s !== void 0;
    }).join(" "),
    parka: modes["parka"]
  };
}
function convertFromLibramModes(modes) {
  return modes.retrocape ? _objectSpread8(_objectSpread8({}, modes), {}, {
    retrocape: modes.retrocape.split(" ")
  }) : modes;
}
function getCurrentModes2() {
  return {
    backupcamera: getMode("backupCameraMode", ["ml", "meat", "init"]),
    umbrella: getMode("umbrellaState", ["broken", "forward-facing", "bucket style", "pitchfork style", "constantly twirling", "cocoon"]),
    snowsuit: getMode("snowsuit", ["eyebrows", "smirk", "nose", "goatee", "hat"]),
    edpiece: getMode("edPiece", ["bear", "owl", "puma", "hyena", "mouse", "weasel", "fish"]),
    retrocape: [getMode("retroCapeSuperhero", ["vampire", "heck", "robot"]), getMode("retroCapeWashingInstructions", ["hold", "thrill", "kiss", "kill"])],
    parka: getMode("parkaMode", ["kachungasaur", "dilophosaur", "ghostasaurus", "spikolodon", "pterodactyl"])
  };
}
function getMode(property, options) {
  var val = get(property, "");
  return options.find(function(s) {
    return s === val;
  });
}

// node_modules/grimoire-kolmafia/dist/engine.js
var _templateObject301;
function _taggedTemplateLiteral39(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray17(arr) {
  return _arrayWithoutHoles17(arr) || _iterableToArray17(arr) || _unsupportedIterableToArray28(arr) || _nonIterableSpread17();
}
function _nonIterableSpread17() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray17(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles17(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray28(arr);
}
function _slicedToArray18(arr, i) {
  return _arrayWithHoles18(arr) || _iterableToArrayLimit18(arr, i) || _unsupportedIterableToArray28(arr, i) || _nonIterableRest18();
}
function _nonIterableRest18() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit18(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles18(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper15(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray28(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray28(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray28(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray28(o, minLen);
}
function _arrayLikeToArray28(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function ownKeys9(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread9(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys9(Object(source), true).forEach(function(key) {
      _defineProperty19(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys9(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty19(obj, key, value) {
  key = _toPropertyKey22(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _defineProperties19(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey22(descriptor.key), descriptor);
  }
}
function _createClass19(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties19(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties19(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey22(arg) {
  var key = _toPrimitive22(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive22(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _classCallCheck19(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
var EngineOptions = /* @__PURE__ */ _createClass19(function EngineOptions2() {
  _classCallCheck19(this, EngineOptions2);
});
var grimoireCCS = "grimoire_macro";
var Engine = /* @__PURE__ */ function() {
  function Engine2(tasks, options) {
    var _this = this;
    _classCallCheck19(this, Engine2);
    this.attempts = {};
    this.propertyManager = new PropertiesManager();
    this.tasks_by_name = /* @__PURE__ */ new Map();
    this.cachedCcsContents = "";
    this.options = options !== null && options !== void 0 ? options : {};
    this.tasks = tasks.map(function(task2) {
      return _objectSpread9(_objectSpread9({}, _this.options.default_task_options), task2);
    });
    var _iterator = _createForOfIteratorHelper15(this.tasks), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var task = _step.value;
        this.tasks_by_name.set(task.name, task);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    this.initPropertiesManager(this.propertyManager);
  }
  _createClass19(Engine2, [{
    key: "getNextTask",
    value: function getNextTask() {
      var _this = this;
      return this.tasks.find(function(task) {
        return _this.available(task);
      });
    }
    /**
     * Continually get the next task and execute it.
     * @param actions If given, only perform up to this many tasks.
     */
  }, {
    key: "run",
    value: function run(actions) {
      for (var i = 0; i < (actions !== null && actions !== void 0 ? actions : Infinity); i++) {
        var task = this.getNextTask();
        if (!task)
          return;
        this.execute(task);
      }
    }
    /**
     * Close the engine and reset all properties.
     * After this has been called, this object should not be used.
     */
  }, {
    key: "destruct",
    value: function destruct() {
      this.propertyManager.resetAll();
      (0, import_kolmafia47.setAutoAttack)(0);
    }
    /**
     * Check if the given task is available at this moment.
     * @returns true if all dependencies are complete and the task is ready.
     *  Note that dependencies are not checked transitively. That is, if
     *  A depends on B which depends on C, then A is ready if B is complete
     *  (regardless of if C is complete or not).
     */
  }, {
    key: "available",
    value: function available3(task) {
      var _a, _b;
      if (((_a = task.limit) === null || _a === void 0 ? void 0 : _a.skip) !== void 0 && this.attempts[task.name] >= task.limit.skip)
        return false;
      var _iterator2 = _createForOfIteratorHelper15((_b = task.after) !== null && _b !== void 0 ? _b : []), _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          var after = _step2.value;
          var after_task = this.tasks_by_name.get(after);
          if (after_task === void 0)
            throw "Unknown task dependency ".concat(after, " on ").concat(task.name);
          if (!after_task.completed())
            return false;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (task.ready && !task.ready())
        return false;
      if (task.completed())
        return false;
      return true;
    }
    /**
     * Perform all steps to execute the provided task.
     * This is the main entry point for the Engine.
     * @param task The current executing task.
     */
  }, {
    key: "execute",
    value: function execute(task) {
      var _a, _b, _c, _d, _e;
      (0, import_kolmafia47.print)("");
      (0, import_kolmafia47.print)("Executing ".concat(task.name), "blue");
      var postcondition = (_b = (_a = task.limit) === null || _a === void 0 ? void 0 : _a.guard) === null || _b === void 0 ? void 0 : _b.call(_a);
      this.acquireItems(task);
      this.acquireEffects(task);
      var task_combat = (_d = (_c = task.combat) === null || _c === void 0 ? void 0 : _c.clone()) !== null && _d !== void 0 ? _d : new CombatStrategy();
      var outfit3 = this.createOutfit(task);
      var task_resources = new CombatResources();
      this.customize(task, outfit3, task_combat, task_resources);
      this.dress(task, outfit3);
      this.setCombat(task, task_combat, task_resources);
      this.setChoices(task, this.propertyManager);
      var _iterator3 = _createForOfIteratorHelper15(task_resources.all()), _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
          var resource = _step3.value;
          (_e = resource.prepare) === null || _e === void 0 ? void 0 : _e.call(resource);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this.prepare(task);
      this.do(task);
      while (this.shouldRepeatAdv(task)) {
        _set("lastEncounter", "");
        this.do(task);
      }
      this.post(task);
      this.markAttempt(task);
      this.checkLimits(task, postcondition);
    }
    /**
     * Acquire all items for the task.
     * @param task The current executing task.
     */
  }, {
    key: "acquireItems",
    value: function acquireItems(task) {
      var _a;
      var acquire2 = undelay(task.acquire);
      var _iterator4 = _createForOfIteratorHelper15(acquire2 || []), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var to_get = _step4.value;
          var num_needed = (_a = to_get.num) !== null && _a !== void 0 ? _a : 1;
          var num_have = (0, import_kolmafia47.itemAmount)(to_get.item) + (0, import_kolmafia47.equippedAmount)(to_get.item);
          if (num_needed <= num_have)
            continue;
          if (to_get.useful !== void 0 && !to_get.useful())
            continue;
          if (to_get.get) {
            to_get.get();
          } else if (to_get.price !== void 0) {
            (0, import_kolmafia47.buy)(to_get.item, num_needed - num_have, to_get.price);
          } else if (Object.keys((0, import_kolmafia47.getRelated)(to_get.item, "fold")).length > 0) {
            (0, import_kolmafia47.cliExecute)("fold ".concat(to_get.item));
          } else {
            (0, import_kolmafia47.retrieveItem)(to_get.item, num_needed);
          }
          if ((0, import_kolmafia47.itemAmount)(to_get.item) + (0, import_kolmafia47.equippedAmount)(to_get.item) < num_needed && !to_get.optional) {
            throw "Task ".concat(task.name, " was unable to acquire ").concat(num_needed, " ").concat(to_get.item);
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }
    /**
     * Acquire all effects for the task.
     * @param task The current executing task.
     */
  }, {
    key: "acquireEffects",
    value: function acquireEffects(task) {
      var _a;
      var effects = (_a = undelay(task.effects)) !== null && _a !== void 0 ? _a : [];
      var songs = effects.filter(function(effect3) {
        return isSong(effect3);
      });
      if (songs.length > maxSongs())
        throw "Too many AT songs";
      var extraSongs = Object.keys((0, import_kolmafia47.myEffects)()).map(function(effectName) {
        return (0, import_kolmafia47.toEffect)(effectName);
      }).filter(function(effect3) {
        return isSong(effect3) && !songs.includes(effect3);
      });
      while (songs.length + extraSongs.length > maxSongs()) {
        var toRemove = extraSongs.pop();
        if (toRemove === void 0) {
          break;
        } else {
          uneffect(toRemove);
        }
      }
      var _iterator5 = _createForOfIteratorHelper15(effects), _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
          var effect2 = _step5.value;
          ensureEffect(effect2);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }
    /**
     * Create an outfit for the task with all required equipment.
     * @param task The current executing task.
     */
  }, {
    key: "createOutfit",
    value: function createOutfit(task) {
      var spec = undelay(task.outfit);
      if (spec instanceof Outfit)
        return spec.clone();
      var outfit3 = new Outfit();
      if (spec !== void 0) {
        if (!outfit3.equip(spec) && !this.options.allow_partial_outfits) {
          throw "Unable to equip all items for ".concat(task.name);
        }
      }
      return outfit3;
    }
    /**
     * Equip the outfit for the task.
     * @param task The current executing task.
     * @param outfit The outfit for the task, possibly augmented by the engine.
     */
  }, {
    key: "dress",
    value: function dress(task, outfit3) {
      if (task.do instanceof import_kolmafia47.Location)
        (0, import_kolmafia47.setLocation)(task.do);
      outfit3.dress();
    }
    /* eslint-disable @typescript-eslint/no-unused-vars */
    /**
     * Perform any engine-specific customization for the outfit and combat plan.
     *
     * This is a natural method to override in order to:
     *   * Enable the use of any resources in the outfit or combat (e.g., allocate banishers).
     *   * Equip a default outfit.
     *   * Determine additional monster macros at a global level (e.g., use flyers).
     * @param task The current executing task.
     * @param outfit The outfit for the task.
     * @param combat The combat strategy so far for the task.
     * @param resources The combat resources assigned so far for the task.
     */
  }, {
    key: "customize",
    value: function customize(task, outfit3, combat, resources) {
    }
    /* eslint-enable @typescript-eslint/no-unused-vars */
    /**
     * Set the choice settings for the task.
     * @param task The current executing task.
     * @param manager The property manager to use.
     */
  }, {
    key: "setChoices",
    value: function setChoices(task, manager) {
      var _a;
      for (var _i = 0, _Object$entries = Object.entries((_a = task.choices) !== null && _a !== void 0 ? _a : {}); _i < _Object$entries.length; _i++) {
        var _Object$entries$_i = _slicedToArray18(_Object$entries[_i], 2), key = _Object$entries$_i[0], func = _Object$entries$_i[1];
        if (func === void 0)
          continue;
        manager.setChoice(parseInt(key), undelay(func));
      }
    }
    /**
     * Save the combat macro for this task.
     * @param task The current executing task.
     * @param task_combat The completed combat strategy far for the task.
     * @param task_resources The combat resources assigned for the task.
     */
  }, {
    key: "setCombat",
    value: function setCombat(task, task_combat, task_resources) {
      var _a;
      var macro = task_combat.compile(task_resources, (_a = this.options) === null || _a === void 0 ? void 0 : _a.combat_defaults, task.do instanceof import_kolmafia47.Location ? task.do : void 0);
      macro.save();
      if (!this.options.ccs) {
        var otherCCSEntries = task_combat.compileCcs();
        var ccsContents = ["[default]", '"'.concat(macro.toString(), '"')].concat(_toConsumableArray17(otherCCSEntries)).join("\n");
        (0, import_kolmafia47.logprint)("CCS: ".concat(ccsContents.replace("\n", "\\n ")));
        if (ccsContents !== this.cachedCcsContents) {
          (0, import_kolmafia47.writeCcs)(ccsContents, grimoireCCS);
          (0, import_kolmafia47.cliExecute)("ccs ".concat(grimoireCCS));
          this.cachedCcsContents = ccsContents;
        }
      }
      var autoattack = task_combat.compileAutoattack();
      if (autoattack.toString().length > 1) {
        (0, import_kolmafia47.logprint)("Autoattack macro: ".concat(autoattack.toString()));
        autoattack.setAutoAttack();
      } else {
        (0, import_kolmafia47.setAutoAttack)(0);
      }
    }
    /**
     * Do any task-specific preparation.
     * @param task The current executing task.
     */
  }, {
    key: "prepare",
    value: function prepare(task) {
      var _a;
      (_a = task.prepare) === null || _a === void 0 ? void 0 : _a.call(task);
    }
    /**
     * Actually perform the task.
     * @param task The current executing task.
     */
  }, {
    key: "do",
    value: function _do(task) {
      var result = typeof task.do === "function" ? task.do() : task.do;
      if (result instanceof import_kolmafia47.Location)
        (0, import_kolmafia47.adv1)(result, -1, "");
      (0, import_kolmafia47.runCombat)();
      while ((0, import_kolmafia47.inMultiFight)())
        (0, import_kolmafia47.runCombat)();
      if ((0, import_kolmafia47.choiceFollowsFight)())
        (0, import_kolmafia47.runChoice)(-1);
    }
    /**
     * Check if the task.do should be immediately repeated without any prep.
     *
     * By default, this is only used to repeat a task if we hit one of:
     *   1. Halloweener dog noncombats,
     *   2. June cleaver noncombats,
     *   3. Lil' Doctor bag noncombat, or
     *   4. Turtle taming noncombats.
     * @param task The current executing task.
     * @returns True if the task should be immediately repeated.
     */
  }, {
    key: "shouldRepeatAdv",
    value: function shouldRepeatAdv(task) {
      return task.do instanceof import_kolmafia47.Location && lastEncounterWasWanderingNC();
    }
    /**
     * Do any task-specific wrapup activities.
     * @param task The current executing task.
     */
  }, {
    key: "post",
    value: function post(task) {
      var _a;
      (_a = task.post) === null || _a === void 0 ? void 0 : _a.call(task);
    }
    /**
     * Mark that an attempt was made on the current task.
     * @param task The current executing task.
     */
  }, {
    key: "markAttempt",
    value: function markAttempt(task) {
      if (!(task.name in this.attempts))
        this.attempts[task.name] = 0;
      this.attempts[task.name]++;
    }
    /**
     * Check if the task has passed any of its internal limits.
     * @param task The task to check.
     * @throws An error if any of the internal limits have been passed.
     */
  }, {
    key: "checkLimits",
    value: function checkLimits(task, postcondition) {
      var _a;
      if (!task.limit)
        return;
      var failureMessage = task.limit.message ? " ".concat(task.limit.message) : "";
      if (!task.completed()) {
        if (task.limit.tries && this.attempts[task.name] >= task.limit.tries)
          throw "Task ".concat(task.name, " did not complete within ").concat(task.limit.tries, " attempts. Please check what went wrong.").concat(failureMessage);
        if (task.limit.soft && this.attempts[task.name] >= task.limit.soft)
          throw "Task ".concat(task.name, " did not complete within ").concat(task.limit.soft, " attempts. Please check what went wrong (you may just be unlucky).").concat(failureMessage);
        if (task.limit.turns && task.do instanceof import_kolmafia47.Location && task.do.turnsSpent >= task.limit.turns)
          throw "Task ".concat(task.name, " did not complete within ").concat(task.limit.turns, " turns. Please check what went wrong.").concat(failureMessage);
        if (task.limit.unready && ((_a = task.ready) === null || _a === void 0 ? void 0 : _a.call(task)))
          throw "Task ".concat(task.name, " is still ready, but it should not be. Please check what went wrong.").concat(failureMessage);
        if (task.limit.completed)
          throw "Task ".concat(task.name, " is not completed, but it should be. Please check what went wrong.").concat(failureMessage);
      }
      if (postcondition && !postcondition()) {
        throw "Task ".concat(task.name, " failed its guard. Please check what went wrong.").concat(failureMessage);
      }
    }
  }, {
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return this.constructor.defaultSettings;
    }
    /**
     * Initialize properties for the script.
     * @param manager The properties manager to use.
     */
  }, {
    key: "initPropertiesManager",
    value: function initPropertiesManager(manager) {
      var _a;
      manager.set(this.getDefaultSettings());
      if (this.options.ccs !== "") {
        if (this.options.ccs === void 0 && (0, import_kolmafia47.readCcs)(grimoireCCS) === "") {
          (0, import_kolmafia47.writeCcs)("[ default ]\nabort", grimoireCCS);
        }
        manager.set({
          customCombatScript: (_a = this.options.ccs) !== null && _a !== void 0 ? _a : grimoireCCS
        });
      }
    }
  }]);
  return Engine2;
}();
Engine.defaultSettings = {
  logPreferenceChange: true,
  logPreferenceChangeFilter: _toConsumableArray17(new Set([].concat(_toConsumableArray17(get("logPreferenceChangeFilter").split(",")), ["libram_savedMacro", "maximizerMRUList", "testudinalTeachings", "_lastCombatStarted"]))).sort().filter(function(a) {
    return a;
  }).join(","),
  battleAction: "custom combat script",
  autoSatisfyWithMall: true,
  autoSatisfyWithNPCs: true,
  autoSatisfyWithCoinmasters: true,
  autoSatisfyWithStash: false,
  dontStopForCounters: true,
  maximizerFoldables: true,
  hpAutoRecovery: "-0.05",
  hpAutoRecoveryTarget: "0.0",
  mpAutoRecovery: "-0.05",
  mpAutoRecoveryTarget: "0.0",
  afterAdventureScript: "",
  betweenBattleScript: "",
  choiceAdventureScript: "",
  familiarScript: "",
  currentMood: "apathetic",
  autoTuxedo: true,
  autoPinkyRing: true,
  autoGarish: true,
  allowNonMoodBurning: false,
  allowSummonBurning: true,
  libramSkillsSoftcore: "none"
};
function maxSongs() {
  return have($skill(_templateObject301 || (_templateObject301 = _taggedTemplateLiteral39(["Mariachi Memory"])))) ? 4 : 3;
}
var wanderingNCs = /* @__PURE__ */ new Set([
  // Halloweener dog noncombats
  "Wooof! Wooooooof!",
  "Playing Fetch*",
  // June cleaver noncombats
  "Aunts not Ants",
  "Bath Time",
  "Beware of Aligator",
  "Delicious Sprouts",
  "Hypnotic Master",
  "Lost and Found",
  "Poetic Justice",
  "Summer Days",
  "Teacher's Pet",
  // Lil' Doctor bag noncombat
  "A Pound of Cure",
  // Turtle taming noncombats
  "Nantucket Snapper",
  "Blue Monday",
  "Capital!",
  "Training Day",
  "Boxed In",
  "Duel Nature",
  "Slow Food",
  "A Rolling Turtle Gathers No Moss",
  "Slow Road to Hell",
  "C'mere, Little Fella",
  "The Real Victims",
  "Like That Time in Tortuga",
  "Cleansing your Palette",
  "Harem Scarum",
  "Turtle in peril",
  "No Man, No Hole",
  "Slow and Steady Wins the Brawl",
  "Stormy Weather",
  "Turtles of the Universe",
  "O Turtle Were Art Thou",
  "Allow 6-8 Weeks For Delivery",
  "Kick the Can",
  "Turtles All The Way Around",
  "More eXtreme Than Usual",
  "Jewel in the Rough",
  "The worst kind of drowning",
  "Even Tamer Than Usual",
  "Never Break the Chain",
  "Close, but Yes Cigar",
  "Armchair Quarterback",
  "This Turtle Rocks!",
  "Really Sticking Her Neck Out",
  "It Came from Beneath the Sewer? Great!",
  "Don't Be Alarmed, Now",
  "Puttin' it on Wax",
  "More Like... Hurtle",
  "Musk! Musk! Musk!",
  "Silent Strolling"
]);
var zoneSpecificNCs = /* @__PURE__ */ new Map([
  ["The Horror...", ["Frat House"]]
  // Duplicate choice name
]);
function lastEncounterWasWanderingNC() {
  var _a;
  var last = get("lastEncounter");
  if (zoneSpecificNCs.has(last)) {
    var zones = (_a = zoneSpecificNCs.get(last)) !== null && _a !== void 0 ? _a : [];
    return zones.includes(get("lastAdventure"));
  } else {
    return wanderingNCs.has(last);
  }
}

// node_modules/grimoire-kolmafia/dist/route.js
function ownKeys10(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread10(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys10(Object(source), true).forEach(function(key) {
      _defineProperty20(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys10(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty20(obj, key, value) {
  key = _toPropertyKey23(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey23(arg) {
  var key = _toPrimitive23(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive23(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _createForOfIteratorHelper16(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray29(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray29(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray29(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray29(o, minLen);
}
function _arrayLikeToArray29(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function getTasks(quests) {
  var implicitAfter = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var _a, _b;
  var result = [];
  var _iterator = _createForOfIteratorHelper16(quests), _step;
  try {
    var _loop = function _loop2() {
      var quest = _step.value;
      var questCompleted = quest.completed;
      var _iterator3 = _createForOfIteratorHelper16(quest.tasks), _step3;
      try {
        var _loop22 = function _loop23() {
          var task2 = _step3.value;
          var renamedTask = _objectSpread10({}, task2);
          renamedTask.name = "".concat(quest.name, "/").concat(task2.name);
          renamedTask.after = (_a = task2.after) === null || _a === void 0 ? void 0 : _a.map(function(after2) {
            return after2.includes("/") ? after2 : "".concat(quest.name, "/").concat(after2);
          });
          if (implicitAfter && task2.after === void 0 && result.length > 0)
            renamedTask.after = [result[result.length - 1].name];
          if (questCompleted !== void 0) {
            var taskCompleted = task2.completed;
            renamedTask.completed = function() {
              return questCompleted() || taskCompleted();
            };
          }
          result.push(renamedTask);
        };
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
          _loop22();
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var names = /* @__PURE__ */ new Set();
  for (var _i = 0, _result = result; _i < _result.length; _i++) {
    var task = _result[_i];
    names.add(task.name);
  }
  for (var _i2 = 0, _result2 = result; _i2 < _result2.length; _i2++) {
    var _task = _result2[_i2];
    var _iterator2 = _createForOfIteratorHelper16((_b = _task.after) !== null && _b !== void 0 ? _b : []), _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
        var after = _step2.value;
        if (!names.has(after)) {
          throw "Unknown task dependency ".concat(after, " of ").concat(_task.name);
        }
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  }
  return result;
}

// src/index.ts
var import_kolmafia99 = require("kolmafia");

// src/barfTurn.ts
var import_kolmafia87 = require("kolmafia");

// src/combat.ts
var import_flat = __toESM(require_flat5());
var import_kolmafia79 = require("kolmafia");

// src/config.ts
var import_kolmafia48 = require("kolmafia");
var _templateObject361;
var _templateObject2101;
var _templateObject368;
var _templateObject449;
function _toConsumableArray18(arr) {
  return _arrayWithoutHoles18(arr) || _iterableToArray18(arr) || _unsupportedIterableToArray30(arr) || _nonIterableSpread18();
}
function _nonIterableSpread18() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray30(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray30(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray30(o, minLen);
}
function _iterableToArray18(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles18(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray30(arr);
}
function _arrayLikeToArray30(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral40(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var workshedAliases = [{
  item: $item(_templateObject361 || (_templateObject361 = _taggedTemplateLiteral40(["model train set"]))),
  aliases: ["trainrealm"]
}, {
  item: $item(_templateObject2101 || (_templateObject2101 = _taggedTemplateLiteral40(["Asdon Martin keyfob"]))),
  aliases: ["breadcar", "car", "aston"]
}, {
  item: $item(_templateObject368 || (_templateObject368 = _taggedTemplateLiteral40(["Little Geneticist DNA-Splicing Lab"]))),
  aliases: ["dnalab"]
}];
var unaliasedSheds = $items(_templateObject449 || (_templateObject449 = _taggedTemplateLiteral40(["cold medicine cabinet, diabolic pizza cube, portable Mayo Clinic, spinning wheel, warbear auto-anvil, warbear chemistry lab, warbear high-efficiency still, warbear induction oven, warbear jackhammer drill press, warbear LP-ROM burner"])));
var allWorkshedAliases = [].concat(_toConsumableArray18(workshedAliases.map(function(_ref) {
  var item9 = _ref.item, aliases = _ref.aliases;
  return {
    item: item9,
    aliases: [].concat(_toConsumableArray18(aliases), [item9.name.toLowerCase()])
  };
})), _toConsumableArray18(unaliasedSheds.map(function(item9) {
  return {
    item: item9,
    aliases: [item9.name.toLowerCase()]
  };
})));
function toInitials(s) {
  var initials = s.split(" ").map(function(term) {
    return term[0];
  }).join("");
  return initials.length >= 3 ? initials : "";
}
function stripString(s) {
  if (s.includes(" "))
    return stripString(s.replace(" ", ""));
  else if (s.includes("-"))
    return stripString(s.replace("-", ""));
  return s;
}
function stringToWorkshedItem(s) {
  if (s === "")
    return null;
  var lowerCaseWorkshed = s.toLowerCase();
  var strippedWorkshed = stripString(lowerCaseWorkshed);
  var validWorksheds = allWorkshedAliases.filter(function(_ref2) {
    var item9 = _ref2.item, aliases = _ref2.aliases;
    return toInitials(item9.name.toLowerCase()) === lowerCaseWorkshed || item9.name.toLowerCase().includes(lowerCaseWorkshed) || stripString(item9.name.toLowerCase()).includes(strippedWorkshed) || aliases.some(function(alias) {
      return alias === lowerCaseWorkshed;
    });
  });
  if (validWorksheds.length > 1) {
    (0, import_kolmafia48.print)("Invalid Workshed: ".concat(s, " matches multiple worksheds! Matched:"), "red");
    validWorksheds.forEach(function(_ref3) {
      var item9 = _ref3.item;
      return (0, import_kolmafia48.print)("".concat(item9), "red");
    });
    throw new Error();
  } else if (validWorksheds.length === 0) {
    (0, import_kolmafia48.print)("Invalid Workshed: ".concat(s, " does not match any worksheds!"), "red");
    throw new Error();
  }
  return validWorksheds[0].item;
}
var globalOptions = Args.create("garbo", 'This script is an automated turn-burning script for the Kingdom of Loathing that spends a day\'s resources and adventures on farming\nYou can use multiple options in conjunction, e.g. "garbo nobarf ascend"', {
  ascend: Args.flag({
    setting: "",
    help: "operate under the assumption that you're ascending after running it, rather than experiencing rollover. It will use borrowed time, it won't charge stinky cheese items, etc.",
    default: false
  }),
  loginvalidwishes: Args.flag({
    setting: "",
    help: "Logs any invalid wishes at the end of the day.",
    hidden: true
  }),
  nobarf: Args.flag({
    setting: "",
    help: "do beginning of the day setup, embezzlers, and various daily flags, but will terminate before normal Barf Mountain turns. May close NEP for the day.",
    default: false
  }),
  nodiet: Args.flag({
    setting: "",
    help: "skip eating and drinking anything as a part of its run (including pantsgiving).",
    default: false
  }),
  quick: Args.flag({
    setting: "",
    help: "*EXPERIMENTAL* garbo will sacrifice some optimal behaviors to run quicker. Estimated and actual profits may be less accurate in this mode.",
    default: false
  }),
  returnstash: Args.flag({
    setting: "",
    help: "return all items to your stash clan's stash, then quit",
    default: false
  }),
  simdiet: Args.flag({
    setting: "",
    help: "print out what it computes as an optimal diet and then exit.",
    default: false
  }),
  turns: Args.number({
    setting: "",
    help: 'terminate after the specified number of turns, e.g. "garbo 200" or "garbo turns=200" will terminate after 200 turns are spent. Negative inputs will cause garbo to terminate when the specified number of turns remain.',
    default: 0
  }),
  version: Args.flag({
    setting: "",
    help: "Print the current version and exit."
  }),
  workshed: Args.custom({
    default: null,
    help: "Intelligently switch into the workshed whose item name you give us. Also accepts substrings of the item name (e.g. dna, trainset), certain shorthand aliases (e.g. car) and initials of length >= 3 (e.g. cmc).",
    options: [].concat(_toConsumableArray18(allWorkshedAliases.map(function(_ref4) {
      var item9 = _ref4.item, aliases = _ref4.aliases;
      return [item9, "".concat([].concat(_toConsumableArray18(aliases), [toInitials(item9.name.toLowerCase())]).filter(function(alias) {
        return alias !== "";
      }).join(", "))];
    })), [[null, "leave this field blank"]])
  }, stringToWorkshedItem, "Item"),
  prefs: Args.group("You can manually set the properties below, but it's recommended that you use the relay interface (dropdown menu at the top left in the browser)", {
    valueOfAdventure: Args.number({
      setting: "valueOfAdventure",
      help: "This is a native mafia property, garbo will make purchasing decisions based on this value. Recommended to be at least 3501."
    }),
    valueOfFreeFight: Args.number({
      setting: "garbo_valueOfFreeFight",
      help: "Set to whatever you estimate the value of a free fight/run to be for you. (Default 2000)",
      default: 2e3
    }),
    yachtzeechain: Args.flag({
      setting: "garbo_yachtzeechain",
      help: "only diets after free fights, and attempts to estimate if Yachtzee! chaining is profitable for you - if so, it consumes a specific diet which uses ~0-36 spleen;      if not it automatically continues with the regular diet. Requires Spring Break Beach access (it will not grab a one-day pass for you, but will make an attempt if one is used).      Sweet Synthesis is strongly recommended, as with access to other meat% buffs from Source Terminal, Fortune Teller, KGB and the summoning chamber. Having access to a PYEC (on hand or in the clan stash) is a plus.",
      default: false
    }),
    candydish: Args.flag({
      setting: "garbo_candydish",
      help: "*DANGEROUS* garbo will consider using porcelain candy dishes. This could result in potentially destructive behavior in the instance that the user does not have sufficient meat (1-2 million) to purchase as many dishes as garbo desires or there is a price cliff.",
      default: false,
      hidden: true
    }),
    embezzlerMultiplier: Args.number({
      setting: "garbo_embezzlerMultiplier",
      help: "The amount we multiply our valueOfAdventure by when estimating marginal Embezzler profit. (Default 2.5)",
      default: 2.5
    }),
    stashClan: Args.string({
      setting: "garbo_stashClan",
      help: "If set, garbo will attempt to switch to this clan to take and return useful clan stash item, i.e. a Haiku Katana or Repaid Diaper. Leave blank to disable.",
      default: ""
    }),
    vipClan: Args.string({
      setting: "garbo_vipClan",
      help: "If set, garbo will attempt to switch to this clan to utilize VIP furniture if you have a key. Leave blank to disable",
      default: ""
    }),
    skipAscensionCheck: Args.boolean({
      setting: "garbo_skipAscensionCheck",
      help: "Set to true to skip verifying that your account has broken the prism, otherwise you will be warned upon starting the script."
    }),
    fightGlitch: Args.boolean({
      setting: "garbo_fightGlitch",
      help: "Set to true to fight the glitch season reward. You need certain skills, see relay for info."
    }),
    buyPass: Args.boolean({
      setting: "garbo_buyPass",
      help: "Set to true to buy a Dinsey day pass with FunFunds at the end of the day, if possible."
    }),
    autoUserConfirm: Args.boolean({
      setting: "garbo_autoUserConfirm",
      help: "**WARNING: Experimental** Don't show user confirm dialogs, instead automatically select yes/no in a way that will allow garbo to continue executing. Useful for scripting/headless. Risky and potentially destructive."
    }),
    restoreHpTarget: Args.number({
      setting: "garbo_restoreHpTarget",
      help: "If you're a very high level, what HP threshold should garbo aim to maintain?",
      default: 2e3
    })
  }),
  /*
    Hidden preferences, CLI input ignored
  */
  stopTurncount: Args.custom({
    hidden: true,
    default: null
  }, function() {
    return null;
  }, ""),
  saveTurns: Args.custom({
    hidden: true,
    default: 0
  }, function() {
    return 0;
  }, ""),
  askedAboutWish: Args.custom({
    hidden: true,
    default: false
  }, function() {
    return false;
  }, ""),
  triedToUnlockHiddenTavern: Args.custom({
    hidden: true,
    default: false
  }, function() {
    return false;
  }, ""),
  wishAnswer: Args.custom({
    hidden: true,
    default: false
  }, function() {
    return false;
  }, ""),
  clarasBellClaimed: Args.custom({
    hidden: true,
    setting: "_claraBellUsed"
  }, function() {
    return get("_claraBellUsed");
  }, "")
}, {
  positionalArgs: ["turns"]
});

// src/familiar/lib.ts
var import_kolmafia75 = require("kolmafia");

// src/lib.ts
var import_kolmafia51 = require("kolmafia");

// src/acquire.ts
var import_kolmafia50 = require("kolmafia");

// src/value.ts
var import_kolmafia49 = require("kolmafia");
var _templateObject369;
var _templateObject2102;
var _templateObject370;
var _templateObject450;
var _templateObject541;
var _templateObject638;
var _templateObject735;
var _templateObject829;
var _templateObject926;
var _templateObject1022;
var _templateObject1118;
var _templateObject1217;
var _templateObject1317;
var _templateObject1415;
var _templateObject1513;
var _templateObject1613;
var _templateObject1713;
var _templateObject1813;
var _templateObject1913;
var _templateObject2013;
var _templateObject2118;
var _templateObject2214;
var _templateObject2313;
var _templateObject2413;
var _templateObject2513;
var _templateObject2613;
var _templateObject2713;
var _templateObject2812;
var _templateObject2912;
var _templateObject3010;
var _templateObject3114;
var _templateObject3213;
var _templateObject3313;
var _templateObject3412;
var _templateObject3511;
var _templateObject3610;
var _templateObject378;
var _templateObject387;
var _templateObject397;
var _templateObject407;
var _templateObject4112;
var _templateObject4212;
var _templateObject4312;
var _templateObject4410;
var _templateObject457;
var _templateObject467;
var _templateObject477;
var _templateObject487;
var _templateObject497;
var _templateObject507;
var _templateObject5112;
var _templateObject5212;
var _templateObject5311;
var _templateObject547;
var _templateObject557;
function _createForOfIteratorHelper17(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray31(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray19(arr, i) {
  return _arrayWithHoles19(arr) || _iterableToArrayLimit19(arr, i) || _unsupportedIterableToArray31(arr, i) || _nonIterableRest19();
}
function _nonIterableRest19() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit19(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles19(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral41(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray19(arr) {
  return _arrayWithoutHoles19(arr) || _iterableToArray19(arr) || _unsupportedIterableToArray31(arr) || _nonIterableSpread19();
}
function _nonIterableSpread19() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray31(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray31(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray31(o, minLen);
}
function _iterableToArray19(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles19(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray31(arr);
}
function _arrayLikeToArray31(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
var garboRegularValueCache = /* @__PURE__ */ new Map();
var garboHistoricalValueCache = /* @__PURE__ */ new Map();
var specialValueLookup = new Map([[$item(_templateObject369 || (_templateObject369 = _taggedTemplateLiteral41(["Freddy Kruegerand"]))), currency.apply(void 0, _toConsumableArray19($items(_templateObject2102 || (_templateObject2102 = _taggedTemplateLiteral41(["bottle of Bloodweiser, electric Kool-Aid, Dreadsylvanian skeleton key"])))))], [$item(_templateObject370 || (_templateObject370 = _taggedTemplateLiteral41(["Beach Buck"]))), currency($item(_templateObject450 || (_templateObject450 = _taggedTemplateLiteral41(["one-day ticket to Spring Break Beach"]))))], [$item(_templateObject541 || (_templateObject541 = _taggedTemplateLiteral41(["Coinspiracy"]))), currency.apply(void 0, _toConsumableArray19($items(_templateObject638 || (_templateObject638 = _taggedTemplateLiteral41(["Merc Core deployment orders, karma shawarma"])))))], [$item(_templateObject735 || (_templateObject735 = _taggedTemplateLiteral41(["FunFunds\u2122"]))), currency($item(_templateObject829 || (_templateObject829 = _taggedTemplateLiteral41(["one-day ticket to Dinseylandfill"]))))], [$item(_templateObject926 || (_templateObject926 = _taggedTemplateLiteral41(["Volcoino"]))), currency($item(_templateObject1022 || (_templateObject1022 = _taggedTemplateLiteral41(["one-day ticket to That 70s Volcano"]))))], [$item(_templateObject1118 || (_templateObject1118 = _taggedTemplateLiteral41(["Wal-Mart gift certificate"]))), currency($item(_templateObject1217 || (_templateObject1217 = _taggedTemplateLiteral41(["one-day ticket to The Glaciest"]))))], [$item(_templateObject1317 || (_templateObject1317 = _taggedTemplateLiteral41(["Rubee\u2122"]))), currency($item(_templateObject1415 || (_templateObject1415 = _taggedTemplateLiteral41(["FantasyRealm guest pass"]))))], [$item(_templateObject1513 || (_templateObject1513 = _taggedTemplateLiteral41(["Guzzlrbuck"]))), currency($item(_templateObject1613 || (_templateObject1613 = _taggedTemplateLiteral41(["Never Don't Stop Not Striving"]))))]].concat(_toConsumableArray19(complexCandy()), [[$item(_templateObject1713 || (_templateObject1713 = _taggedTemplateLiteral41(["Merc Core deployment orders"]))), function() {
  return garboValue($item(_templateObject1813 || (_templateObject1813 = _taggedTemplateLiteral41(["one-day ticket to Conspiracy Island"]))));
}], [$item(_templateObject1913 || (_templateObject1913 = _taggedTemplateLiteral41(["free-range mushroom"]))), function() {
  return 3 * Math.max(garboValue($item(_templateObject2013 || (_templateObject2013 = _taggedTemplateLiteral41(["mushroom tea"])))) - garboValue($item(_templateObject2118 || (_templateObject2118 = _taggedTemplateLiteral41(["soda water"])))), garboValue($item(_templateObject2214 || (_templateObject2214 = _taggedTemplateLiteral41(["mushroom whiskey"])))) - garboValue($item(_templateObject2313 || (_templateObject2313 = _taggedTemplateLiteral41(["fermenting powder"])))), garboValue($item(_templateObject2413 || (_templateObject2413 = _taggedTemplateLiteral41(["mushroom filet"])))));
}], [$item(_templateObject2513 || (_templateObject2513 = _taggedTemplateLiteral41(["little firkin"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject2613 || (_templateObject2613 = _taggedTemplateLiteral41(["martini, screwdriver, strawberry daiquiri, margarita, vodka martini, tequila sunrise, bottle of Amontillado, barrel-aged martini, barrel gun"])))));
}], [$item(_templateObject2713 || (_templateObject2713 = _taggedTemplateLiteral41(["normal barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject2812 || (_templateObject2812 = _taggedTemplateLiteral41(["a little sump'm sump'm, pink pony, rockin' wagon, roll in the hay, slip 'n' slide, slap and tickle"])))));
}], [$item(_templateObject2912 || (_templateObject2912 = _taggedTemplateLiteral41(["big tun"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject3010 || (_templateObject3010 = _taggedTemplateLiteral41(["gibson, gin and tonic, mimosette, tequila sunset, vodka and tonic, zmobie"])))));
}], [$item(_templateObject3114 || (_templateObject3114 = _taggedTemplateLiteral41(["weathered barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject3213 || (_templateObject3213 = _taggedTemplateLiteral41(["bean burrito, enchanted bean burrito, jumping bean burrito"])))));
}], [$item(_templateObject3313 || (_templateObject3313 = _taggedTemplateLiteral41(["dusty barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject3412 || (_templateObject3412 = _taggedTemplateLiteral41(["spicy bean burrito, spicy enchanted bean burrito, spicy jumping bean burrito"])))));
}], [$item(_templateObject3511 || (_templateObject3511 = _taggedTemplateLiteral41(["disintegrating barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject3610 || (_templateObject3610 = _taggedTemplateLiteral41(["insanely spicy bean burrito, insanely spicy enchanted bean burrito, insanely spicy jumping bean burrito"])))));
}], [$item(_templateObject378 || (_templateObject378 = _taggedTemplateLiteral41(["moist barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject387 || (_templateObject387 = _taggedTemplateLiteral41(["cast, concentrated magicalness pill, enchanted barbell, giant moxie weed, Mountain Stream soda"])))));
}], [$item(_templateObject397 || (_templateObject397 = _taggedTemplateLiteral41(["rotting barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject407 || (_templateObject407 = _taggedTemplateLiteral41(["Doc Galaktik's Ailment Ointment, extra-strength strongness elixir, jug-o-magicalness, Marquis de Poivre soda, suntan lotion of moxiousness"])))));
}], [$item(_templateObject4112 || (_templateObject4112 = _taggedTemplateLiteral41(["mouldering barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject4212 || (_templateObject4212 = _taggedTemplateLiteral41(["creepy ginger ale, haunted battery, scroll of drastic healing, synthetic marrow, the funk"])))));
}], [$item(_templateObject4312 || (_templateObject4312 = _taggedTemplateLiteral41(["barnacled barrel"]))), function() {
  return garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject4410 || (_templateObject4410 = _taggedTemplateLiteral41(["Alewife\u2122 Ale, bazookafish bubble gum, beefy fish meat, eel battery, glistening fish meat, ink bladder, pufferfish spine, shark cartilage, slick fish meat, slug of rum, slug of shochu, slug of vodka, temporary teardrop tattoo"])))));
}], [$item(_templateObject457 || (_templateObject457 = _taggedTemplateLiteral41(["fake hand"]))), function() {
  return 5e4;
}], [$item(_templateObject467 || (_templateObject467 = _taggedTemplateLiteral41(["psychoanalytic jar"]))), function() {
  return (
    // Exclude jick because he's rate-limited
    Math.max.apply(Math, _toConsumableArray19($items(_templateObject477 || (_templateObject477 = _taggedTemplateLiteral41(["jar of psychoses (The Meatsmith), jar of psychoses (The Captain of the Gourd), jar of psychoses (The Crackpot Mystic), jar of psychoses (The Pretentious Artist), jar of psychoses (The Old Man), jar of psychoses (The Suspicious-Looking Guy)"]))).map(function(jar) {
      return garboValue(jar);
    })))
  );
}], [$item(_templateObject487 || (_templateObject487 = _taggedTemplateLiteral41(["warbear whosit"]))), function() {
  return (0.35 * garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject497 || (_templateObject497 = _taggedTemplateLiteral41(["warbear auto-anvil, warbear chemistry lab, warbear high-efficiency still, warbear induction oven, warbear jackhammer drill press, warbear LP-ROM burner, warbear energy bracers, warbear exhaust manifold, warbear exo-arm, warbear foil hat, warbear laser beacon, warbear oil pan"]))))) + 0.65 * garboAverageValue.apply(void 0, _toConsumableArray19($items(_templateObject507 || (_templateObject507 = _taggedTemplateLiteral41(["warbear metalworking primer, warbear beeping telegram, warbear gyrocopter, warbear procedural hilarity drone, warbear robo-camouflage unit, warbear sequential gaiety distribution system"])))))) / 100;
}]], _toConsumableArray19($items(_templateObject5112 || (_templateObject5112 = _taggedTemplateLiteral41(["worthless gewgaw, worthless knick-knack, worthless trinket"]))).map(function(i) {
  return [i, currency.apply(void 0, _toConsumableArray19($items(_templateObject5212 || (_templateObject5212 = _taggedTemplateLiteral41(["seal tooth, chisel, petrified noodles, jaba\xF1ero pepper, banjo strings, hot buttered roll, wooden figurine, ketchup, catsup, volleyball"])))).concat(_toConsumableArray19((0, import_kolmafia49.myClass)() === $class(_templateObject5311 || (_templateObject5311 = _taggedTemplateLiteral41(["Seal Clubber"]))) ? $items(_templateObject547 || (_templateObject547 = _taggedTemplateLiteral41(["figurine of an ancient seal"]))) : [])))];
}))));
var exclusions = /* @__PURE__ */ new Set([
  // For tradeable items which can be "consumed" infinitely
  $item(_templateObject557 || (_templateObject557 = _taggedTemplateLiteral41(["ChibiBuddy\u2122 (off)"])))
]);
function garboSaleValue(item9, useHistorical) {
  if (useHistorical) {
    if ((0, import_kolmafia49.historicalAge)(item9) <= 7 && (0, import_kolmafia49.historicalPrice)(item9) > 0) {
      var isMallMin = (0, import_kolmafia49.historicalPrice)(item9) === Math.max(100, 2 * (0, import_kolmafia49.autosellPrice)(item9));
      return isMallMin ? (0, import_kolmafia49.autosellPrice)(item9) : 0.9 * (0, import_kolmafia49.historicalPrice)(item9);
    }
  }
  return getSaleValue(item9);
}
function currency() {
  for (var _len = arguments.length, items = new Array(_len), _key = 0; _key < _len; _key++) {
    items[_key] = arguments[_key];
  }
  var unitCost = items.map(function(i) {
    var coinmaster = import_kolmafia49.Coinmaster.all().find(function(c) {
      return (0, import_kolmafia49.sellPrice)(c, i) > 0;
    });
    if (!coinmaster) {
      throw "Invalid coinmaster item ".concat(i);
    } else {
      return [i, (0, import_kolmafia49.sellPrice)(coinmaster, i)];
    }
  });
  return function() {
    return Math.max.apply(Math, _toConsumableArray19(unitCost.map(function(_ref) {
      var _ref2 = _slicedToArray19(_ref, 2), item9 = _ref2[0], cost = _ref2[1];
      return garboValue(item9) / cost;
    })));
  };
}
function complexCandy() {
  var candies = import_kolmafia49.Item.all().filter(function(i) {
    return i.candyType === "complex";
  });
  var candyLookup = [[], [], [], [], []];
  var _iterator = _createForOfIteratorHelper17(candies), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var candy = _step.value;
      var id = (0, import_kolmafia49.toInt)(candy) % 5;
      if (candy.tradeable) {
        candyLookup[id].push(candy);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var candyIdPrices = candies.filter(function(i) {
    return !i.tradeable;
  }).map(function(i) {
    return [i, function() {
      return Math.min.apply(Math, _toConsumableArray19(candyLookup[(0, import_kolmafia49.toInt)(i) % 5].map(function(i2) {
        return garboValue(i2);
      })));
    }];
  });
  return candyIdPrices;
}
function garboValue(item9) {
  var _garboRegularValueCac;
  var useHistorical = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  if (exclusions.has(item9))
    return 0;
  useHistorical || (useHistorical = globalOptions.quick);
  var cachedValue = (_garboRegularValueCac = garboRegularValueCache.get(item9)) !== null && _garboRegularValueCac !== void 0 ? _garboRegularValueCac : useHistorical ? garboHistoricalValueCache.get(item9) : void 0;
  if (cachedValue === void 0) {
    var _specialValueCompute;
    var specialValueCompute = specialValueLookup.get(item9);
    var value = (_specialValueCompute = specialValueCompute === null || specialValueCompute === void 0 ? void 0 : specialValueCompute()) !== null && _specialValueCompute !== void 0 ? _specialValueCompute : garboSaleValue(item9, useHistorical);
    (useHistorical ? garboHistoricalValueCache : garboRegularValueCache).set(item9, value);
    return value;
  }
  return cachedValue;
}
function garboAverageValue() {
  for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    items[_key2] = arguments[_key2];
  }
  return sum(items, garboValue) / items.length;
}
function bofaValue(_monster) {
  return 0;
}

// src/acquire.ts
var priceCaps = {
  "cuppa Voraci tea": 2e5,
  "cuppa Sobrie tea": 2e5,
  "potion of the field gar": 5e4,
  "Special Seasoning": 2e4,
  "spice melange": 5e5,
  "mojo filter": 1e4,
  "Ol' Scratch's salad fork": 2e5,
  "Frosty's frosty mug": 2e5,
  "sweet tooth": 25e4
};
function acquire(qty, item9, maxPrice) {
  var throwOnFail = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : true;
  var maxAggregateCost = arguments.length > 4 ? arguments[4] : void 0;
  var tryRetrievingUntradeable = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : false;
  if (maxPrice === void 0)
    maxPrice = priceCaps[item9.name];
  if (!item9.tradeable && !tryRetrievingUntradeable || maxPrice !== void 0 && maxPrice <= 0) {
    return 0;
  }
  if (maxPrice === void 0)
    throw new Error("No price cap for ".concat(item9.name, "."));
  (0, import_kolmafia50.print)("Trying to acquire ".concat(qty, " ").concat(item9.plural, "; max price ").concat(maxPrice.toFixed(0), "."), "green");
  if (qty * (0, import_kolmafia50.mallPrice)(item9) > (maxAggregateCost !== null && maxAggregateCost !== void 0 ? maxAggregateCost : 1e6)) {
    throw new Error("Aggregate cost too high! Probably a bug.");
  }
  var startAmount = (0, import_kolmafia50.itemAmount)(item9);
  var remaining = qty - startAmount;
  if (remaining <= 0)
    return qty;
  var logError = function(target, source) {
    throw new Error("Failed to remove ".concat(target, " from ").concat(source));
  };
  if (get("autoSatisfyWithCloset")) {
    var getCloset2 = Math.min(remaining, (0, import_kolmafia50.closetAmount)(item9));
    if (!(0, import_kolmafia50.takeCloset)(getCloset2, item9) && throwOnFail)
      logError(item9, "closet");
    remaining -= getCloset2;
    if (remaining <= 0)
      return qty;
  }
  var getStorage2 = Math.min(remaining, (0, import_kolmafia50.storageAmount)(item9));
  if (!(0, import_kolmafia50.takeStorage)(getStorage2, item9) && throwOnFail)
    logError(item9, "storage");
  remaining -= getStorage2;
  if (remaining <= 0)
    return qty;
  var getMall = Math.min(remaining, (0, import_kolmafia50.shopAmount)(item9));
  if (!(0, import_kolmafia50.takeShop)(getMall, item9)) {
    (0, import_kolmafia50.cliExecute)("refresh shop");
    (0, import_kolmafia50.cliExecute)("refresh inventory");
    remaining = qty - (0, import_kolmafia50.itemAmount)(item9);
    getMall = Math.min(remaining, (0, import_kolmafia50.shopAmount)(item9));
    if (!(0, import_kolmafia50.takeShop)(getMall, item9) && throwOnFail)
      logError(item9, "shop");
  }
  remaining -= getMall;
  var coinmaster = import_kolmafia50.Coinmaster.all().find(function(cm) {
    return (0, import_kolmafia50.sellsItem)(cm, item9);
  });
  var coinmasterPrice2 = coinmaster ? garboValue(coinmaster.item) * (0, import_kolmafia50.sellPrice)(coinmaster, item9) : 0;
  if (coinmaster && coinmasterPrice2 > (0, import_kolmafia50.mallPrice)(item9)) {
    (0, import_kolmafia50.buy)(item9, remaining, maxPrice);
  } else {
    withProperty("autoBuyPriceLimit", maxPrice, function() {
      return (0, import_kolmafia50.retrieveItem)(item9, qty);
    });
  }
  if ((0, import_kolmafia50.itemAmount)(item9) < qty && throwOnFail) {
    throw new Error("Failed to purchase sufficient quantities of ".concat(item9, " from the mall."));
  }
  return (0, import_kolmafia50.itemAmount)(item9) - startAmount;
}

// src/lib.ts
var _templateObject371;
var _templateObject2103;
var _templateObject379;
var _templateObject451;
var _templateObject548;
var _templateObject639;
var _templateObject736;
var _templateObject830;
var _templateObject927;
var _templateObject1023;
var _templateObject1119;
var _templateObject1218;
var _templateObject1318;
var _templateObject1416;
var _templateObject1514;
var _templateObject1614;
var _templateObject1714;
var _templateObject1814;
var _templateObject1914;
var _templateObject2014;
var _templateObject2119;
var _templateObject2215;
var _templateObject2314;
var _templateObject2414;
var _templateObject2514;
var _templateObject2614;
var _templateObject2714;
var _templateObject2813;
var _templateObject2913;
var _templateObject3011;
var _templateObject3115;
var _templateObject3214;
var _templateObject3314;
var _templateObject3413;
var _templateObject3512;
var _templateObject3611;
var _templateObject3710;
var _templateObject388;
var _templateObject398;
var _templateObject408;
function _createForOfIteratorHelper18(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray32(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _taggedTemplateLiteral42(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray20(arr) {
  return _arrayWithoutHoles20(arr) || _iterableToArray20(arr) || _unsupportedIterableToArray32(arr) || _nonIterableSpread20();
}
function _nonIterableSpread20() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray32(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray32(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray32(o, minLen);
}
function _iterableToArray20(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles20(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray32(arr);
}
function _arrayLikeToArray32(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _defineProperty21(obj, key, value) {
  key = _toPropertyKey24(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey24(arg) {
  var key = _toPrimitive24(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive24(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var eventLog = {
  initialEmbezzlersFought: 0,
  digitizedEmbezzlersFought: 0,
  embezzlerSources: [],
  yachtzees: 0
};
var BonusEquipMode = /* @__PURE__ */ function(BonusEquipMode2) {
  BonusEquipMode2[BonusEquipMode2["FREE"] = 0] = "FREE";
  BonusEquipMode2[BonusEquipMode2["EMBEZZLER"] = 1] = "EMBEZZLER";
  BonusEquipMode2[BonusEquipMode2["DMT"] = 2] = "DMT";
  BonusEquipMode2[BonusEquipMode2["BARF"] = 3] = "BARF";
  return BonusEquipMode2;
}({});
function modeIsFree(mode) {
  return [BonusEquipMode.FREE, BonusEquipMode.DMT].includes(mode);
}
function modeUseLimitedDrops(mode) {
  return [BonusEquipMode.BARF, BonusEquipMode.FREE].includes(mode);
}
function modeValueOfMeat(mode) {
  return modeIsFree(mode) ? 0 : (baseMeat + (mode === BonusEquipMode.EMBEZZLER ? 750 : 0)) / 100;
}
function modeValueOfItem(mode) {
  return mode === BonusEquipMode.BARF ? 0.72 : 0;
}
var WISH_VALUE = 5e4;
var HIGHLIGHT = (0, import_kolmafia51.isDarkMode)() ? "yellow" : "blue";
var ESTIMATED_OVERDRUNK_TURNS = 60;
var EMBEZZLER_MULTIPLIER = function() {
  return globalOptions.prefs.embezzlerMultiplier;
};
var propertyManager = new PropertiesManager();
var baseMeat = SongBoom_exports.have() && (SongBoom_exports.songChangesLeft() > 0 || SongBoom_exports.song() === "Total Eclipse of Your Meat" && (0, import_kolmafia51.myInebriety)() <= (0, import_kolmafia51.inebrietyLimit)()) ? 275 : 250;
function averageEmbezzlerNet() {
  return (baseMeat + 750) * (0, import_kolmafia51.meatDropModifier)() / 100;
}
function averageTouristNet() {
  return baseMeat * (0, import_kolmafia51.meatDropModifier)() / 100;
}
function expectedEmbezzlerProfit() {
  return averageEmbezzlerNet() - averageTouristNet();
}
function safeInterrupt() {
  if (get("garbo_interrupt", false)) {
    _set("garbo_interrupt", false);
    throw new Error("User interrupt requested. Stopping Garbage Collector.");
  }
}
function resetDailyPreference(trackingPreference) {
  var today3 = (0, import_kolmafia51.todayToString)();
  if (property_exports.getString(trackingPreference) !== today3) {
    property_exports.set(trackingPreference, today3);
    return true;
  } else {
    return false;
  }
}
function setChoice(adventure, value) {
  propertyManager.setChoices(_defineProperty21({}, adventure, value));
}
function shuffle(array) {
  var shuffledArray = _toConsumableArray20(array);
  for (var i = shuffledArray.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var temp = shuffledArray[i];
    shuffledArray[i] = shuffledArray[j];
    shuffledArray[j] = temp;
  }
  return shuffledArray;
}
function mapMonster(location, monster) {
  if ((0, import_kolmafia51.haveSkill)($skill(_templateObject371 || (_templateObject371 = _taggedTemplateLiteral42(["Map the Monsters"])))) && !get("mappingMonsters") && get("_monstersMapped") < 3) {
    (0, import_kolmafia51.useSkill)($skill(_templateObject2103 || (_templateObject2103 = _taggedTemplateLiteral42(["Map the Monsters"]))));
  }
  if (!get("mappingMonsters"))
    throw "Failed to setup Map the Monsters.";
  var myTurns = (0, import_kolmafia51.myTurncount)();
  var mapPage = "";
  for (var tries = 0; tries < 10; tries++) {
    mapPage = (0, import_kolmafia51.visitUrl)((0, import_kolmafia51.toUrl)(location), false, true);
    if (mapPage.includes("Leading Yourself Right to Them"))
      break;
    if (mapPage.includes("<!-- MONSTERID: 1965 -->") || mapPage.includes("<!-- MONSTERID: 1622  -->")) {
      (0, import_kolmafia51.runCombat)(Macro.attack().repeat().toString());
    }
    if ((0, import_kolmafia51.handlingChoice)())
      (0, import_kolmafia51.runChoice)(-1);
    if ((0, import_kolmafia51.myTurncount)() > myTurns + 1)
      throw "Map the monsters unsuccessful?";
    if (tries === 9)
      throw "Stuck trying to Map the monsters.";
  }
  var fightPage = (0, import_kolmafia51.visitUrl)("choice.php?pwd&whichchoice=1435&option=1&heyscriptswhatsupwinkwink=".concat(monster.id));
  if (!fightPage.includes(monster.name)) {
    throw "Something went wrong starting the fight.";
  }
  if ((0, import_kolmafia51.choiceFollowsFight)())
    (0, import_kolmafia51.runChoice)(-1);
}
function arrayEquals2(array1, array2) {
  return array1.length === array2.length && array1.every(function(element, index) {
    return element === array2[index];
  });
}
function questStep2(questName) {
  var stringStep = property_exports.getString(questName);
  if (stringStep === "unstarted" || stringStep === "")
    return -1;
  else if (stringStep === "started")
    return 0;
  else if (stringStep === "finished")
    return 999;
  else {
    if (stringStep.substring(0, 4) !== "step") {
      throw "Quest state parsing error.";
    }
    return parseInt(stringStep.substring(4), 10);
  }
}
function tryFeast(familiar4) {
  if (have(familiar4)) {
    (0, import_kolmafia51.useFamiliar)(familiar4);
    (0, import_kolmafia51.use)($item(_templateObject379 || (_templateObject379 = _taggedTemplateLiteral42(["moveable feast"]))));
  }
}
var ltbRun = function() {
  return ensureFreeRun({
    requireUnlimited: function() {
      return true;
    },
    noFamiliar: function() {
      return true;
    },
    noRequirements: function() {
      return true;
    },
    maximumCost: function() {
      var _get3;
      return (_get3 = get("autoBuyPriceLimit")) !== null && _get3 !== void 0 ? _get3 : 2e4;
    }
  });
};
function coinmasterPrice(item9) {
  switch (item9) {
    case $item(_templateObject451 || (_templateObject451 = _taggedTemplateLiteral42(["viral video"]))):
      return 20;
    case $item(_templateObject548 || (_templateObject548 = _taggedTemplateLiteral42(["plus one"]))):
      return 74;
    case $item(_templateObject639 || (_templateObject639 = _taggedTemplateLiteral42(["gallon of milk"]))):
      return 100;
    case $item(_templateObject736 || (_templateObject736 = _taggedTemplateLiteral42(["print screen button"]))):
      return 111;
    case $item(_templateObject830 || (_templateObject830 = _taggedTemplateLiteral42(["daily dungeon malware"]))):
      return 150;
  }
  return 0;
}
function kramcoGuaranteed() {
  return have($item(_templateObject927 || (_templateObject927 = _taggedTemplateLiteral42(["Kramco Sausage-o-Matic\u2122"])))) && getKramcoWandererChance() >= 1;
}
var log = [];
function logMessage(message) {
  log.push(message);
}
function printLog(color) {
  var _iterator = _createForOfIteratorHelper18(log), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var message = _step.value;
      (0, import_kolmafia51.print)(message, color);
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
function pillkeeperOpportunityCost() {
  var canTreasury = (0, import_kolmafia51.canAdventure)($location(_templateObject1023 || (_templateObject1023 = _taggedTemplateLiteral42(["Cobb's Knob Treasury"]))));
  var alternateUses = [{
    can: canTreasury,
    value: EMBEZZLER_MULTIPLIER() * get("valueOfAdventure")
  }, {
    can: realmAvailable("sleaze"),
    value: 4e4
  }].filter(function(x) {
    return x.can;
  });
  var alternateUse = alternateUses.length ? maxBy(alternateUses, "value") : void 0;
  var alternateUseValue = alternateUse === null || alternateUse === void 0 ? void 0 : alternateUse.value;
  if (!alternateUseValue)
    return 0;
  if (!canTreasury)
    return alternateUseValue;
  var embezzler4 = $monster(_templateObject1119 || (_templateObject1119 = _taggedTemplateLiteral42(["Knob Goblin Embezzler"])));
  var canStartChain = [CombatLoversLocket_exports.have() && (0, import_kolmafia51.getLocketMonsters)()[embezzler4.name], ChateauMantegna_exports.have() && ChateauMantegna_exports.paintingMonster() === embezzler4 && !ChateauMantegna_exports.paintingFought(), have($item(_templateObject1218 || (_templateObject1218 = _taggedTemplateLiteral42(["Clan VIP Lounge key"])))) && !get("_photocopyUsed")].some(function(x) {
    return x;
  });
  return canStartChain ? alternateUseValue : WISH_VALUE;
}
function burnLibrams() {
  var mpTarget = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
  var libramToCast = bestLibramToCast();
  while (libramToCast && (0, import_kolmafia51.mpCost)(libramToCast) <= (0, import_kolmafia51.myMp)() - mpTarget) {
    (0, import_kolmafia51.useSkill)(libramToCast);
    libramToCast = bestLibramToCast();
  }
  if (mpTarget > 0) {
    (0, import_kolmafia51.cliExecute)("burn -".concat(mpTarget));
  } else {
    (0, import_kolmafia51.cliExecute)("burn *");
  }
}
function safeRestoreMpTarget() {
  if (Math.abs((0, import_kolmafia51.myMaxmp)() - 200) < 40) {
    return Math.min((0, import_kolmafia51.myMaxmp)(), 100);
  }
  return Math.min((0, import_kolmafia51.myMaxmp)(), 200);
}
function safeRestore() {
  if (have($effect(_templateObject1318 || (_templateObject1318 = _taggedTemplateLiteral42(["Beaten Up"]))))) {
    if (get("lastEncounter") === "Sssshhsssblllrrggghsssssggggrrgglsssshhssslblgl") {
      uneffect($effect(_templateObject1416 || (_templateObject1416 = _taggedTemplateLiteral42(["Beaten Up"]))));
    } else {
      throw new Error("Hey, you're beaten up, and that's a bad thing. Lick your wounds, handle your problems, and run me again when you feel ready.");
    }
  }
  if ((0, import_kolmafia51.myHp)() < Math.min((0, import_kolmafia51.myMaxhp)() * 0.5, get("garbo_restoreHpTarget", 2e3))) {
    (0, import_kolmafia51.restoreHp)(Math.min((0, import_kolmafia51.myMaxhp)() * 0.9, get("garbo_restoreHpTarget", 2e3)));
  }
  var mpTarget = safeRestoreMpTarget();
  var shouldRestoreMp = function() {
    return (0, import_kolmafia51.myMp)() < mpTarget;
  };
  if (shouldRestoreMp() && have($item(_templateObject1514 || (_templateObject1514 = _taggedTemplateLiteral42(["Kramco Sausage-o-Matic\u2122"])))) && (have($item(_templateObject1614 || (_templateObject1614 = _taggedTemplateLiteral42(["magical sausage"])))) || have($item(_templateObject1714 || (_templateObject1714 = _taggedTemplateLiteral42(["magical sausage casing"]))))) && get("_sausagesEaten") < 23) {
    (0, import_kolmafia51.eat)($item(_templateObject1814 || (_templateObject1814 = _taggedTemplateLiteral42(["magical sausage"]))));
  }
  var soulFoodCasts = Math.floor((0, import_kolmafia51.mySoulsauce)() / (0, import_kolmafia51.soulsauceCost)($skill(_templateObject1914 || (_templateObject1914 = _taggedTemplateLiteral42(["Soul Food"])))));
  if (shouldRestoreMp() && soulFoodCasts > 0)
    (0, import_kolmafia51.useSkill)(soulFoodCasts, $skill(_templateObject2014 || (_templateObject2014 = _taggedTemplateLiteral42(["Soul Food"]))));
  if (shouldRestoreMp())
    (0, import_kolmafia51.restoreMp)(mpTarget);
  burnLibrams(mpTarget * 2);
}
function checkGithubVersion() {
  if (true) {
    (0, import_kolmafia51.print)("Skipping version check for custom build");
  } else {
    if ((0, import_kolmafia51.gitAtHead)("loathers-garbage-collector-release") || (0, import_kolmafia51.gitAtHead)("Loathing-Associates-Scripting-Society-garbage-collector-release")) {
      (0, import_kolmafia51.print)("Garbo is up to date!", HIGHLIGHT);
    } else {
      var _gitBranches$find;
      var gitBranches = JSON.parse((0, import_kolmafia51.visitUrl)("https://api.github.com/repos/".concat("CustomBuild", "/branches")));
      var releaseCommit = (_gitBranches$find = gitBranches.find(function(branchInfo) {
        return branchInfo.name === "release";
      })) === null || _gitBranches$find === void 0 ? void 0 : _gitBranches$find.commit;
      (0, import_kolmafia51.print)("Garbo is out of date. Please run 'git update!'", "red");
      (0, import_kolmafia51.print)("Local Version: ".concat((0, import_kolmafia51.gitInfo)("loathers-garbage-collector-release").commit || (0, import_kolmafia51.gitInfo)("Loathing-Associates-Scripting-Society-garbage-collector-release").commit, "."));
      (0, import_kolmafia51.print)("Release Version: ".concat(releaseCommit === null || releaseCommit === void 0 ? void 0 : releaseCommit.sha, "."));
    }
  }
}
function realmAvailable(identifier) {
  if (identifier === "fantasy") {
    return get("_frToday") || get("frAlways");
  } else if (identifier === "pirate") {
    return get("_prToday") || get("prAlways");
  }
  return get("_".concat(identifier, "AirportToday")) || get("".concat(identifier, "AirportAlways"));
}
function formatNumber(num) {
  return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
}
function userConfirmDialog(msg, defaultValue, timeOut) {
  if (get("garbo_autoUserConfirm", false)) {
    (0, import_kolmafia51.print)("Automatically selected ".concat(defaultValue, " for ").concat(msg), "red");
    return defaultValue;
  }
  if (timeOut)
    return (0, import_kolmafia51.userConfirm)(msg, timeOut, defaultValue);
  return (0, import_kolmafia51.userConfirm)(msg);
}
var latteActionSourceFinderConstraints = {
  allowedAction: function(action) {
    var _action$constraints$e, _action$constraints, _action$constraints$e2;
    if (!have($item(_templateObject2119 || (_templateObject2119 = _taggedTemplateLiteral42(["latte lovers member's mug"])))))
      return true;
    var forceEquipsOtherThanLatte = ((_action$constraints$e = action === null || action === void 0 || (_action$constraints = action.constraints) === null || _action$constraints === void 0 || (_action$constraints$e2 = _action$constraints.equipmentRequirements) === null || _action$constraints$e2 === void 0 ? void 0 : _action$constraints$e2.call(_action$constraints).maximizeOptions.forceEquip) !== null && _action$constraints$e !== void 0 ? _action$constraints$e : []).filter(function(equipment) {
      return equipment !== $item(_templateObject2215 || (_templateObject2215 = _taggedTemplateLiteral42(["latte lovers member's mug"])));
    });
    return forceEquipsOtherThanLatte.every(function(equipment) {
      return (0, import_kolmafia51.toSlot)(equipment) !== $slot(_templateObject2314 || (_templateObject2314 = _taggedTemplateLiteral42(["off-hand"])));
    }) && sum(forceEquipsOtherThanLatte, import_kolmafia51.weaponHands) < 2;
  }
};
var today2 = Date.now() - (0, import_kolmafia51.gametimeToInt)() - 1e3 * 60 * 3.5;
var olfactionCopies = have($skill(_templateObject2414 || (_templateObject2414 = _taggedTemplateLiteral42(["Transcendent Olfaction"])))) ? 3 : 0;
var gallapagosCopies = have($skill(_templateObject2514 || (_templateObject2514 = _taggedTemplateLiteral42(["Gallapagosian Mating Call"])))) ? 1 : 0;
var garbageTourists = 1 + olfactionCopies + gallapagosCopies;
var touristFamilies = 1;
var angryTourists = 1;
var barfTourists = garbageTourists + touristFamilies + angryTourists;
var garbageTouristRatio = garbageTourists / barfTourists;
var touristFamilyRatio = touristFamilies / barfTourists;
var turnsToNC = 27 * barfTourists / (garbageTourists + angryTourists + 3 * touristFamilies) + 1 * touristFamilyRatio + 2 * (1 - touristFamilyRatio) * touristFamilyRatio + 3 * (1 - touristFamilyRatio) * (1 - touristFamilyRatio);
function dogOrHolidayWanderer() {
  var extraEncounters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
  return [].concat(_toConsumableArray20(extraEncounters), ["Wooof! Wooooooof!", "Playing Fetch*", "Your Dog Found Something Again"], _toConsumableArray20(getTodaysHolidayWanderers().map(function(monster) {
    return monster.name;
  }))).includes(get("lastEncounter"));
}
var juneCleaverChoiceValues = {
  1467: {
    1: 0,
    2: 0,
    3: 5 * get("valueOfAdventure")
  },
  1468: {
    1: 0,
    2: 5,
    3: 0
  },
  1469: {
    1: 0,
    2: $item(_templateObject2614 || (_templateObject2614 = _taggedTemplateLiteral42(["Dad's brandy"]))),
    3: 1500
  },
  1470: {
    1: 0,
    2: $item(_templateObject2714 || (_templateObject2714 = _taggedTemplateLiteral42(["teacher's pen"]))),
    3: 0
  },
  1471: {
    1: $item(_templateObject2813 || (_templateObject2813 = _taggedTemplateLiteral42(["savings bond"]))),
    2: 250,
    3: 0
  },
  1472: {
    1: $item(_templateObject2913 || (_templateObject2913 = _taggedTemplateLiteral42(["trampled ticket stub"]))),
    2: $item(_templateObject3011 || (_templateObject3011 = _taggedTemplateLiteral42(["fire-roasted lake trout"]))),
    3: 0
  },
  1473: {
    1: $item(_templateObject3115 || (_templateObject3115 = _taggedTemplateLiteral42(["gob of wet hair"]))),
    2: 0,
    3: 0
  },
  1474: {
    1: 0,
    2: $item(_templateObject3214 || (_templateObject3214 = _taggedTemplateLiteral42(["guilty sprout"]))),
    3: 0
  },
  1475: {
    1: $item(_templateObject3314 || (_templateObject3314 = _taggedTemplateLiteral42(["mother's necklace"]))),
    2: 0,
    3: 0
  }
};
function valueJuneCleaverOption(result) {
  return result instanceof import_kolmafia51.Item ? garboValue(result) : result;
}
function bestJuneCleaverOption(id) {
  var options = [1, 2, 3];
  return maxBy(options, function(option) {
    return valueJuneCleaverOption(juneCleaverChoiceValues[id][option]);
  });
}
var romanticMonsterImpossible = function() {
  return counter_exports.get("Romantic Monster Window end") === Infinity || counter_exports.get("Romantic Monster Window begin") > 0 && counter_exports.get("Romantic Monster window begin") !== Infinity || get("_romanticFightsLeft") <= 0;
};
function sober() {
  return (0, import_kolmafia51.myInebriety)() <= (0, import_kolmafia51.inebrietyLimit)() + ((0, import_kolmafia51.myFamiliar)() === $familiar(_templateObject3413 || (_templateObject3413 = _taggedTemplateLiteral42(["Stooper"]))) ? -1 : 0);
}
function freeCrafts() {
  return (have($skill(_templateObject3512 || (_templateObject3512 = _taggedTemplateLiteral42(["Rapid Prototyping"])))) ? 5 - get("_rapidPrototypingUsed") : 0) + (have($skill(_templateObject3611 || (_templateObject3611 = _taggedTemplateLiteral42(["Expert Corner-Cutter"])))) ? 5 - get("_expertCornerCutterUsed") : 0);
}
var asArray = function(singleOrArray) {
  return Array.isArray(singleOrArray) ? singleOrArray : [singleOrArray];
};
var _bestShadowRift = null;
function bestShadowRift() {
  if (!_bestShadowRift) {
    _bestShadowRift = withLocation($location(_templateObject3710 || (_templateObject3710 = _taggedTemplateLiteral42(["Shadow Rift"]))), function() {
      return ClosedCircuitPayphone_exports.chooseRift({
        canAdventure: true,
        otherFilter: function(l) {
          return l !== $location(_templateObject388 || (_templateObject388 = _taggedTemplateLiteral42(["Shadow Rift (The 8-Bit Realm)"])));
        },
        sortBy: function(l) {
          var dropModifier = 1 + (0, import_kolmafia51.numericModifier)("Item Drop") / 100;
          return sum((0, import_kolmafia51.getMonsters)(l), function(m) {
            return sum((0, import_kolmafia51.itemDropsArray)(m), function(_ref2) {
              var drop = _ref2.drop, rate = _ref2.rate;
              return garboValue(drop) * clamp(rate * dropModifier / 100, 0, 1);
            });
          });
        }
      });
    });
    if (!_bestShadowRift) {
      throw new Error("Failed to find a suitable Shadow Rift to adventure in");
    }
  }
  return _bestShadowRift;
}
function withLocation(location, action) {
  var start = (0, import_kolmafia51.myLocation)();
  try {
    (0, import_kolmafia51.setLocation)(location);
    return action();
  } finally {
    (0, import_kolmafia51.setLocation)(start);
  }
}
function freeRest() {
  if (get("timesRested") >= (0, import_kolmafia51.totalFreeRests)())
    return false;
  if ((0, import_kolmafia51.myHp)() >= (0, import_kolmafia51.myMaxhp)() && (0, import_kolmafia51.myMp)() >= (0, import_kolmafia51.myMaxmp)()) {
    if (acquire(1, $item(_templateObject398 || (_templateObject398 = _taggedTemplateLiteral42(["awful poetry journal"]))), 1e4, false)) {
      (0, import_kolmafia51.use)($item(_templateObject408 || (_templateObject408 = _taggedTemplateLiteral42(["awful poetry journal"]))));
    } else {
      var bestSkill = maxBy(import_kolmafia51.Skill.all().filter(function(sk) {
        return have(sk) && (0, import_kolmafia51.mpCost)(sk) >= 1;
      }), function(sk) {
        return -(0, import_kolmafia51.mpCost)(sk);
      });
      (0, import_kolmafia51.useSkill)(bestSkill);
    }
  }
  if (get("chateauAvailable")) {
    (0, import_kolmafia51.visitUrl)("place.php?whichplace=chateau&action=chateau_restlabelfree");
  } else if (get("getawayCampsiteUnlocked")) {
    (0, import_kolmafia51.visitUrl)("place.php?whichplace=campaway&action=campaway_tentclick");
  } else {
    (0, import_kolmafia51.visitUrl)("campground.php?action=rest");
  }
  return true;
}
function printEventLog() {
  if (resetDailyPreference("garboEmbezzlerDate")) {
    property_exports.set("garboEmbezzlerCount", 0);
    property_exports.set("garboEmbezzlerSources", "");
    property_exports.set("garboYachtzeeCount", 0);
  }
  var totalEmbezzlers = property_exports.getNumber("garboEmbezzlerCount", 0) + eventLog.initialEmbezzlersFought + eventLog.digitizedEmbezzlersFought;
  var allEmbezzlerSources = property_exports.getString("garboEmbezzlerSources").split(",").filter(function(source) {
    return source;
  });
  allEmbezzlerSources.push.apply(allEmbezzlerSources, _toConsumableArray20(eventLog.embezzlerSources));
  var yacthzeeCount = get("garboYachtzeeCount", 0) + eventLog.yachtzees;
  property_exports.set("garboEmbezzlerCount", totalEmbezzlers);
  property_exports.set("garboEmbezzlerSources", allEmbezzlerSources.join(","));
  property_exports.set("garboYachtzeeCount", yacthzeeCount);
  (0, import_kolmafia51.print)("You fought ".concat(eventLog.initialEmbezzlersFought, " KGEs at the beginning of the day, and an additional ").concat(eventLog.digitizedEmbezzlersFought, " digitized KGEs throughout the day. Good work, probably!"), HIGHLIGHT);
  (0, import_kolmafia51.print)("Including this, you have fought ".concat(totalEmbezzlers, " across all ascensions today"), HIGHLIGHT);
  if (yacthzeeCount > 0) {
    (0, import_kolmafia51.print)("You explored the undersea yacht ".concat(eventLog.yachtzees, " times"), HIGHLIGHT);
    (0, import_kolmafia51.print)("Including this, you explored the undersea yacht ".concat(yacthzeeCount, " times across all ascensions today"), HIGHLIGHT);
  }
}

// src/turns.ts
var import_kolmafia74 = require("kolmafia");

// src/outfit/dropsgearAccessories.ts
var import_kolmafia52 = require("kolmafia");
var _templateObject380;
var _templateObject2104;
var _templateObject381;
var _templateObject458;
var _templateObject549;
var _templateObject640;
var _templateObject737;
var _templateObject831;
var _templateObject928;
var _templateObject1024;
var _templateObject1120;
var _templateObject1219;
var _templateObject1319;
var _templateObject1417;
var _templateObject1515;
var _templateObject1615;
var _templateObject1715;
var _templateObject1815;
var _templateObject1915;
var _templateObject2015;
var _templateObject2120;
var _templateObject2216;
var _templateObject2315;
var _templateObject2415;
var _templateObject2515;
var _templateObject2615;
var _templateObject2715;
var _templateObject2814;
var _templateObject2914;
var _templateObject3012;
var _templateObject3116;
function _createForOfIteratorHelper19(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray33(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _slicedToArray20(arr, i) {
  return _arrayWithHoles20(arr) || _iterableToArrayLimit20(arr, i) || _unsupportedIterableToArray33(arr, i) || _nonIterableRest20();
}
function _nonIterableRest20() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit20(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles20(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _toConsumableArray21(arr) {
  return _arrayWithoutHoles21(arr) || _iterableToArray21(arr) || _unsupportedIterableToArray33(arr) || _nonIterableSpread21();
}
function _nonIterableSpread21() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray33(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray33(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray33(o, minLen);
}
function _iterableToArray21(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles21(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray33(arr);
}
function _arrayLikeToArray33(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral43(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function mafiaThumbRing(mode) {
  if (!have($item(_templateObject380 || (_templateObject380 = _taggedTemplateLiteral43(["mafia thumb ring"])))) || modeIsFree(mode)) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject2104 || (_templateObject2104 = _taggedTemplateLiteral43(["mafia thumb ring"]))), (1 / 0.96 - 1) * get("valueOfAdventure")]]);
}
function luckyGoldRing(mode) {
  if (!have($item(_templateObject381 || (_templateObject381 = _taggedTemplateLiteral43(["lucky gold ring"])))) || mode === BonusEquipMode.DMT) {
    return /* @__PURE__ */ new Map([]);
  }
  var dropValues = [100].concat(_toConsumableArray21([
    (0, import_kolmafia52.itemAmount)($item(_templateObject458 || (_templateObject458 = _taggedTemplateLiteral43(["hobo nickel"])))) > 0 ? 100 : 0,
    // This should be closeted
    (0, import_kolmafia52.itemAmount)($item(_templateObject549 || (_templateObject549 = _taggedTemplateLiteral43(["sand dollar"])))) > 0 ? garboValue($item(_templateObject640 || (_templateObject640 = _taggedTemplateLiteral43(["sand dollar"])))) : 0,
    // This should be closeted
    (0, import_kolmafia52.itemAmount)($item(_templateObject737 || (_templateObject737 = _taggedTemplateLiteral43(["Freddy Kruegerand"])))) > 0 ? garboValue($item(_templateObject831 || (_templateObject831 = _taggedTemplateLiteral43(["Freddy Kruegerand"])))) : 0,
    realmAvailable("sleaze") ? garboValue($item(_templateObject928 || (_templateObject928 = _taggedTemplateLiteral43(["Beach Buck"])))) : 0,
    realmAvailable("spooky") ? garboValue($item(_templateObject1024 || (_templateObject1024 = _taggedTemplateLiteral43(["Coinspiracy"])))) : 0,
    realmAvailable("stench") ? garboValue($item(_templateObject1120 || (_templateObject1120 = _taggedTemplateLiteral43(["FunFunds\u2122"])))) : 0,
    realmAvailable("hot") && !get("_luckyGoldRingVolcoino") ? garboValue($item(_templateObject1219 || (_templateObject1219 = _taggedTemplateLiteral43(["Volcoino"])))) : 0,
    realmAvailable("cold") ? garboValue($item(_templateObject1319 || (_templateObject1319 = _taggedTemplateLiteral43(["Wal-Mart gift certificate"])))) : 0,
    realmAvailable("fantasy") ? garboValue($item(_templateObject1417 || (_templateObject1417 = _taggedTemplateLiteral43(["Rubee\u2122"])))) : 0
  ].filter(function(value) {
    return value > 0;
  })));
  return /* @__PURE__ */ new Map([[$item(_templateObject1515 || (_templateObject1515 = _taggedTemplateLiteral43(["lucky gold ring"]))), sumNumbers(dropValues) / dropValues.length / 10]]);
}
function mrCheengsSpectacles() {
  if (!have($item(_templateObject1615 || (_templateObject1615 = _taggedTemplateLiteral43(["Mr. Cheeng's spectacles"]))))) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject1715 || (_templateObject1715 = _taggedTemplateLiteral43(["Mr. Cheeng's spectacles"]))), 220]]);
}
function mrScreegesSpectacles() {
  if (!have($item(_templateObject1815 || (_templateObject1815 = _taggedTemplateLiteral43(["Mr. Screege's spectacles"]))))) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject1915 || (_templateObject1915 = _taggedTemplateLiteral43(["Mr. Screege's spectacles"]))), 180]]);
}
function bonusAccessories(mode) {
  return new Map([].concat(_toConsumableArray21(mafiaThumbRing(mode)), _toConsumableArray21(luckyGoldRing(mode)), _toConsumableArray21(mrCheengsSpectacles()), _toConsumableArray21(mrScreegesSpectacles())));
}
var cachedUsingThumbRing = null;
function usingThumbRing() {
  if (!have($item(_templateObject2015 || (_templateObject2015 = _taggedTemplateLiteral43(["mafia thumb ring"]))))) {
    return false;
  }
  if (cachedUsingThumbRing === null) {
    var gear = bonusAccessories(BonusEquipMode.BARF);
    var accessoryBonuses = _toConsumableArray21(gear.entries()).filter(function(_ref) {
      var _ref2 = _slicedToArray20(_ref, 1), item9 = _ref2[0];
      return have(item9);
    });
    (0, import_kolmafia52.setLocation)($location(_templateObject2120 || (_templateObject2120 = _taggedTemplateLiteral43(["Barf Mountain"]))));
    var meatAccessories = import_kolmafia52.Item.all().filter(function(item9) {
      return have(item9) && (0, import_kolmafia52.toSlot)(item9) === $slot(_templateObject2216 || (_templateObject2216 = _taggedTemplateLiteral43(["acc1"]))) && get2("Meat Drop", item9) > 0;
    }).map(function(item9) {
      return [item9, get2("Meat Drop", item9) * baseMeat / 100];
    });
    var accessoryValues = new Map(accessoryBonuses);
    var _iterator = _createForOfIteratorHelper19(meatAccessories), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var _accessoryValues$get;
        var _step$value = _slicedToArray20(_step.value, 2), accessory = _step$value[0], value = _step$value[1];
        accessoryValues.set(accessory, value + ((_accessoryValues$get = accessoryValues.get(accessory)) !== null && _accessoryValues$get !== void 0 ? _accessoryValues$get : 0));
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    if (have($item(_templateObject2315 || (_templateObject2315 = _taggedTemplateLiteral43(["mafia pointer finger ring"])))) && ((0, import_kolmafia52.myClass)() === $class(_templateObject2415 || (_templateObject2415 = _taggedTemplateLiteral43(["Seal Clubber"]))) && have($skill(_templateObject2515 || (_templateObject2515 = _taggedTemplateLiteral43(["Furious Wallop"])))) || have($item(_templateObject2615 || (_templateObject2615 = _taggedTemplateLiteral43(["haiku katana"])))) || have($item(_templateObject2715 || (_templateObject2715 = _taggedTemplateLiteral43(["Operation Patriot Shield"])))) || have($item(_templateObject2814 || (_templateObject2814 = _taggedTemplateLiteral43(["unwrapped knock-off retro superhero cape"])))) || have($skill(_templateObject2914 || (_templateObject2914 = _taggedTemplateLiteral43(["Head in the Game"])))))) {
      accessoryValues.set($item(_templateObject3012 || (_templateObject3012 = _taggedTemplateLiteral43(["mafia pointer finger ring"]))), 500);
    }
    var bestAccessories = _toConsumableArray21(accessoryValues.entries()).sort(function(_ref3, _ref4) {
      var _ref5 = _slicedToArray20(_ref3, 2), aBonus = _ref5[1];
      var _ref6 = _slicedToArray20(_ref4, 2), bBonus = _ref6[1];
      return bBonus - aBonus;
    }).map(function(_ref7) {
      var _ref8 = _slicedToArray20(_ref7, 1), item9 = _ref8[0];
      return item9;
    });
    cachedUsingThumbRing = bestAccessories.slice(0, 2).includes($item(_templateObject3116 || (_templateObject3116 = _taggedTemplateLiteral43(["mafia thumb ring"]))));
  }
  return cachedUsingThumbRing;
}

// src/embezzler.ts
var import_kolmafia73 = require("kolmafia");

// src/extrovermectin.ts
var import_kolmafia53 = require("kolmafia");
var _templateObject389;
var _templateObject2105;
var _templateObject390;
var _templateObject459;
var _templateObject550;
var _templateObject641;
var _templateObject738;
var _templateObject834;
var _templateObject929;
var _templateObject1025;
var _templateObject1121;
var _templateObject1220;
var _templateObject1320;
var _templateObject1418;
var _templateObject1516;
var _templateObject1616;
var _templateObject1716;
var _templateObject1816;
var _templateObject1916;
var _templateObject2016;
var _templateObject2121;
var _templateObject2217;
var _templateObject2316;
var _templateObject2416;
var _templateObject2516;
var _templateObject2616;
var _templateObject2716;
var _templateObject2815;
var _templateObject2915;
var _templateObject3013;
var _templateObject3117;
var _templateObject3215;
var _templateObject3315;
var _templateObject3414;
var _templateObject3513;
var _templateObject3612;
var _templateObject3711;
var _templateObject3810;
var _templateObject399;
var _templateObject409;
var _templateObject4113;
var _templateObject4213;
var _templateObject4313;
var _templateObject4411;
var _templateObject4510;
var _templateObject468;
var _templateObject478;
var _templateObject488;
var _templateObject498;
var _templateObject508;
var _templateObject5113;
var _templateObject5213;
var _templateObject5312;
var _templateObject5410;
var _templateObject558;
var _templateObject567;
var _templateObject576;
var _templateObject586;
var _templateObject596;
var _templateObject605;
var _templateObject6111;
var _templateObject6211;
var _templateObject6310;
var _templateObject645;
function _slicedToArray21(arr, i) {
  return _arrayWithHoles21(arr) || _iterableToArrayLimit21(arr, i) || _unsupportedIterableToArray34(arr, i) || _nonIterableRest21();
}
function _nonIterableRest21() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit21(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles21(arr) {
  if (Array.isArray(arr))
    return arr;
}
function ownKeys11(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread11(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys11(Object(source), true).forEach(function(key) {
      _defineProperty22(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys11(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty22(obj, key, value) {
  key = _toPropertyKey25(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey25(arg) {
  var key = _toPrimitive25(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive25(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray22(arr) {
  return _arrayWithoutHoles22(arr) || _iterableToArray22(arr) || _unsupportedIterableToArray34(arr) || _nonIterableSpread22();
}
function _nonIterableSpread22() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray34(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray34(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray34(o, minLen);
}
function _iterableToArray22(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles22(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray34(arr);
}
function _arrayLikeToArray34(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral44(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var embezzler = $monster(_templateObject389 || (_templateObject389 = _taggedTemplateLiteral44(["Knob Goblin Embezzler"])));
var crate = $monster(_templateObject2105 || (_templateObject2105 = _taggedTemplateLiteral44(["crate"])));
function expectedGregs(skillSource) {
  var habitatCharges = have($skill(_templateObject390 || (_templateObject390 = _taggedTemplateLiteral44(["Just the Facts"])))) ? 3 - get("_monsterHabitatsRecalled", 0) : 0;
  var habitatGregs = new Array(habitatCharges).fill({
    copies: 5,
    skillSource: "habitat",
    replaces: 0,
    extra: 0
  });
  var extroGregs = new Array(50).fill({
    copies: 3,
    skillSource: "extro",
    replaces: 0,
    extra: 0
  });
  var baseGregs = [].concat(_toConsumableArray22(habitatGregs), _toConsumableArray22(extroGregs));
  var replacementsPerGreg = function(source) {
    return have($skill(_templateObject459 || (_templateObject459 = _taggedTemplateLiteral44(["Transcendent Olfaction"])))) ? Math.floor(source.copies * 7 / 3) : Math.floor(source.copies * 5 / 3);
  };
  var timeSpunGregs = have($item(_templateObject550 || (_templateObject550 = _taggedTemplateLiteral44(["Time-Spinner"])))) ? Math.floor((10 - get("_timeSpinnerMinutesUsed")) / 3) : 0;
  var orbGregs = have($item(_templateObject641 || (_templateObject641 = _taggedTemplateLiteral44(["miniature crystal ball"])))) ? 1 : 0;
  var macrometeors = have($skill(_templateObject738 || (_templateObject738 = _taggedTemplateLiteral44(["Meteor Lore"])))) ? 10 - get("_macrometeoriteUses") : 0;
  var replaceEnemies = have($item(_templateObject834 || (_templateObject834 = _taggedTemplateLiteral44(["Powerful Glove"])))) ? Math.floor((100 - get("_powerfulGloveBatteryPowerUsed")) / 10) : 0;
  var firstReplaces = clamp(replacementsPerGreg(baseGregs[0]), 0, macrometeors + replaceEnemies);
  var initialCast = {
    replacesLeft: macrometeors + replaceEnemies - firstReplaces,
    sources: [_objectSpread11(_objectSpread11({}, baseGregs[0]), {}, {
      replaces: firstReplaces,
      extra: timeSpunGregs + orbGregs
    })]
  };
  return baseGregs.slice(1).reduce(function(acc, curr) {
    var currentReplaces = clamp(replacementsPerGreg(curr), 0, acc.replacesLeft);
    return {
      replacesLeft: acc.replacesLeft - currentReplaces,
      sources: [].concat(_toConsumableArray22(acc.sources), [_objectSpread11(_objectSpread11({}, curr), {}, {
        replaces: currentReplaces,
        extra: orbGregs
      })])
    };
  }, initialCast).sources.filter(function(source) {
    return source.skillSource === skillSource;
  }).map(function(source) {
    return source.copies + source.replaces + source.extra;
  });
}
function doingGregFight() {
  var extrovermectin = get("beGregariousCharges") > 0 || get("beGregariousFightsLeft") > 0;
  var habitat = have($skill(_templateObject929 || (_templateObject929 = _taggedTemplateLiteral44(["Just the Facts"])))) && (get("_monsterHabitatsRecalled") < 3 || get("monsterHabitatsFightsLeft") > 0);
  return extrovermectin || habitat || globalOptions.prefs.yachtzeechain && !get("_garboYachtzeeChainCompleted");
}
function crateStrategy() {
  if (!doingGregFight())
    return null;
  if (have($skill(_templateObject1025 || (_templateObject1025 = _taggedTemplateLiteral44(["Transcendent Olfaction"])))) && (property_exports.getString("olfactedMonster") === "crate" || get("_olfactionsUsed") < 2) || have($skill(_templateObject1121 || (_templateObject1121 = _taggedTemplateLiteral44(["Long Con"])))) && (get("longConMonster") === crate || get("_longConUsed") < 4)) {
    return "Sniff";
  }
  if (have($item(_templateObject1220 || (_templateObject1220 = _taggedTemplateLiteral44(["miniature crystal ball"])))))
    return "Orb";
  if (have($item(_templateObject1320 || (_templateObject1320 = _taggedTemplateLiteral44(["Fourth of May Cosplay Saber"])))) && get("_saberForceUses") < 5)
    return "Saber";
  return null;
}
function hasMonsterReplacers() {
  return have($skill(_templateObject1418 || (_templateObject1418 = _taggedTemplateLiteral44(["Meteor Lore"])))) && get("_macrometeoriteUses") < 10 || have($item(_templateObject1516 || (_templateObject1516 = _taggedTemplateLiteral44(["Powerful Glove"])))) && get("_powerfulGloveBatteryPowerUsed") < 90;
}
function saberCrateIfSafe() {
  var canSaber = have($item(_templateObject1616 || (_templateObject1616 = _taggedTemplateLiteral44(["Fourth of May Cosplay Saber"])))) && get("_saberForceUses") < 5;
  var isSafeToSaber = get("beGregariousFightsLeft") === 0 || get("_saberForceMonsterCount") > 0;
  if (!canSaber || !isSafeToSaber)
    return;
  do {
    var _tryFindFreeRun, _run$constraints$fami, _run$constraints$fami2, _run$constraints, _run$constraints$prep, _run$constraints2, _run$constraints$equi, _run$constraints$equi2, _run$constraints3;
    var run = (_tryFindFreeRun = tryFindFreeRun()) !== null && _tryFindFreeRun !== void 0 ? _tryFindFreeRun : ltbRun();
    (0, import_kolmafia53.useFamiliar)((_run$constraints$fami = (_run$constraints$fami2 = (_run$constraints = run.constraints).familiar) === null || _run$constraints$fami2 === void 0 ? void 0 : _run$constraints$fami2.call(_run$constraints)) !== null && _run$constraints$fami !== void 0 ? _run$constraints$fami : freeFightFamiliar({
      canChooseMacro: false
    }));
    (_run$constraints$prep = (_run$constraints2 = run.constraints).preparation) === null || _run$constraints$prep === void 0 ? void 0 : _run$constraints$prep.call(_run$constraints2);
    new Requirement([], {
      forceEquip: $items(_templateObject1716 || (_templateObject1716 = _taggedTemplateLiteral44(["Fourth of May Cosplay Saber"]))),
      preventEquip: $items(_templateObject1816 || (_templateObject1816 = _taggedTemplateLiteral44(["Kramco Sausage-o-Matic\u2122"])))
    }).merge((_run$constraints$equi = (_run$constraints$equi2 = (_run$constraints3 = run.constraints).equipmentRequirements) === null || _run$constraints$equi2 === void 0 ? void 0 : _run$constraints$equi2.call(_run$constraints3)) !== null && _run$constraints$equi !== void 0 ? _run$constraints$equi : new Requirement([], {})).maximize();
    setChoice(1387, 2);
    garboAdventure($location(_templateObject1916 || (_templateObject1916 = _taggedTemplateLiteral44(["Noob Cave"]))), Macro2.if_(crate, Macro2.skill($skill(_templateObject2016 || (_templateObject2016 = _taggedTemplateLiteral44(["Use the Force"]))))).if_($monster(_templateObject2121 || (_templateObject2121 = _taggedTemplateLiteral44(["sausage goblin"]))), Macro2.kill()).ifHolidayWanderer(run.macro).abort());
  } while (["Puttin' it on Wax", "Wooof! Wooooooof!", "Playing Fetch*", "Your Dog Found Something Again"].includes(get("lastEncounter")));
}
function equipOrbIfDesired() {
  if (have($item(_templateObject2217 || (_templateObject2217 = _taggedTemplateLiteral44(["miniature crystal ball"])))) && !(get("_saberForceMonster") === crate && get("_saberForceMonsterCount") > 0) && crateStrategy() !== "Sniff" && [void 0, crate].includes(CrystalBall_exports.ponder().get($location(_templateObject2316 || (_templateObject2316 = _taggedTemplateLiteral44(["Noob Cave"])))))) {
    (0, import_kolmafia53.equip)($slot(_templateObject2416 || (_templateObject2416 = _taggedTemplateLiteral44(["familiar"]))), $item(_templateObject2516 || (_templateObject2516 = _taggedTemplateLiteral44(["miniature crystal ball"]))));
  }
}
function initializeCrates() {
  do {
    if (property_exports.getString("olfactedMonster") !== "crate") {
      (0, import_kolmafia53.visitUrl)("desc_effect.php?whicheffect=".concat($effect(_templateObject2616 || (_templateObject2616 = _taggedTemplateLiteral44(["On the Trail"]))).descid));
    }
    if (crateStrategy() === "Sniff" && (property_exports.getString("olfactedMonster") !== "crate" || !have($effect(_templateObject2716 || (_templateObject2716 = _taggedTemplateLiteral44(["On the Trail"])))) || property_exports.getString("longConMonster") !== "crate" || get("_longConUsed") <= 0) || crateStrategy() === "Orb" && (get("_gallapagosMonster") !== crate && have($skill(_templateObject2815 || (_templateObject2815 = _taggedTemplateLiteral44(["Gallapagosian Mating Call"])))) || have($item(_templateObject2915 || (_templateObject2915 = _taggedTemplateLiteral44(["latte lovers member's mug"])))) && !get("_latteCopyUsed"))) {
      var _tryFindFreeRun2, _run$constraints$fami3, _run$constraints$fami4, _run$constraints4, _run$constraints$prep2, _run$constraints5, _run$constraints$equi3, _run$constraints$equi4, _run$constraints6;
      var run = (_tryFindFreeRun2 = tryFindFreeRun(latteActionSourceFinderConstraints)) !== null && _tryFindFreeRun2 !== void 0 ? _tryFindFreeRun2 : ltbRun();
      setChoice(1387, 2);
      var macro = Macro2.trySkill($skill(_templateObject3013 || (_templateObject3013 = _taggedTemplateLiteral44(["Transcendent Olfaction"])))).trySkill($skill(_templateObject3117 || (_templateObject3117 = _taggedTemplateLiteral44(["Long Con"])))).trySkill($skill(_templateObject3215 || (_templateObject3215 = _taggedTemplateLiteral44(["Offer Latte to Opponent"])))).externalIf(get("_gallapagosMonster") !== crate && have($skill(_templateObject3315 || (_templateObject3315 = _taggedTemplateLiteral44(["Gallapagosian Mating Call"])))), Macro2.trySkill($skill(_templateObject3414 || (_templateObject3414 = _taggedTemplateLiteral44(["Gallapagosian Mating Call"]))))).trySkill($skill(_templateObject3513 || (_templateObject3513 = _taggedTemplateLiteral44(["Use the Force"])))).step(run.macro);
      (0, import_kolmafia53.useFamiliar)((_run$constraints$fami3 = (_run$constraints$fami4 = (_run$constraints4 = run.constraints).familiar) === null || _run$constraints$fami4 === void 0 ? void 0 : _run$constraints$fami4.call(_run$constraints4)) !== null && _run$constraints$fami3 !== void 0 ? _run$constraints$fami3 : freeFightFamiliar({
        canChooseMacro: false
      }));
      (_run$constraints$prep2 = (_run$constraints5 = run.constraints).preparation) === null || _run$constraints$prep2 === void 0 ? void 0 : _run$constraints$prep2.call(_run$constraints5);
      new Requirement(["100 Monster Level"], {
        forceEquip: $items(_templateObject3612 || (_templateObject3612 = _taggedTemplateLiteral44(["latte lovers member's mug, Fourth of May Cosplay Saber"]))).filter(function(item9) {
          return have(item9);
        }),
        preventEquip: $items(_templateObject3711 || (_templateObject3711 = _taggedTemplateLiteral44(["carnivorous potted plant"])))
      }).merge((_run$constraints$equi3 = (_run$constraints$equi4 = (_run$constraints6 = run.constraints).equipmentRequirements) === null || _run$constraints$equi4 === void 0 ? void 0 : _run$constraints$equi4.call(_run$constraints6)) !== null && _run$constraints$equi3 !== void 0 ? _run$constraints$equi3 : new Requirement([], {})).maximize();
      garboAdventure($location(_templateObject3810 || (_templateObject3810 = _taggedTemplateLiteral44(["Noob Cave"]))), Macro2.if_(crate, macro).ifHolidayWanderer(run.macro).abort());
      (0, import_kolmafia53.visitUrl)("desc_effect.php?whicheffect=".concat($effect(_templateObject399 || (_templateObject399 = _taggedTemplateLiteral44(["On the Trail"]))).descid));
    } else if (crateStrategy() === "Saber" && (get("_saberForceMonster") !== crate || get("_saberForceMonsterCount") === 0) && get("_saberForceUses") < 5) {
      saberCrateIfSafe();
    } else
      break;
  } while (!["crate", "Using the Force"].includes(get("lastEncounter")));
}
function getClub() {
  var _Item$all$find;
  if (have($skill(_templateObject409 || (_templateObject409 = _taggedTemplateLiteral44(["Iron Palm Technique"])))) && !have($effect(_templateObject4113 || (_templateObject4113 = _taggedTemplateLiteral44(["Iron Palms"]))))) {
    (0, import_kolmafia53.useSkill)($skill(_templateObject4213 || (_templateObject4213 = _taggedTemplateLiteral44(["Iron Palm Technique"]))));
  }
  var availableClub = (_Item$all$find = import_kolmafia53.Item.all().find(function(i) {
    return have(i) && (0, import_kolmafia53.canEquip)(i) && (0, import_kolmafia53.weaponHands)(i) === 2 && ((0, import_kolmafia53.itemType)(i) === "club" || have($effect(_templateObject4313 || (_templateObject4313 = _taggedTemplateLiteral44(["Iron Palms"])))) && (0, import_kolmafia53.itemType)(i) === "sword");
  })) !== null && _Item$all$find !== void 0 ? _Item$all$find : $item(_templateObject4411 || (_templateObject4411 = _taggedTemplateLiteral44(["amok putter"])));
  (0, import_kolmafia53.retrieveItem)(availableClub);
  return availableClub;
}
var MAX_BANISH_PRICE = 1e5;
var combatItem = function(item9, maxPrice) {
  return {
    name: "".concat(item9),
    available: function() {
      return (0, import_kolmafia53.mallPrice)(item9) < (maxPrice !== null && maxPrice !== void 0 ? maxPrice : MAX_BANISH_PRICE);
    },
    macro: function() {
      return Macro2.item(item9);
    },
    price: function() {
      return (0, import_kolmafia53.mallPrice)(item9);
    },
    prepare: function() {
      return acquire(1, item9, maxPrice !== null && maxPrice !== void 0 ? maxPrice : MAX_BANISH_PRICE);
    }
    // put a sanity ceiling of 50k on the banish
  };
};
var longBanishes = [combatItem($item(_templateObject4510 || (_templateObject4510 = _taggedTemplateLiteral44(["human musk"])))), combatItem($item(_templateObject468 || (_templateObject468 = _taggedTemplateLiteral44(["tryptophan dart"])))), combatItem($item(_templateObject478 || (_templateObject478 = _taggedTemplateLiteral44(["Daily Affirmation: Be a Mind Master"])))), {
  name: "Batter Up!",
  available: function() {
    return (0, import_kolmafia53.myFury)() >= 5 && have($skill(_templateObject488 || (_templateObject488 = _taggedTemplateLiteral44(["Batter Up!"]))));
  },
  macro: function() {
    return Macro2.skill($skill(_templateObject498 || (_templateObject498 = _taggedTemplateLiteral44(["Batter Up!"]))));
  },
  prepare: function() {
    var club = getClub();
    new Requirement(["100 Monster Level"], {
      preventEquip: $items(_templateObject508 || (_templateObject508 = _taggedTemplateLiteral44(["carnivorous potted plant"]))),
      forceEquip: [club]
    }).maximize();
  }
}, {
  name: "Nanobrawny",
  available: function() {
    return true;
  },
  price: function() {
    return (0, import_kolmafia53.mallPrice)($item(_templateObject5113 || (_templateObject5113 = _taggedTemplateLiteral44(["pocket wish"])))) * 2;
  },
  // could be 3 if you are unlucky
  macro: function() {
    return Macro2.skill($skill(_templateObject5213 || (_templateObject5213 = _taggedTemplateLiteral44(["Unleash Nanites"]))));
  },
  prepare: function() {
    while ((0, import_kolmafia53.haveEffect)($effect(_templateObject5312 || (_templateObject5312 = _taggedTemplateLiteral44(["Nanobrawny"])))) < 40) {
      acquire(1, $item(_templateObject5410 || (_templateObject5410 = _taggedTemplateLiteral44(["pocket wish"]))), 5e4);
      (0, import_kolmafia53.cliExecute)("genie effect Nanobrawny");
    }
  }
}];
var shortBanishes = [combatItem($item(_templateObject558 || (_templateObject558 = _taggedTemplateLiteral44(["Louder Than Bomb"]))), 1e4), combatItem($item(_templateObject567 || (_templateObject567 = _taggedTemplateLiteral44(["tennis ball"]))), 1e4)];
function banishBunny() {
  var banishes = [].concat(longBanishes, _toConsumableArray22(!have($item(_templateObject576 || (_templateObject576 = _taggedTemplateLiteral44(["miniature crystal ball"])))) ? shortBanishes : [])).filter(function(b) {
    return b.available();
  });
  var banish = maxBy(banishes, function(banish2) {
    var _banish$price, _banish$price2;
    return (_banish$price = (_banish$price2 = banish2.price) === null || _banish$price2 === void 0 ? void 0 : _banish$price2.call(banish2)) !== null && _banish$price !== void 0 ? _banish$price : 0;
  }, true);
  do {
    var _banish$prepare;
    (_banish$prepare = banish.prepare) === null || _banish$prepare === void 0 ? void 0 : _banish$prepare.call(banish);
    garboAdventure($location(_templateObject586 || (_templateObject586 = _taggedTemplateLiteral44(["The Dire Warren"]))), Macro2.if_($monster(_templateObject596 || (_templateObject596 = _taggedTemplateLiteral44(["fluffy bunny"]))), banish.macro()).embezzler());
  } while ("fluffy bunny" !== get("lastEncounter") && !get("banishedMonsters").includes("fluffy bunny"));
}
function getBanishedPhyla() {
  var phylumBanish = /* @__PURE__ */ new Map();
  var banishPart = get("banishedPhyla").split(":").slice(0, 2);
  if (banishPart.length === 2) {
    var _banishPart = _slicedToArray21(banishPart, 2), skill = _banishPart[0], phylum = _banishPart[1];
    phylumBanish.set((0, import_kolmafia53.toSkill)(skill), (0, import_kolmafia53.toPhylum)(phylum));
  }
  return phylumBanish;
}
function initializeDireWarren() {
  (0, import_kolmafia53.visitUrl)("museum.php?action=icehouse");
  var banishedMonsters = getBanishedMonsters();
  var banishedPhyla = getBanishedPhyla();
  if (_toConsumableArray22(banishedMonsters.values()).find(function(m) {
    return m === $monster(_templateObject605 || (_templateObject605 = _taggedTemplateLiteral44(["fluffy bunny"])));
  }))
    return;
  if (_toConsumableArray22(banishedPhyla.values()).find(function(p) {
    return p === $monster(_templateObject6111 || (_templateObject6111 = _taggedTemplateLiteral44(["fluffy bunny"]))).phylum;
  }))
    return;
  banishBunny();
}
function initializeExtrovermectinZones() {
  if (get("beGregariousFightsLeft") === 0) {
    if (hasMonsterReplacers())
      initializeCrates();
    initializeDireWarren();
  }
}
function gregReady() {
  return get("beGregariousMonster") === embezzler && get("beGregariousFightsLeft") > 0 || get("monsterHabitatsMonster") === embezzler && get("monsterHabitatsFightsLeft") > 0;
}
function totalGregCharges(countPartial) {
  var extroPartial = get("beGregariousFightsLeft") > 0 ? 1 : 0;
  var habitatPartial = get("monsterHabitatsFightsLeft") > 0 ? 1 : 0;
  return get("beGregariousCharges") + (have($skill(_templateObject6211 || (_templateObject6211 = _taggedTemplateLiteral44(["Just the Facts"])))) ? 3 - get("_monsterHabitatsRecalled") : 0) + (countPartial ? extroPartial + habitatPartial : 0);
}
function possibleGregCrystalBall() {
  if (have($item(_templateObject6310 || (_templateObject6310 = _taggedTemplateLiteral44(["miniature crystal ball"]))))) {
    var ponderCount = CrystalBall_exports.ponder().get($location(_templateObject645 || (_templateObject645 = _taggedTemplateLiteral44(["The Dire Warren"])))) === embezzler ? 1 : 0;
    return totalGregCharges(true) + ponderCount;
  }
  return 0;
}

// src/outfit/barf.ts
var import_kolmafia62 = require("kolmafia");

// src/outfit/bjorn.ts
function _slicedToArray22(arr, i) {
  return _arrayWithHoles22(arr) || _iterableToArrayLimit22(arr, i) || _unsupportedIterableToArray35(arr, i) || _nonIterableRest22();
}
function _nonIterableRest22() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit22(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles22(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _toConsumableArray23(arr) {
  return _arrayWithoutHoles23(arr) || _iterableToArray23(arr) || _unsupportedIterableToArray35(arr) || _nonIterableSpread23();
}
function _nonIterableSpread23() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray35(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray35(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray35(o, minLen);
}
function _iterableToArray23(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles23(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray35(arr);
}
function _arrayLikeToArray35(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function valueBjornModifiers(mode, familiar4) {
  var meatValue = modeValueOfMeat(mode);
  var leprechaunMultiplier = findLeprechaunMultiplier(familiar4);
  var leprechaunCoefficient = meatValue * (2 * leprechaunMultiplier + Math.sqrt(leprechaunMultiplier));
  var itemValue = modeValueOfItem(mode);
  var fairyMultiplier = findFairyMultiplier(familiar4);
  var fairyCoefficient = itemValue * (fairyMultiplier + Math.sqrt(fairyMultiplier) / 2);
  return CrownOfThrones_exports.createModifierValueFunction(["Familiar Weight", "Meat Drop", "Item Drop"], {
    "Familiar Weight": function(mod) {
      return mod * (fairyCoefficient + leprechaunCoefficient);
    },
    "Item Drop": function(mod) {
      return mod * itemValue;
    },
    "Meat Drop": function(mod) {
      return mod * meatValue;
    }
  });
}
function dropsValueFunction(drops) {
  return Array.isArray(drops) ? garboAverageValue.apply(void 0, _toConsumableArray23(drops)) : sum(_toConsumableArray23(drops.entries()), function(_ref) {
    var _ref2 = _slicedToArray22(_ref, 2), item9 = _ref2[0], quantity = _ref2[1];
    return quantity * garboValue(item9);
  }) / sumNumbers(_toConsumableArray23(drops.values()));
}
function chooseBjorn(mode, familiar4) {
  var sim = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  var leprechaunMultiplier = findLeprechaunMultiplier(familiar4);
  var fairyMultiplier = findFairyMultiplier(familiar4);
  var ignoreLimitedDrops = sim || !modeUseLimitedDrops(mode);
  var key = "Leprechaun:".concat(leprechaunMultiplier.toFixed(2), ";Fairy:").concat(fairyMultiplier.toFixed(2), ";ignoreLimitedDrops:").concat(ignoreLimitedDrops);
  if (!CrownOfThrones_exports.hasRiderMode(key)) {
    CrownOfThrones_exports.createRiderMode(key, {
      ignoreLimitedDrops: ignoreLimitedDrops,
      modifierValueFunction: valueBjornModifiers(mode, familiar4),
      dropsValueFunction: dropsValueFunction
    });
  }
  var result = CrownOfThrones_exports.pickRider(key);
  if (!result)
    throw new Error("Unable to choose rider for key ".concat(key));
  return {
    familiar: result.familiar,
    value: CrownOfThrones_exports.valueRider(result, valueBjornModifiers(mode, familiar4), dropsValueFunction)
  };
}

// src/outfit/dropsgear.ts
var import_kolmafia60 = require("kolmafia");

// src/diet.ts
var import_kolmafia59 = require("kolmafia");

// src/clan.ts
var import_kolmafia54 = require("kolmafia");
var _templateObject391;
var _templateObject2106;
var _templateObject3100;
var _templateObject460;
var _templateObject551;
var _templateObject646;
var _templateObject739;
function _createForOfIteratorHelper20(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray36(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _classCallCheck20(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties20(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey26(descriptor.key), descriptor);
  }
}
function _createClass20(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties20(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties20(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty23(obj, key, value) {
  key = _toPropertyKey26(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey26(arg) {
  var key = _toPrimitive26(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive26(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _taggedTemplateLiteral45(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray24(arr) {
  return _arrayWithoutHoles24(arr) || _iterableToArray24(arr) || _unsupportedIterableToArray36(arr) || _nonIterableSpread24();
}
function _nonIterableSpread24() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray36(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray36(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray36(o, minLen);
}
function _iterableToArray24(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles24(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray36(arr);
}
function _arrayLikeToArray36(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
var stashItems = get("garboStashItems", "").split(",").filter(function(x) {
  return x.trim().length > 0;
}).map(function(id) {
  return (0, import_kolmafia54.toItem)(id);
});
function withStash(itemsToTake, action) {
  var manager = new StashManager();
  try {
    manager.take.apply(manager, _toConsumableArray24(itemsToTake));
    return action();
  } finally {
    manager.putBackAll();
  }
}
function withVIPClan(action) {
  var clanIdOrNameString = globalOptions.prefs.vipClan;
  var clanIdOrName = clanIdOrNameString.match(/^\d+$/) ? parseInt(clanIdOrNameString) : clanIdOrNameString;
  if (clanIdOrName === "" && have($item(_templateObject391 || (_templateObject391 = _taggedTemplateLiteral45(["Clan VIP Lounge key"]))))) {
    if (userConfirmDialog("The preference 'garbo_vipClan' is not set. Use the current clan as a VIP clan? (Defaults to yes in 15 seconds)", true, 15e3)) {
      clanIdOrName = (0, import_kolmafia54.getClanId)();
      globalOptions.prefs.vipClan = "".concat(clanIdOrName);
      _set("garbo_vipClan", clanIdOrName);
    }
  }
  return withClan(clanIdOrName || (0, import_kolmafia54.getClanId)(), action);
}
function withClan(clanIdOrName, action) {
  var startingClanId = (0, import_kolmafia54.getClanId)();
  Clan.join(clanIdOrName);
  try {
    return action();
  } finally {
    Clan.join(startingClanId);
  }
}
var StashManager = /* @__PURE__ */ function() {
  function StashManager2() {
    var _this = this;
    _classCallCheck20(this, StashManager2);
    _defineProperty23(this, "clanIdOrName", void 0);
    _defineProperty23(this, "enabled", void 0);
    _defineProperty23(this, "taken", /* @__PURE__ */ new Map());
    var clanIdOrName = globalOptions.prefs.stashClan;
    this.clanIdOrName = clanIdOrName.match(/^\d+$/) ? parseInt(clanIdOrName) : clanIdOrName;
    this.enabled = ![0, "", "none"].some(function(id) {
      return id === _this.clanIdOrName;
    });
  }
  _createClass20(StashManager2, [{
    key: "take",
    value: function take() {
      var _this = this;
      for (var _len = arguments.length, items = new Array(_len), _key = 0; _key < _len; _key++) {
        items[_key] = arguments[_key];
      }
      if (items.length === 0) {
        return;
      }
      if (!this.enabled) {
        (0, import_kolmafia54.print)('Stash access is disabled. Ignoring request to borrow "'.concat(items.map(function(value) {
          return value.name;
        }).join(", "), '" from clan stash.'), HIGHLIGHT);
        return;
      }
      withClan(this.clanIdOrName, function() {
        for (var _i = 0, _items = items; _i < _items.length; _i++) {
          var item9 = _items[_i];
          if (have(item9))
            continue;
          if (getFoldGroup(item9).some(function(fold2) {
            return have(fold2);
          })) {
            (0, import_kolmafia54.cliExecute)("fold ".concat(item9.name));
            continue;
          }
          var foldArray = [item9].concat(_toConsumableArray24(getFoldGroup(item9)));
          (0, import_kolmafia54.refreshStash)();
          var _iterator = _createForOfIteratorHelper20(foldArray), _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done; ) {
              var fold = _step.value;
              try {
                if ((0, import_kolmafia54.stashAmount)(fold) > 0) {
                  if ((0, import_kolmafia54.takeStash)(1, fold)) {
                    var _this$taken$get;
                    (0, import_kolmafia54.print)("Took ".concat(fold.name, " from stash in ").concat((0, import_kolmafia54.getClanName)(), "."), HIGHLIGHT);
                    if (fold !== item9)
                      (0, import_kolmafia54.cliExecute)("fold ".concat(item9.name));
                    _this.taken.set(item9, ((_this$taken$get = _this.taken.get(item9)) !== null && _this$taken$get !== void 0 ? _this$taken$get : 0) + 1);
                    stashItems.push(fold);
                    break;
                  } else {
                    (0, import_kolmafia54.print)("Failed to take ".concat(fold.name, " from the stash. Do you have stash access in ").concat((0, import_kolmafia54.getClanName)(), "?"), "red");
                  }
                }
              } catch (_unused) {
                (0, import_kolmafia54.print)("Failed to take ".concat(fold.name, " from stash in ").concat((0, import_kolmafia54.getClanName)(), "."), "red");
              }
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
          if (have(item9))
            continue;
          (0, import_kolmafia54.print)("Couldn't find ".concat(item9.name, " in clan stash for ").concat((0, import_kolmafia54.getClanName)(), "."), "red");
        }
      });
    }
    /**
     * Ensure at least one of each of {items} in inventory.
     * @param items Items to take from the stash.
     */
  }, {
    key: "ensure",
    value: function ensure() {
      for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        items[_key2] = arguments[_key2];
      }
      this.take.apply(this, _toConsumableArray24(items.filter(function(item9) {
        return (0, import_kolmafia54.availableAmount)(item9) === 0;
      })));
    }
  }, {
    key: "putBack",
    value: function putBack() {
      var _this = this;
      for (var _len3 = arguments.length, items = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        items[_key3] = arguments[_key3];
      }
      if (items.length === 0)
        return;
      if ((0, import_kolmafia54.visitUrl)("fight.php").includes("You're fighting")) {
        var _Macro$if_;
        (0, import_kolmafia54.print)("In fight, trying to get away to return items to stash...", HIGHLIGHT);
        (_Macro$if_ = Macro2.if_($monster(_templateObject2106 || (_templateObject2106 = _taggedTemplateLiteral45(["Knob Goblin Embezzler"]))), Macro2.attack().repeat())).tryItem.apply(_Macro$if_, _toConsumableArray24($items(_templateObject3100 || (_templateObject3100 = _taggedTemplateLiteral45(["Louder Than Bomb, divine champagne popper"]))))).step("runaway").submit();
      } else {
        (0, import_kolmafia54.visitUrl)("main.php");
        if ((0, import_kolmafia54.handlingChoice)()) {
          (0, import_kolmafia54.print)("I'm stuck in a choice, unfortunately, but were I not, I'd like to return the following items to your clan stash:", "red");
          items.forEach(function(item9) {
            return (0, import_kolmafia54.print)("".concat(item9.name, ","), "red");
          });
        }
      }
      withClan(this.clanIdOrName, function() {
        var _loop = function _loop2() {
          var _this$taken$get2;
          var item9 = _items2[_i2];
          var count = (_this$taken$get2 = _this.taken.get(item9)) !== null && _this$taken$get2 !== void 0 ? _this$taken$get2 : 0;
          if (count > 0) {
            (0, import_kolmafia54.retrieveItem)(count, item9);
            if (item9 === $item(_templateObject460 || (_templateObject460 = _taggedTemplateLiteral45(["Buddy Bjorn"])))) {
              (0, import_kolmafia54.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject551 || (_templateObject551 = _taggedTemplateLiteral45(["Buddy Bjorn"]))).descid));
              (0, import_kolmafia54.bjornifyFamiliar)($familiar.none);
            }
            if (item9 === $item(_templateObject646 || (_templateObject646 = _taggedTemplateLiteral45(["Crown of Thrones"])))) {
              (0, import_kolmafia54.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject739 || (_templateObject739 = _taggedTemplateLiteral45(["Crown of Thrones"]))).descid));
              (0, import_kolmafia54.enthroneFamiliar)($familiar.none);
            }
            if ((0, import_kolmafia54.equippedAmount)(item9) > 0) {
              var slots = import_kolmafia54.Slot.all().filter(function(s) {
                return (0, import_kolmafia54.equippedItem)(s) === item9;
              });
              slots.forEach(function(s) {
                return (0, import_kolmafia54.equip)(s, $item.none);
              });
            }
            if ((0, import_kolmafia54.itemAmount)(item9) >= count && (0, import_kolmafia54.putStash)(count, item9)) {
              var index = stashItems.indexOf(item9);
              if (index >= 0)
                stashItems.splice(stashItems.indexOf(item9), 1);
              (0, import_kolmafia54.print)("Returned ".concat(item9.name, " to stash in ").concat((0, import_kolmafia54.getClanName)(), "."), HIGHLIGHT);
              _this.taken.delete(item9);
            } else {
              throw "Failed to return ".concat(item9.name, " to stash.");
            }
          }
        };
        for (var _i2 = 0, _items2 = items; _i2 < _items2.length; _i2++) {
          _loop();
        }
      });
    }
    /**
     * Put all items back in the stash.
     */
  }, {
    key: "putBackAll",
    value: function putBackAll() {
      this.putBack.apply(this, _toConsumableArray24(this.taken.keys()));
    }
  }]);
  return StashManager2;
}();

// src/mood.ts
var import_kolmafia55 = require("kolmafia");
var _templateObject400;
var _templateObject2107;
var _templateObject3101;
var _templateObject461;
var _templateObject559;
var _templateObject647;
var _templateObject740;
var _templateObject835;
var _templateObject930;
var _templateObject1026;
var _templateObject1122;
var _templateObject1221;
var _templateObject1321;
var _templateObject1419;
var _templateObject1517;
var _templateObject1617;
var _templateObject1717;
var _templateObject1817;
var _templateObject1917;
var _templateObject2017;
var _templateObject2122;
var _templateObject2218;
var _templateObject2317;
var _templateObject2417;
var _templateObject2517;
var _templateObject2617;
var _templateObject2717;
var _templateObject2816;
var _templateObject2916;
var _templateObject3014;
var _templateObject3118;
var _templateObject3216;
var _templateObject3316;
var _templateObject3415;
var _templateObject3514;
var _templateObject3613;
var _templateObject3712;
var _templateObject3811;
var _templateObject3910;
var _templateObject4010;
var _templateObject4114;
var _templateObject4214;
var _templateObject4314;
var _templateObject4412;
var _templateObject4511;
var _templateObject469;
var _templateObject479;
var _templateObject489;
var _templateObject499;
var _templateObject509;
var _templateObject5114;
var _templateObject5214;
var _templateObject5313;
var _templateObject5411;
var _templateObject5510;
var _templateObject568;
var _templateObject577;
var _templateObject587;
var _templateObject597;
var _templateObject606;
var _templateObject6112;
var _templateObject6212;
var _templateObject6311;
var _templateObject648;
var _templateObject655;
var _templateObject665;
var _templateObject674;
var _templateObject683;
var _templateObject693;
var _templateObject703;
function _toConsumableArray25(arr) {
  return _arrayWithoutHoles25(arr) || _iterableToArray25(arr) || _unsupportedIterableToArray37(arr) || _nonIterableSpread25();
}
function _nonIterableSpread25() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray37(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray37(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray37(o, minLen);
}
function _iterableToArray25(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles25(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray37(arr);
}
function _arrayLikeToArray37(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral46(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
Mood.setDefaultOptions({
  songSlots: [$effects(_templateObject400 || (_templateObject400 = _taggedTemplateLiteral46(["Polka of Plenty"]))), $effects(_templateObject2107 || (_templateObject2107 = _taggedTemplateLiteral46(["Fat Leon's Phat Loot Lyric, Ur-Kel's Aria of Annoyance"]))), $effects(_templateObject3101 || (_templateObject3101 = _taggedTemplateLiteral46(["Chorale of Companionship"]))), $effects(_templateObject461 || (_templateObject461 = _taggedTemplateLiteral46(["The Ballad of Richie Thingfinder"])))],
  useNativeRestores: true
});
function meatMood() {
  var urKels = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  var meat = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : baseMeat;
  var mood = new Mood({
    reserveMp: safeRestoreMpTarget()
  });
  mood.potion($item(_templateObject559 || (_templateObject559 = _taggedTemplateLiteral46(["How to Avoid Scams"]))), 3 * baseMeat);
  mood.potion($item(_templateObject647 || (_templateObject647 = _taggedTemplateLiteral46(["resolution: be wealthier"]))), 0.3 * baseMeat);
  mood.potion($item(_templateObject740 || (_templateObject740 = _taggedTemplateLiteral46(["resolution: be happier"]))), 0.15 * 0.45 * 0.8 * 200);
  var flaskValue = usingPurse() ? 0.3 * baseMeat : 5;
  mood.potion($item(_templateObject835 || (_templateObject835 = _taggedTemplateLiteral46(["Flaskfull of Hollow"]))), flaskValue);
  mood.skill($skill(_templateObject930 || (_templateObject930 = _taggedTemplateLiteral46(["Blood Bond"]))));
  mood.skill($skill(_templateObject1026 || (_templateObject1026 = _taggedTemplateLiteral46(["Leash of Linguini"]))));
  mood.skill($skill(_templateObject1122 || (_templateObject1122 = _taggedTemplateLiteral46(["Empathy of the Newt"]))));
  mood.skill($skill(_templateObject1221 || (_templateObject1221 = _taggedTemplateLiteral46(["The Polka of Plenty"]))));
  mood.skill($skill(_templateObject1321 || (_templateObject1321 = _taggedTemplateLiteral46(["Disco Leer"]))));
  mood.skill(urKels ? $skill(_templateObject1419 || (_templateObject1419 = _taggedTemplateLiteral46(["Ur-Kel's Aria of Annoyance"]))) : $skill(_templateObject1517 || (_templateObject1517 = _taggedTemplateLiteral46(["Fat Leon's Phat Loot Lyric"]))));
  mood.skill($skill(_templateObject1617 || (_templateObject1617 = _taggedTemplateLiteral46(["Singer's Faithful Ocelot"]))));
  mood.skill($skill(_templateObject1717 || (_templateObject1717 = _taggedTemplateLiteral46(["The Spirit of Taking"]))));
  mood.skill($skill(_templateObject1817 || (_templateObject1817 = _taggedTemplateLiteral46(["Drescher's Annoying Noise"]))));
  mood.skill($skill(_templateObject1917 || (_templateObject1917 = _taggedTemplateLiteral46(["Pride of the Puffin"]))));
  mood.skill($skill(_templateObject2017 || (_templateObject2017 = _taggedTemplateLiteral46(["Walk: Leisurely Amble"]))));
  mood.skill($skill(_templateObject2122 || (_templateObject2122 = _taggedTemplateLiteral46(["Call For Backup"]))));
  mood.skill($skill(_templateObject2218 || (_templateObject2218 = _taggedTemplateLiteral46(["Soothing Flute"]))));
  var mmjCost = (100 - (have($skill(_templateObject2317 || (_templateObject2317 = _taggedTemplateLiteral46(["Five Finger Discount"])))) ? 5 : 0) - (have($item(_templateObject2417 || (_templateObject2417 = _taggedTemplateLiteral46(["Travoltan trousers"])))) ? 5 : 0)) * (200 / (1.5 * (0, import_kolmafia55.myLevel)() + 5));
  var genericManaPotionCost = (0, import_kolmafia55.mallPrice)($item(_templateObject2517 || (_templateObject2517 = _taggedTemplateLiteral46(["generic mana potion"])))) * (200 / (2.5 * (0, import_kolmafia55.myLevel)()));
  var mpRestorerCost = Math.min(mmjCost, genericManaPotionCost);
  if ((0, import_kolmafia55.myClass)() !== $class(_templateObject2617 || (_templateObject2617 = _taggedTemplateLiteral46(["Pastamancer"]))) && 0.1 * meat * 10 > mpRestorerCost) {
    mood.skill($skill(_templateObject2717 || (_templateObject2717 = _taggedTemplateLiteral46(["Bind Lasagmbie"]))));
  }
  if ((0, import_kolmafia55.getWorkshed)() === $item(_templateObject2816 || (_templateObject2816 = _taggedTemplateLiteral46(["Asdon Martin keyfob"]))))
    mood.drive(AsdonMartin_exports.Driving.Observantly);
  if (have($item(_templateObject2916 || (_templateObject2916 = _taggedTemplateLiteral46(["Kremlin's Greatest Briefcase"]))))) {
    mood.effect($effect(_templateObject3014 || (_templateObject3014 = _taggedTemplateLiteral46(["A View to Some Meat"]))), function() {
      if (get("_kgbClicksUsed") < 22) {
        var buffTries = Math.ceil((22 - get("_kgbClicksUsed")) / 3);
        (0, import_kolmafia55.cliExecute)("Briefcase buff ".concat(new Array(buffTries).fill("meat").join(" ")));
      }
    });
  }
  if (!get("concertVisited") && get("sidequestArenaCompleted") === "fratboy") {
    (0, import_kolmafia55.cliExecute)("concert winklered");
  } else if (!get("concertVisited") && get("sidequestArenaCompleted") === "hippy") {
    (0, import_kolmafia55.cliExecute)("concert optimist primal");
  }
  if ((0, import_kolmafia55.itemAmount)($item(_templateObject3118 || (_templateObject3118 = _taggedTemplateLiteral46(["Bird-a-Day calendar"])))) > 0) {
    if (!have($skill(_templateObject3216 || (_templateObject3216 = _taggedTemplateLiteral46(["Seek out a Bird"])))) || !get("_canSeekBirds")) {
      (0, import_kolmafia55.use)(1, $item(_templateObject3316 || (_templateObject3316 = _taggedTemplateLiteral46(["Bird-a-Day calendar"]))));
    }
    if (have($skill(_templateObject3415 || (_templateObject3415 = _taggedTemplateLiteral46(["Visit your Favorite Bird"])))) && !get("_favoriteBirdVisited") && ((0, import_kolmafia55.numericModifier)($effect(_templateObject3514 || (_templateObject3514 = _taggedTemplateLiteral46(["Blessing of your favorite Bird"]))), "Meat Drop") > 0 || (0, import_kolmafia55.numericModifier)($effect(_templateObject3613 || (_templateObject3613 = _taggedTemplateLiteral46(["Blessing of your favorite Bird"]))), "Item Drop") > 0)) {
      (0, import_kolmafia55.useSkill)($skill(_templateObject3712 || (_templateObject3712 = _taggedTemplateLiteral46(["Visit your Favorite Bird"]))));
    }
    if (have($skill(_templateObject3811 || (_templateObject3811 = _taggedTemplateLiteral46(["Seek out a Bird"])))) && get("_birdsSoughtToday") < 6 && ((0, import_kolmafia55.numericModifier)($effect(_templateObject3910 || (_templateObject3910 = _taggedTemplateLiteral46(["Blessing of the Bird"]))), "Meat Drop") > 0 || (0, import_kolmafia55.numericModifier)($effect(_templateObject4010 || (_templateObject4010 = _taggedTemplateLiteral46(["Blessing of the Bird"]))), "Item Drop") > 0)) {
      setChoice(1399, 2);
      (0, import_kolmafia55.useSkill)($skill(_templateObject4114 || (_templateObject4114 = _taggedTemplateLiteral46(["Seek out a Bird"]))), 6 - get("_birdsSoughtToday"));
    }
  }
  if (have($skill(_templateObject4214 || (_templateObject4214 = _taggedTemplateLiteral46(["Incredible Self-Esteem"])))) && $effects(_templateObject4314 || (_templateObject4314 = _taggedTemplateLiteral46(["Always be Collecting, Work For Hours a Week"]))).some(function(effect2) {
    return have(effect2);
  }) && !get("_incredibleSelfEsteemCast")) {
    (0, import_kolmafia55.useSkill)($skill(_templateObject4412 || (_templateObject4412 = _taggedTemplateLiteral46(["Incredible Self-Esteem"]))));
  }
  var canRecord = (0, import_kolmafia55.getWorkshed)() === $item(_templateObject4511 || (_templateObject4511 = _taggedTemplateLiteral46(["warbear LP-ROM burner"]))) || have($item(_templateObject469 || (_templateObject469 = _taggedTemplateLiteral46(["warbear LP-ROM burner"]))) || get("questG04Nemesis") === "finished");
  if ((0, import_kolmafia55.myClass)() === $class(_templateObject479 || (_templateObject479 = _taggedTemplateLiteral46(["Accordion Thief"]))) && (0, import_kolmafia55.myLevel)() >= 15 && !canRecord) {
    if (have($skill(_templateObject489 || (_templateObject489 = _taggedTemplateLiteral46(["The Ballad of Richie Thingfinder"]))))) {
      (0, import_kolmafia55.useSkill)($skill(_templateObject499 || (_templateObject499 = _taggedTemplateLiteral46(["The Ballad of Richie Thingfinder"]))), 10 - get("_thingfinderCasts"));
    }
    if (have($skill(_templateObject509 || (_templateObject509 = _taggedTemplateLiteral46(["Chorale of Companionship"]))))) {
      (0, import_kolmafia55.useSkill)($skill(_templateObject5114 || (_templateObject5114 = _taggedTemplateLiteral46(["Chorale of Companionship"]))), 10 - get("_companionshipCasts"));
    }
  }
  shrugBadEffects();
  return mood;
}
function freeFightMood() {
  var mood = new Mood();
  for (var _len = arguments.length, additionalEffects = new Array(_len), _key = 0; _key < _len; _key++) {
    additionalEffects[_key] = arguments[_key];
  }
  for (var _i = 0, _additionalEffects = additionalEffects; _i < _additionalEffects.length; _i++) {
    var effect2 = _additionalEffects[_i];
    mood.effect(effect2);
  }
  if ((0, import_kolmafia55.haveEffect)($effect(_templateObject5214 || (_templateObject5214 = _taggedTemplateLiteral46(["Blue Swayed"])))) < 50) {
    (0, import_kolmafia55.use)(Math.ceil((50 - (0, import_kolmafia55.haveEffect)($effect(_templateObject5313 || (_templateObject5313 = _taggedTemplateLiteral46(["Blue Swayed"]))))) / 10), $item(_templateObject5411 || (_templateObject5411 = _taggedTemplateLiteral46(["pulled blue taffy"]))));
  }
  mood.potion($item(_templateObject5510 || (_templateObject5510 = _taggedTemplateLiteral46(["white candy heart"]))), 30);
  mood.skill($skill(_templateObject568 || (_templateObject568 = _taggedTemplateLiteral46(["Curiosity of Br'er Tarrypin"]))));
  shrugBadEffects.apply(void 0, additionalEffects);
  if ((0, import_kolmafia55.getWorkshed)() === $item(_templateObject577 || (_templateObject577 = _taggedTemplateLiteral46(["Asdon Martin keyfob"]))))
    mood.drive(AsdonMartin_exports.Driving.Observantly);
  return mood;
}
function useBuffExtenders() {
  withStash($items(_templateObject587 || (_templateObject587 = _taggedTemplateLiteral46(["Platinum Yendorian Express Card, Bag o' Tricks"]))), function() {
    if (have($item(_templateObject597 || (_templateObject597 = _taggedTemplateLiteral46(["Platinum Yendorian Express Card"])))) && !get("expressCardUsed")) {
      burnLibrams();
      (0, import_kolmafia55.use)($item(_templateObject606 || (_templateObject606 = _taggedTemplateLiteral46(["Platinum Yendorian Express Card"]))));
    }
    if (have($item(_templateObject6112 || (_templateObject6112 = _taggedTemplateLiteral46(["Bag o' Tricks"])))) && !get("_bagOTricksUsed")) {
      (0, import_kolmafia55.use)($item(_templateObject6212 || (_templateObject6212 = _taggedTemplateLiteral46(["Bag o' Tricks"]))));
    }
  });
  if (have($item(_templateObject6311 || (_templateObject6311 = _taggedTemplateLiteral46(["License to Chill"])))) && !get("_licenseToChillUsed")) {
    burnLibrams();
    (0, import_kolmafia55.use)($item(_templateObject648 || (_templateObject648 = _taggedTemplateLiteral46(["License to Chill"]))));
  }
}
var stings = [].concat(_toConsumableArray25($effects(_templateObject655 || (_templateObject655 = _taggedTemplateLiteral46(["Apoplectic with Rage, Barfpits, Berry Thorny, Biologically Shocked, Bone Homie, Boner Battalion, Coal-Powered, Curse of the Black Pearl Onion, Dizzy with Rage, Drenched With Filth, EVISCERATE!, Fangs and Pangs, Frigidalmatian, Gummi Badass, Haiku State of Mind, It's Electric!, Jaba\xF1ero Saucesphere, Jalape\xF1o Saucesphere, Little Mouse Skull Buddy, Long Live GORF, Mayeaugh, Permanent Halloween, Psalm of Pointiness, Pygmy Drinking Buddy, Quivering with Rage, Scarysauce, Skeletal Cleric, Skeletal Rogue, Skeletal Warrior, Skeletal Wizard, Smokin', Soul Funk, Spiky Frozen Hair, Stinkybeard, Stuck-Up Hair, Can Has Cyborger, Feeling Nervous"])))), [$effect(_templateObject665 || (_templateObject665 = _taggedTemplateLiteral46(["Burning, Man"]))), $effect(_templateObject674 || (_templateObject674 = _taggedTemplateLiteral46(["Yes, Can Haz"])))]);
var textAlteringEffects = $effects(_templateObject683 || (_templateObject683 = _taggedTemplateLiteral46(["Can Has Cyborger, Dis Abled, Haiku State of Mind, Just the Best Anapests, O Hai!, Robocamo"])));
var teleportEffects = $effects(_templateObject693 || (_templateObject693 = _taggedTemplateLiteral46(["Teleportitis, Feeling Lost, Funday!"])));
var otherwiseBadEffects = $effects(_templateObject703 || (_templateObject703 = _taggedTemplateLiteral46(["Temporary Blindness"])));
function shrugBadEffects() {
  for (var _len2 = arguments.length, exclude = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    exclude[_key2] = arguments[_key2];
  }
  [].concat(_toConsumableArray25(stings), _toConsumableArray25(textAlteringEffects), _toConsumableArray25(teleportEffects), _toConsumableArray25(otherwiseBadEffects)).forEach(function(effect2) {
    if (have(effect2) && !exclude.includes(effect2)) {
      uneffect(effect2);
    }
  });
}

// node_modules/core-js/modules/es.object.from-entries.js
var $ = require_export();
var iterate = require_iterate();
var createProperty = require_create_property();
$({
  target: "Object",
  stat: true
}, {
  fromEntries: function fromEntries(iterable) {
    var obj = {};
    iterate(iterable, function(k, v) {
      createProperty(obj, k, v);
    }, {
      AS_ENTRIES: true
    });
    return obj;
  }
});

// src/potions.ts
var import_kolmafia57 = require("kolmafia");

// src/resources/scepter.ts
var import_kolmafia56 = require("kolmafia");
var _templateObject401;
var _templateObject2108;
var _templateObject3102;
var _templateObject470;
var _templateObject560;
var _templateObject649;
var _templateObject741;
var _templateObject836;
var _templateObject931;
var _templateObject1027;
var _templateObject1123;
var _templateObject1222;
var _templateObject1322;
var _templateObject1420;
var _templateObject1518;
var _templateObject1618;
var _templateObject1718;
var _templateObject1818;
var _templateObject1918;
var _templateObject2018;
var _templateObject2123;
var _templateObject2219;
var _templateObject2318;
var _templateObject2418;
var _templateObject2518;
var _templateObject2618;
var _templateObject2718;
var _templateObject2817;
var _templateObject2917;
var _templateObject3015;
var _templateObject3119;
var _templateObject3217;
function _createForOfIteratorHelper21(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray38(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray26(arr) {
  return _arrayWithoutHoles26(arr) || _iterableToArray26(arr) || _unsupportedIterableToArray38(arr) || _nonIterableSpread26();
}
function _nonIterableSpread26() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray38(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray38(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray38(o, minLen);
}
function _iterableToArray26(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles26(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray38(arr);
}
function _arrayLikeToArray38(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral47(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var SKILL_OPTIONS = [
  // August 1 deliberately omitted; does not trigger on monster replacers
  {
    skill: $skill(_templateObject401 || (_templateObject401 = _taggedTemplateLiteral47(["Aug. 2nd: Find an Eleven-Leaf Clover Day"]))),
    value: function() {
      return (0, import_kolmafia56.canAdventure)($location(_templateObject2108 || (_templateObject2108 = _taggedTemplateLiteral47(["Cobb's Knob Treasury"])))) ? EMBEZZLER_MULTIPLIER() * get("valueOfAdventure") : 0;
    },
    type: "special"
  },
  {
    skill: $skill(_templateObject3102 || (_templateObject3102 = _taggedTemplateLiteral47(["Aug. 3rd: Watermelon Day!"]))),
    value: function() {
      return garboValue($item(_templateObject470 || (_templateObject470 = _taggedTemplateLiteral47(["watermelon"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject560 || (_templateObject560 = _taggedTemplateLiteral47(["Aug. 4th: Water Balloon Day!"]))),
    value: function() {
      return 3 * garboValue($item(_templateObject649 || (_templateObject649 = _taggedTemplateLiteral47(["water balloon"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject741 || (_templateObject741 = _taggedTemplateLiteral47(["Aug. 5th: Oyster Day!"]))),
    value: function() {
      return 3 * garboAverageValue.apply(void 0, _toConsumableArray26($items(_templateObject836 || (_templateObject836 = _taggedTemplateLiteral47(["brilliant oyster egg, gleaming oyster egg, glistening oyster egg, lustrous oyster egg, magnificent oyster egg, pearlescent oyster egg, scintillating oyster egg"])))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject931 || (_templateObject931 = _taggedTemplateLiteral47(["Aug. 7th: Lighthouse Day!"]))),
    value: function() {
      return new Potion($item(_templateObject1027 || (_templateObject1027 = _taggedTemplateLiteral47(["august scepter"]))), {
        effect: $effect(_templateObject1123 || (_templateObject1123 = _taggedTemplateLiteral47(["Incredibly Well Lit"]))),
        duration: 30
      }).gross(embezzlerCount());
    },
    // TODO: Yachtzee
    type: "buff"
  },
  {
    skill: $skill(_templateObject1222 || (_templateObject1222 = _taggedTemplateLiteral47(["Aug. 13th: Left/Off Hander's Day!"]))),
    value: function() {
      return new Potion($item(_templateObject1322 || (_templateObject1322 = _taggedTemplateLiteral47(["august scepter"]))), {
        effect: $effect(_templateObject1420 || (_templateObject1420 = _taggedTemplateLiteral47(["Offhand Remarkable"]))),
        duration: 30,
        effectValues: {
          meatDrop: 80
        }
        // Half a purse
      }).gross(embezzlerCount()) + (globalOptions.ascend ? 0 : (5 + (have($familiar(_templateObject1518 || (_templateObject1518 = _taggedTemplateLiteral47(["Left-Hand Man"])))) ? 5 : 0)) * get("valueOfAdventure"));
    },
    type: "special"
    // Don't want to cast right away
  },
  {
    skill: $skill(_templateObject1618 || (_templateObject1618 = _taggedTemplateLiteral47(["Aug. 14th: Financial Awareness  Day!"]))),
    value: function() {
      return Math.min(100 * (0, import_kolmafia56.myLevel)(), 1500, (0, import_kolmafia56.myMeat)()) / 2;
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject1718 || (_templateObject1718 = _taggedTemplateLiteral47(["Aug. 16th: Roller Coaster Day!"]))),
    value: function() {
      return 8 * get("valueOfAdventure");
    },
    type: "special"
  },
  {
    skill: $skill(_templateObject1818 || (_templateObject1818 = _taggedTemplateLiteral47(["Aug. 18th: Serendipity Day!"]))),
    value: function() {
      return 3e3;
    },
    // Dummy value; we should some day calculate this based on free fight count, careful to avoid circular imports
    type: "buff"
  },
  {
    skill: $skill(_templateObject1918 || (_templateObject1918 = _taggedTemplateLiteral47(["Aug. 24th: Waffle Day!"]))),
    value: function() {
      return 3 * garboValue($item(_templateObject2018 || (_templateObject2018 = _taggedTemplateLiteral47(["waffle"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject2123 || (_templateObject2123 = _taggedTemplateLiteral47(["Aug. 25th: Banana Split Day!"]))),
    value: function() {
      return garboValue($item(_templateObject2219 || (_templateObject2219 = _taggedTemplateLiteral47(["banana split"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject2318 || (_templateObject2318 = _taggedTemplateLiteral47(["Aug. 26th: Toilet Paper Day!"]))),
    value: function() {
      return garboValue($item(_templateObject2418 || (_templateObject2418 = _taggedTemplateLiteral47(["handful of toilet paper"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject2518 || (_templateObject2518 = _taggedTemplateLiteral47(["Aug. 29th: More Herbs, Less Salt  Day!"]))),
    value: function() {
      return 3 * garboValue($item(_templateObject2618 || (_templateObject2618 = _taggedTemplateLiteral47(["Mrs. Rush"]))));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject2718 || (_templateObject2718 = _taggedTemplateLiteral47(["Aug. 30th: Beach Day!"]))),
    value: function() {
      var _Item$all$filter$sort;
      return 100 + (globalOptions.ascend ? 0 : clamp(7 - get2("Adventures", (_Item$all$filter$sort = import_kolmafia56.Item.all().filter(function(i) {
        return have(i) && (0, import_kolmafia56.toSlot)(i) === $slot(_templateObject2817 || (_templateObject2817 = _taggedTemplateLiteral47(["acc1"]))) && (0, import_kolmafia56.canEquip)(i);
      }).sort(function(a, b) {
        return get2("Adventures", b) - get2("Adventures", a);
      })[2]) !== null && _Item$all$filter$sort !== void 0 ? _Item$all$filter$sort : $item.none), 0, 7) * get("valueOfAdventure"));
    },
    type: "summon"
  },
  {
    skill: $skill(_templateObject2917 || (_templateObject2917 = _taggedTemplateLiteral47(["Aug. 31st: Cabernet Sauvignon  Day!"]))),
    value: function() {
      return 2 * garboValue($item(_templateObject3015 || (_templateObject3015 = _taggedTemplateLiteral47(["bottle of Cabernet Sauvignon"]))));
    },
    type: "summon"
  }
];
var bestScepterSkills = null;
function getBestScepterSkills() {
  var _bestScepterSkills;
  return (_bestScepterSkills = bestScepterSkills) !== null && _bestScepterSkills !== void 0 ? _bestScepterSkills : bestScepterSkills = SKILL_OPTIONS.filter(function(_ref) {
    var skill = _ref.skill;
    return AugustScepter_exports.todaysSkill() !== skill;
  }).sort(function(a, b) {
    return b.value() - a.value();
  }).splice(0, clamp(5 - get("_augSkillsCast"), 0, 5));
}
function shouldAugustCast(skill) {
  return AugustScepter_exports.have() && (getBestScepterSkills().some(function(s) {
    return skill === s.skill;
  }) && skill.dailylimit && get("_augSkillsCast") < 5 || AugustScepter_exports.todaysSkill() === skill && !AugustScepter_exports.getTodayCast());
}
function summonTask(_ref2) {
  var skill = _ref2.skill;
  return {
    name: skill.name,
    completed: function() {
      return !shouldAugustCast(skill);
    },
    do: function() {
      return (0, import_kolmafia56.useSkill)(skill);
    }
  };
}
function augustSummonTasks() {
  return AugustScepter_exports.have() ? SKILL_OPTIONS.filter(function(_ref3) {
    var type = _ref3.type;
    return type === "summon";
  }).map(summonTask) : [];
}
function castAugustScepterBuffs() {
  if (AugustScepter_exports.have()) {
    var _iterator = _createForOfIteratorHelper21(SKILL_OPTIONS.filter(function(_ref5) {
      var skill2 = _ref5.skill, type = _ref5.type;
      return shouldAugustCast(skill2) && type === "buff";
    })), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var skill = _step.value.skill;
        (0, import_kolmafia56.useSkill)(skill);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var today3 = SKILL_OPTIONS.find(function(_ref4) {
      var skill2 = _ref4.skill, type = _ref4.type;
      return type === "buff" && skill2 === AugustScepter_exports.todaysSkill();
    });
    if (today3 && !AugustScepter_exports.getTodayCast())
      (0, import_kolmafia56.useSkill)(today3.skill);
    if (globalOptions.ascend && shouldAugustCast($skill(_templateObject3119 || (_templateObject3119 = _taggedTemplateLiteral47(["Aug. 13th: Left/Off Hander's Day!"]))))) {
      (0, import_kolmafia56.useSkill)($skill(_templateObject3217 || (_templateObject3217 = _taggedTemplateLiteral47(["Aug. 13th: Left/Off Hander's Day!"]))));
    }
  }
}

// src/potions.ts
var _templateObject471;
var _templateObject2109;
var _templateObject3103;
var _templateObject480;
var _templateObject561;
var _templateObject650;
var _templateObject744;
var _templateObject837;
var _templateObject933;
var _templateObject1028;
var _templateObject1124;
var _templateObject1223;
var _templateObject1323;
var _templateObject1421;
var _templateObject1519;
var _templateObject1619;
var _templateObject1719;
var _templateObject1819;
var _templateObject1919;
var _templateObject2019;
var _templateObject2124;
var _templateObject2220;
var _templateObject2319;
var _templateObject2419;
var _templateObject2519;
var _templateObject2619;
var _templateObject2719;
var _templateObject2818;
var _templateObject2918;
var _templateObject3016;
var _templateObject3120;
var _templateObject3218;
var _templateObject3317;
var _templateObject3416;
var _templateObject3515;
function _slicedToArray23(arr, i) {
  return _arrayWithHoles23(arr) || _iterableToArrayLimit23(arr, i) || _unsupportedIterableToArray39(arr, i) || _nonIterableRest23();
}
function _nonIterableRest23() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit23(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles23(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _classCallCheck21(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties21(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey27(descriptor.key), descriptor);
  }
}
function _createClass21(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties21(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties21(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty24(obj, key, value) {
  key = _toPropertyKey27(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey27(arg) {
  var key = _toPrimitive27(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive27(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray27(arr) {
  return _arrayWithoutHoles27(arr) || _iterableToArray27(arr) || _unsupportedIterableToArray39(arr) || _nonIterableSpread27();
}
function _nonIterableSpread27() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray27(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles27(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray39(arr);
}
function _createForOfIteratorHelper22(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray39(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray39(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray39(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray39(o, minLen);
}
function _arrayLikeToArray39(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral48(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var banned = $items(_templateObject471 || (_templateObject471 = _taggedTemplateLiteral48(["Uncle Greenspan's Bathroom Finance Guide"])));
var failedWishes = [];
var mutuallyExclusiveList = [$effects(_templateObject2109 || (_templateObject2109 = _taggedTemplateLiteral48(["Blue Tongue, Green Tongue, Orange Tongue, Purple Tongue, Red Tongue, Black Tongue"]))), $effects(_templateObject3103 || (_templateObject3103 = _taggedTemplateLiteral48(["Cupcake of Choice, The Cupcake of Wrath, Shiny Happy Cupcake, Your Cupcake Senses Are Tingling, Tiny Bubbles in the Cupcake"]))), $effects(_templateObject480 || (_templateObject480 = _taggedTemplateLiteral48(["Broken Heart, Fiery Heart, Cold Hearted, Sweet Heart, Withered Heart, Lustful Heart"]))), $effects(_templateObject561 || (_templateObject561 = _taggedTemplateLiteral48(["Coldform, Hotform, Sleazeform, Spookyform, Stenchform"])))];
var mutuallyExclusive = /* @__PURE__ */ new Map();
for (_i = 0, _mutuallyExclusiveLis = mutuallyExclusiveList; _i < _mutuallyExclusiveLis.length; _i++) {
  effectGroup = _mutuallyExclusiveLis[_i];
  _iterator = _createForOfIteratorHelper22(effectGroup);
  try {
    _loop = function _loop2() {
      var _mutuallyExclusive$ge;
      var effect2 = _step.value;
      mutuallyExclusive.set(effect2, [].concat(_toConsumableArray27((_mutuallyExclusive$ge = mutuallyExclusive.get(effect2)) !== null && _mutuallyExclusive$ge !== void 0 ? _mutuallyExclusive$ge : []), _toConsumableArray27(effectGroup.filter(function(other) {
        return other !== effect2;
      }))));
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
var effectGroup;
var _iterator;
var _step;
var _loop;
var _i;
var _mutuallyExclusiveLis;
var INVALID_CHARS_REGEX = /[.',]/g;
var wishableEffects = import_kolmafia57.Effect.all().filter(function(e) {
  return !e.attributes.includes("nohookah");
});
var wishableEffectData = wishableEffects.map(function(e) {
  var name = e.name.toLowerCase();
  var splitName = name.split(INVALID_CHARS_REGEX);
  return {
    e: e,
    name: name,
    splitName: splitName
  };
});
var invalidWishStrings = wishableEffectData.filter(function(_ref) {
  var name = _ref.name;
  return name.match(INVALID_CHARS_REGEX);
}).filter(function(_ref2) {
  var name = _ref2.name, splitName = _ref2.splitName;
  return splitName.every(function(s) {
    return wishableEffectData.some(function(n) {
      return n.name !== name && n.splitName.some(function(x) {
        return x.includes(s);
      });
    });
  });
}).map(function(_ref3) {
  var name = _ref3.name;
  return name;
});
var availableItems = _toConsumableArray27(new Set(import_kolmafia57.Location.all().filter(function(l) {
  return (0, import_kolmafia57.canAdventure)(l);
}).map(function(l) {
  return (0, import_kolmafia57.getMonsters)(l).filter(function(m) {
    return m.copyable;
  }).map(function(m) {
    return (0, import_kolmafia57.itemDropsArray)(m).filter(function(_ref4) {
      var rate = _ref4.rate;
      return rate > 1;
    });
  }).flat();
}).flat().map(function(_ref5) {
  var drop = _ref5.drop;
  return drop;
}))).map(function(i) {
  return i.name;
});
var validPawWishes = new Map(wishableEffectData.filter(
  function(_ref6) {
    var e = _ref6.e, name = _ref6.name;
    return !invalidWishStrings.includes(name) && (globalOptions.prefs.yachtzeechain ? e !== $effect(_templateObject650 || (_templateObject650 = _taggedTemplateLiteral48(["Eau d' Clochard"]))) : true);
  }
  // hardcoded heuristics
).map(function(_ref7) {
  var e = _ref7.e, name = _ref7.name, splitName = _ref7.splitName;
  if (!name.match(INVALID_CHARS_REGEX))
    return [e, name];
  return [e, splitName.filter(function(s) {
    return !availableItems.includes(s) && !wishableEffectData.some(function(n) {
      return n.name !== name && n.splitName.some(function(x) {
        return x.includes(s);
      });
    });
  })[0]];
}));
function retrieveUntradeablePrice(it) {
  return (0, import_kolmafia57.retrievePrice)(it, (0, import_kolmafia57.availableAmount)(it) + 1) - (0, import_kolmafia57.autosellPrice)(it) * (0, import_kolmafia57.availableAmount)(it);
}
var Potion = /* @__PURE__ */ function() {
  function Potion2(potion) {
    var _options$canDouble, _options$acquire;
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    _classCallCheck21(this, Potion2);
    _defineProperty24(this, "potion", void 0);
    _defineProperty24(this, "providesDoubleDuration", void 0);
    _defineProperty24(this, "canDouble", void 0);
    _defineProperty24(this, "overrideEffect", void 0);
    _defineProperty24(this, "overrideDuration", void 0);
    _defineProperty24(this, "priceOverride", void 0);
    _defineProperty24(this, "useOverride", void 0);
    _defineProperty24(this, "acquire", void 0);
    _defineProperty24(this, "effectValues", void 0);
    this.potion = potion;
    this.providesDoubleDuration = options.providesDoubleDuration;
    this.canDouble = (_options$canDouble = options.canDouble) !== null && _options$canDouble !== void 0 ? _options$canDouble : true;
    this.overrideDuration = options.duration;
    this.overrideEffect = options.effect;
    this.priceOverride = options.price;
    this.useOverride = options.use;
    this.acquire = (_options$acquire = options.acquire) !== null && _options$acquire !== void 0 ? _options$acquire : acquire;
    this.effectValues = options.effectValues;
  }
  _createClass21(Potion2, [{
    key: "doubleDuration",
    value: function doubleDuration() {
      if (this.canDouble) {
        return new Potion2(this.potion, {
          providesDoubleDuration: true,
          canDouble: this.canDouble,
          duration: this.overrideDuration,
          effect: this.overrideEffect,
          price: this.priceOverride,
          use: this.useOverride,
          acquire: this.acquire
        });
      }
      return this;
    }
  }, {
    key: "effect",
    value: function effect2() {
      var _this$overrideEffect;
      return (_this$overrideEffect = this.overrideEffect) !== null && _this$overrideEffect !== void 0 ? _this$overrideEffect : (0, import_kolmafia57.effectModifier)(this.potion, "Effect");
    }
  }, {
    key: "effectDuration",
    value: function effectDuration() {
      var _this$overrideDuratio;
      return ((_this$overrideDuratio = this.overrideDuration) !== null && _this$overrideDuratio !== void 0 ? _this$overrideDuratio : get2("Effect Duration", this.potion)) * (this.providesDoubleDuration ? 2 : 1);
    }
  }, {
    key: "smithsness",
    value: function smithsness() {
      var _this$effectValues$sm, _this$effectValues;
      return (_this$effectValues$sm = (_this$effectValues = this.effectValues) === null || _this$effectValues === void 0 ? void 0 : _this$effectValues.smithsness) !== null && _this$effectValues$sm !== void 0 ? _this$effectValues$sm : get2("Smithsness", this.effect());
    }
  }, {
    key: "meatDrop",
    value: function meatDrop() {
      var _this$effectValues$me, _this$effectValues2;
      return (_this$effectValues$me = (_this$effectValues2 = this.effectValues) === null || _this$effectValues2 === void 0 ? void 0 : _this$effectValues2.meatDrop) !== null && _this$effectValues$me !== void 0 ? _this$effectValues$me : get2("Meat Drop", this.effect()) + 2 * (usingPurse() ? this.smithsness() : 0);
    }
  }, {
    key: "familiarWeight",
    value: function familiarWeight10() {
      var _this$effectValues$fa, _this$effectValues3;
      return (_this$effectValues$fa = (_this$effectValues3 = this.effectValues) === null || _this$effectValues3 === void 0 ? void 0 : _this$effectValues3.famWeight) !== null && _this$effectValues$fa !== void 0 ? _this$effectValues$fa : get2("Familiar Weight", this.effect());
    }
  }, {
    key: "bonusMeat",
    value: function bonusMeat() {
      var familiarMultiplier = have($familiar(_templateObject744 || (_templateObject744 = _taggedTemplateLiteral48(["Robortender"])))) ? 2 : have($familiar(_templateObject837 || (_templateObject837 = _taggedTemplateLiteral48(["Hobo Monkey"])))) ? 1.25 : 1;
      var assumedBaseWeight = 100;
      var marginalValue = 2 * familiarMultiplier + Math.sqrt(220 * familiarMultiplier) / (2 * Math.sqrt(assumedBaseWeight));
      return this.familiarWeight() * marginalValue + this.meatDrop();
    }
  }, {
    key: "gross",
    value: function gross(embezzlers, maxTurns) {
      var bonusMeat = this.bonusMeat();
      var duration = Math.max(this.effectDuration(), maxTurns !== null && maxTurns !== void 0 ? maxTurns : 0);
      var embezzlersApplied = Math.max(Math.min(duration, embezzlers - (0, import_kolmafia57.haveEffect)(this.effect())), 0);
      return bonusMeat / 100 * (baseMeat * duration + 750 * embezzlersApplied);
    }
  }, {
    key: "price",
    value: function price2(historical) {
      if (this.priceOverride)
        return this.priceOverride(historical);
      return this.potion.tradeable ? historical && (0, import_kolmafia57.historicalAge)(this.potion) < 14 ? (0, import_kolmafia57.historicalPrice)(this.potion) : (0, import_kolmafia57.mallPrice)(this.potion) : retrieveUntradeablePrice(this.potion);
    }
  }, {
    key: "net",
    value: function net(embezzlers) {
      var historical = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
      return this.gross(embezzlers) - this.price(historical);
    }
  }, {
    key: "doublingValue",
    value: function doublingValue2(embezzlers) {
      var historical = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
      return Math.min(Math.max(this.doubleDuration().net(embezzlers, historical), 0) - Math.max(this.net(embezzlers, historical), 0), this.price(true));
    }
  }, {
    key: "usesToCover",
    value: (
      /**
       * Compute how many times to use this potion to cover the range of turns
       * @param turns the number of turns to cover
       * @param allowOverage whether or not to allow the potion to extend past this number of turns
       * @returns the number of uses required by this potion to cover thatrange
       */
      function usesToCover(turns2, allowOverage) {
        if (allowOverage) {
          return Math.ceil(turns2 / this.effectDuration());
        } else {
          return Math.floor(turns2 / this.effectDuration());
        }
      }
    )
  }, {
    key: "overage",
    value: (
      /**
       * Compute how many fewer or more turns we are from the desired turn count based on the input usage
       * @param turns the number of turns to cover
       * @param uses the number of uses of hte potion
       * @returns negative number of the number of turns short, positive number of the number of extra turns
       */
      function overage(turns2, uses) {
        return this.effectDuration() * uses - turns2;
      }
    )
  }, {
    key: "value",
    value: (
      /**
       * Compute up to 4 possible value thresholds for this potion based on the number of embezzlers to fight at the start of the day
       * - using it to only cover embezzlers
       * - using it to cover both barf and embezzlers (this is max 1 use)
       * - using it to only cover barf
       * - using it to cover turns in barf and those that would be lost at the end of the day
       * @param embezzlers The number of embezzlers expected to be fought in a block at the start of the day
       * @returns
       */
      function value(embezzlers, turns2, limit) {
        var startingTurns = (0, import_kolmafia57.haveEffect)(this.effect());
        var ascending = globalOptions.ascend;
        var totalTurns = turns2 !== null && turns2 !== void 0 ? turns2 : estimatedGarboTurns();
        var values = [];
        var limitFunction = limit ? function(quantity) {
          return clamp(limit - sum(values, function(_ref8) {
            var quantity2 = _ref8.quantity;
            return quantity2;
          }), 0, quantity);
        } : function(quantity) {
          return quantity;
        };
        var embezzlerTurns = Math.max(0, embezzlers - startingTurns);
        var embezzlerQuantity = this.usesToCover(embezzlerTurns, false);
        var embezzlerValue = embezzlerQuantity ? this.gross(embezzlers) : 0;
        values.push({
          name: "embezzler",
          quantity: limitFunction(embezzlerQuantity),
          value: embezzlerValue
        });
        var overlapEmbezzlers = -this.overage(embezzlerTurns, embezzlerQuantity);
        if (overlapEmbezzlers > 0) {
          values.push({
            name: "overlap",
            quantity: limitFunction(1),
            value: this.gross(overlapEmbezzlers, globalOptions.nobarf ? overlapEmbezzlers : void 0)
          });
        }
        var embezzlerCoverage = embezzlerQuantity + (overlapEmbezzlers > 0 ? 1 : 0) * this.effectDuration();
        if (!globalOptions.nobarf) {
          var remainingTurns = Math.max(0, totalTurns - embezzlerCoverage - startingTurns);
          var barfQuantity = this.usesToCover(remainingTurns, !ascending);
          values.push({
            name: "barf",
            quantity: limitFunction(barfQuantity),
            value: this.gross(0)
          });
          if (ascending && this.overage(remainingTurns, barfQuantity) < 0) {
            var ascendingTurns = Math.max(0, remainingTurns - barfQuantity * this.effectDuration());
            values.push({
              name: "ascending",
              quantity: limitFunction(1),
              value: this.gross(0, ascendingTurns)
            });
          }
        }
        return values.filter(function(tier) {
          return tier.quantity > 0;
        });
      }
    )
  }, {
    key: "_use",
    value: function _use(quantity) {
      if (this.useOverride) {
        return this.useOverride(quantity);
      } else if ((0, import_kolmafia57.itemType)(this.potion) === "potion") {
        return (0, import_kolmafia57.use)(quantity, this.potion);
      } else {
        return false;
      }
    }
  }, {
    key: "use",
    value: function use23(quantity) {
      var effectTurns = (0, import_kolmafia57.haveEffect)(this.effect());
      var result = this._use(quantity);
      if (this.potion === $item(_templateObject933 || (_templateObject933 = _taggedTemplateLiteral48(["pocket wish"]))) && (0, import_kolmafia57.haveEffect)(this.effect()) <= effectTurns) {
        failedWishes.push(this.effect());
      }
      return result;
    }
  }], [{
    key: "bonusMeat",
    value: function bonusMeat(item9) {
      return new Potion2(item9).bonusMeat();
    }
  }, {
    key: "gross",
    value: function gross(item9, embezzlers) {
      return new Potion2(item9).gross(embezzlers);
    }
  }, {
    key: "net",
    value: function net(item9, embezzlers) {
      var historical = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
      return new Potion2(item9).net(embezzlers, historical);
    }
  }, {
    key: "doublingValue",
    value: function doublingValue2(item9, embezzlers) {
      var historical = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
      return new Potion2(item9).doublingValue(embezzlers, historical);
    }
  }, {
    key: "usesToCover",
    value: function usesToCover(item9, turns2, allowOverage) {
      return new Potion2(item9).usesToCover(turns2, allowOverage);
    }
  }, {
    key: "overage",
    value: function overage(item9, turns2, uses) {
      return new Potion2(item9).overage(turns2, uses);
    }
  }]);
  return Potion2;
}();
function useAsValuable(potion, embezzlers, embezzlersOnly) {
  var value = potion.value(embezzlers);
  var price2 = potion.price(false);
  var amountsAcquired = value.map(function(value2) {
    return (!embezzlersOnly || value2.name === "embezzler") && value2.value - price2 > 0 ? potion.acquire(value2.quantity, potion.potion, value2.value, false, void 0, true) : 0;
  });
  var total = sumNumbers(amountsAcquired);
  if (total > 0) {
    var effect2 = potion.effect();
    if (isSong(effect2) && !have(effect2)) {
      var _iterator2 = _createForOfIteratorHelper22(getActiveSongs()), _step2;
      try {
        var _loop2 = function _loop22() {
          var song2 = _step2.value;
          var slot = Mood.defaultOptions.songSlots.find(function(slot2) {
            return slot2.includes(song2);
          });
          if (!slot || slot.includes(effect2)) {
            (0, import_kolmafia57.cliExecute)("shrug ".concat(song2));
          }
        };
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          _loop2();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    (0, import_kolmafia57.print)("Using ".concat(total, " ").concat(potion.potion.plural));
    potion.use(total);
  }
  return total;
}
var rufusPotion = new Potion($item(_templateObject1028 || (_templateObject1028 = _taggedTemplateLiteral48(["closed-circuit pay phone"]))), {
  providesDoubleDuration: false,
  canDouble: false,
  effect: $effect(_templateObject1124 || (_templateObject1124 = _taggedTemplateLiteral48(["Shadow Waters"]))),
  duration: 30,
  price: function(historical) {
    if (!have($item(_templateObject1223 || (_templateObject1223 = _taggedTemplateLiteral48(["closed-circuit pay phone"])))))
      return Infinity;
    var target = ClosedCircuitPayphone_exports.rufusTarget();
    var haveItemQuest = get("rufusQuestType") === "items" && target instanceof import_kolmafia57.Item;
    var haveArtifact = get("rufusQuestType") === "artifact" && target instanceof import_kolmafia57.Item && have(target);
    if (!(!target || haveItemQuest || haveArtifact || have($item(_templateObject1323 || (_templateObject1323 = _taggedTemplateLiteral48(["Rufus's shadow lodestone"])))))) {
      return Infinity;
    }
    if ((0, import_kolmafia57.myInebriety)() > (0, import_kolmafia57.inebrietyLimit)() && (!have($item(_templateObject1421 || (_templateObject1421 = _taggedTemplateLiteral48(["Drunkula's wineglass"])))) || !(0, import_kolmafia57.canEquip)($item(_templateObject1519 || (_templateObject1519 = _taggedTemplateLiteral48(["Drunkula's wineglass"])))))) {
      return Infinity;
    }
    var shadowItems = $items(_templateObject1619 || (_templateObject1619 = _taggedTemplateLiteral48(["shadow brick, shadow ice, shadow sinew, shadow glass, shadow stick, shadow skin, shadow flame, shadow fluid, shadow sausage, shadow bread, shadow venom, shadow nectar"])));
    var averagePrice = sum(shadowItems, function(it) {
      return historical && (0, import_kolmafia57.historicalAge)(it) < 14 ? (0, import_kolmafia57.historicalPrice)(it) : (0, import_kolmafia57.mallPrice)(it);
    }) / shadowItems.length;
    return 3 * averagePrice;
  },
  acquire: function(qty) {
    if ((0, import_kolmafia57.myInebriety)() > (0, import_kolmafia57.inebrietyLimit)()) {
      (0, import_kolmafia57.equip)($slot(_templateObject1719 || (_templateObject1719 = _taggedTemplateLiteral48(["weapon"]))), $item.none);
      (0, import_kolmafia57.equip)($slot(_templateObject1819 || (_templateObject1819 = _taggedTemplateLiteral48(["off-hand"]))), $item(_templateObject1919 || (_templateObject1919 = _taggedTemplateLiteral48(["Drunkula's wineglass"]))));
    }
    for (var iteration = 0; iteration < qty; iteration++) {
      if (!have($item(_templateObject2019 || (_templateObject2019 = _taggedTemplateLiteral48(["Rufus's shadow lodestone"]))))) {
        ClosedCircuitPayphone_exports.chooseQuest(function() {
          return 3;
        });
        var target = ClosedCircuitPayphone_exports.rufusTarget();
        if (get("rufusQuestType") === "items") {
          if (acquire(3, target, 2 * (0, import_kolmafia57.mallPrice)(target), false, 1e5)) {
            withChoice(1498, 1, function() {
              return (0, import_kolmafia57.use)($item(_templateObject2124 || (_templateObject2124 = _taggedTemplateLiteral48(["closed-circuit pay phone"]))));
            });
          } else
            break;
        } else if (get("rufusQuestType") === "artifact") {
          if (have(target))
            withChoice(1498, 1, function() {
              return (0, import_kolmafia57.use)($item(_templateObject2220 || (_templateObject2220 = _taggedTemplateLiteral48(["closed-circuit pay phone"]))));
            });
          else
            break;
        }
      }
      var curTurncount = (0, import_kolmafia57.myTurncount)();
      if (have($item(_templateObject2319 || (_templateObject2319 = _taggedTemplateLiteral48(["Rufus's shadow lodestone"]))))) {
        withChoice(1500, 2, function() {
          return (0, import_kolmafia57.adv1)(bestShadowRift(), -1, "");
        });
      }
      if ((0, import_kolmafia57.myTurncount)() > curTurncount) {
        throw new Error("Failed to acquire Shadow Waters and spent a turn!");
      }
    }
    (0, import_kolmafia57.setLocation)($location.none);
    return 0;
  },
  use: function() {
    return false;
  }
});
var wishPotions = wishableEffects.map(function(effect2) {
  return new Potion($item(_templateObject2419 || (_templateObject2419 = _taggedTemplateLiteral48(["pocket wish"]))), {
    effect: effect2,
    canDouble: false,
    duration: 20,
    use: function(quantity) {
      for (var i = 0; i < quantity; i++) {
        var madeValidWish = (0, import_kolmafia57.cliExecute)("genie effect ".concat(effect2));
        if (!madeValidWish)
          return false;
      }
      return true;
    }
  });
});
var pawPotions = Array.from(validPawWishes.keys()).filter(function(effect2) {
  return (0, import_kolmafia57.numericModifier)(effect2, "Meat Drop") >= 100;
}).map(function(effect2) {
  return new Potion($item(_templateObject2519 || (_templateObject2519 = _taggedTemplateLiteral48(["cursed monkey's paw"]))), {
    effect: effect2,
    canDouble: false,
    price: function() {
      return !CursedMonkeyPaw_exports.have() || CursedMonkeyPaw_exports.wishes() === 0 || failedWishes.includes(effect2) ? Math.pow(2, 100) : 0;
    },
    duration: 30,
    acquire: function() {
      return CursedMonkeyPaw_exports.wishes() ? 1 : 0;
    },
    use: function() {
      if (!CursedMonkeyPaw_exports.have() || CursedMonkeyPaw_exports.wishes() === 0 || failedWishes.includes(effect2)) {
        return false;
      }
      if (!CursedMonkeyPaw_exports.isWishable(effect2))
        return false;
      if (!(0, import_kolmafia57.monkeyPaw)(effect2)) {
        failedWishes.push(effect2);
        return false;
      }
      return true;
    }
  });
});
var farmingPotions = [].concat(_toConsumableArray27(import_kolmafia57.Item.all().filter(function(item9) {
  return item9.tradeable && !banned.includes(item9) && (0, import_kolmafia57.itemType)(item9) === "potion";
}).map(function(item9) {
  return new Potion(item9);
}).filter(function(potion) {
  return potion.bonusMeat() > 0;
})), _toConsumableArray27(wishPotions), [new Potion($item(_templateObject2619 || (_templateObject2619 = _taggedTemplateLiteral48(["papier-m\xE2ch\xE9 toothpicks"]))))], _toConsumableArray27(have($item(_templateObject2719 || (_templateObject2719 = _taggedTemplateLiteral48(["closed-circuit pay phone"])))) ? [rufusPotion] : []));
function doublingPotions(embezzlers) {
  return farmingPotions.filter(function(potion) {
    return potion.doubleDuration().gross(embezzlers) / potion.price(true) > 0.5;
  }).map(function(potion) {
    return {
      potion: potion,
      value: potion.doublingValue(embezzlers)
    };
  }).sort(function(a, b) {
    return b.value - a.value;
  }).map(function(pair) {
    return pair.potion;
  });
}
function usePawWishes(singleUseValuation) {
  while (CursedMonkeyPaw_exports.wishes() > 0) {
    var madeValidWish = pawPotions.sort(function(a, b) {
      return singleUseValuation(b) - singleUseValuation(a);
    }).some(function(potion) {
      return potion.use(1);
    });
    if (!madeValidWish)
      return;
  }
}
var completedPotionSetup = false;
function potionSetupCompleted() {
  return completedPotionSetup;
}
function potionSetup(embezzlersOnly) {
  castAugustScepterBuffs();
  withLocation($location.none, function() {
    var embezzlers = embezzlerCount();
    if (have($item(_templateObject2818 || (_templateObject2818 = _taggedTemplateLiteral48(["Eight Days a Week Pill Keeper"])))) && !get("_freePillKeeperUsed")) {
      var possibleDoublingPotions = doublingPotions(embezzlers);
      var bestPotion = possibleDoublingPotions.length > 0 ? possibleDoublingPotions[0] : void 0;
      if (bestPotion && bestPotion.doubleDuration().net(embezzlers) > pillkeeperOpportunityCost()) {
        (0, import_kolmafia57.print)("Determined that ".concat(bestPotion.potion, " was the best potion to double"), HIGHLIGHT);
        (0, import_kolmafia57.cliExecute)("pillkeeper extend");
        bestPotion.acquire(1, bestPotion.potion, bestPotion.doubleDuration().gross(embezzlers));
        bestPotion.use(1);
      }
    }
    var testPotions = farmingPotions.filter(function(potion) {
      return potion.gross(embezzlers) / potion.price(true) > 0.5;
    });
    var nonWishTestPotions = testPotions.filter(function(potion) {
      return potion.potion !== $item(_templateObject2918 || (_templateObject2918 = _taggedTemplateLiteral48(["pocket wish"])));
    });
    nonWishTestPotions.sort(function(a, b) {
      return b.net(embezzlers) - a.net(embezzlers);
    });
    var excludedEffects = /* @__PURE__ */ new Set();
    var _iterator3 = _createForOfIteratorHelper22(getActiveEffects()), _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
        var _mutuallyExclusive$ge2;
        var effect2 = _step3.value;
        var _iterator6 = _createForOfIteratorHelper22((_mutuallyExclusive$ge2 = mutuallyExclusive.get(effect2)) !== null && _mutuallyExclusive$ge2 !== void 0 ? _mutuallyExclusive$ge2 : []), _step6;
        try {
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done; ) {
            var excluded = _step6.value;
            excludedEffects.add(excluded);
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
    var _iterator4 = _createForOfIteratorHelper22(nonWishTestPotions), _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
        var _potion = _step4.value;
        var _effect = _potion.effect();
        if (!excludedEffects.has(_effect) && useAsValuable(_potion, embezzlers, embezzlersOnly) > 0) {
          var _mutuallyExclusive$ge3;
          var _iterator7 = _createForOfIteratorHelper22((_mutuallyExclusive$ge3 = mutuallyExclusive.get(_effect)) !== null && _mutuallyExclusive$ge3 !== void 0 ? _mutuallyExclusive$ge3 : []), _step7;
          try {
            for (_iterator7.s(); !(_step7 = _iterator7.n()).done; ) {
              var _excluded = _step7.value;
              excludedEffects.add(_excluded);
            }
          } catch (err) {
            _iterator7.e(err);
          } finally {
            _iterator7.f();
          }
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
    usePawWishes(function(potion) {
      var value = potion.value(embezzlers);
      return value.length > 0 ? maxBy(value, function(_ref9) {
        var quantity = _ref9.quantity, value2 = _ref9.value;
        return quantity > 0 ? value2 : 0;
      }).value : 0;
    });
    var wishTestPotions = testPotions.filter(function(potion) {
      return potion.potion === $item(_templateObject3016 || (_templateObject3016 = _taggedTemplateLiteral48(["pocket wish"])));
    });
    wishTestPotions.sort(function(a, b) {
      return b.net(embezzlers) - a.net(embezzlers);
    });
    var _iterator5 = _createForOfIteratorHelper22(wishTestPotions), _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
        var _potion2 = _step5.value;
        var _effect2 = _potion2.effect();
        if (!excludedEffects.has(_effect2) && !failedWishes.includes(_effect2) && useAsValuable(_potion2, embezzlers, embezzlersOnly) > 0) {
          var _mutuallyExclusive$ge4;
          var _iterator8 = _createForOfIteratorHelper22((_mutuallyExclusive$ge4 = mutuallyExclusive.get(_effect2)) !== null && _mutuallyExclusive$ge4 !== void 0 ? _mutuallyExclusive$ge4 : []), _step8;
          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done; ) {
              var _excluded2 = _step8.value;
              excludedEffects.add(_excluded2);
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }
        }
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    variableMeatPotionsSetup(0, embezzlers);
    completedPotionSetup = true;
  });
}
function bathroomFinance(embezzlers) {
  if (have($effect(_templateObject3120 || (_templateObject3120 = _taggedTemplateLiteral48(["Buy!  Sell!  Buy!  Sell!"])))))
    return;
  var averageEmbezzlerGross = (baseMeat + 750) * 2 * (embezzlers + 1) / 2 / 100;
  var embezzlerGross = averageEmbezzlerGross * embezzlers;
  var tourists = 100 - embezzlers;
  var averageTouristGross = baseMeat * 2 * (100 + embezzlers + 1) / 2 / 100;
  var touristGross = averageTouristGross * tourists;
  var greenspan = $item(_templateObject3218 || (_templateObject3218 = _taggedTemplateLiteral48(["Uncle Greenspan's Bathroom Finance Guide"])));
  if (touristGross + embezzlerGross > (0, import_kolmafia57.mallPrice)(greenspan)) {
    acquire(1, greenspan, touristGross + embezzlerGross, false);
    if ((0, import_kolmafia57.itemAmount)(greenspan) > 0) {
      (0, import_kolmafia57.print)("Using ".concat(greenspan, "!"), HIGHLIGHT);
      (0, import_kolmafia57.use)(greenspan);
    }
  }
}
function triangleNumber(b) {
  var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return 0.5 * (b * (b + 1) - a * (a + 1));
}
var VariableMeatPotion = /* @__PURE__ */ function() {
  function VariableMeatPotion2(potion, softcap, meatBonusPerTurn, duration, effect2) {
    _classCallCheck21(this, VariableMeatPotion2);
    _defineProperty24(this, "potion", void 0);
    _defineProperty24(this, "effect", void 0);
    _defineProperty24(this, "duration", void 0);
    _defineProperty24(this, "softcap", void 0);
    _defineProperty24(this, "meatBonusPerTurn", void 0);
    _defineProperty24(this, "cappedMeatBonus", void 0);
    this.potion = potion;
    this.effect = effect2 !== null && effect2 !== void 0 ? effect2 : (0, import_kolmafia57.effectModifier)(potion, "Effect");
    this.duration = duration !== null && duration !== void 0 ? duration : (0, import_kolmafia57.numericModifier)(potion, "Effect Duration");
    this.softcap = softcap;
    this.meatBonusPerTurn = meatBonusPerTurn;
    this.cappedMeatBonus = softcap * meatBonusPerTurn;
  }
  _createClass21(VariableMeatPotion2, [{
    key: "use",
    value: function use23(quantity) {
      acquire(quantity, this.potion, 1.2 * (0, import_kolmafia57.retrievePrice)(this.potion, quantity) / quantity, false, 2e6);
      if ((0, import_kolmafia57.availableAmount)(this.potion) < quantity)
        return false;
      return (0, import_kolmafia57.use)(quantity, this.potion);
    }
  }, {
    key: "price",
    value: function price2(historical) {
      return this.potion.tradeable ? historical && (0, import_kolmafia57.historicalAge)(this.potion) < 14 ? (0, import_kolmafia57.historicalPrice)(this.potion) : (0, import_kolmafia57.mallPrice)(this.potion) : retrieveUntradeablePrice(this.potion);
    }
  }, {
    key: "getOptimalNumberToUse",
    value: function getOptimalNumberToUse(yachtzees, embezzlers) {
      var _this = this;
      var barfTurns = Math.max(0, estimatedGarboTurns() - yachtzees - embezzlers);
      var potionAmountsToConsider = [];
      var considerSoftcap = [0, this.softcap];
      var considerEmbezzlers = embezzlers > 0 ? [0, embezzlers] : [0];
      for (var _i2 = 0, _arr = [Math.floor, Math.ceil]; _i2 < _arr.length; _i2++) {
        var fn = _arr[_i2];
        var _iterator9 = _createForOfIteratorHelper22(considerSoftcap), _step9;
        try {
          for (_iterator9.s(); !(_step9 = _iterator9.n()).done; ) {
            var sc = _step9.value;
            var _iterator10 = _createForOfIteratorHelper22(considerEmbezzlers), _step10;
            try {
              for (_iterator10.s(); !(_step10 = _iterator10.n()).done; ) {
                var em = _step10.value;
                var considerBarfTurns = em === embezzlers && barfTurns > 0 ? [0, barfTurns] : [0];
                for (var _i3 = 0, _considerBarfTurns = considerBarfTurns; _i3 < _considerBarfTurns.length; _i3++) {
                  var bt = _considerBarfTurns[_i3];
                  var potionAmount = fn((yachtzees + em + bt + sc) / this.duration);
                  if (!potionAmountsToConsider.includes(potionAmount)) {
                    potionAmountsToConsider.push(potionAmount);
                  }
                }
              }
            } catch (err) {
              _iterator10.e(err);
            } finally {
              _iterator10.f();
            }
          }
        } catch (err) {
          _iterator9.e(err);
        } finally {
          _iterator9.f();
        }
      }
      var profitsFromPotions = potionAmountsToConsider.map(function(quantity) {
        return {
          quantity: quantity,
          value: _this.valueNPotions(quantity, yachtzees, embezzlers, barfTurns)
        };
      });
      var bestOption = maxBy(profitsFromPotions, "value");
      if (bestOption.value > 0) {
        (0, import_kolmafia57.print)("Expected to profit ".concat(bestOption.value.toFixed(2), " from ").concat(bestOption.quantity, " ").concat(this.potion.plural), "blue");
        var ascendingOverlap = globalOptions.ascend || globalOptions.nobarf ? 0 : this.softcap / this.duration;
        var potionsToUse = bestOption.quantity + ascendingOverlap - Math.floor((0, import_kolmafia57.haveEffect)(this.effect) / this.duration);
        return Math.max(potionsToUse, 0);
      }
      return 0;
    }
  }, {
    key: "valueNPotions",
    value: function valueNPotions(n, yachtzees, embezzlers, barfTurns) {
      var yachtzeeValue = 2e3;
      var embezzlerValue = baseMeat + 750;
      var barfValue = baseMeat * turnsToNC / 30;
      var totalCosts = (0, import_kolmafia57.retrievePrice)(this.potion, n);
      var totalDuration = n * this.duration;
      var cappedDuration = Math.max(0, totalDuration - this.softcap + 1);
      var decayDuration = Math.min(totalDuration, this.softcap - 1);
      var totalValue = 0;
      var turnTypes = [[yachtzees, yachtzeeValue], [embezzlers, embezzlerValue], [barfTurns, barfValue]];
      for (var _i4 = 0, _turnTypes = turnTypes; _i4 < _turnTypes.length; _i4++) {
        var _turnTypes$_i = _slicedToArray23(_turnTypes[_i4], 2), turns2 = _turnTypes$_i[0], value = _turnTypes$_i[1];
        var cappedTurns = Math.min(cappedDuration, turns2);
        var decayTurns = Math.min(decayDuration, turns2 - cappedTurns);
        totalValue += value * (cappedTurns * this.cappedMeatBonus + triangleNumber(decayDuration, decayDuration - decayTurns) * this.meatBonusPerTurn) / 100;
        cappedDuration -= cappedTurns;
        decayDuration -= decayTurns;
        if (decayDuration === 0)
          break;
      }
      return totalValue - totalCosts;
    }
  }]);
  return VariableMeatPotion2;
}();
function variableMeatPotionsSetup(yachtzees, embezzlers) {
  var potions = [new VariableMeatPotion($item(_templateObject3317 || (_templateObject3317 = _taggedTemplateLiteral48(["love song of sugary cuteness"]))), 20, 2), new VariableMeatPotion($item(_templateObject3416 || (_templateObject3416 = _taggedTemplateLiteral48(["pulled yellow taffy"]))), 50, 2)].concat(_toConsumableArray27(globalOptions.prefs.candydish ? [new VariableMeatPotion($item(_templateObject3515 || (_templateObject3515 = _taggedTemplateLiteral48(["porcelain candy dish"]))), 500, 1)] : []));
  var excludedEffects = /* @__PURE__ */ new Set();
  var _iterator11 = _createForOfIteratorHelper22(getActiveEffects()), _step11;
  try {
    for (_iterator11.s(); !(_step11 = _iterator11.n()).done; ) {
      var _mutuallyExclusive$ge5;
      var effect2 = _step11.value;
      var _iterator13 = _createForOfIteratorHelper22((_mutuallyExclusive$ge5 = mutuallyExclusive.get(effect2)) !== null && _mutuallyExclusive$ge5 !== void 0 ? _mutuallyExclusive$ge5 : []), _step13;
      try {
        for (_iterator13.s(); !(_step13 = _iterator13.n()).done; ) {
          var excluded = _step13.value;
          excludedEffects.add(excluded);
        }
      } catch (err) {
        _iterator13.e(err);
      } finally {
        _iterator13.f();
      }
    }
  } catch (err) {
    _iterator11.e(err);
  } finally {
    _iterator11.f();
  }
  var _iterator12 = _createForOfIteratorHelper22(potions), _step12;
  try {
    for (_iterator12.s(); !(_step12 = _iterator12.n()).done; ) {
      var _potion3 = _step12.value;
      var _effect3 = (0, import_kolmafia57.effectModifier)(_potion3.potion, "Effect");
      var n = excludedEffects.has(_effect3) ? 0 : _potion3.getOptimalNumberToUse(yachtzees, embezzlers);
      if (n > 0) {
        var _mutuallyExclusive$ge6;
        _potion3.use(n);
        var _iterator14 = _createForOfIteratorHelper22((_mutuallyExclusive$ge6 = mutuallyExclusive.get(_effect3)) !== null && _mutuallyExclusive$ge6 !== void 0 ? _mutuallyExclusive$ge6 : []), _step14;
        try {
          for (_iterator14.s(); !(_step14 = _iterator14.n()).done; ) {
            var _excluded3 = _step14.value;
            excludedEffects.add(_excluded3);
          }
        } catch (err) {
          _iterator14.e(err);
        } finally {
          _iterator14.f();
        }
      }
    }
  } catch (err) {
    _iterator12.e(err);
  } finally {
    _iterator12.f();
  }
}

// src/synthesis.ts
var import_kolmafia58 = require("kolmafia");
var _templateObject481;
function _createForOfIteratorHelper23(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray40(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray28(arr) {
  return _arrayWithoutHoles28(arr) || _iterableToArray28(arr) || _unsupportedIterableToArray40(arr) || _nonIterableSpread28();
}
function _nonIterableSpread28() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray40(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray40(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray40(o, minLen);
}
function _iterableToArray28(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles28(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray40(arr);
}
function _arrayLikeToArray40(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral49(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var whitelist = $items(_templateObject481 || (_templateObject481 = _taggedTemplateLiteral49(["sugar shotgun, sugar shillelagh, sugar shank, sugar chapeau, sugar shorts, sugar shield, sugar shirt, Fudgie Roll"])));
function synthesize(casts, effect2) {
  var shuffledWhitelist = shuffle(_toConsumableArray28(whitelist));
  var _iterator = _createForOfIteratorHelper23(shuffledWhitelist), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var itemA = _step.value;
      if ((0, import_kolmafia58.availableAmount)(itemA) <= 1)
        continue;
      if (casts <= 0)
        return;
      var _iterator2 = _createForOfIteratorHelper23(shuffledWhitelist), _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          var itemB = _step2.value;
          var minimum = itemA === itemB ? 2 : 1;
          if ((0, import_kolmafia58.availableAmount)(itemB) <= minimum)
            continue;
          if ((0, import_kolmafia58.sweetSynthesisResult)(itemA, itemB) !== effect2)
            continue;
          var possibleCasts = itemA === itemB ? Math.floor(((0, import_kolmafia58.availableAmount)(itemA) - 1) / 2) : Math.min((0, import_kolmafia58.availableAmount)(itemA), (0, import_kolmafia58.availableAmount)(itemB)) - 1;
          var spleen = Math.max((0, import_kolmafia58.spleenLimit)() - (0, import_kolmafia58.mySpleenUse)(), 0);
          var castsToDo = Math.min(possibleCasts, casts, spleen);
          if (castsToDo === 0)
            continue;
          if (itemA === itemB)
            (0, import_kolmafia58.retrieveItem)(itemA, castsToDo * 2);
          else {
            (0, import_kolmafia58.retrieveItem)(itemA, castsToDo);
            (0, import_kolmafia58.retrieveItem)(itemB, castsToDo);
          }
          if ((0, import_kolmafia58.sweetSynthesis)(castsToDo, itemA, itemB))
            casts -= castsToDo;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  (0, import_kolmafia58.sweetSynthesis)(clamp(casts, 0, (0, import_kolmafia58.spleenLimit)() - (0, import_kolmafia58.mySpleenUse)()), effect2);
}

// src/diet.ts
var _templateObject490;
var _templateObject2125;
var _templateObject3104;
var _templateObject491;
var _templateObject569;
var _templateObject651;
var _templateObject745;
var _templateObject838;
var _templateObject934;
var _templateObject1029;
var _templateObject1125;
var _templateObject1224;
var _templateObject1324;
var _templateObject1422;
var _templateObject1520;
var _templateObject1620;
var _templateObject1720;
var _templateObject1820;
var _templateObject1920;
var _templateObject2020;
var _templateObject2126;
var _templateObject2221;
var _templateObject2320;
var _templateObject2420;
var _templateObject2520;
var _templateObject2620;
var _templateObject2720;
var _templateObject2819;
var _templateObject2919;
var _templateObject3017;
var _templateObject3121;
var _templateObject3219;
var _templateObject3318;
var _templateObject3417;
var _templateObject3516;
var _templateObject3614;
var _templateObject3713;
var _templateObject3812;
var _templateObject3911;
var _templateObject4011;
var _templateObject4115;
var _templateObject4215;
var _templateObject4315;
var _templateObject4413;
var _templateObject4512;
var _templateObject4610;
var _templateObject4710;
var _templateObject4810;
var _templateObject4910;
var _templateObject5010;
var _templateObject5115;
var _templateObject5215;
var _templateObject5314;
var _templateObject5412;
var _templateObject5511;
var _templateObject5610;
var _templateObject578;
var _templateObject588;
var _templateObject598;
var _templateObject607;
var _templateObject6113;
var _templateObject6213;
var _templateObject6312;
var _templateObject6410;
var _templateObject656;
var _templateObject666;
var _templateObject675;
var _templateObject684;
var _templateObject694;
var _templateObject704;
var _templateObject7110;
var _templateObject7210;
var _templateObject7310;
var _templateObject746;
var _templateObject754;
var _templateObject763;
var _templateObject773;
var _templateObject783;
var _templateObject793;
var _templateObject803;
var _templateObject8110;
var _templateObject8210;
var _templateObject839;
var _templateObject844;
var _templateObject854;
var _templateObject862;
var _templateObject872;
var _templateObject882;
var _templateObject892;
var _templateObject902;
var _templateObject9110;
var _templateObject9210;
var _templateObject935;
var _templateObject943;
var _templateObject953;
var _templateObject962;
var _templateObject972;
var _templateObject982;
var _templateObject992;
var _templateObject1002;
var _templateObject10110;
var _templateObject10210;
var _templateObject1032;
var _templateObject1042;
var _templateObject1052;
var _templateObject1062;
var _templateObject1072;
var _templateObject1082;
var _templateObject1092;
var _templateObject1102;
var _templateObject11110;
var _templateObject1126;
var _templateObject1132;
var _templateObject1142;
var _templateObject1152;
var _templateObject1162;
var _templateObject1172;
var _templateObject1182;
var _templateObject1192;
var _templateObject1202;
var _templateObject12110;
var _templateObject1225;
var _templateObject1232;
var _templateObject1242;
var _templateObject1252;
var _templateObject1262;
var _templateObject1272;
var _templateObject1282;
var _templateObject1292;
var _templateObject1302;
var _templateObject13110;
var _templateObject1325;
var _templateObject1332;
var _templateObject1342;
var _templateObject1352;
var _templateObject1362;
var _templateObject1372;
var _templateObject1382;
var _templateObject1392;
var _templateObject1402;
var _templateObject14110;
var _templateObject1423;
var _templateObject1432;
var _templateObject1442;
var _templateObject1452;
var _templateObject1462;
var _templateObject1472;
var _templateObject1482;
var _templateObject1492;
var _templateObject1502;
var _templateObject15110;
var _templateObject1522;
var _templateObject1532;
var _templateObject1542;
var _templateObject1552;
var _templateObject1562;
var _templateObject1572;
var _templateObject1582;
var _templateObject1592;
var _templateObject1602;
var _templateObject16110;
var _templateObject1622;
var _templateObject1632;
var _templateObject1642;
var _templateObject1652;
var _templateObject1662;
var _templateObject1672;
var _templateObject1682;
var _templateObject1692;
var _templateObject1702;
var _templateObject17110;
var _templateObject1722;
var _templateObject1732;
var _templateObject1742;
var _templateObject1752;
var _templateObject1762;
var _templateObject1772;
var _templateObject1782;
var _templateObject1792;
var _templateObject1802;
var _templateObject18110;
var _templateObject1822;
var _templateObject1832;
var _templateObject1842;
var _templateObject1852;
var _templateObject1862;
var _templateObject1872;
var _templateObject1882;
var _templateObject1892;
var _templateObject1902;
var _templateObject19110;
var _templateObject1922;
var _templateObject1932;
var _templateObject1942;
var _templateObject1952;
var _templateObject1962;
var _templateObject1972;
var _templateObject1982;
var _templateObject1992;
var _templateObject2002;
var _templateObject20110;
var _templateObject2022;
var _templateObject2032;
var _templateObject2042;
var _templateObject2052;
var _templateObject2062;
var _templateObject2072;
var _templateObject2082;
var _templateObject2092;
var _templateObject21010;
var _templateObject21110;
var _templateObject2127;
var _templateObject2132;
var _templateObject2142;
var _templateObject2152;
var _templateObject2162;
function _slicedToArray24(arr, i) {
  return _arrayWithHoles24(arr) || _iterableToArrayLimit24(arr, i) || _unsupportedIterableToArray41(arr, i) || _nonIterableRest24();
}
function _nonIterableRest24() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit24(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles24(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper24(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray41(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray29(arr) {
  return _arrayWithoutHoles29(arr) || _iterableToArray29(arr) || _unsupportedIterableToArray41(arr) || _nonIterableSpread29();
}
function _nonIterableSpread29() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray41(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray41(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray41(o, minLen);
}
function _iterableToArray29(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles29(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray41(arr);
}
function _arrayLikeToArray41(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral50(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var MPA = get("valueOfAdventure");
(0, import_kolmafia59.print)("Using adventure value ".concat(MPA, "."), HIGHLIGHT);
var Mayo2 = MayoClinic_exports.Mayo;
function eatSafe(qty, item9) {
  if (have($item(_templateObject490 || (_templateObject490 = _taggedTemplateLiteral50(["Universal Seasoning"])))) && $item(_templateObject2125 || (_templateObject2125 = _taggedTemplateLiteral50(["Universal Seasoning"]))).dailyusesleft > 0 && !get("universalSeasoningActive")) {
    (0, import_kolmafia59.use)($item(_templateObject3104 || (_templateObject3104 = _taggedTemplateLiteral50(["Universal Seasoning"]))));
  }
  if ((0, import_kolmafia59.myLevel)() >= 15 && !get("_hungerSauceUsed") && (0, import_kolmafia59.mallPrice)($item(_templateObject491 || (_templateObject491 = _taggedTemplateLiteral50(["Hunger\u2122 Sauce"])))) < 3 * MPA) {
    acquire(1, $item(_templateObject569 || (_templateObject569 = _taggedTemplateLiteral50(["Hunger\u2122 Sauce"]))), 3 * MPA);
    (0, import_kolmafia59.use)($item(_templateObject651 || (_templateObject651 = _taggedTemplateLiteral50(["Hunger\u2122 Sauce"]))));
  }
  if ((0, import_kolmafia59.mallPrice)($item(_templateObject745 || (_templateObject745 = _taggedTemplateLiteral50(["fudge spork"])))) < 3 * MPA && !get("_fudgeSporkUsed")) {
    (0, import_kolmafia59.eat)($item(_templateObject838 || (_templateObject838 = _taggedTemplateLiteral50(["fudge spork"]))));
  }
  useIfUnused($item(_templateObject934 || (_templateObject934 = _taggedTemplateLiteral50(["milk of magnesium"]))), "_milkOfMagnesiumUsed", 5 * MPA);
  if (!(0, import_kolmafia59.eat)(qty, item9))
    throw "Failed to eat safely";
}
function drinkSafe(qty, item9) {
  var prevDrunk = (0, import_kolmafia59.myInebriety)();
  if (have($skill(_templateObject1029 || (_templateObject1029 = _taggedTemplateLiteral50(["The Ode to Booze"]))))) {
    var odeTurns = qty * item9.inebriety;
    var castTurns = odeTurns - (0, import_kolmafia59.haveEffect)($effect(_templateObject1125 || (_templateObject1125 = _taggedTemplateLiteral50(["Ode to Booze"]))));
    if (castTurns > 0) {
      (0, import_kolmafia59.useSkill)($skill(_templateObject1224 || (_templateObject1224 = _taggedTemplateLiteral50(["The Ode to Booze"]))), Math.ceil(castTurns / (0, import_kolmafia59.turnsPerCast)($skill(_templateObject1324 || (_templateObject1324 = _taggedTemplateLiteral50(["The Ode to Booze"]))))));
    }
  }
  if (!(0, import_kolmafia59.drink)(qty, item9))
    throw "Failed to drink safely";
  if (item9.inebriety === 1 && prevDrunk === qty + (0, import_kolmafia59.myInebriety)() - 1) {
    (0, import_kolmafia59.setProperty)("_mimeArmyShotglassUsed", "true");
  }
}
function chewSafe(qty, item9) {
  if (!(0, import_kolmafia59.chew)(qty, item9))
    throw "Failed to chew safely";
}
function consumeSafe(qty, item9, additionalValue, skipAcquire) {
  var spleenCleaned = spleenCleaners.get(item9);
  if (spleenCleaned && (0, import_kolmafia59.mySpleenUse)() < spleenCleaned) {
    throw "No spleen to clear with this.";
  }
  var averageAdventures = getAverageAdventures(item9);
  if (!skipAcquire && (averageAdventures > 0 || additionalValue)) {
    var cap = Math.max(0, averageAdventures * MPA) + (additionalValue !== null && additionalValue !== void 0 ? additionalValue : 0);
    acquire(qty, item9, cap);
  } else if (!skipAcquire) {
    acquire(qty, item9);
  }
  if ((0, import_kolmafia59.itemType)(item9) === "food" || item9 === saladFork)
    eatSafe(qty, item9);
  else if ((0, import_kolmafia59.itemType)(item9) === "booze" || item9 === frostyMug)
    drinkSafe(qty, item9);
  else if ((0, import_kolmafia59.itemType)(item9) === "spleen item")
    chewSafe(qty, item9);
  else
    (0, import_kolmafia59.use)(qty, item9);
}
function propTrue(prop) {
  if (typeof prop === "boolean") {
    return prop;
  } else {
    return get(prop);
  }
}
function useIfUnused(item9, prop, maxPrice) {
  if (!propTrue(prop)) {
    if ((0, import_kolmafia59.mallPrice)(item9) <= maxPrice) {
      acquire(1, item9, maxPrice, false);
      if (!have(item9))
        return;
      (0, import_kolmafia59.use)(1, item9);
    } else {
      (0, import_kolmafia59.print)("Skipping ".concat(item9.name, "; too expensive (").concat((0, import_kolmafia59.mallPrice)(item9), " > ").concat(maxPrice, ")."));
    }
  }
}
function nonOrganAdventures() {
  useIfUnused($item(_templateObject1422 || (_templateObject1422 = _taggedTemplateLiteral50(["fancy chocolate car"]))), get("_chocolatesUsed") !== 0, 2 * MPA);
  while (get("_loveChocolatesUsed") < 3) {
    var price2 = have($item(_templateObject1520 || (_templateObject1520 = _taggedTemplateLiteral50(["LOV Extraterrestrial Chocolate"])))) ? 15e3 : 2e4;
    var value = clamp(3 - get("_loveChocolatesUsed"), 0, 3) * get("valueOfAdventure");
    if (value < price2)
      break;
    if (!have($item(_templateObject1620 || (_templateObject1620 = _taggedTemplateLiteral50(["LOV Extraterrestrial Chocolate"]))))) {
      Kmail.send("sellbot", "".concat($item(_templateObject1720 || (_templateObject1720 = _taggedTemplateLiteral50(["LOV Extraterrestrial Chocolate"]))).name, " (1)"), void 0, 2e4);
      (0, import_kolmafia59.wait)(11);
      (0, import_kolmafia59.cliExecute)("refresh inventory");
      if (!have($item(_templateObject1820 || (_templateObject1820 = _taggedTemplateLiteral50(["LOV Extraterrestrial Chocolate"]))))) {
        (0, import_kolmafia59.print)("I'm tired of waiting for sellbot to send me some chocolate", "red");
        break;
      }
    }
    (0, import_kolmafia59.use)($item(_templateObject1920 || (_templateObject1920 = _taggedTemplateLiteral50(["LOV Extraterrestrial Chocolate"]))));
  }
  var chocos = /* @__PURE__ */ new Map([[$class(_templateObject2020 || (_templateObject2020 = _taggedTemplateLiteral50(["Seal Clubber"]))), $item(_templateObject2126 || (_templateObject2126 = _taggedTemplateLiteral50(["chocolate seal-clubbing club"])))], [$class(_templateObject2221 || (_templateObject2221 = _taggedTemplateLiteral50(["Turtle Tamer"]))), $item(_templateObject2320 || (_templateObject2320 = _taggedTemplateLiteral50(["chocolate turtle totem"])))], [$class(_templateObject2420 || (_templateObject2420 = _taggedTemplateLiteral50(["Pastamancer"]))), $item(_templateObject2520 || (_templateObject2520 = _taggedTemplateLiteral50(["chocolate pasta spoon"])))], [$class(_templateObject2620 || (_templateObject2620 = _taggedTemplateLiteral50(["Sauceror"]))), $item(_templateObject2720 || (_templateObject2720 = _taggedTemplateLiteral50(["chocolate saucepan"])))], [$class(_templateObject2819 || (_templateObject2819 = _taggedTemplateLiteral50(["Accordion Thief"]))), $item(_templateObject2919 || (_templateObject2919 = _taggedTemplateLiteral50(["chocolate stolen accordion"])))], [$class(_templateObject3017 || (_templateObject3017 = _taggedTemplateLiteral50(["Disco Bandit"]))), $item(_templateObject3121 || (_templateObject3121 = _taggedTemplateLiteral50(["chocolate disco ball"])))]]);
  var classChoco = chocos.get((0, import_kolmafia59.myClass)());
  var chocExpVal = function(remaining, item9) {
    var advs = [0, 0, 1, 2, 3][remaining + (item9 === classChoco ? 1 : 0)];
    return advs * MPA - (0, import_kolmafia59.mallPrice)(item9);
  };
  var chocosRemaining = clamp(3 - get("_chocolatesUsed"), 0, 3);
  var _loop = function _loop2(i2) {
    var chocoVals = _toConsumableArray29(chocos.values()).map(function(choc) {
      return {
        choco: choc,
        value: chocExpVal(i2, choc)
      };
    });
    var best = maxBy(chocoVals, "value");
    if (best.value > 0) {
      acquire(1, best.choco, best.value + (0, import_kolmafia59.mallPrice)(best.choco), false);
      (0, import_kolmafia59.use)(1, best.choco);
    } else
      return "break";
  };
  for (var i = chocosRemaining; i > 0; i--) {
    var _ret = _loop(i);
    if (_ret === "break")
      break;
  }
  useIfUnused($item(_templateObject3219 || (_templateObject3219 = _taggedTemplateLiteral50(["fancy chocolate sculpture"]))), get("_chocolateSculpturesUsed") > 0, 5 * MPA + 5e3);
  useIfUnused($item(_templateObject3318 || (_templateObject3318 = _taggedTemplateLiteral50(["essential tofu"]))), "_essentialTofuUsed", 5 * MPA);
  if (!get("_etchedHourglassUsed") && have($item(_templateObject3417 || (_templateObject3417 = _taggedTemplateLiteral50(["etched hourglass"]))))) {
    (0, import_kolmafia59.use)(1, $item(_templateObject3516 || (_templateObject3516 = _taggedTemplateLiteral50(["etched hourglass"]))));
  }
  if ((0, import_kolmafia59.getProperty)("_timesArrowUsed") !== "true" && (0, import_kolmafia59.mallPrice)($item(_templateObject3614 || (_templateObject3614 = _taggedTemplateLiteral50(["time's arrow"])))) < 5 * MPA) {
    acquire(1, $item(_templateObject3713 || (_templateObject3713 = _taggedTemplateLiteral50(["time's arrow"]))), 5 * MPA);
    (0, import_kolmafia59.cliExecute)("csend 1 time's arrow to botticelli");
    (0, import_kolmafia59.setProperty)("_timesArrowUsed", "true");
  }
  if (have($skill(_templateObject3812 || (_templateObject3812 = _taggedTemplateLiteral50(["Ancestral Recall"])))) && (0, import_kolmafia59.mallPrice)($item(_templateObject3911 || (_templateObject3911 = _taggedTemplateLiteral50(["blue mana"])))) < 3 * MPA) {
    var casts = Math.max(10 - get("_ancestralRecallCasts"), 0);
    acquire(casts, $item(_templateObject4011 || (_templateObject4011 = _taggedTemplateLiteral50(["blue mana"]))), 3 * MPA);
    (0, import_kolmafia59.useSkill)(casts, $skill(_templateObject4115 || (_templateObject4115 = _taggedTemplateLiteral50(["Ancestral Recall"]))));
  }
  if (globalOptions.ascend)
    useIfUnused($item(_templateObject4215 || (_templateObject4215 = _taggedTemplateLiteral50(["borrowed time"]))), "_borrowedTimeUsed", 20 * MPA);
}
function pillCheck() {
  if (!get("_distentionPillUsed")) {
    if (!get("garbo_skipPillCheck", false) && !have($item(_templateObject4315 || (_templateObject4315 = _taggedTemplateLiteral50(["distention pill"]))), 1)) {
      _set("garbo_skipPillCheck", userConfirmDialog("You do not have any distention pills. Continue anyway? (Defaulting to no in 15 seconds)", false, 15e3));
    }
  }
  if (!get("_syntheticDogHairPillUsed")) {
    if (!get("garbo_skipPillCheck", false) && !have($item(_templateObject4413 || (_templateObject4413 = _taggedTemplateLiteral50(["synthetic dog hair pill"]))), 1)) {
      _set("garbo_skipPillCheck", userConfirmDialog("You do not have any synthetic dog hair pills. Continue anyway? (Defaulting to no in 15 seconds)", false, 15e3));
    }
  }
}
var saladFork = $item(_templateObject4512 || (_templateObject4512 = _taggedTemplateLiteral50(["Ol' Scratch's salad fork"])));
var frostyMug = $item(_templateObject4610 || (_templateObject4610 = _taggedTemplateLiteral50(["Frosty's frosty mug"])));
var spleenCleaners = /* @__PURE__ */ new Map([[$item(_templateObject4710 || (_templateObject4710 = _taggedTemplateLiteral50(["extra-greasy slider"]))), 5], [$item(_templateObject4810 || (_templateObject4810 = _taggedTemplateLiteral50(["jar of fermented pickle juice"]))), 5], [$item(_templateObject4910 || (_templateObject4910 = _taggedTemplateLiteral50(["mojo filter"]))), 1]]);
var stomachLiverCleaners = /* @__PURE__ */ new Map([[$item(_templateObject5010 || (_templateObject5010 = _taggedTemplateLiteral50(["spice melange"]))), [-3, -3]], [$item(_templateObject5115 || (_templateObject5115 = _taggedTemplateLiteral50(["synthetic dog hair pill"]))), [0, -1]], [$item(_templateObject5215 || (_templateObject5215 = _taggedTemplateLiteral50(["cuppa Sobrie tea"]))), [0, -1]], [$item(_templateObject5314 || (_templateObject5314 = _taggedTemplateLiteral50(["designer sweatpants"]))), [0, -1]], [$item(_templateObject5412 || (_templateObject5412 = _taggedTemplateLiteral50(["august scepter"]))), [-1, 0]]]);
function legendaryPizzaToMenu(pizzas, maker) {
  var canCookLegendaryPizza = function(pizza) {
    var recipes = [pizza].concat(_toConsumableArray29($items(_templateObject5511 || (_templateObject5511 = _taggedTemplateLiteral50(["roasted vegetable of Jarlsberg, Pete's rich ricotta, Boris's bread"]))))).map(function(i) {
      return (0, import_kolmafia59.toInt)(i);
    });
    return !recipes.some(function(id) {
      return get("unknownRecipe".concat(id), true);
    });
  };
  return pizzas.filter(function(_ref) {
    var item9 = _ref.item, pref = _ref.pref;
    return !get(pref, true) && canCookLegendaryPizza(item9);
  }).map(function(_ref2) {
    var item9 = _ref2.item;
    return maker({
      item: item9,
      price: 2 * sum($items(_templateObject5610 || (_templateObject5610 = _taggedTemplateLiteral50(["Vegetable of Jarlsberg, St. Sneaky Pete's Whey, Yeast of Boris"]))), ingredientCost)
    });
  });
}
var mallMin = function(items) {
  return maxBy(items, import_kolmafia59.mallPrice, true);
};
function menu() {
  var spaghettiBreakfast = have($item(_templateObject578 || (_templateObject578 = _taggedTemplateLiteral50(["spaghetti breakfast"])))) && (0, import_kolmafia59.myFullness)() === 0 && get("_timeSpinnerFoodAvailable") === "" && !get("_spaghettiBreakfastEaten") ? 1 : 0;
  var complexMushroomWines = $items(_templateObject588 || (_templateObject588 = _taggedTemplateLiteral50(["overpowering mushroom wine, complex mushroom wine, smooth mushroom wine, blood-red mushroom wine, buzzing mushroom wine, swirling mushroom wine"])));
  var perfectDrinks = $items(_templateObject598 || (_templateObject598 = _taggedTemplateLiteral50(["perfect cosmopolitan, perfect negroni, perfect dark and stormy, perfect mimosa, perfect old-fashioned, perfect paloma"])));
  var lasagnas = $items(_templateObject607 || (_templateObject607 = _taggedTemplateLiteral50(["fishy fish lasagna, gnat lasagna, long pork lasagna"])));
  var standardSpleenItems = $items(_templateObject6113 || (_templateObject6113 = _taggedTemplateLiteral50(["agua de vida, gooey paste, oily paste, ectoplasmic paste, greasy paste, bug paste, hippy paste, orc paste, demonic paste, indescribably horrible paste, fishy paste, goblin paste, pirate paste, chlorophyll paste, strange paste, Mer-kin paste, slimy paste, penguin paste, elemental paste, cosmic paste, hobo paste, Crimbo paste, groose grease, Unconscious Collective Dream Jar, grim fairy tale, powdered gold"])));
  var smallEpics = [].concat(_toConsumableArray29($items(_templateObject6213 || (_templateObject6213 = _taggedTemplateLiteral50(["meteoreo, ice rice"])))), [$item(_templateObject6312 || (_templateObject6312 = _taggedTemplateLiteral50(["Tea, Earl Grey, Hot"])))]);
  var boxingDayCareItems = $items(_templateObject6410 || (_templateObject6410 = _taggedTemplateLiteral50(["glass of raw eggs, punch-drunk punch"]))).filter(function(item9) {
    return have(item9);
  });
  var pilsners = $items(_templateObject656 || (_templateObject656 = _taggedTemplateLiteral50(["astral pilsner"]))).filter(function(item9) {
    return have(item9);
  });
  var limitedItems = [].concat(_toConsumableArray29(boxingDayCareItems), _toConsumableArray29(pilsners)).map(function(item9) {
    return new MenuItem(item9, {
      maximum: (0, import_kolmafia59.availableAmount)(item9)
    });
  });
  var legendaryPizzas = legendaryPizzaToMenu([{
    item: $item(_templateObject666 || (_templateObject666 = _taggedTemplateLiteral50(["Calzone of Legend"]))),
    pref: "calzoneOfLegendEaten"
  }, {
    item: $item(_templateObject675 || (_templateObject675 = _taggedTemplateLiteral50(["Pizza of Legend"]))),
    pref: "pizzaOfLegendEaten"
  }], function(out) {
    return new MenuItem(out.item, {
      maximum: 1,
      priceOverride: out.price
    });
  });
  return [
    // FOOD
    new MenuItem($item(_templateObject684 || (_templateObject684 = _taggedTemplateLiteral50(["Dreadsylvanian cold pocket"])))),
    new MenuItem($item(_templateObject694 || (_templateObject694 = _taggedTemplateLiteral50(["Dreadsylvanian hot pocket"])))),
    new MenuItem($item(_templateObject704 || (_templateObject704 = _taggedTemplateLiteral50(["Dreadsylvanian sleaze pocket"])))),
    new MenuItem($item(_templateObject7110 || (_templateObject7110 = _taggedTemplateLiteral50(["Dreadsylvanian stink pocket"])))),
    new MenuItem($item(_templateObject7210 || (_templateObject7210 = _taggedTemplateLiteral50(["Dreadsylvanian spooky pocket"])))),
    new MenuItem($item(_templateObject7310 || (_templateObject7310 = _taggedTemplateLiteral50(["tin cup of mulligan stew"])))),
    new MenuItem($item(_templateObject746 || (_templateObject746 = _taggedTemplateLiteral50(["frozen banquet"])))),
    new MenuItem($item(_templateObject754 || (_templateObject754 = _taggedTemplateLiteral50(["deviled egg"])))),
    new MenuItem($item(_templateObject763 || (_templateObject763 = _taggedTemplateLiteral50(["spaghetti breakfast"]))), {
      maximum: spaghettiBreakfast
    }),
    new MenuItem($item(_templateObject773 || (_templateObject773 = _taggedTemplateLiteral50(["extra-greasy slider"])))),
    new MenuItem(mallMin(lasagnas)),
    new MenuItem(mallMin(smallEpics)),
    new MenuItem($item(_templateObject783 || (_templateObject783 = _taggedTemplateLiteral50(["green hamhock"]))))
  ].concat(_toConsumableArray29(legendaryPizzas.flat()), [
    // BOOZE
    new MenuItem($item(_templateObject793 || (_templateObject793 = _taggedTemplateLiteral50(["elemental caipiroska"])))),
    new MenuItem($item(_templateObject803 || (_templateObject803 = _taggedTemplateLiteral50(["moreltini"])))),
    new MenuItem($item(_templateObject8110 || (_templateObject8110 = _taggedTemplateLiteral50(["Dreadsylvanian cold-fashioned"])))),
    new MenuItem($item(_templateObject8210 || (_templateObject8210 = _taggedTemplateLiteral50(["Dreadsylvanian dank and stormy"])))),
    new MenuItem($item(_templateObject839 || (_templateObject839 = _taggedTemplateLiteral50(["Dreadsylvanian grimlet"])))),
    new MenuItem($item(_templateObject844 || (_templateObject844 = _taggedTemplateLiteral50(["Dreadsylvanian hot toddy"])))),
    new MenuItem($item(_templateObject854 || (_templateObject854 = _taggedTemplateLiteral50(["Dreadsylvanian slithery nipple"])))),
    new MenuItem($item(_templateObject862 || (_templateObject862 = _taggedTemplateLiteral50(["Hodgman's blanket"])))),
    new MenuItem($item(_templateObject872 || (_templateObject872 = _taggedTemplateLiteral50(["Sacramento wine"])))),
    new MenuItem($item(_templateObject882 || (_templateObject882 = _taggedTemplateLiteral50(["iced plum wine"])))),
    new MenuItem($item(_templateObject892 || (_templateObject892 = _taggedTemplateLiteral50(["splendid martini"])))),
    new MenuItem($item(_templateObject902 || (_templateObject902 = _taggedTemplateLiteral50(["Eye and a Twist"])))),
    new MenuItem($item(_templateObject9110 || (_templateObject9110 = _taggedTemplateLiteral50(["jar of fermented pickle juice"])))),
    new MenuItem(mallMin(complexMushroomWines)),
    new MenuItem(mallMin(perfectDrinks)),
    new MenuItem($item(_templateObject9210 || (_templateObject9210 = _taggedTemplateLiteral50(["green eggnog"])))),
    // SPLEEN
    new MenuItem($item(_templateObject935 || (_templateObject935 = _taggedTemplateLiteral50(["octolus oculus"])))),
    new MenuItem($item(_templateObject943 || (_templateObject943 = _taggedTemplateLiteral50(["prismatic wad"])))),
    new MenuItem($item(_templateObject953 || (_templateObject953 = _taggedTemplateLiteral50(["transdermal smoke patch"])))),
    new MenuItem($item(_templateObject962 || (_templateObject962 = _taggedTemplateLiteral50(["antimatter wad"])))),
    new MenuItem($item(_templateObject972 || (_templateObject972 = _taggedTemplateLiteral50(["voodoo snuff"])))),
    new MenuItem($item(_templateObject982 || (_templateObject982 = _taggedTemplateLiteral50(["blood-drive sticker"])))),
    new MenuItem(mallMin(standardSpleenItems)),
    new MenuItem(mallMin($items(_templateObject992 || (_templateObject992 = _taggedTemplateLiteral50(["not-a-pipe, glimmering roc feather"])))))
  ], _toConsumableArray29(limitedItems), [
    // HELPERS
    new MenuItem($item(_templateObject1002 || (_templateObject1002 = _taggedTemplateLiteral50(["distention pill"])))),
    new MenuItem($item(_templateObject10110 || (_templateObject10110 = _taggedTemplateLiteral50(["cuppa Voraci tea"])))),
    new MenuItem(Mayo2.flex),
    new MenuItem(Mayo2.zapine),
    new MenuItem($item(_templateObject10210 || (_templateObject10210 = _taggedTemplateLiteral50(["Special Seasoning"])))),
    new MenuItem(saladFork),
    new MenuItem(frostyMug),
    new MenuItem($item(_templateObject1032 || (_templateObject1032 = _taggedTemplateLiteral50(["mojo filter"])))),
    new MenuItem($item(_templateObject1042 || (_templateObject1042 = _taggedTemplateLiteral50(["pocket wish"]))), {
      maximum: 1,
      effect: $effect(_templateObject1052 || (_templateObject1052 = _taggedTemplateLiteral50(["Refined Palate"])))
    }),
    new MenuItem($item(_templateObject1062 || (_templateObject1062 = _taggedTemplateLiteral50(["toasted brie"]))), {
      maximum: 1
    }),
    new MenuItem($item(_templateObject1072 || (_templateObject1072 = _taggedTemplateLiteral50(["potion of the field gar"]))), {
      maximum: 1
    })
  ], _toConsumableArray29(_toConsumableArray29(stomachLiverCleaners.keys()).map(function(item9) {
    return new MenuItem(item9);
  })), [new MenuItem($item(_templateObject1082 || (_templateObject1082 = _taggedTemplateLiteral50(["sweet tooth"]))), {
    size: -1,
    organ: "food",
    maximum: 1
  }), new MenuItem($item(_templateObject1092 || (_templateObject1092 = _taggedTemplateLiteral50(["designer sweatpants"]))), {
    size: -1,
    organ: "booze",
    maximum: Math.min(3 - get("_sweatOutSomeBoozeUsed"), Math.floor(get("sweat") / 25))
  }), new MenuItem($item(_templateObject1102 || (_templateObject1102 = _taggedTemplateLiteral50(["august scepter"]))), {
    size: -1,
    organ: "food",
    maximum: shouldAugustCast($skill(_templateObject11110 || (_templateObject11110 = _taggedTemplateLiteral50(["Aug. 16th: Roller Coaster Day!"])))) ? 1 : 0
  })]).filter(function(item9) {
    return item9.price() < Infinity;
  });
}
function bestConsumable(organType) {
  var levelRestrict = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
  var restrictList = arguments.length > 2 ? arguments[2] : void 0;
  var maxSize = arguments.length > 3 ? arguments[3] : void 0;
  var fullMenu = potionMenu(menu(), 0, 0);
  var organMenu = fullMenu.filter(function(menuItem) {
    return (0, import_kolmafia59.itemType)(menuItem.item) === organType;
  });
  if (restrictList) {
    if (restrictList instanceof import_kolmafia59.Item) {
      organMenu = organMenu.filter(function(menuItem) {
        return restrictList !== menuItem.item;
      });
    } else {
      organMenu = organMenu.filter(function(menuItem) {
        return !restrictList.includes(menuItem.item);
      });
    }
  }
  if (maxSize) {
    organMenu = organMenu.filter(function(menuItem) {
      return menuItem.size <= maxSize;
    });
  }
  if (levelRestrict) {
    organMenu = organMenu.filter(function(menuItem) {
      return menuItem.item.levelreq <= (0, import_kolmafia59.myLevel)();
    });
  }
  var organList = organMenu.map(function(consumable) {
    var edible = consumable.item;
    var buff = get2("Effect", edible);
    var turnsPerUse = get2("Effect Duration", edible);
    var meatDrop = get2("Meat Drop", buff);
    var famWeight = get2("Familiar Weight", buff);
    var buffValue = (meatDrop + famWeight * 25 / 10) * turnsPerUse * (baseMeat + 750) / 100;
    var advValue = getAverageAdventures(edible) * get("valueOfAdventure");
    var organSpace = consumable.size;
    return {
      edible: edible,
      value: (buffValue + advValue - (0, import_kolmafia59.mallPrice)(edible)) / organSpace
    };
  });
  var best = maxBy(organList, "value");
  return best;
}
function gregariousCount() {
  var gregariousCharges = get("beGregariousCharges") + (get("beGregariousFightsLeft") > 0 && get("beGregariousMonster") === $monster(_templateObject1126 || (_templateObject1126 = _taggedTemplateLiteral50(["Knob Goblin Embezzler"]))) ? 1 : 0);
  var gregariousFightsPerCharge = expectedGregs("extro");
  var marginalGregariousFights = gregariousFightsPerCharge.splice(gregariousFightsPerCharge.length - 1, 1)[0];
  var expectedGregariousFights = gregariousFightsPerCharge.slice(gregariousCharges);
  return {
    expectedGregariousFights: expectedGregariousFights,
    marginalGregariousFights: marginalGregariousFights
  };
}
function copiers() {
  var embezzlerDifferential = EMBEZZLER_MULTIPLIER() * MPA;
  var _gregariousCount = gregariousCount(), expectedGregariousFights = _gregariousCount.expectedGregariousFights, marginalGregariousFights = _gregariousCount.marginalGregariousFights;
  var extros = (0, import_kolmafia59.myInebriety)() > (0, import_kolmafia59.inebrietyLimit)() ? [] : [].concat(_toConsumableArray29(expectedGregariousFights.map(function(embezzlers) {
    return new MenuItem($item(_templateObject1132 || (_templateObject1132 = _taggedTemplateLiteral50(["Extrovermectin\u2122"]))), {
      additionalValue: embezzlers * embezzlerDifferential,
      maximum: 1
    });
  })), [new MenuItem($item(_templateObject1142 || (_templateObject1142 = _taggedTemplateLiteral50(["Extrovermectin\u2122"]))), {
    additionalValue: marginalGregariousFights * embezzlerDifferential
  })]);
  return _toConsumableArray29(extros);
}
function countCopies(diet) {
  var extros = sum(diet.entries, function(_ref3) {
    var menuItems = _ref3.menuItems, quantity = _ref3.quantity;
    return menuItems.some(function(menuItem) {
      return menuItem.item === $item(_templateObject1152 || (_templateObject1152 = _taggedTemplateLiteral50(["Extrovermectin\u2122"])));
    }) ? quantity : 0;
  });
  var _gregariousCount2 = gregariousCount(), expectedGregariousFights = _gregariousCount2.expectedGregariousFights, marginalGregariousFights = _gregariousCount2.marginalGregariousFights;
  var replaceExtros = sumNumbers(expectedGregariousFights.slice(0, extros));
  var bonusExtros = clamp(extros - expectedGregariousFights.length, 0, extros) * marginalGregariousFights;
  return replaceExtros + bonusExtros;
}
function ingredientCost(item9) {
  var ingredientMallPrice = (0, import_kolmafia59.mallPrice)(item9);
  var ingredientAutosellPrice = (0, import_kolmafia59.autosellPrice)(item9);
  if (!have(item9) || item9.tradeable && ingredientMallPrice > Math.max(100, 2 * ingredientAutosellPrice)) {
    return ingredientMallPrice;
  }
  return ingredientAutosellPrice;
}
function potionMenu(baseMenu, embezzlers, turns2) {
  function limitedPotion(input, limit) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (limit === 0) {
      return [];
    }
    var potion2 = input instanceof import_kolmafia59.Item ? new Potion(input) : input;
    var mayo = void 0;
    if ((0, import_kolmafia59.itemType)(potion2.potion) === "food" && MayoClinic_exports.installed()) {
      potion2 = potion2.doubleDuration();
      mayo = Mayo2.zapine;
    }
    return potion2.value(embezzlers, turns2, limit).map(function(tier) {
      return new MenuItem(potion2.potion, {
        maximum: tier.quantity,
        additionalValue: tier.value,
        priceOverride: options.price,
        organ: options.organ,
        size: options.size,
        data: tier.name,
        mayo: mayo
      });
    });
  }
  function potion(potion2) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return limitedPotion(potion2, void 0, options);
  }
  var speakeasy = $item(_templateObject1162 || (_templateObject1162 = _taggedTemplateLiteral50(["Clan speakeasy"])));
  var hasSpeakeasy = (0, import_kolmafia59.getClanLounge)()["".concat(speakeasy)];
  var twiceHauntedPrice = Math.min(ingredientCost($item(_templateObject1172 || (_templateObject1172 = _taggedTemplateLiteral50(["haunted orange"])))), ingredientCost($item(_templateObject1182 || (_templateObject1182 = _taggedTemplateLiteral50(["orange"])))) + ingredientCost($item(_templateObject1192 || (_templateObject1192 = _taggedTemplateLiteral50(["ghostly ectoplasm"]))))) + Math.min(ingredientCost($item(_templateObject1202 || (_templateObject1202 = _taggedTemplateLiteral50(["haunted bottle of vodka"])))), ingredientCost($item(_templateObject12110 || (_templateObject12110 = _taggedTemplateLiteral50(["bottle of vodka"])))) + ingredientCost($item(_templateObject1225 || (_templateObject1225 = _taggedTemplateLiteral50(["ghostly ectoplasm"])))));
  var campfireHotdog = get("getawayCampsiteUnlocked") ? potion($item(_templateObject1232 || (_templateObject1232 = _taggedTemplateLiteral50(["campfire hot dog"]))), {
    price: ingredientCost($item(_templateObject1242 || (_templateObject1242 = _taggedTemplateLiteral50(["stick of firewood"]))))
  }) : [];
  var foodCone = realmAvailable("stench") || globalOptions.simdiet && !globalOptions.nobarf ? limitedPotion($item(_templateObject1252 || (_templateObject1252 = _taggedTemplateLiteral50(["Dinsey food-cone"]))), Math.floor((0, import_kolmafia59.availableAmount)($item(_templateObject1262 || (_templateObject1262 = _taggedTemplateLiteral50(["FunFunds\u2122"])))) / 2), {
    price: 2 * garboValue($item(_templateObject1272 || (_templateObject1272 = _taggedTemplateLiteral50(["FunFunds\u2122"]))))
  }) : [];
  var borisBread = !get("unknownRecipe10978") ? potion($item(_templateObject1282 || (_templateObject1282 = _taggedTemplateLiteral50(["Boris's bread"]))), {
    price: 2 * ingredientCost($item(_templateObject1292 || (_templateObject1292 = _taggedTemplateLiteral50(["Yeast of Boris"]))))
  }) : [];
  var deepDish = legendaryPizzaToMenu([{
    item: $item(_templateObject1302 || (_templateObject1302 = _taggedTemplateLiteral50(["Deep Dish of Legend"]))),
    pref: "deepDishOfLegendEaten"
  }], function(out) {
    return limitedPotion(out.item, 1, {
      price: out.price
    });
  });
  return [].concat(_toConsumableArray29(baseMenu), _toConsumableArray29(copiers()), _toConsumableArray29(potion($item(_templateObject13110 || (_templateObject13110 = _taggedTemplateLiteral50(["jumping horseradish"]))))), _toConsumableArray29(potion($item(_templateObject1325 || (_templateObject1325 = _taggedTemplateLiteral50(["tempura cauliflower"]))))), _toConsumableArray29(potion($item(_templateObject1332 || (_templateObject1332 = _taggedTemplateLiteral50(["sea truffle"]))))), _toConsumableArray29(potion($item(_templateObject1342 || (_templateObject1342 = _taggedTemplateLiteral50(["tempura broccoli"]))))), _toConsumableArray29(potion($item(_templateObject1352 || (_templateObject1352 = _taggedTemplateLiteral50(["Miserable Pie"]))))), _toConsumableArray29(potion($item(_templateObject1362 || (_templateObject1362 = _taggedTemplateLiteral50(["Every Day is Like This Sundae"]))))), _toConsumableArray29(potion($item(_templateObject1372 || (_templateObject1372 = _taggedTemplateLiteral50(["bowl of mummy guts"]))))), _toConsumableArray29(potion($item(_templateObject1382 || (_templateObject1382 = _taggedTemplateLiteral50(["haunted Hell ramen"]))))), _toConsumableArray29(campfireHotdog), _toConsumableArray29(foodCone), _toConsumableArray29(borisBread), _toConsumableArray29(deepDish.flat()), _toConsumableArray29(potion($item(_templateObject1392 || (_templateObject1392 = _taggedTemplateLiteral50(["dirt julep"]))))), _toConsumableArray29(potion($item(_templateObject1402 || (_templateObject1402 = _taggedTemplateLiteral50(["Ambitious Turkey"]))))), _toConsumableArray29(potion($item(_templateObject14110 || (_templateObject14110 = _taggedTemplateLiteral50(["Friendly Turkey"]))))), _toConsumableArray29(potion($item(_templateObject1423 || (_templateObject1423 = _taggedTemplateLiteral50(["vintage smart drink"]))))), _toConsumableArray29(potion($item(_templateObject1432 || (_templateObject1432 = _taggedTemplateLiteral50(["Strikes Again Bigmouth"]))))), _toConsumableArray29(potion($item(_templateObject1442 || (_templateObject1442 = _taggedTemplateLiteral50(["Irish Coffee, English Heart"]))))), _toConsumableArray29(potion($item(_templateObject1452 || (_templateObject1452 = _taggedTemplateLiteral50(["Jack-O-Lantern beer"]))))), _toConsumableArray29(potion($item(_templateObject1462 || (_templateObject1462 = _taggedTemplateLiteral50(["Amnesiac Ale"]))))), _toConsumableArray29(potion($item(_templateObject1472 || (_templateObject1472 = _taggedTemplateLiteral50(["mentholated wine"]))))), _toConsumableArray29(potion($item(_templateObject1482 || (_templateObject1482 = _taggedTemplateLiteral50(["Feliz Navidad"]))))), _toConsumableArray29(potion($item(_templateObject1492 || (_templateObject1492 = _taggedTemplateLiteral50(["broberry brogurt"]))))), _toConsumableArray29(potion($item(_templateObject1502 || (_templateObject1502 = _taggedTemplateLiteral50(["haunted martini"]))))), _toConsumableArray29(potion($item(_templateObject15110 || (_templateObject15110 = _taggedTemplateLiteral50(["bottle of Greedy Dog"]))))), _toConsumableArray29(potion($item(_templateObject1522 || (_templateObject1522 = _taggedTemplateLiteral50(["twice-haunted screwdriver"]))), {
    price: twiceHauntedPrice
  })), _toConsumableArray29(limitedPotion($item(_templateObject1532 || (_templateObject1532 = _taggedTemplateLiteral50(["high-end ginger wine"]))), (0, import_kolmafia59.availableAmount)($item(_templateObject1542 || (_templateObject1542 = _taggedTemplateLiteral50(["high-end ginger wine"])))))), _toConsumableArray29(limitedPotion($item(_templateObject1552 || (_templateObject1552 = _taggedTemplateLiteral50(["Hot Socks"]))), hasSpeakeasy ? 3 : 0, {
    price: 5e3
  })), _toConsumableArray29(realmAvailable("sleaze") && (0, import_kolmafia59.sellsItem)($coinmaster(_templateObject1562 || (_templateObject1562 = _taggedTemplateLiteral50(["The Frozen Brogurt Stand"]))), $item(_templateObject1572 || (_templateObject1572 = _taggedTemplateLiteral50(["broberry brogurt"])))) ? limitedPotion($item(_templateObject1582 || (_templateObject1582 = _taggedTemplateLiteral50(["broberry brogurt"]))), Math.floor((0, import_kolmafia59.itemAmount)($item(_templateObject1592 || (_templateObject1592 = _taggedTemplateLiteral50(["Beach Buck"])))) / 10), {
    price: 10 * garboValue($item(_templateObject1602 || (_templateObject1602 = _taggedTemplateLiteral50(["Beach Buck"]))))
  }) : []), _toConsumableArray29(potion($item(_templateObject16110 || (_templateObject16110 = _taggedTemplateLiteral50(["cute mushroom"]))))), _toConsumableArray29(potion($item(_templateObject1622 || (_templateObject1622 = _taggedTemplateLiteral50(["beggin' cologne"]))))), _toConsumableArray29(potion($item(_templateObject1632 || (_templateObject1632 = _taggedTemplateLiteral50(["Knob Goblin nasal spray"]))))), _toConsumableArray29(potion($item(_templateObject1642 || (_templateObject1642 = _taggedTemplateLiteral50(["handful of Smithereens"]))))), _toConsumableArray29(potion($item(_templateObject1652 || (_templateObject1652 = _taggedTemplateLiteral50(["black striped oyster egg"]))))), _toConsumableArray29(potion($item(_templateObject1662 || (_templateObject1662 = _taggedTemplateLiteral50(["black paisley oyster egg"]))))), _toConsumableArray29(potion($item(_templateObject1672 || (_templateObject1672 = _taggedTemplateLiteral50(["black polka-dot oyster egg"]))))), _toConsumableArray29(potion($item(_templateObject1682 || (_templateObject1682 = _taggedTemplateLiteral50(["lustrous oyster egg"]))))), _toConsumableArray29(potion($item(_templateObject1692 || (_templateObject1692 = _taggedTemplateLiteral50(["glimmering buzzard feather"]))))), _toConsumableArray29(potion($item(_templateObject1702 || (_templateObject1702 = _taggedTemplateLiteral50(["Knob Goblin pet-buffing spray"]))))), _toConsumableArray29(potion($item(_templateObject17110 || (_templateObject17110 = _taggedTemplateLiteral50(["abstraction: joy"]))))), _toConsumableArray29(potion($item(_templateObject1722 || (_templateObject1722 = _taggedTemplateLiteral50(["beastly paste"]))))), _toConsumableArray29(potion($item(_templateObject1732 || (_templateObject1732 = _taggedTemplateLiteral50(["gleaming oyster egg"]))))), _toConsumableArray29(potion($item(_templateObject1742 || (_templateObject1742 = _taggedTemplateLiteral50(["Party-in-a-Can\u2122"]))))), _toConsumableArray29(limitedPotion($item(_templateObject1752 || (_templateObject1752 = _taggedTemplateLiteral50(["body spradium"]))), clamp((0, import_kolmafia59.availableAmount)($item(_templateObject1762 || (_templateObject1762 = _taggedTemplateLiteral50(["body spradium"])))), 0, 1))), _toConsumableArray29(have($skill(_templateObject1772 || (_templateObject1772 = _taggedTemplateLiteral50(["Sweet Synthesis"])))) ? potion(new Potion($item(_templateObject1782 || (_templateObject1782 = _taggedTemplateLiteral50(["Rethinking Candy"]))), {
    effect: $effect(_templateObject1792 || (_templateObject1792 = _taggedTemplateLiteral50(["Synthesis: Greed"]))),
    duration: 30
  }), {
    size: 1,
    organ: "spleen item",
    price: 0
  }) : []));
}
function balanceMenu(baseMenu, dietPlanner) {
  var baseEmbezzlers = embezzlerCount();
  function rebalance(menu3, iterations, embezzlers, adventures) {
    var fullMenu = potionMenu(menu3, baseEmbezzlers + embezzlers, estimatedGarboTurns() + adventures);
    if (iterations <= 0) {
      return fullMenu;
    } else {
      var balancingDiet = dietPlanner(fullMenu);
      return rebalance(menu3, iterations - 1, countCopies(balancingDiet), balancingDiet.expectedAdventures());
    }
  }
  var baseDiet = dietPlanner(baseMenu);
  return rebalance(baseMenu, 5, 0, baseDiet.expectedAdventures());
}
function computeDiet() {
  var orEmpty = function(diet) {
    return diet.expectedValue(MPA, "net") < 0 ? new Diet() : diet;
  };
  var fullDietPlanner = function(menu3) {
    return orEmpty(Diet.plan(MPA, menu3));
  };
  var shotglassDietPlanner = function(menu3) {
    return orEmpty(Diet.plan(MPA, menu3, {
      booze: 1
    }));
  };
  var pantsgivingDietPlanner = function(menu3) {
    return orEmpty(Diet.plan(MPA, menu3, {
      food: 1
    }));
  };
  var sweatpantsDietPlanner = function(menu3) {
    return orEmpty(Diet.plan(MPA, menu3, {
      booze: getRemainingLiver()
    }));
  };
  return {
    diet: function() {
      return fullDietPlanner(balanceMenu(menu().filter(function(menuItem) {
        return !priceCaps[menuItem.item.name] || priceCaps[menuItem.item.name] >= (0, import_kolmafia59.mallPrice)(menuItem.item);
      }), fullDietPlanner));
    },
    shotglass: function() {
      return shotglassDietPlanner(balanceMenu(menu().filter(function(menuItem) {
        return (0, import_kolmafia59.itemType)(menuItem.item) === "booze" && menuItem.size === 1;
      }), shotglassDietPlanner));
    },
    pantsgiving: function() {
      return pantsgivingDietPlanner(balanceMenu(menu().filter(function(menuItem) {
        return (0, import_kolmafia59.itemType)(menuItem.item) === "food" && menuItem.size === 1 || [Mayo2.flex, Mayo2.zapine, $item(_templateObject1802 || (_templateObject1802 = _taggedTemplateLiteral50(["Special Seasoning"])))].includes(menuItem.item);
      }), pantsgivingDietPlanner));
    },
    sweatpants: function() {
      return sweatpantsDietPlanner(balanceMenu(menu().filter(function(menuItem) {
        return (0, import_kolmafia59.itemType)(menuItem.item) === "booze" && menuItem.size <= 3;
      }), sweatpantsDietPlanner));
    }
  };
}
function printDiet(diet, name) {
  (0, import_kolmafia59.print)("===== ".concat(name, " DIET ====="));
  if (diet.entries.length === 0)
    return;
  diet = diet.copy();
  diet.entries.sort(function(a, b) {
    return itemPriority(b.menuItems) - itemPriority(a.menuItems);
  });
  var embezzlers = Math.floor(embezzlerCount() + countCopies(diet));
  var adventures = Math.floor(estimatedGarboTurns() + diet.expectedAdventures());
  (0, import_kolmafia59.print)("Planning to fight ".concat(embezzlers, " embezzlers and run ").concat(adventures, " adventures"));
  var _iterator = _createForOfIteratorHelper24(diet.entries), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var dietEntry = _step.value;
      if (dietEntry.quantity === 0)
        continue;
      var target = dietEntry.target();
      var datastr = target.data ? "(".concat(target.data, ")") : "";
      var maxstr = target.maximum ? " (max ".concat(target.maximum, ")") : "";
      var helpersstr = dietEntry.helpers().length > 0 ? " helpers: ".concat(dietEntry.helpers().join(", ")) : "";
      var addvalstr = target.additionalValue ? " (additional value: ".concat(target.additionalValue, ")") : "";
      var valuestr = "value: ".concat(Math.floor(dietEntry.expectedValue(MPA, diet))).concat(addvalstr, " price: ").concat(Math.floor(dietEntry.expectedPrice()));
      (0, import_kolmafia59.print)("".concat(dietEntry.quantity).concat(maxstr, " ").concat(target).concat(datastr).concat(helpersstr, " ").concat(valuestr));
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var totalValue = diet.expectedValue(MPA);
  var totalCost = diet.expectedPrice();
  var netValue = totalValue - totalCost;
  (0, import_kolmafia59.print)("Assuming MPA of ".concat(MPA, ", Total Cost ").concat(totalCost, ", Total Value ").concat(totalValue, ", Net Value ").concat(netValue));
}
function itemPriority(menuItems) {
  var menuItem = menuItems[menuItems.length - 1];
  if (menuItem === void 0) {
    throw "Shouldn't have an empty menu item.";
  }
  if (menuItem.item === $item(_templateObject18110 || (_templateObject18110 = _taggedTemplateLiteral50(["spaghetti breakfast"]))))
    return 200;
  if ($items(_templateObject1822 || (_templateObject1822 = _taggedTemplateLiteral50(["pocket wish, toasted brie"]))).includes(menuItem.item) || spleenCleaners.get(menuItem.item) || stomachLiverCleaners.get(menuItem.item)) {
    return 100;
  } else {
    return 0;
  }
}
function consumeDiet(diet, name) {
  if (diet.entries.length === 0)
    return;
  diet = diet.copy();
  diet.entries.sort(function(a, b) {
    return itemPriority(b.menuItems) - itemPriority(a.menuItems);
  });
  (0, import_kolmafia59.print)();
  printDiet(diet, name);
  (0, import_kolmafia59.print)();
  var seasoningCount = sum(diet.entries, function(_ref4) {
    var menuItems2 = _ref4.menuItems, quantity2 = _ref4.quantity;
    return menuItems2.some(function(menuItem) {
      return menuItem.item === $item(_templateObject1832 || (_templateObject1832 = _taggedTemplateLiteral50(["Special Seasoning"])));
    }) ? quantity2 : 0;
  });
  acquire(seasoningCount, $item(_templateObject1842 || (_templateObject1842 = _taggedTemplateLiteral50(["Special Seasoning"]))), MPA);
  var organs2 = function() {
    return [(0, import_kolmafia59.myFullness)(), (0, import_kolmafia59.myInebriety)(), (0, import_kolmafia59.mySpleenUse)()];
  };
  var lastOrgans = [-1, -1, -1];
  var capacities = function() {
    return [(0, import_kolmafia59.fullnessLimit)(), (0, import_kolmafia59.inebrietyLimit)(), (0, import_kolmafia59.spleenLimit)()];
  };
  var lastCapacities = [-1, -1, -1];
  var currentQuantity = sum(diet.entries, function(_ref5) {
    var quantity2 = _ref5.quantity;
    return quantity2;
  });
  var lastQuantity = -1;
  while (currentQuantity > 0) {
    if (arrayEquals2(lastOrgans, organs2()) && arrayEquals2(lastCapacities, capacities()) && lastQuantity === currentQuantity) {
      (0, import_kolmafia59.print)();
      printDiet(diet, "REMAINING");
      (0, import_kolmafia59.print)();
      throw "Failed to consume some diet item.";
    }
    lastOrgans = organs2();
    lastCapacities = capacities();
    lastQuantity = currentQuantity;
    var _iterator2 = _createForOfIteratorHelper24(diet.entries), _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
        var dietEntry = _step2.value;
        var menuItems = dietEntry.menuItems, quantity = dietEntry.quantity;
        if (quantity === 0)
          continue;
        var countToConsume = quantity;
        var capacity = {
          food: (0, import_kolmafia59.fullnessLimit)() - (0, import_kolmafia59.myFullness)(),
          booze: (0, import_kolmafia59.inebrietyLimit)() - (0, import_kolmafia59.myInebriety)(),
          "spleen item": (0, import_kolmafia59.spleenLimit)() - (0, import_kolmafia59.mySpleenUse)()
        };
        var _iterator3 = _createForOfIteratorHelper24(menuItems), _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
            var _menuItem = _step3.value;
            (0, import_kolmafia59.logprint)("Considering item ".concat(_menuItem.item, "."));
            if (_menuItem.organ === "booze" && _menuItem.size === 1 && !get("_mimeArmyShotglassUsed")) {
              countToConsume = 1;
            } else if (_menuItem.organ && _menuItem.size > 0) {
              countToConsume = Math.min(countToConsume, Math.floor(capacity[_menuItem.organ] / _menuItem.size));
            }
            (0, import_kolmafia59.logprint)("Based on organ size, planning to consume ".concat(countToConsume, "."));
            var cleaning = stomachLiverCleaners.get(_menuItem.item);
            if (cleaning) {
              var _cleaning = _slicedToArray24(cleaning, 2), fullness = _cleaning[0], inebriety = _cleaning[1];
              countToConsume = Math.min(fullness < 0 ? Math.floor(-(0, import_kolmafia59.myFullness)() / fullness) : quantity, inebriety < 0 ? Math.floor(-(0, import_kolmafia59.myInebriety)() / inebriety) : quantity, countToConsume);
              (0, import_kolmafia59.logprint)("Based on organ-cleaning, planning to consume ".concat(countToConsume, "."));
            }
            var spleenCleaned = spleenCleaners.get(_menuItem.item);
            if (spleenCleaned) {
              countToConsume = Math.min(countToConsume, Math.floor((0, import_kolmafia59.mySpleenUse)() / spleenCleaned));
              (0, import_kolmafia59.logprint)("Based on organ-cleaning, planning to consume ".concat(countToConsume, "."));
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        if (countToConsume === 0)
          continue;
        var elementalResistAction = function(element) {
          return function(countToConsume2, menuItem) {
            if ((0, import_kolmafia59.myMaxhp)() < 1e3 * (1 - (0, import_kolmafia59.elementalResistance)(element) / 100)) {
              maximizeCached(["0.05 HP", "".concat(element, " Resistance")]);
              if ((0, import_kolmafia59.myMaxhp)() < 1e3 * (1 - (0, import_kolmafia59.elementalResistance)(element) / 100)) {
                throw "Could not achieve enough ".concat(element, " resistance for ").concat(menuItem.item, ".");
              }
            }
            consumeSafe(countToConsume2, menuItem.item);
          };
        };
        var speakeasyDrinks = Object.keys((0, import_kolmafia59.getClanLounge)()).map(function(s) {
          return (0, import_kolmafia59.toItem)(s);
        }).filter(function(i) {
          return i.inebriety > 0;
        }).map(function(drink3) {
          return [drink3, function(countToConsume2, menuItem) {
            (0, import_kolmafia59.cliExecute)("drink ".concat(countToConsume2, " ").concat(menuItem.item));
          }];
        });
        var mayoActions = Object.values(Mayo2).map(function(i) {
          return [i, function(countToConsume2, menuItem) {
            MayoClinic_exports.setMayoMinder(menuItem.item, countToConsume2);
          }];
        });
        var itemActions = new Map([[saladFork, elementalResistAction($element(_templateObject1852 || (_templateObject1852 = _taggedTemplateLiteral50(["hot"]))))], [frostyMug, elementalResistAction($element(_templateObject1862 || (_templateObject1862 = _taggedTemplateLiteral50(["cold"]))))], [$item(_templateObject1872 || (_templateObject1872 = _taggedTemplateLiteral50(["pocket wish"]))), function(countToConsume2, menuItem) {
          return acquire(countToConsume2, $item(_templateObject1882 || (_templateObject1882 = _taggedTemplateLiteral50(["pocket wish"]))), 6e4) && (0, import_kolmafia59.cliExecute)("genie effect ".concat(menuItem.effect));
        }], [$item(_templateObject1892 || (_templateObject1892 = _taggedTemplateLiteral50(["campfire hot dog"]))), function(countToConsume2, menuItem) {
          if (!have($item(_templateObject1902 || (_templateObject1902 = _taggedTemplateLiteral50(["stick of firewood"]))))) {
            (0, import_kolmafia59.buy)(1, $item(_templateObject19110 || (_templateObject19110 = _taggedTemplateLiteral50(["stick of firewood"]))), ingredientCost($item(_templateObject1922 || (_templateObject1922 = _taggedTemplateLiteral50(["stick of firewood"])))));
          }
          consumeSafe(countToConsume2, menuItem.item);
        }], [$item(_templateObject1932 || (_templateObject1932 = _taggedTemplateLiteral50(["Special Seasoning"]))), "skip"], [$item(_templateObject1942 || (_templateObject1942 = _taggedTemplateLiteral50(["Rethinking Candy"]))), function(countToConsume2, menuItem) {
          var _menuItem$effect;
          return synthesize(countToConsume2, (_menuItem$effect = menuItem.effect) !== null && _menuItem$effect !== void 0 ? _menuItem$effect : $effect(_templateObject1952 || (_templateObject1952 = _taggedTemplateLiteral50(["Synthesis: Greed"]))));
        }]].concat(_toConsumableArray29(mayoActions), _toConsumableArray29(speakeasyDrinks), [[$item(_templateObject1962 || (_templateObject1962 = _taggedTemplateLiteral50(["broberry brogurt"]))), function(countToConsume2, menuItem) {
          var amountNeeded = countToConsume2 - (0, import_kolmafia59.availableAmount)($item(_templateObject1972 || (_templateObject1972 = _taggedTemplateLiteral50(["broberry brogurt"]))));
          if (amountNeeded > 0) {
            var coinmasterPrice2 = realmAvailable("sleaze") && (0, import_kolmafia59.sellsItem)($coinmaster(_templateObject1982 || (_templateObject1982 = _taggedTemplateLiteral50(["The Frozen Brogurt Stand"]))), $item(_templateObject1992 || (_templateObject1992 = _taggedTemplateLiteral50(["broberry brogurt"])))) ? 10 * garboValue($item(_templateObject2002 || (_templateObject2002 = _taggedTemplateLiteral50(["Beach Buck"])))) : Infinity;
            var regularPrice = (0, import_kolmafia59.mallPrice)($item(_templateObject20110 || (_templateObject20110 = _taggedTemplateLiteral50(["broberry brogurt"]))));
            if (coinmasterPrice2 < regularPrice) {
              var amountToBuy = Math.min(amountNeeded, Math.floor((0, import_kolmafia59.itemAmount)($item(_templateObject2022 || (_templateObject2022 = _taggedTemplateLiteral50(["Beach Buck"]))))));
              (0, import_kolmafia59.buy)($coinmaster(_templateObject2032 || (_templateObject2032 = _taggedTemplateLiteral50(["The Frozen Brogurt Stand"]))), amountToBuy, $item(_templateObject2042 || (_templateObject2042 = _taggedTemplateLiteral50(["broberry brogurt"]))));
            }
            (0, import_kolmafia59.buy)(countToConsume2 - (0, import_kolmafia59.availableAmount)($item(_templateObject2052 || (_templateObject2052 = _taggedTemplateLiteral50(["broberry brogurt"])))), $item(_templateObject2062 || (_templateObject2062 = _taggedTemplateLiteral50(["broberry brogurt"]))));
          }
          consumeSafe(countToConsume2, menuItem.item, menuItem.additionalValue);
        }], [$item(_templateObject2072 || (_templateObject2072 = _taggedTemplateLiteral50(["designer sweatpants"]))), function(countToConsume2) {
          for (var n = 1; n <= countToConsume2; n++) {
            (0, import_kolmafia59.useSkill)($skill(_templateObject2082 || (_templateObject2082 = _taggedTemplateLiteral50(["Sweat Out Some Booze"]))));
          }
        }], [$item(_templateObject2092 || (_templateObject2092 = _taggedTemplateLiteral50(["august scepter"]))), function() {
          return (0, import_kolmafia59.useSkill)($skill(_templateObject21010 || (_templateObject21010 = _taggedTemplateLiteral50(["Aug. 16th: Roller Coaster Day!"]))));
        }]]));
        var _iterator4 = _createForOfIteratorHelper24(menuItems), _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
            var _menuItem2 = _step4.value;
            var itemAction = itemActions.get(_menuItem2.item);
            if (itemAction === "skip") {
              continue;
            } else if (itemAction) {
              itemAction(countToConsume, _menuItem2);
            } else {
              consumeSafe(countToConsume, _menuItem2.item, _menuItem2.additionalValue);
            }
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
        dietEntry.quantity -= countToConsume;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    currentQuantity = sum(diet.entries, function(_ref6) {
      var quantity2 = _ref6.quantity;
      return quantity2;
    });
  }
}
var completedDiet = globalOptions.nodiet;
function dietCompleted() {
  return completedDiet;
}
function runDiet() {
  withVIPClan(function() {
    if ((0, import_kolmafia59.myFamiliar)() === $familiar(_templateObject21110 || (_templateObject21110 = _taggedTemplateLiteral50(["Stooper"])))) {
      (0, import_kolmafia59.useFamiliar)($familiar.none);
    }
    MenuItem.defaultPriceFunction = function(item9) {
      var prices = [(0, import_kolmafia59.retrievePrice)(item9), (0, import_kolmafia59.mallPrice)(item9), (0, import_kolmafia59.npcPrice)(item9)].filter(function(p) {
        return p > 0 && p < Number.MAX_SAFE_INTEGER;
      });
      if (prices.length > 0) {
        return Math.min.apply(Math, _toConsumableArray29(prices));
      }
      return !item9.tradeable && have(item9) ? 0 : Infinity;
    };
    var dietBuilder = computeDiet();
    if (globalOptions.simdiet) {
      (0, import_kolmafia59.print)("===== SIMULATED DIET =====");
      if (!get("_mimeArmyShotglassUsed") && have($item(_templateObject2127 || (_templateObject2127 = _taggedTemplateLiteral50(["mime army shotglass"]))))) {
        printDiet(dietBuilder.shotglass(), "SHOTGLASS");
      }
      printDiet(dietBuilder.diet(), "FULL");
    } else {
      pillCheck();
      nonOrganAdventures();
      if (have($item(_templateObject2132 || (_templateObject2132 = _taggedTemplateLiteral50(["astral six-pack"]))))) {
        (0, import_kolmafia59.use)($item(_templateObject2142 || (_templateObject2142 = _taggedTemplateLiteral50(["astral six-pack"]))));
      }
      if (!get("_mimeArmyShotglassUsed") && have($item(_templateObject2152 || (_templateObject2152 = _taggedTemplateLiteral50(["mime army shotglass"]))))) {
        consumeDiet(dietBuilder.shotglass(), "SHOTGLASS");
      }
      if (get("barrelShrineUnlocked") && !get("_barrelPrayer") && $classes(_templateObject2162 || (_templateObject2162 = _taggedTemplateLiteral50(["Turtle Tamer, Accordion Thief"]))).includes((0, import_kolmafia59.myClass)())) {
        (0, import_kolmafia59.cliExecute)("barrelprayer buff");
      }
      consumeDiet(dietBuilder.diet(), "FULL");
      shrugBadEffects();
    }
  });
  completedDiet = true;
}

// src/outfit/dropsgear.ts
var _templateObject500;
var _templateObject2128;
var _templateObject3105;
var _templateObject4100;
var _templateObject570;
var _templateObject657;
var _templateObject747;
var _templateObject840;
var _templateObject936;
var _templateObject1030;
var _templateObject1127;
var _templateObject1226;
var _templateObject1326;
var _templateObject1424;
var _templateObject1521;
var _templateObject1621;
var _templateObject1721;
var _templateObject1821;
var _templateObject1921;
var _templateObject2021;
var _templateObject2129;
var _templateObject2222;
var _templateObject2321;
var _templateObject2421;
var _templateObject2521;
var _templateObject2621;
var _templateObject2721;
var _templateObject2820;
var _templateObject2920;
var _templateObject3018;
var _templateObject3122;
var _templateObject3220;
var _templateObject3319;
var _templateObject3418;
var _templateObject3517;
var _templateObject3615;
var _templateObject3714;
var _templateObject3813;
var _templateObject3912;
var _templateObject4012;
function _toConsumableArray30(arr) {
  return _arrayWithoutHoles30(arr) || _iterableToArray30(arr) || _unsupportedIterableToArray42(arr) || _nonIterableSpread30();
}
function _nonIterableSpread30() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray42(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray42(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray42(o, minLen);
}
function _iterableToArray30(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles30(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray42(arr);
}
function _arrayLikeToArray42(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral51(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var pantsgivingBonuses = /* @__PURE__ */ new Map();
function pantsgiving(mode) {
  if (!have($item(_templateObject500 || (_templateObject500 = _taggedTemplateLiteral51(["Pantsgiving"])))) || !modeUseLimitedDrops(mode))
    return /* @__PURE__ */ new Map();
  var count = get("_pantsgivingCount");
  var turnArray = [5, 50, 500, 5e3];
  var index = (0, import_kolmafia60.myFullness)() === (0, import_kolmafia60.fullnessLimit)() ? get("_pantsgivingFullness") : turnArray.findIndex(function(x) {
    return count < x;
  });
  var turns2 = turnArray[index] || 5e4;
  if (turns2 - count > estimatedGarboTurns())
    return /* @__PURE__ */ new Map();
  var cachedBonus = pantsgivingBonuses.get(turns2);
  if (cachedBonus)
    return /* @__PURE__ */ new Map([[$item(_templateObject2128 || (_templateObject2128 = _taggedTemplateLiteral51(["Pantsgiving"]))), cachedBonus]]);
  var expectedSinusTurns = (0, import_kolmafia60.getWorkshed)() === $item(_templateObject3105 || (_templateObject3105 = _taggedTemplateLiteral51(["portable Mayo Clinic"]))) ? 100 : 50;
  var expectedUseableSinusTurns = globalOptions.ascend ? clamp(estimatedGarboTurns() - (turns2 - count) - (0, import_kolmafia60.haveEffect)($effect(_templateObject4100 || (_templateObject4100 = _taggedTemplateLiteral51(["Kicked in the Sinuses"])))), 0, expectedSinusTurns) : expectedSinusTurns;
  var sinusVal = expectedUseableSinusTurns * 1 * baseMeat;
  var fullnessValue = sinusVal + get("valueOfAdventure") * 6.5 - ((0, import_kolmafia60.mallPrice)($item(_templateObject570 || (_templateObject570 = _taggedTemplateLiteral51(["jumping horseradish"])))) + (0, import_kolmafia60.mallPrice)($item(_templateObject657 || (_templateObject657 = _taggedTemplateLiteral51(["Special Seasoning"])))));
  var pantsgivingBonus = fullnessValue / (turns2 * 0.9);
  pantsgivingBonuses.set(turns2, pantsgivingBonus);
  return /* @__PURE__ */ new Map([[$item(_templateObject747 || (_templateObject747 = _taggedTemplateLiteral51(["Pantsgiving"]))), pantsgivingBonus]]);
}
function sweatpants(mode) {
  if (!have($item(_templateObject840 || (_templateObject840 = _taggedTemplateLiteral51(["designer sweatpants"])))) || mode === BonusEquipMode.EMBEZZLER)
    return /* @__PURE__ */ new Map();
  var needSweat = !globalOptions.ascend && get("sweat") < 75 || get("sweat") < 25 * (3 - get("_sweatOutSomeBoozeUsed"));
  if (!needSweat)
    return /* @__PURE__ */ new Map();
  var VOA = get("valueOfAdventure");
  var bestPerfectDrink = mallMin($items(_templateObject936 || (_templateObject936 = _taggedTemplateLiteral51(["perfect cosmopolitan, perfect negroni, perfect dark and stormy, perfect mimosa, perfect old-fashioned, perfect paloma"]))));
  var perfectDrinkValuePerDrunk = ((getAverageAdventures(bestPerfectDrink) + 3) * VOA - (0, import_kolmafia60.mallPrice)(bestPerfectDrink)) / 3;
  var splendidMartiniValuePerDrunk = (getAverageAdventures($item(_templateObject1030 || (_templateObject1030 = _taggedTemplateLiteral51(["splendid martini"])))) + 2) * VOA;
  var bonus = Math.max(perfectDrinkValuePerDrunk, splendidMartiniValuePerDrunk) * 2 / 25;
  return /* @__PURE__ */ new Map([[$item(_templateObject1127 || (_templateObject1127 = _taggedTemplateLiteral51(["designer sweatpants"]))), bonus]]);
}
var alternativePants = import_kolmafia60.Item.all().filter(function(item9) {
  return (0, import_kolmafia60.toSlot)(item9) === $slot(_templateObject1226 || (_templateObject1226 = _taggedTemplateLiteral51(["pants"]))) && have(item9) && (0, import_kolmafia60.numericModifier)(item9, "Adventures") > 0;
}).map(function(pants2) {
  return (0, import_kolmafia60.numericModifier)(pants2, "Adventures");
});
var bestAdventuresFromPants = Math.max.apply(Math, [0].concat(_toConsumableArray30(alternativePants)));
var haveSomeCheese = getFoldGroup($item(_templateObject1326 || (_templateObject1326 = _taggedTemplateLiteral51(["stinky cheese diaper"])))).some(function(item9) {
  return have(item9);
});
function cheeses(mode) {
  return haveSomeCheese && !globalOptions.ascend && get("_stinkyCheeseCount") < 100 && estimatedGarboTurns() >= 100 - get("_stinkyCheeseCount") && mode !== BonusEquipMode.EMBEZZLER ? new Map(getFoldGroup($item(_templateObject1424 || (_templateObject1424 = _taggedTemplateLiteral51(["stinky cheese diaper"])))).filter(function(item9) {
    return (0, import_kolmafia60.toSlot)(item9) !== $slot(_templateObject1521 || (_templateObject1521 = _taggedTemplateLiteral51(["weapon"])));
  }).map(function(item9) {
    return [item9, get("valueOfAdventure") * (10 - bestAdventuresFromPants) * (1 / 100)];
  })) : [];
}
function pantogramPants() {
  if (!have($item(_templateObject1621 || (_templateObject1621 = _taggedTemplateLiteral51(["pantogram pants"])))) || !get("_pantogramModifier").includes("Drops Items")) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject1721 || (_templateObject1721 = _taggedTemplateLiteral51(["pantogram pants"]))), 100]]);
}
function bagOfManyConfections() {
  if (!have($item(_templateObject1821 || (_templateObject1821 = _taggedTemplateLiteral51(["bag of many confections"])))) || !have($familiar(_templateObject1921 || (_templateObject1921 = _taggedTemplateLiteral51(["Stocking Mimic"]))))) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject2021 || (_templateObject2021 = _taggedTemplateLiteral51(["bag of many confections"]))), garboAverageValue.apply(void 0, _toConsumableArray30($items(_templateObject2129 || (_templateObject2129 = _taggedTemplateLiteral51(["Polka Pop, BitterSweetTarts, Piddles"]))))) / 6]]);
}
function snowSuit(mode) {
  if (!have($item(_templateObject2222 || (_templateObject2222 = _taggedTemplateLiteral51(["Snow Suit"])))) || get("_carrotNoseDrops") >= 3 || !modeUseLimitedDrops(mode)) {
    return /* @__PURE__ */ new Map([]);
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject2321 || (_templateObject2321 = _taggedTemplateLiteral51(["Snow Suit"]))), garboValue($item(_templateObject2421 || (_templateObject2421 = _taggedTemplateLiteral51(["carrot nose"])))) / 10]]);
}
function mayflowerBouquet(mode) {
  if (!have($item(_templateObject2521 || (_templateObject2521 = _taggedTemplateLiteral51(["Mayflower bouquet"])))) || !modeUseLimitedDrops(mode)) {
    return /* @__PURE__ */ new Map([]);
  }
  var sporadicMeatBonus = 40 * 0.125 * modeValueOfMeat(mode) / 100;
  var averageFlowerValue = garboAverageValue.apply(void 0, _toConsumableArray30($items(_templateObject2621 || (_templateObject2621 = _taggedTemplateLiteral51(["tin magnolia, upsy daisy, lesser grodulated violet, half-orchid, begpwnia"]))))) * Math.max(0.01, 0.5 - get("_mayflowerDrops") * 0.11);
  return /* @__PURE__ */ new Map([[$item(_templateObject2721 || (_templateObject2721 = _taggedTemplateLiteral51(["Mayflower bouquet"]))), (get("_mayflowerDrops") < 10 ? averageFlowerValue : 0) + sporadicMeatBonus]]);
}
function magnifyingGlass() {
  if (!have($item(_templateObject2820 || (_templateObject2820 = _taggedTemplateLiteral51(["cursed magnifying glass"])))) || get("_voidFreeFights") >= 5 || get("cursedMagnifyingGlassCount") >= 13) {
    return /* @__PURE__ */ new Map();
  }
  return /* @__PURE__ */ new Map([[$item(_templateObject2920 || (_templateObject2920 = _taggedTemplateLiteral51(["cursed magnifying glass"]))), globalOptions.prefs.valueOfFreeFight / 13]]);
}
function bonusGear(mode) {
  var valueCircumstantialBonus = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
  return new Map([].concat(_toConsumableArray30(cheeses(mode)), _toConsumableArray30(bonusAccessories(mode)), _toConsumableArray30(pantogramPants()), _toConsumableArray30(bagOfManyConfections()), _toConsumableArray30(stickers(mode)), _toConsumableArray30(powerGlove()), _toConsumableArray30(valueCircumstantialBonus ? new Map([].concat(_toConsumableArray30(pantsgiving(mode)), _toConsumableArray30(sweatpants(mode)), _toConsumableArray30(shavingBonus()), _toConsumableArray30(snowSuit(mode)), _toConsumableArray30(mayflowerBouquet(mode)), _toConsumableArray30(mode === BonusEquipMode.BARF ? magnifyingGlass() : []), _toConsumableArray30(juneCleaver(mode)))) : [])));
}
function shavingBonus() {
  var _DaylightShavings$buf;
  if (!DaylightShavings_exports.have() || DaylightShavings_exports.buffs.some(function(buff) {
    return have(buff, 2);
  })) {
    return /* @__PURE__ */ new Map();
  }
  var timeToMeatBuff = 11 * ((_DaylightShavings$buf = DaylightShavings_exports.buffsUntil($effect(_templateObject3018 || (_templateObject3018 = _taggedTemplateLiteral51(["Friendly Chops"]))))) !== null && _DaylightShavings$buf !== void 0 ? _DaylightShavings$buf : Infinity);
  if (globalOptions.ascend && timeToMeatBuff > estimatedGarboTurns()) {
    return /* @__PURE__ */ new Map();
  }
  if (!globalOptions.ascend && DaylightShavings_exports.nextBuff() === $effect(_templateObject3122 || (_templateObject3122 = _taggedTemplateLiteral51(["Friendly Chops"]))) && estimatedGarboTurns() < 11 * 11) {
    return /* @__PURE__ */ new Map();
  }
  var bonusValue = (baseMeat * 100 + 72 * 50) / 100;
  return /* @__PURE__ */ new Map([[$item(_templateObject3220 || (_templateObject3220 = _taggedTemplateLiteral51(["Daylight Shavings Helmet"]))), bonusValue]]);
}
var juneCleaverEV = null;
function juneCleaver(mode) {
  var estimatedJuneCleaverTurns = remainingUserTurns() + estimatedGarboTurns();
  if (!have($item(_templateObject3319 || (_templateObject3319 = _taggedTemplateLiteral51(["June cleaver"])))) || get("_juneCleaverFightsLeft") > estimatedJuneCleaverTurns || !get("_juneCleaverFightsLeft")) {
    return /* @__PURE__ */ new Map();
  }
  if (!juneCleaverEV) {
    juneCleaverEV = sum(_toConsumableArray30(JuneCleaver_exports.choices), function(choice) {
      return valueJuneCleaverOption(juneCleaverChoiceValues[choice][bestJuneCleaverOption(choice)]);
    }) / JuneCleaver_exports.choices.length;
  }
  if (globalOptions.ascend && estimatedJuneCleaverTurns <= 180 && JuneCleaver_exports.getInterval() === 30) {
    var availEV = sum(_toConsumableArray30(JuneCleaver_exports.choicesAvailable()), function(choice) {
      return valueJuneCleaverOption(juneCleaverChoiceValues[choice][bestJuneCleaverOption(choice)]);
    }) / JuneCleaver_exports.choicesAvailable().length;
    var queueEV = sum(_toConsumableArray30(JuneCleaver_exports.queue()), function(choice) {
      var choiceValue = valueJuneCleaverOption(juneCleaverChoiceValues[choice][bestJuneCleaverOption(choice)]);
      var cleaverEncountersLeft = Math.floor(estimatedJuneCleaverTurns / 30);
      var encountersToQueueExit = 1 + JuneCleaver_exports.queue().indexOf(choice);
      var chancesLeft = Math.max(0, cleaverEncountersLeft - encountersToQueueExit);
      var encounterProbability = 1 - Math.pow(2 / 3, chancesLeft);
      return choiceValue * encounterProbability;
    }) / JuneCleaver_exports.queue().length;
    juneCleaverEV = queueEV + availEV;
  }
  var interval = mode === BonusEquipMode.EMBEZZLER ? 30 : JuneCleaver_exports.getInterval();
  return /* @__PURE__ */ new Map([[$item(_templateObject3418 || (_templateObject3418 = _taggedTemplateLiteral51(["June cleaver"]))), juneCleaverEV / interval]]);
}
function stickers(mode) {
  if (mode === BonusEquipMode.EMBEZZLER)
    return /* @__PURE__ */ new Map();
  var cost = sumNumbers($slots(_templateObject3517 || (_templateObject3517 = _taggedTemplateLiteral51(["sticker1, sticker2, sticker3"]))).map(function(s) {
    return (0, import_kolmafia60.mallPrice)((0, import_kolmafia60.equippedItem)(s)) / 20;
  }));
  return /* @__PURE__ */ new Map([[$item(_templateObject3615 || (_templateObject3615 = _taggedTemplateLiteral51(["scratch 'n' sniff sword"]))), -1 * cost], [$item(_templateObject3714 || (_templateObject3714 = _taggedTemplateLiteral51(["scratch 'n' sniff crossbow"]))), -1 * cost]]);
}
function powerGlove() {
  if (!have($item(_templateObject3813 || (_templateObject3813 = _taggedTemplateLiteral51(["Powerful Glove"])))))
    return /* @__PURE__ */ new Map();
  return /* @__PURE__ */ new Map([[$item(_templateObject3912 || (_templateObject3912 = _taggedTemplateLiteral51(["Powerful Glove"]))), 0.25 * garboAverageValue.apply(void 0, _toConsumableArray30($items(_templateObject4012 || (_templateObject4012 = _taggedTemplateLiteral51(["blue pixel, green pixel, red pixel, white pixel"])))))]]);
}

// src/outfit/lib.ts
var import_kolmafia61 = require("kolmafia");
var _templateObject501;
var _templateObject2130;
var _templateObject3106;
var _templateObject4101;
var _templateObject571;
var _templateObject658;
var _templateObject748;
var _templateObject841;
var _templateObject937;
var _templateObject1031;
var _templateObject1128;
var _templateObject1227;
var _templateObject1327;
var _templateObject1425;
var _templateObject1523;
var _templateObject1623;
var _templateObject1723;
var _templateObject1823;
var _templateObject1923;
var _templateObject2023;
var _templateObject2131;
var _templateObject2223;
var _templateObject2322;
var _templateObject2422;
var _templateObject2522;
var _templateObject2622;
var _templateObject2722;
function _createForOfIteratorHelper25(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray43(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray43(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray43(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray43(o, minLen);
}
function _arrayLikeToArray43(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral52(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function bestBjornalike(outfit3) {
  var bjornalikes = $items(_templateObject501 || (_templateObject501 = _taggedTemplateLiteral52(["Buddy Bjorn, Crown of Thrones"]))).filter(function(item9) {
    return outfit3.canEquip(item9);
  });
  if (bjornalikes.length === 0)
    return null;
  if (bjornalikes.length === 1)
    return bjornalikes[0];
  var hasStrongLep = findLeprechaunMultiplier(meatFamiliar()) >= 2;
  var goodRobortHats = $items(_templateObject2130 || (_templateObject2130 = _taggedTemplateLiteral52(["crumpled felt fedora"])));
  if ((0, import_kolmafia61.myClass)() === $class(_templateObject3106 || (_templateObject3106 = _taggedTemplateLiteral52(["Turtle Tamer"]))))
    goodRobortHats.push($item(_templateObject4101 || (_templateObject4101 = _taggedTemplateLiteral52(["warbear foil hat"]))));
  if ((0, import_kolmafia61.numericModifier)($item(_templateObject571 || (_templateObject571 = _taggedTemplateLiteral52(["shining star cap"]))), "Familiar Weight") === 10) {
    goodRobortHats.push($item(_templateObject658 || (_templateObject658 = _taggedTemplateLiteral52(["shining star cap"]))));
  }
  if (have($item(_templateObject748 || (_templateObject748 = _taggedTemplateLiteral52(["carpe"])))) && (!hasStrongLep || !goodRobortHats.some(function(hat) {
    return have(hat) && (0, import_kolmafia61.canEquip)(hat);
  }))) {
    return $item(_templateObject841 || (_templateObject841 = _taggedTemplateLiteral52(["Crown of Thrones"])));
  }
  return $item(_templateObject937 || (_templateObject937 = _taggedTemplateLiteral52(["Buddy Bjorn"])));
}
function cleaverCheck() {
  if ((0, import_kolmafia61.availableAmount)($item(_templateObject1031 || (_templateObject1031 = _taggedTemplateLiteral52(["June cleaver"])))) > 1)
    (0, import_kolmafia61.cliExecute)("refresh inventory");
}
function useUPCs() {
  var UPC2 = $item(_templateObject1128 || (_templateObject1128 = _taggedTemplateLiteral52(["scratch 'n' sniff UPC sticker"])));
  if ($items(_templateObject1227 || (_templateObject1227 = _taggedTemplateLiteral52(["scratch 'n' sniff sword, scratch 'n' sniff crossbow"]))).every(function(i) {
    return !have(i);
  })) {
    (0, import_kolmafia61.visitUrl)("bedazzle.php?action=juststick&sticker=".concat((0, import_kolmafia61.toInt)(UPC2), "&pwd"));
  }
  for (var slotNumber = 1; slotNumber <= 3; slotNumber++) {
    var slot = (0, import_kolmafia61.toSlot)("sticker".concat(slotNumber));
    var sticker = (0, import_kolmafia61.equippedItem)(slot);
    if (sticker === UPC2)
      continue;
    (0, import_kolmafia61.visitUrl)("bedazzle.php");
    if (sticker !== $item.none) {
      (0, import_kolmafia61.visitUrl)("bedazzle.php?action=peel&pwd&slot=".concat(slotNumber));
    }
    (0, import_kolmafia61.visitUrl)("bedazzle.php?action=stick&pwd&slot=".concat(slotNumber, "&sticker=").concat((0, import_kolmafia61.toInt)(UPC2)));
  }
}
var stickerSlots = $slots(_templateObject1327 || (_templateObject1327 = _taggedTemplateLiteral52(["sticker1, sticker2, sticker3"])));
var UPC = $item(_templateObject1425 || (_templateObject1425 = _taggedTemplateLiteral52(["scratch 'n' sniff UPC sticker"])));
function useUPCsIfNeeded(_ref) {
  var familiar4 = _ref.familiar;
  var currentWeapon = 25 * (familiar4 ? findLeprechaunMultiplier(familiar4) : 0);
  var embezzlers = globalOptions.ascend ? Math.min(20, embezzlerCount() || digitizedMonstersRemaining()) : 20;
  var addedValueOfFullSword = embezzlers * ((75 - currentWeapon) * (750 + baseMeat)) / 100;
  if (addedValueOfFullSword > 3 * (0, import_kolmafia61.mallPrice)(UPC)) {
    var needed = 3 - stickerSlots.filter(function(sticker) {
      return (0, import_kolmafia61.equippedItem)(sticker) === UPC;
    }).length;
    if (needed)
      acquire(needed, UPC, addedValueOfFullSword / 3, false);
    useUPCs();
  }
}
var waterBreathingEquipment = $items(_templateObject1523 || (_templateObject1523 = _taggedTemplateLiteral52(["The Crown of Ed the Undying, aerated diving helmet, crappy Mer-kin mask, Mer-kin gladiator mask, Mer-kin scholar mask, old SCUBA tank"])));
var familiarWaterBreathingEquipment = $items(_templateObject1623 || (_templateObject1623 = _taggedTemplateLiteral52(["das boot, little bitty bathysphere"])));
function tryFillLatte() {
  if (have($item(_templateObject1723 || (_templateObject1723 = _taggedTemplateLiteral52(["latte lovers member's mug"])))) && get("_latteRefillsUsed") < 3 && (get("_latteCopyUsed") || get("latteUnlocks").includes("cajun") && get("latteUnlocks").includes("rawhide") && ((0, import_kolmafia61.numericModifier)($item(_templateObject1823 || (_templateObject1823 = _taggedTemplateLiteral52(["latte lovers member's mug"]))), "Familiar Weight") !== 5 || (0, import_kolmafia61.numericModifier)($item(_templateObject1923 || (_templateObject1923 = _taggedTemplateLiteral52(["latte lovers member's mug"]))), "Meat Drop") !== 40 || get("latteUnlocks").includes("carrot") && (0, import_kolmafia61.numericModifier)($item(_templateObject2023 || (_templateObject2023 = _taggedTemplateLiteral52(["latte lovers member's mug"]))), "Item Drop") !== 20))) {
    var goodLatteIngredients = ["cajun", "rawhide", "carrot"];
    var latteIngredients = goodLatteIngredients.filter(function(ingredient) {
      return get("latteUnlocks").includes(ingredient);
    });
    if (latteIngredients.length < 3)
      latteIngredients.push("pumpkin");
    if (latteIngredients.length < 3)
      latteIngredients.push("vanilla");
    if (latteIngredients.length < 3)
      latteIngredients.push("cinnamon");
    (0, import_kolmafia61.cliExecute)("latte refill ".concat(latteIngredients.join(" ")));
  }
  return (0, import_kolmafia61.numericModifier)($item(_templateObject2131 || (_templateObject2131 = _taggedTemplateLiteral52(["latte lovers member's mug"]))), "Familiar Weight") === 5 && (0, import_kolmafia61.numericModifier)($item(_templateObject2223 || (_templateObject2223 = _taggedTemplateLiteral52(["latte lovers member's mug"]))), "Meat Drop") === 40;
}
function toSpec(source) {
  if (!source)
    return {};
  if (source instanceof Requirement) {
    var _source$maximizeOptio;
    var result = {};
    if (source.maximizeParameters.length)
      result.modifier = source.maximizeParameters;
    if ((_source$maximizeOptio = source.maximizeOptions.forceEquip) !== null && _source$maximizeOptio !== void 0 && _source$maximizeOptio.length) {
      result.equip = source.maximizeOptions.forceEquip;
    }
    if (source.maximizeOptions.preventEquip) {
      result.avoid = source.maximizeOptions.preventEquip;
    }
    return result;
  } else {
    var _source$constraints$e, _source$constraints, _source$constraints$f, _source$constraints2;
    var req = (_source$constraints$e = (_source$constraints = source.constraints).equipmentRequirements) === null || _source$constraints$e === void 0 ? void 0 : _source$constraints$e.call(_source$constraints);
    var spec = req ? toSpec(req) : {};
    var familiar4 = (_source$constraints$f = (_source$constraints2 = source.constraints).familiar) === null || _source$constraints$f === void 0 ? void 0 : _source$constraints$f.call(_source$constraints2);
    if (familiar4)
      spec.familiar = familiar4;
    return spec;
  }
}
var cachedUsingPurse = null;
function usingPurse() {
  if (cachedUsingPurse === null) {
    cachedUsingPurse = (0, import_kolmafia61.myInebriety)() <= (0, import_kolmafia61.inebrietyLimit)() && (!have($item(_templateObject2322 || (_templateObject2322 = _taggedTemplateLiteral52(["latte lovers member's mug"])))) || !have($familiar(_templateObject2422 || (_templateObject2422 = _taggedTemplateLiteral52(["Robortender"])))) && !have($familiar(_templateObject2522 || (_templateObject2522 = _taggedTemplateLiteral52(["Hobo Monkey"])))) || !(0, import_kolmafia61.canAdventure)($location(_templateObject2622 || (_templateObject2622 = _taggedTemplateLiteral52(["The Black Forest"])))));
  }
  return cachedUsingPurse;
}
function validateGarbageFoldable(spec) {
  var garbageItems = getFoldGroup($item(_templateObject2722 || (_templateObject2722 = _taggedTemplateLiteral52(["January's Garbage Tote"]))));
  var _iterator = _createForOfIteratorHelper25(garbageItems), _step;
  try {
    var _loop = function _loop2() {
      var garbageItem = _step.value;
      if (Object.values(spec).some(function(specEntry) {
        return specEntry === garbageItem || Array.isArray(specEntry) && specEntry.includes(garbageItem);
      })) {
        if (!have(garbageItem))
          (0, import_kolmafia61.cliExecute)("fold ".concat(garbageItem));
        return "break";
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _ret = _loop();
      if (_ret === "break")
        break;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}

// src/outfit/barf.ts
var _templateObject579;
var _templateObject2133;
var _templateObject3107;
var _templateObject4102;
var _templateObject580;
var _templateObject659;
var _templateObject749;
var _templateObject845;
var _templateObject938;
var _templateObject1033;
var _templateObject1129;
var _templateObject1228;
var _templateObject1328;
var _templateObject1426;
var _templateObject1524;
var _templateObject1624;
var _templateObject1724;
var _templateObject1824;
var _templateObject1924;
var _templateObject2024;
var _templateObject2134;
var _templateObject2224;
var _templateObject2323;
var _templateObject2423;
var _templateObject2523;
var _templateObject2623;
function _createForOfIteratorHelper26(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray44(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray44(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray44(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray44(o, minLen);
}
function _arrayLikeToArray44(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral53(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function chooseGun(_ref) {
  var familiar4 = _ref.familiar;
  if (familiar4 === $familiar(_templateObject579 || (_templateObject579 = _taggedTemplateLiteral53(["Robortender"]))) && have($item(_templateObject2133 || (_templateObject2133 = _taggedTemplateLiteral53(["love"])))))
    return $item(_templateObject3107 || (_templateObject3107 = _taggedTemplateLiteral53(["love"])));
  if (!have($item(_templateObject4102 || (_templateObject4102 = _taggedTemplateLiteral53(["ice nine"]))))) {
    (0, import_kolmafia62.cliExecute)("refresh inventory");
    (0, import_kolmafia62.retrieveItem)($item(_templateObject580 || (_templateObject580 = _taggedTemplateLiteral53(["ice nine"]))));
  }
  return have($item(_templateObject659 || (_templateObject659 = _taggedTemplateLiteral53(["ice nine"])))) ? $item(_templateObject749 || (_templateObject749 = _taggedTemplateLiteral53(["ice nine"]))) : null;
}
function gunSpec(outfit3) {
  if (!outfit3.canEquip($item(_templateObject845 || (_templateObject845 = _taggedTemplateLiteral53(["unwrapped knock-off retro superhero cape"]))))) {
    return {
      available: false,
      items: []
    };
  }
  var gun = chooseGun(outfit3);
  if (!gun)
    return {
      available: false,
      items: []
    };
  return {
    available: true,
    items: {
      back: $item(_templateObject938 || (_templateObject938 = _taggedTemplateLiteral53(["unwrapped knock-off retro superhero cape"]))),
      weapon: gun,
      equip: $items(_templateObject1033 || (_templateObject1033 = _taggedTemplateLiteral53(["mafia pointer finger ring"]))),
      modes: {
        retrocape: ["robot", "kill"]
      }
    }
  };
}
var POINTER_RING_SPECS = function(outfit3) {
  return [{
    available: have($skill(_templateObject1129 || (_templateObject1129 = _taggedTemplateLiteral53(["Furious Wallop"])))) && (0, import_kolmafia62.myFury)() > 0,
    items: $items(_templateObject1228 || (_templateObject1228 = _taggedTemplateLiteral53(["mafia pointer finger ring"])))
  }, {
    available: have($skill(_templateObject1328 || (_templateObject1328 = _taggedTemplateLiteral53(["Head in the Game"])))),
    items: $items(_templateObject1426 || (_templateObject1426 = _taggedTemplateLiteral53(["mafia pointer finger ring"])))
  }, {
    available: (0, import_kolmafia62.myClass)() === $class(_templateObject1524 || (_templateObject1524 = _taggedTemplateLiteral53(["Turtle Tamer"]))),
    items: $items(_templateObject1624 || (_templateObject1624 = _taggedTemplateLiteral53(["Operation Patriot Shield, mafia pointer finger ring"])))
  }, {
    available: true,
    items: $items(_templateObject1724 || (_templateObject1724 = _taggedTemplateLiteral53(["haiku katana, mafia pointer finger ring"])))
  }, function() {
    return gunSpec(outfit3);
  }, {
    available: true,
    items: $items(_templateObject1824 || (_templateObject1824 = _taggedTemplateLiteral53(["Operation Patriot Shield, mafia pointer finger ring"])))
  }];
};
var trueInebrietyLimit = function() {
  return (0, import_kolmafia62.inebrietyLimit)() - ((0, import_kolmafia62.myFamiliar)() === $familiar(_templateObject1924 || (_templateObject1924 = _taggedTemplateLiteral53(["Stooper"]))) ? 1 : 0);
};
function barfOutfit() {
  var _outfit$familiar;
  var spec = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var sim = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  cleaverCheck();
  validateGarbageFoldable(spec);
  var outfit3 = Outfit.from(spec, new Error("Failed to construct outfit from spec ".concat((0, import_kolmafia62.toJson)(spec), "!")));
  (_outfit$familiar = outfit3.familiar) !== null && _outfit$familiar !== void 0 ? _outfit$familiar : outfit3.familiar = barfFamiliar();
  var bjornChoice = chooseBjorn(BonusEquipMode.BARF, outfit3.familiar, sim);
  outfit3.modifier.push("".concat(modeValueOfMeat(BonusEquipMode.BARF), " Meat Drop"), "".concat(modeValueOfItem(BonusEquipMode.BARF), " Item Drop"), "-tie");
  if ((0, import_kolmafia62.myInebriety)() > trueInebrietyLimit()) {
    if (!outfit3.equip($item(_templateObject2024 || (_templateObject2024 = _taggedTemplateLiteral53(["Drunkula's wineglass"]))))) {
      throw new Error("We're overdrunk but have found ourself unable to equip a wineglass!");
    }
  } else {
    if (have($item(_templateObject2134 || (_templateObject2134 = _taggedTemplateLiteral53(["protonic accelerator pack"])))) && get("questPAGhost") === "unstarted" && get("nextParanormalActivity") <= (0, import_kolmafia62.totalTurnsPlayed)()) {
      outfit3.equip($item(_templateObject2224 || (_templateObject2224 = _taggedTemplateLiteral53(["protonic accelerator pack"]))));
    }
    var _iterator = _createForOfIteratorHelper26(POINTER_RING_SPECS(outfit3)), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var _spec = _step.value;
        var _undelay = undelay(_spec), available3 = _undelay.available, items = _undelay.items;
        if (available3 && outfit3.tryEquip(items))
          break;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  if (getKramcoWandererChance() > 0.05)
    outfit3.equip($item(_templateObject2323 || (_templateObject2323 = _taggedTemplateLiteral53(["Kramco Sausage-o-Matic\u2122"]))));
  outfit3.bonuses = bonusGear(BonusEquipMode.BARF, !sim);
  var bjornalike = bestBjornalike(outfit3);
  if (bjornalike) {
    outfit3.setBonus(bjornalike, bjornChoice.value);
    var other = $items(_templateObject2423 || (_templateObject2423 = _taggedTemplateLiteral53(["Buddy Bjorn, Crown of Thrones"]))).filter(function(i) {
      return i !== bjornalike;
    })[0];
    outfit3.avoid.push(other);
    switch (bjornalike) {
      case $item(_templateObject2523 || (_templateObject2523 = _taggedTemplateLiteral53(["Buddy Bjorn"]))):
        outfit3.bjornify(bjornChoice.familiar);
        break;
      case $item(_templateObject2623 || (_templateObject2623 = _taggedTemplateLiteral53(["Crown of Thrones"]))):
        outfit3.enthrone(bjornChoice.familiar);
        break;
    }
  }
  outfit3.setModes({
    snowsuit: "nose",
    parka: "kachungasaur"
  });
  return outfit3;
}

// src/outfit/embezzler.ts
var import_kolmafia63 = require("kolmafia");
var _templateObject581;
var _templateObject2135;
var _templateObject3108;
var _templateObject4103;
var _templateObject589;
function _taggedTemplateLiteral54(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function embezzlerOutfit() {
  var _outfit$familiar;
  var spec = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var target = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : $location.none;
  cleaverCheck();
  validateGarbageFoldable(spec);
  var outfit3 = Outfit.from(spec, new Error("Failed to construct outfit from spec ".concat((0, import_kolmafia63.toJson)(spec))));
  outfit3.modifier.push("".concat(modeValueOfMeat(BonusEquipMode.EMBEZZLER), " Meat Drop"), "-tie");
  outfit3.avoid.push($item(_templateObject581 || (_templateObject581 = _taggedTemplateLiteral54(["cheap sunglasses"]))));
  (_outfit$familiar = outfit3.familiar) !== null && _outfit$familiar !== void 0 ? _outfit$familiar : outfit3.familiar = meatFamiliar();
  var bjornChoice = chooseBjorn(BonusEquipMode.EMBEZZLER, outfit3.familiar);
  var underwater2 = target.environment === "underwater";
  if (underwater2) {
    if (!outfit3.familiar.underwater) {
      outfit3.equipFirst(familiarWaterBreathingEquipment);
    }
    if (!outfit3.equipFirst(waterBreathingEquipment))
      outfit3.modifier.push("sea");
  }
  useUPCsIfNeeded(outfit3);
  outfit3.bonuses = bonusGear(BonusEquipMode.EMBEZZLER);
  var bjornalike = bestBjornalike(outfit3);
  if (target === Guzzlr_exports.getLocation() && Guzzlr_exports.turnsLeftOnQuest(false) === 1 && Guzzlr_exports.haveBooze()) {
    outfit3.addBonus($item(_templateObject2135 || (_templateObject2135 = _taggedTemplateLiteral54(["Guzzlr pants"]))), Guzzlr_exports.expectedReward(true) - Guzzlr_exports.expectedReward(false));
  }
  if (bjornalike) {
    outfit3.setBonus(bjornalike, bjornChoice.value);
    outfit3.equip(bjornalike);
    var other = $items(_templateObject3108 || (_templateObject3108 = _taggedTemplateLiteral54(["Buddy Bjorn, Crown of Thrones"]))).filter(function(i) {
      return i !== bjornalike;
    })[0];
    outfit3.avoid.push(other);
    switch (bjornalike) {
      case $item(_templateObject4103 || (_templateObject4103 = _taggedTemplateLiteral54(["Buddy Bjorn"]))):
        outfit3.bjornify(bjornChoice.familiar);
        break;
      case $item(_templateObject589 || (_templateObject589 = _taggedTemplateLiteral54(["Crown of Thrones"]))):
        outfit3.enthrone(bjornChoice.familiar);
        break;
    }
  }
  outfit3.setModes({
    snowsuit: "nose",
    parka: "kachungasaur",
    edpiece: "fish"
  });
  return outfit3;
}

// src/outfit/free.ts
var import_kolmafia64 = require("kolmafia");
var _templateObject590;
var _templateObject2136;
var _templateObject3109;
var _templateObject4104;
var _templateObject591;
var _templateObject660;
var _templateObject750;
var _templateObject846;
var _templateObject939;
var _templateObject1034;
var _templateObject1130;
function _taggedTemplateLiteral55(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function freeFightOutfit() {
  var _outfit$familiar;
  var spec = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  cleaverCheck();
  validateGarbageFoldable(spec);
  var outfit3 = Outfit.from(spec, new Error("Failed to construct outfit from spec ".concat((0, import_kolmafia64.toJson)(spec), "!")));
  (_outfit$familiar = outfit3.familiar) !== null && _outfit$familiar !== void 0 ? _outfit$familiar : outfit3.familiar = freeFightFamiliar(options);
  var mode = outfit3.familiar === $familiar(_templateObject590 || (_templateObject590 = _taggedTemplateLiteral55(["Machine Elf"]))) ? BonusEquipMode.DMT : BonusEquipMode.FREE;
  if (outfit3.familiar !== $familiar(_templateObject2136 || (_templateObject2136 = _taggedTemplateLiteral55(["Patriotic Eagle"])))) {
    outfit3.modifier.push($familiars(_templateObject3109 || (_templateObject3109 = _taggedTemplateLiteral55(["Pocket Professor, Grey Goose"]))).includes(outfit3.familiar) ? "Familiar Experience" : "Familiar Weight");
  }
  var bjornChoice = chooseBjorn(mode, outfit3.familiar);
  if (get("_vampyreCloakeFormUses") < 10)
    outfit3.setBonus($item(_templateObject4104 || (_templateObject4104 = _taggedTemplateLiteral55(["vampyric cloake"]))), 500);
  bonusGear(mode).forEach(function(value, item9) {
    return outfit3.addBonus(item9, value);
  });
  if (outfit3.familiar !== $familiar(_templateObject591 || (_templateObject591 = _taggedTemplateLiteral55(["Grey Goose"]))))
    outfit3.setBonus($item(_templateObject660 || (_templateObject660 = _taggedTemplateLiteral55(["tiny stillsuit"]))), 500);
  if (options.location === Guzzlr_exports.getLocation() && Guzzlr_exports.turnsLeftOnQuest(false) === 1 && Guzzlr_exports.haveBooze()) {
    outfit3.addBonus($item(_templateObject750 || (_templateObject750 = _taggedTemplateLiteral55(["Guzzlr pants"]))), Guzzlr_exports.expectedReward(true) - Guzzlr_exports.expectedReward(false));
  }
  var bjornalike = $items(_templateObject846 || (_templateObject846 = _taggedTemplateLiteral55(["Crown of Thrones, Buddy Bjorn"]))).find(function(item9) {
    return outfit3.canEquip(item9);
  });
  if (bjornalike) {
    outfit3.setBonus(bjornalike, bjornChoice.value);
    var other = $items(_templateObject939 || (_templateObject939 = _taggedTemplateLiteral55(["Buddy Bjorn, Crown of Thrones"]))).filter(function(i) {
      return i !== bjornalike;
    })[0];
    outfit3.avoid.push(other);
    switch (bjornalike) {
      case $item(_templateObject1034 || (_templateObject1034 = _taggedTemplateLiteral55(["Buddy Bjorn"]))):
        outfit3.bjornify(bjornChoice.familiar);
        break;
      case $item(_templateObject1130 || (_templateObject1130 = _taggedTemplateLiteral55(["Crown of Thrones"]))):
        outfit3.enthrone(bjornChoice.familiar);
        break;
    }
  }
  outfit3.setModes({
    snowsuit: "nose",
    parka: "dilophosaur"
  });
  return outfit3;
}

// src/wanderer/index.ts
var import_kolmafia72 = require("kolmafia");

// src/wanderer/guzzlr.ts
var import_kolmafia66 = require("kolmafia");

// src/wanderer/lib.ts
var import_kolmafia65 = require("kolmafia");
var _templateObject599;
var _templateObject2137;
var _templateObject3123;
var _templateObject4105;
var _templateObject5100;
var _templateObject661;
var _templateObject751;
var _templateObject847;
var _templateObject940;
var _templateObject1035;
var _templateObject1131;
var _templateObject1229;
var _templateObject1329;
var _templateObject1427;
var _templateObject1525;
var _templateObject1625;
var _templateObject1725;
var _templateObject1825;
var _templateObject1925;
var _templateObject2025;
var _templateObject2138;
var _templateObject2225;
var _templateObject2324;
var _templateObject2424;
var _templateObject2524;
var _templateObject2624;
function _defineProperties22(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey28(descriptor.key), descriptor);
  }
}
function _createClass22(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties22(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties22(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _classCallCheck22(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperty25(obj, key, value) {
  key = _toPropertyKey28(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey28(arg) {
  var key = _toPrimitive28(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive28(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray31(arr) {
  return _arrayWithoutHoles31(arr) || _iterableToArray31(arr) || _unsupportedIterableToArray45(arr) || _nonIterableSpread31();
}
function _nonIterableSpread31() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray45(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray45(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray45(o, minLen);
}
function _iterableToArray31(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles31(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray45(arr);
}
function _arrayLikeToArray45(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral56(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var UnlockableZones = [{
  zone: "Spaaace",
  available: function() {
    return have($effect(_templateObject599 || (_templateObject599 = _taggedTemplateLiteral56(["Transpondent"]))));
  },
  unlocker: $item(_templateObject2137 || (_templateObject2137 = _taggedTemplateLiteral56(["transporter transponder"]))),
  noInv: false
}, {
  zone: "Wormwood",
  available: function() {
    return have($effect(_templateObject3123 || (_templateObject3123 = _taggedTemplateLiteral56(["Absinthe-Minded"]))));
  },
  unlocker: $item(_templateObject4105 || (_templateObject4105 = _taggedTemplateLiteral56(["tiny bottle of absinthe"]))),
  noInv: false
}, {
  zone: "Rabbit Hole",
  available: function() {
    return have($effect(_templateObject5100 || (_templateObject5100 = _taggedTemplateLiteral56(["Down the Rabbit Hole"]))));
  },
  unlocker: $item(_templateObject661 || (_templateObject661 = _taggedTemplateLiteral56(['"DRINK ME" potion']))),
  noInv: false
}, {
  zone: "Conspiracy Island",
  available: function() {
    return realmAvailable("spooky");
  },
  unlocker: $item(_templateObject751 || (_templateObject751 = _taggedTemplateLiteral56(["one-day ticket to Conspiracy Island"]))),
  noInv: true
}, {
  zone: "Dinseylandfill",
  available: function() {
    return realmAvailable("stench");
  },
  unlocker: $item(_templateObject847 || (_templateObject847 = _taggedTemplateLiteral56(["one-day ticket to Dinseylandfill"]))),
  noInv: true
}, {
  zone: "The Glaciest",
  available: function() {
    return realmAvailable("cold");
  },
  unlocker: $item(_templateObject940 || (_templateObject940 = _taggedTemplateLiteral56(["one-day ticket to The Glaciest"]))),
  noInv: true
}, {
  zone: "Spring Break Beach",
  available: function() {
    return realmAvailable("sleaze");
  },
  unlocker: $item(_templateObject1035 || (_templateObject1035 = _taggedTemplateLiteral56(["one-day ticket to Spring Break Beach"]))),
  noInv: true
}];
function underwater(location) {
  return location.environment === "underwater";
}
var ILLEGAL_PARENTS = ["Clan Basement", "Psychoses", "PirateRealm"];
var canAdventureOrUnlockSkipList = [].concat(_toConsumableArray31($locations(_templateObject1131 || (_templateObject1131 = _taggedTemplateLiteral56(["The Oasis, The Bubblin' Caldera, Barrrney's Barrr, The F'c'le, The Poop Deck, Belowdecks, 8-Bit Realm, Madness Bakery, The Secret Government Laboratory, The Dire Warren, Inside the Palindome, The Haiku Dungeon, An Incredibly Strange Place (Bad Trip), An Incredibly Strange Place (Mediocre Trip), An Incredibly Strange Place (Great Trip), El Vibrato Island, Shadow Rift (The 8-Bit Realm), The Daily Dungeon, Trick-or-Treating, Seaside Megalopolis"])))), _toConsumableArray31(import_kolmafia65.Location.all().filter(function(l) {
  return ILLEGAL_PARENTS.includes(l.parent);
})));
function canAdventureOrUnlock(loc) {
  var skiplist = _toConsumableArray31(canAdventureOrUnlockSkipList);
  if (!have($item(_templateObject1229 || (_templateObject1229 = _taggedTemplateLiteral56(["repaid diaper"])))) && have($item(_templateObject1329 || (_templateObject1329 = _taggedTemplateLiteral56(["Great Wolf's beastly trousers"]))))) {
    skiplist.push($location(_templateObject1427 || (_templateObject1427 = _taggedTemplateLiteral56(["The Icy Peak"]))));
  }
  var canUnlock = UnlockableZones.some(function(z) {
    return loc.zone === z.zone && (z.available() || !z.noInv);
  });
  return !underwater(loc) && !skiplist.includes(loc) && ((0, import_kolmafia65.canAdventure)(loc) || canUnlock);
}
function unlock(loc, value) {
  var unlockableZone = UnlockableZones.find(function(z) {
    return z.zone === loc.zone;
  });
  if (!unlockableZone)
    return (0, import_kolmafia65.canAdventure)(loc);
  if (unlockableZone.available())
    return true;
  if ((0, import_kolmafia65.buy)(1, unlockableZone.unlocker, value) === 0)
    return false;
  return (0, import_kolmafia65.use)(unlockableZone.unlocker);
}
var backupSkiplist = $locations(_templateObject1525 || (_templateObject1525 = _taggedTemplateLiteral56(["The Overgrown Lot, The Skeleton Store, The Mansion of Dr. Weirdeaux, Professor Jacking's Huge-A-Ma-tron"])));
var backupSafelist = $locations(_templateObject1625 || (_templateObject1625 = _taggedTemplateLiteral56(["The Haunted Gallery, The Haunted Ballroom, The Haunted Library, The Penultimate Fantasy Airship, Cobb's Knob Barracks, The Castle in the Clouds in the Sky (Basement), The Castle in the Clouds in the Sky (Ground Floor), The Castle in the Clouds in the Sky (Top Floor), The Haiku Dungeon, Twin Peak, A Mob of Zeppelin Protesters, The Upper Chamber"])));
var yellowRaySafelist = $locations(_templateObject1725 || (_templateObject1725 = _taggedTemplateLiteral56(["The Haunted Gallery, The Haunted Ballroom, The Haunted Library, Cobb's Knob Barracks, The Castle in the Clouds in the Sky (Basement), The Castle in the Clouds in the Sky (Ground Floor), The Haiku Dungeon, Twin Peak, A Mob of Zeppelin Protesters, The Upper Chamber"])));
function canWanderTypeBackup(location) {
  return !backupSkiplist.includes(location) && (location.combatPercent >= 100 || backupSafelist.includes(location));
}
function canWanderTypeFreeFight(location) {
  if (location === $location(_templateObject1825 || (_templateObject1825 = _taggedTemplateLiteral56(["The Fun-Guy Mansion"]))) && get("funGuyMansionKills", 0) >= 100) {
    return false;
  }
  return !backupSkiplist.includes(location) && (location.combatPercent >= 100 || yellowRaySafelist.includes(location));
}
var wandererSkiplist = $locations(_templateObject1925 || (_templateObject1925 = _taggedTemplateLiteral56(["The Batrat and Ratbat Burrow, Guano Junction, The Beanbat Chamber, A-Boo Peak, The Mouldering Mansion, The Rogue Windmill, The Stately Pleasure Dome"])));
function canWanderTypeWander(location) {
  return !wandererSkiplist.includes(location) && location.wanderers;
}
function canWander(location, type) {
  if (underwater(location))
    return false;
  switch (type) {
    case "backup":
      return canWanderTypeBackup(location);
    case "freefight":
    case "yellow ray":
      return canWanderTypeFreeFight(location);
    case "wanderer":
      return canWanderTypeWander(location);
  }
}
var WandererTarget = /* @__PURE__ */ _createClass22(
  /**
   * Process for determining where to put a wanderer to extract additional value from it
   * @param name name of this wanderer - for documentation/logging purposes
   * @param location returns the location to adventure to target this; null only if something goes wrong
   * @param value the expected additional value of putting a single wanderer-fight into the zone for this
   * @param prepareTurn attempt to set up, spending meat and or items as necessary
   */
  function WandererTarget2(name, location, value) {
    var prepareTurn = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : function() {
      return true;
    };
    _classCallCheck22(this, WandererTarget2);
    _defineProperty25(this, "name", void 0);
    _defineProperty25(this, "value", void 0);
    _defineProperty25(this, "location", void 0);
    _defineProperty25(this, "prepareTurn", void 0);
    this.name = name;
    this.value = value;
    this.location = location;
    this.prepareTurn = prepareTurn;
  }
);
function defaultFactory() {
  return [new WandererTarget("Default", $location(_templateObject2025 || (_templateObject2025 = _taggedTemplateLiteral56(["The Haunted Kitchen"]))), 0)];
}
var WanderingSources = [{
  name: "CMG",
  item: $item(_templateObject2138 || (_templateObject2138 = _taggedTemplateLiteral56(["cursed magnifying glass"]))),
  max: 3,
  property: "_voidFreeFights",
  type: "wanderer"
}, {
  name: "Voter",
  item: $item(_templateObject2225 || (_templateObject2225 = _taggedTemplateLiteral56(['"I Voted!" sticker']))),
  max: 3,
  property: "_voteFreeFights",
  type: "wanderer"
}, {
  name: "Voter",
  item: $item(_templateObject2324 || (_templateObject2324 = _taggedTemplateLiteral56(['"I Voted!" sticker']))),
  max: 3,
  property: "_voteFreeFights",
  type: "wanderer"
}, {
  name: "Backup",
  item: $item(_templateObject2424 || (_templateObject2424 = _taggedTemplateLiteral56(["backup camera"]))),
  max: 11,
  property: "_backUpUses",
  type: "backup"
}];
function wandererTurnsAvailableToday(location) {
  var canWanderCache = {
    backup: canWander(location, "backup"),
    wanderer: canWander(location, "wanderer"),
    "yellow ray": canWander(location, "yellow ray"),
    freefight: canWander(location, "freefight")
  };
  var digitize = canWanderCache["backup"] ? digitizedMonstersRemaining() : 0;
  var pigSkinnerRay = canWanderCache["backup"] && have($skill(_templateObject2524 || (_templateObject2524 = _taggedTemplateLiteral56(["Free-For-All"])))) ? Math.floor(estimatedGarboTurns() / 25) : 0;
  var yellowRayCooldown = have($skill(_templateObject2624 || (_templateObject2624 = _taggedTemplateLiteral56(["Fondeluge"])))) ? 50 : 100;
  var yellowRay = canWanderCache["yellow ray"] ? Math.floor(estimatedGarboTurns() / yellowRayCooldown) : 0;
  var wanderers = sum(WanderingSources, function(source) {
    return canWanderCache[source.type] && have(source.item) ? clamp(get(source.property), 0, source.max) : 0;
  });
  return digitize + pigSkinnerRay + yellowRay + wanderers;
}

// src/wanderer/guzzlr.ts
var _templateObject600;
function _taggedTemplateLiteral57(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function considerAbandon(locationSkiplist) {
  var location = Guzzlr_exports.getLocation();
  var remaningTurns = Math.ceil((100 - get("guzzlrDeliveryProgress")) / (10 - get("_guzzlrDeliveries")));
  (0, import_kolmafia66.print)("Got guzzlr quest ".concat(Guzzlr_exports.getTier(), " at ").concat(Guzzlr_exports.getLocation(), " with remaining turns ").concat(remaningTurns));
  if (Guzzlr_exports.canAbandon() && // consider abandoning
  (!location || // if mafia failed to track the location correctly
  locationSkiplist.includes(location) || !canAdventureOrUnlock(location) || // or the zone is marked as "generally cannot adv"
  globalOptions.ascend && wandererTurnsAvailableToday(location) < remaningTurns)) {
    (0, import_kolmafia66.print)("Abandoning...");
    Guzzlr_exports.abandon();
  }
}
function acceptGuzzlrQuest(locationSkiplist) {
  if (Guzzlr_exports.isQuestActive())
    considerAbandon(locationSkiplist);
  while (!Guzzlr_exports.isQuestActive()) {
    (0, import_kolmafia66.print)("Picking a guzzlr quest");
    if (Guzzlr_exports.canPlatinum() && !(get("garbo_prioritizeCappingGuzzlr", false) && Guzzlr_exports.haveFullPlatinumBonus())) {
      Guzzlr_exports.acceptPlatinum();
    } else if (Guzzlr_exports.canGold() && (Guzzlr_exports.haveFullBronzeBonus() || !Guzzlr_exports.haveFullGoldBonus())) {
      Guzzlr_exports.acceptGold();
    } else {
      Guzzlr_exports.acceptBronze();
    }
    considerAbandon(locationSkiplist);
  }
}
function guzzlrValue(tier) {
  var progressPerTurn = 100 / (10 - get("_guzzlrDeliveries"));
  var buckValue = garboValue($item(_templateObject600 || (_templateObject600 = _taggedTemplateLiteral57(["Guzzlrbuck"]))));
  switch (tier) {
    case null:
      return 0;
    case "bronze":
      return 3 * buckValue / progressPerTurn;
    case "gold":
      return 6 * buckValue / progressPerTurn;
    case "platinum":
      return 21.5 * buckValue / progressPerTurn;
  }
}
function guzzlrFactory(_type, locationSkiplist) {
  if (Guzzlr_exports.have()) {
    acceptGuzzlrQuest(locationSkiplist);
    var location = Guzzlr_exports.getLocation();
    if (location !== null) {
      var guzzlrBooze = Guzzlr_exports.getTier() === "platinum" ? Guzzlr_exports.getCheapestPlatinumCocktail() : Guzzlr_exports.getBooze();
      return guzzlrBooze ? [new WandererTarget("Guzzlr", location, guzzlrValue(Guzzlr_exports.getTier()) - (0, import_kolmafia66.mallPrice)(guzzlrBooze), function() {
        if (!guzzlrBooze) {
          return false;
        }
        if (!have(guzzlrBooze)) {
          var fancy = guzzlrBooze && (0, import_kolmafia66.craftType)(guzzlrBooze).includes("fancy");
          if (guzzlrBooze && (!fancy || fancy && freeCrafts() > 0)) {
            (0, import_kolmafia66.retrieveItem)(guzzlrBooze);
          } else if (guzzlrBooze) {
            (0, import_kolmafia66.buy)(1, guzzlrBooze, guzzlrValue(Guzzlr_exports.getTier()));
          }
        }
        return have(guzzlrBooze);
      })] : [];
    }
  }
  return [];
}

// src/wanderer/lovebugs.ts
var _templateObject601;
var _templateObject2139;
var _templateObject3124;
var _templateObject4106;
var _templateObject5101;
var _templateObject667;
function _taggedTemplateLiteral58(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var LovebugTargets = [
  // exclude barf mountain because we spend most of our turns there anyway
  {
    element: "cold",
    location: $location(_templateObject601 || (_templateObject601 = _taggedTemplateLiteral58(["VYKEA"]))),
    currency: $item(_templateObject2139 || (_templateObject2139 = _taggedTemplateLiteral58(["Wal-Mart gift certificate"])))
  },
  {
    element: "sleaze",
    location: $location(_templateObject3124 || (_templateObject3124 = _taggedTemplateLiteral58(["The Fun-Guy Mansion"]))),
    currency: $item(_templateObject4106 || (_templateObject4106 = _taggedTemplateLiteral58(["Beach Buck"])))
  },
  {
    element: "spooky",
    location: $location(_templateObject5101 || (_templateObject5101 = _taggedTemplateLiteral58(["The Deep Dark Jungle"]))),
    currency: $item(_templateObject667 || (_templateObject667 = _taggedTemplateLiteral58(["Coinspiracy"])))
  }
];
function lovebugsFactory() {
  if (get("lovebugsUnlocked")) {
    return LovebugTargets.filter(function(t) {
      return realmAvailable(t.element);
    }).map(function(t) {
      return new WandererTarget("Lovebugs ".concat(t.location), t.location, garboValue(t.currency) * 0.05);
    });
  }
  return [];
}

// src/wanderer/freefight.ts
var import_kolmafia71 = require("kolmafia");

// src/familiar/freeFightFamiliar.ts
var import_kolmafia70 = require("kolmafia");

// src/familiar/constantValueFamiliars.ts
var import_kolmafia67 = require("kolmafia");
var _templateObject608;
var _templateObject2140;
var _templateObject3125;
var _templateObject4107;
var _templateObject5102;
var _templateObject668;
var _templateObject755;
var _templateObject848;
var _templateObject941;
var _templateObject1036;
var _templateObject1133;
var _templateObject1230;
var _templateObject1330;
var _templateObject1428;
var _templateObject1526;
var _templateObject1626;
var _templateObject1726;
var _templateObject1826;
var _templateObject1926;
var _templateObject2026;
var _templateObject2141;
var _templateObject2226;
var _templateObject2325;
var _templateObject2425;
var _templateObject2525;
var _templateObject2625;
function _toConsumableArray32(arr) {
  return _arrayWithoutHoles32(arr) || _iterableToArray32(arr) || _unsupportedIterableToArray46(arr) || _nonIterableSpread32();
}
function _nonIterableSpread32() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray46(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray46(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray46(o, minLen);
}
function _iterableToArray32(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles32(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray46(arr);
}
function _arrayLikeToArray46(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral59(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var bestAlternative = get2("Meat Drop", $item(_templateObject608 || (_templateObject608 = _taggedTemplateLiteral59(["amulet coin"]))));
var standardFamiliars = [{
  familiar: $familiar(_templateObject2140 || (_templateObject2140 = _taggedTemplateLiteral59(["Obtuse Angel"]))),
  value: function() {
    return 0.02 * garboValue($item(_templateObject3125 || (_templateObject3125 = _taggedTemplateLiteral59(["time's arrow"]))));
  }
}, {
  familiar: $familiar(_templateObject4107 || (_templateObject4107 = _taggedTemplateLiteral59(["Stocking Mimic"]))),
  value: function() {
    return garboAverageValue.apply(void 0, _toConsumableArray32($items(_templateObject5102 || (_templateObject5102 = _taggedTemplateLiteral59(["Polka Pop, BitterSweetTarts, Piddles"]))))) / 6 - // We can't equip an amulet coin if we equip the bag of many confections
    bestAlternative * baseMeat / 100 + (1 / 3 + (have($effect(_templateObject668 || (_templateObject668 = _taggedTemplateLiteral59(["Jingle Jangle Jingle"])))) ? 0.1 : 0)) * ((0, import_kolmafia67.familiarWeight)($familiar(_templateObject755 || (_templateObject755 = _taggedTemplateLiteral59(["Stocking Mimic"])))) + (0, import_kolmafia67.weightAdjustment)());
  }
}, {
  familiar: $familiar(_templateObject848 || (_templateObject848 = _taggedTemplateLiteral59(["Shorter-Order Cook"]))),
  value: function() {
    return garboAverageValue.apply(void 0, _toConsumableArray32($items(_templateObject941 || (_templateObject941 = _taggedTemplateLiteral59(["short beer, short stack of pancakes, short stick of butter, short glass of water, short white"]))))) / 11;
  }
  // 9 with blue plate
}, {
  familiar: $familiar(_templateObject1036 || (_templateObject1036 = _taggedTemplateLiteral59(["Robortender"]))),
  value: function() {
    return garboValue($item(_templateObject1133 || (_templateObject1133 = _taggedTemplateLiteral59(["elemental sugarcube"])))) / 5 + (Robortender_exports.currentDrinks().includes($item(_templateObject1230 || (_templateObject1230 = _taggedTemplateLiteral59(["Feliz Navidad"])))) ? get("garbo_felizValue", 0) * 0.25 : 0) + (Robortender_exports.currentDrinks().includes($item(_templateObject1330 || (_templateObject1330 = _taggedTemplateLiteral59(["Newark"])))) ? get("garbo_newarkValue", 0) * 0.25 : 0);
  }
}, {
  familiar: $familiar(_templateObject1428 || (_templateObject1428 = _taggedTemplateLiteral59(["Twitching Space Critter"]))),
  // Item is ludicrously overvalued and incredibly low-volume.
  // We can remove this cap once the price reaches a lower equilibrium
  // we probably won't, but we can.
  value: function() {
    return Math.min(garboValue($item(_templateObject1526 || (_templateObject1526 = _taggedTemplateLiteral59(["twitching space egg"])))) * 2e-4, 690);
  }
}, {
  familiar: $familiar(_templateObject1626 || (_templateObject1626 = _taggedTemplateLiteral59(["Hobo Monkey"]))),
  value: function() {
    return 75;
  }
}, {
  familiar: $familiar(_templateObject1726 || (_templateObject1726 = _taggedTemplateLiteral59(["Trick-or-Treating Tot"]))),
  // This is the value of getting a pirate costume over getting an amulet coin or whatever
  value: function() {
    return have($item(_templateObject1826 || (_templateObject1826 = _taggedTemplateLiteral59(["li'l pirate costume"])))) ? baseMeat * (300 - bestAlternative) / 100 : 0;
  }
}, {
  familiar: $familiar(_templateObject1926 || (_templateObject1926 = _taggedTemplateLiteral59(["Rockin' Robin"]))),
  value: function() {
    return garboValue($item(_templateObject2026 || (_templateObject2026 = _taggedTemplateLiteral59(["robin's egg"])))) / clamp(30 - get("rockinRobinProgress"), 1, 30);
  }
}, {
  familiar: $familiar(_templateObject2141 || (_templateObject2141 = _taggedTemplateLiteral59(["Optimistic Candle"]))),
  value: function() {
    return garboValue($item(_templateObject2226 || (_templateObject2226 = _taggedTemplateLiteral59(["glob of melted wax"])))) / clamp(30 - get("optimisticCandleProgress"), 1, 30);
  }
}, {
  familiar: $familiar(_templateObject2325 || (_templateObject2325 = _taggedTemplateLiteral59(["Garbage Fire"]))),
  value: function() {
    return garboAverageValue.apply(void 0, _toConsumableArray32($items(_templateObject2425 || (_templateObject2425 = _taggedTemplateLiteral59(["burning newspaper, extra-toasted half sandwich, mulled hobo wine"]))))) / clamp(30 - get("garbageFireProgress"), 1, 30);
  }
}, {
  familiar: $familiar(_templateObject2525 || (_templateObject2525 = _taggedTemplateLiteral59(["Cookbookbat"]))),
  value: function() {
    return 3 * garboAverageValue.apply(void 0, _toConsumableArray32($items(_templateObject2625 || (_templateObject2625 = _taggedTemplateLiteral59(["Vegetable of Jarlsberg, Yeast of Boris, St. Sneaky Pete's Whey"]))))) / 11;
  }
}];
function getConstantValueFamiliars() {
  return standardFamiliars.filter(function(_ref) {
    var familiar4 = _ref.familiar;
    return have(familiar4);
  }).map(function(_ref2) {
    var familiar4 = _ref2.familiar, value = _ref2.value;
    return {
      familiar: familiar4,
      expectedValue: value(),
      leprechaunMultiplier: findLeprechaunMultiplier(familiar4),
      limit: "none"
    };
  });
}

// src/familiar/dropFamiliars.ts
var import_kolmafia68 = require("kolmafia");
var _templateObject609;
var _templateObject2143;
var _templateObject3126;
var _templateObject4108;
var _templateObject5103;
var _templateObject669;
var _templateObject756;
var _templateObject849;
var _templateObject944;
var _templateObject1037;
var _templateObject1134;
var _templateObject1231;
var _templateObject1331;
var _templateObject1429;
var _templateObject1527;
var _templateObject1627;
var _templateObject1727;
var _templateObject1827;
var _templateObject1927;
var _templateObject2027;
var _templateObject2144;
var _templateObject2227;
var _templateObject2326;
var _templateObject2426;
var _templateObject2526;
var _templateObject2626;
var _templateObject2723;
var _templateObject2821;
var _templateObject2921;
var _templateObject3019;
var _templateObject3127;
var _templateObject3221;
var _templateObject3320;
var _templateObject3419;
var _templateObject3518;
var _templateObject3616;
var _templateObject3715;
var _templateObject3814;
var _templateObject3913;
var _templateObject4013;
var _templateObject4116;
var _templateObject4216;
var _templateObject4316;
var _templateObject4414;
var _templateObject4513;
var _templateObject4611;
var _templateObject4711;
var _templateObject4811;
var _templateObject4911;
var _templateObject5011;
var _templateObject5116;
var _templateObject5216;
var _templateObject5315;
var _templateObject5413;
var _templateObject5512;
var _templateObject5611;
var _templateObject5710;
var _templateObject5810;
var _templateObject5910;
function _taggedTemplateLiteral60(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray33(arr) {
  return _arrayWithoutHoles33(arr) || _iterableToArray33(arr) || _unsupportedIterableToArray47(arr) || _nonIterableSpread33();
}
function _nonIterableSpread33() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray47(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray47(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray47(o, minLen);
}
function _iterableToArray33(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles33(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray47(arr);
}
function _arrayLikeToArray47(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function expectedTurnsValue(expected8, index) {
  return Array.isArray(expected8) ? expected8[index] : expected8(index);
}
function dropValue(drop) {
  return drop instanceof import_kolmafia68.Item ? garboValue(drop) : garboAverageValue.apply(void 0, _toConsumableArray33(drop));
}
function valueStandardDropFamiliar(_ref) {
  var _additionalValue;
  var familiar4 = _ref.familiar, expected8 = _ref.expected, drop = _ref.drop, additionalValue = _ref.additionalValue;
  var expectedTurns = expectedTurnsValue(expected8, familiar4.dropsToday) || Infinity;
  var expectedValue = dropValue(drop) / expectedTurns + ((_additionalValue = additionalValue === null || additionalValue === void 0 ? void 0 : additionalValue()) !== null && _additionalValue !== void 0 ? _additionalValue : 0);
  return {
    familiar: familiar4,
    expectedValue: expectedValue,
    leprechaunMultiplier: findLeprechaunMultiplier(familiar4),
    limit: "drops"
  };
}
var rotatingFamiliars = [{
  familiar: $familiar(_templateObject609 || (_templateObject609 = _taggedTemplateLiteral60(["Fist Turkey"]))),
  expected: [3.91, 4.52, 4.52, 5.29, 5.29],
  drop: $item(_templateObject2143 || (_templateObject2143 = _taggedTemplateLiteral60(["Ambitious Turkey"])))
}, {
  familiar: $familiar(_templateObject3126 || (_templateObject3126 = _taggedTemplateLiteral60(["Llama Lama"]))),
  expected: [3.42, 3.91, 4.52, 5.29, 5.29],
  drop: $item(_templateObject4108 || (_templateObject4108 = _taggedTemplateLiteral60(["llama lama gong"])))
}, {
  familiar: $familiar(_templateObject5103 || (_templateObject5103 = _taggedTemplateLiteral60(["Astral Badger"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject669 || (_templateObject669 = _taggedTemplateLiteral60(["astral mushroom"])))
}, {
  familiar: $familiar(_templateObject756 || (_templateObject756 = _taggedTemplateLiteral60(["Li'l Xenomorph"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject849 || (_templateObject849 = _taggedTemplateLiteral60(["transporter transponder"])))
}, {
  familiar: $familiar(_templateObject944 || (_templateObject944 = _taggedTemplateLiteral60(["Rogue Program"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject1037 || (_templateObject1037 = _taggedTemplateLiteral60(["Game Grid token"])))
}, {
  familiar: $familiar(_templateObject1134 || (_templateObject1134 = _taggedTemplateLiteral60(["Bloovian Groose"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject1231 || (_templateObject1231 = _taggedTemplateLiteral60(["groose grease"])))
}, {
  familiar: $familiar(_templateObject1331 || (_templateObject1331 = _taggedTemplateLiteral60(["Baby Sandworm"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject1429 || (_templateObject1429 = _taggedTemplateLiteral60(["agua de vida"])))
}, {
  familiar: $familiar(_templateObject1527 || (_templateObject1527 = _taggedTemplateLiteral60(["Green Pixie"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject1627 || (_templateObject1627 = _taggedTemplateLiteral60(["tiny bottle of absinthe"])))
}, {
  familiar: $familiar(_templateObject1727 || (_templateObject1727 = _taggedTemplateLiteral60(["Blavious Kloop"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject1827 || (_templateObject1827 = _taggedTemplateLiteral60(["devilish folio"])))
}, {
  familiar: $familiar(_templateObject1927 || (_templateObject1927 = _taggedTemplateLiteral60(["Galloping Grill"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject2027 || (_templateObject2027 = _taggedTemplateLiteral60(["hot ashes"])))
}, {
  familiar: $familiar(_templateObject2144 || (_templateObject2144 = _taggedTemplateLiteral60(["Grim Brother"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject2227 || (_templateObject2227 = _taggedTemplateLiteral60(["grim fairy tale"])))
}, {
  familiar: $familiar(_templateObject2326 || (_templateObject2326 = _taggedTemplateLiteral60(["Golden Monkey"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject2426 || (_templateObject2426 = _taggedTemplateLiteral60(["powdered gold"])))
}, {
  familiar: $familiar(_templateObject2526 || (_templateObject2526 = _taggedTemplateLiteral60(["Unconscious Collective"]))),
  expected: [3.03, 3.42, 3.91, 4.52, 5.29],
  drop: $item(_templateObject2626 || (_templateObject2626 = _taggedTemplateLiteral60(["Unconscious Collective Dream Jar"])))
}, {
  familiar: $familiar(_templateObject2723 || (_templateObject2723 = _taggedTemplateLiteral60(["Ms. Puck Man"]))),
  expected: Array($familiar(_templateObject2821 || (_templateObject2821 = _taggedTemplateLiteral60(["Ms. Puck Man"]))).dropsLimit).fill(12.85),
  drop: $item(_templateObject2921 || (_templateObject2921 = _taggedTemplateLiteral60(["power pill"]))),
  additionalValue: function() {
    return garboValue($item(_templateObject3019 || (_templateObject3019 = _taggedTemplateLiteral60(["yellow pixel"]))));
  }
}, {
  familiar: $familiar(_templateObject3127 || (_templateObject3127 = _taggedTemplateLiteral60(["Puck Man"]))),
  expected: Array($familiar(_templateObject3221 || (_templateObject3221 = _taggedTemplateLiteral60(["Puck Man"]))).dropsLimit).fill(12.85),
  drop: $item(_templateObject3320 || (_templateObject3320 = _taggedTemplateLiteral60(["power pill"]))),
  additionalValue: function() {
    return garboValue($item(_templateObject3419 || (_templateObject3419 = _taggedTemplateLiteral60(["yellow pixel"]))));
  }
}, {
  familiar: $familiar(_templateObject3518 || (_templateObject3518 = _taggedTemplateLiteral60(["Adventurous Spelunker"]))),
  expected: [7],
  drop: $item(_templateObject3616 || (_templateObject3616 = _taggedTemplateLiteral60(["Tales of Spelunking"])))
}, {
  familiar: $familiar(_templateObject3715 || (_templateObject3715 = _taggedTemplateLiteral60(["Angry Jung Man"]))),
  expected: [30],
  drop: $item(_templateObject3814 || (_templateObject3814 = _taggedTemplateLiteral60(["psychoanalytic jar"])))
}, {
  familiar: $familiar(_templateObject3913 || (_templateObject3913 = _taggedTemplateLiteral60(["Grimstone Golem"]))),
  expected: [45],
  drop: $item(_templateObject4013 || (_templateObject4013 = _taggedTemplateLiteral60(["grimstone mask"])))
}, {
  familiar: $familiar(_templateObject4116 || (_templateObject4116 = _taggedTemplateLiteral60(["Cookbookbat"]))),
  expected: [33],
  drop: [$item(_templateObject4216 || (_templateObject4216 = _taggedTemplateLiteral60(["Recipe of Before Yore: Deep Dish of Legend"]))), $item(_templateObject4316 || (_templateObject4316 = _taggedTemplateLiteral60(["Recipe of Before Yore: Pizza of Legend"]))), $item(_templateObject4414 || (_templateObject4414 = _taggedTemplateLiteral60(["Recipe of Before Yore: Calzone of Legend"]))), $item(_templateObject4513 || (_templateObject4513 = _taggedTemplateLiteral60(["Recipe of Before Yore: plain calzone"]))), $item(_templateObject4611 || (_templateObject4611 = _taggedTemplateLiteral60(["Recipe of Before Yore: roasted vegetable focaccia"]))), $item(_templateObject4711 || (_templateObject4711 = _taggedTemplateLiteral60(["Recipe of Before Yore: baked veggie ricotta"]))), $item(_templateObject4811 || (_templateObject4811 = _taggedTemplateLiteral60(["Recipe of Before Yore: roasted vegetable of J."]))), $item(_templateObject4911 || (_templateObject4911 = _taggedTemplateLiteral60(["Recipe of Before Yore: Pete's rich ricotta"]))), $item(_templateObject5011 || (_templateObject5011 = _taggedTemplateLiteral60(["Recipe of Before Yore: Boris's bread"]))), $item(_templateObject5116 || (_templateObject5116 = _taggedTemplateLiteral60(["Recipe of Before Yore: Boris's beer"]))), $item(_templateObject5216 || (_templateObject5216 = _taggedTemplateLiteral60(["Recipe of Before Yore: honey bun of Boris"]))), $item(_templateObject5315 || (_templateObject5315 = _taggedTemplateLiteral60(["Recipe of Before Yore: ratatouille de Jarlsberg"]))), $item(_templateObject5413 || (_templateObject5413 = _taggedTemplateLiteral60(["Recipe of Before Yore: Jarlsberg's vegetable soup"]))), $item(_templateObject5512 || (_templateObject5512 = _taggedTemplateLiteral60(["Recipe of Before Yore: Pete's wily whey bar"]))), $item(_templateObject5611 || (_templateObject5611 = _taggedTemplateLiteral60(["Recipe of Before Yore: St. Pete's sneaky smoothie"])))],
  additionalValue: function() {
    return 3 * garboAverageValue.apply(void 0, _toConsumableArray33($items(_templateObject5710 || (_templateObject5710 = _taggedTemplateLiteral60(["Vegetable of Jarlsberg, Yeast of Boris, St. Sneaky Pete's Whey"]))))) / 11;
  }
}, {
  familiar: $familiar(_templateObject5810 || (_templateObject5810 = _taggedTemplateLiteral60(["Hobo in Sheep's Clothing"]))),
  expected: function(i) {
    return 10 * i + 10;
  },
  // faster with half-height cigar
  drop: $item(_templateObject5910 || (_templateObject5910 = _taggedTemplateLiteral60(["grubby wool"])))
}];
function getDropFamiliars() {
  return rotatingFamiliars.map(valueStandardDropFamiliar).filter(function(_ref2) {
    var familiar4 = _ref2.familiar, expectedValue = _ref2.expectedValue, leprechaunMultiplier = _ref2.leprechaunMultiplier;
    return have(familiar4) && (expectedValue || leprechaunMultiplier);
  });
}
function getAllDrops(fam2) {
  var target = rotatingFamiliars.find(function(_ref3) {
    var familiar4 = _ref3.familiar;
    return familiar4 === fam2;
  });
  if (!have(fam2) || !target)
    return [];
  var expected8 = target.expected, drop = target.drop, additionalValue = target.additionalValue;
  var current = fam2.dropsToday;
  var returnValue = [];
  var length = Array.isArray(expected8) ? expected8.length : 11;
  for (var i = current; i < length; i++) {
    var _additionalValue2;
    var turns2 = expectedTurnsValue(target.expected, i);
    returnValue.push({
      expectedValue: dropValue(drop) / turns2 + ((_additionalValue2 = additionalValue === null || additionalValue === void 0 ? void 0 : additionalValue()) !== null && _additionalValue2 !== void 0 ? _additionalValue2 : 0),
      expectedTurns: turns2
    });
  }
  return returnValue;
}

// src/familiar/experienceFamiliars.ts
var _templateObject670;
var _templateObject2145;
var _templateObject3128;
function _taggedTemplateLiteral61(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var experienceFamiliars = [{
  familiar: $familiar(_templateObject670 || (_templateObject670 = _taggedTemplateLiteral61(["Pocket Professor"]))),
  used: "_thesisDelivered",
  useValue: 11 * get("valueOfAdventure"),
  baseExp: 200
}, {
  familiar: $familiar(_templateObject2145 || (_templateObject2145 = _taggedTemplateLiteral61(["Grey Goose"]))),
  used: "_meatifyMatterUsed",
  useValue: Math.pow(15, 4),
  baseExp: 25
}];
function valueExperienceFamiliar(_ref) {
  var familiar4 = _ref.familiar, useValue = _ref.useValue, baseExp = _ref.baseExp;
  var currentExp = familiar4.experience || (have($familiar(_templateObject3128 || (_templateObject3128 = _taggedTemplateLiteral61(["Shorter-Order Cook"])))) ? 100 : 0);
  var experienceNeeded = 400 - (globalOptions.ascend ? currentExp : baseExp);
  var estimatedExperience = 12;
  return {
    familiar: familiar4,
    expectedValue: useValue / (experienceNeeded / estimatedExperience),
    leprechaunMultiplier: findLeprechaunMultiplier(familiar4),
    limit: "experience"
  };
}
function getExperienceFamiliars() {
  return experienceFamiliars.filter(function(_ref2) {
    var used = _ref2.used, familiar4 = _ref2.familiar;
    return have(familiar4) && !get(used) && familiar4.experience < 400;
  }).map(valueExperienceFamiliar);
}
function getExperienceFamiliarLimit(fam2) {
  var target = experienceFamiliars.find(function(_ref3) {
    var familiar4 = _ref3.familiar;
    return familiar4 === fam2;
  });
  if (!have(fam2) || !target)
    return 0;
  return (400 - fam2.experience) / 5;
}

// src/familiar/meatFamiliar.ts
var import_kolmafia69 = require("kolmafia");
var _templateObject671;
var _templateObject2146;
var _templateObject3129;
function _taggedTemplateLiteral62(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var fam;
function findBestLeprechauns() {
  var validFamiliars = import_kolmafia69.Familiar.all().filter(function(f) {
    return have(f) && f !== $familiar(_templateObject671 || (_templateObject671 = _taggedTemplateLiteral62(["Ghost of Crimbo Commerce"])));
  });
  validFamiliars.sort(function(a, b) {
    return findLeprechaunMultiplier(b) - findLeprechaunMultiplier(a);
  });
  var bestLepMult = findLeprechaunMultiplier(validFamiliars[0]);
  var firstBadLeprechaun = validFamiliars.findIndex(function(f) {
    return findLeprechaunMultiplier(f) < bestLepMult;
  });
  if (firstBadLeprechaun === -1)
    return validFamiliars;
  return validFamiliars.slice(0, firstBadLeprechaun);
}
function findBestLeprechaun() {
  return maxBy(findBestLeprechauns(), findFairyMultiplier);
}
function setBestLeprechaunAsMeatFamiliar() {
  fam = findBestLeprechaun();
}
function meatFamiliar() {
  if (!fam) {
    if (have($familiar(_templateObject2146 || (_templateObject2146 = _taggedTemplateLiteral62(["Robortender"]))))) {
      fam = $familiar(_templateObject3129 || (_templateObject3129 = _taggedTemplateLiteral62(["Robortender"])));
    } else {
      setBestLeprechaunAsMeatFamiliar();
    }
  }
  return fam;
}

// src/familiar/freeFightFamiliar.ts
var _templateObject676;
var _templateObject2147;
var _templateObject3130;
var _templateObject4109;
var _templateObject5104;
var _templateObject677;
var _templateObject757;
var _templateObject850;
var _templateObject945;
function _toConsumableArray34(arr) {
  return _arrayWithoutHoles34(arr) || _iterableToArray34(arr) || _unsupportedIterableToArray48(arr) || _nonIterableSpread34();
}
function _nonIterableSpread34() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray48(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray48(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray48(o, minLen);
}
function _iterableToArray34(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles34(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray48(arr);
}
function _arrayLikeToArray48(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function ownKeys12(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread12(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys12(Object(source), true).forEach(function(key) {
      _defineProperty26(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys12(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty26(obj, key, value) {
  key = _toPropertyKey29(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey29(arg) {
  var key = _toPrimitive29(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive29(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _taggedTemplateLiteral63(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var DEFAULT_MENU_OPTIONS = {
  canChooseMacro: true,
  location: $location(_templateObject676 || (_templateObject676 = _taggedTemplateLiteral63(["none"]))),
  extraFamiliars: [],
  includeExperienceFamiliars: true,
  allowAttackFamiliars: true
};
function menu2() {
  var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var _DEFAULT_MENU_OPTIONS = _objectSpread12(_objectSpread12({}, DEFAULT_MENU_OPTIONS), options), includeExperienceFamiliars = _DEFAULT_MENU_OPTIONS.includeExperienceFamiliars, canChooseMacro = _DEFAULT_MENU_OPTIONS.canChooseMacro, location = _DEFAULT_MENU_OPTIONS.location, extraFamiliars = _DEFAULT_MENU_OPTIONS.extraFamiliars, allowAttackFamiliars = _DEFAULT_MENU_OPTIONS.allowAttackFamiliars;
  var familiarMenu = [].concat(_toConsumableArray34(getConstantValueFamiliars()), _toConsumableArray34(getDropFamiliars()), _toConsumableArray34(includeExperienceFamiliars ? getExperienceFamiliars() : []), _toConsumableArray34(extraFamiliars));
  if (canChooseMacro && (0, import_kolmafia70.myInebriety)() <= (0, import_kolmafia70.inebrietyLimit)()) {
    if (timeToMeatify()) {
      familiarMenu.push({
        familiar: $familiar(_templateObject2147 || (_templateObject2147 = _taggedTemplateLiteral63(["Grey Goose"]))),
        expectedValue: Math.pow((Math.max((0, import_kolmafia70.familiarWeight)($familiar(_templateObject3130 || (_templateObject3130 = _taggedTemplateLiteral63(["Grey Goose"])))) - 5), 0), 4),
        leprechaunMultiplier: 0,
        limit: "experience"
      });
    }
    if (canOpenRedPresent()) {
      familiarMenu.push({
        familiar: $familiar(_templateObject4109 || (_templateObject4109 = _taggedTemplateLiteral63(["Crimbo Shrub"]))),
        expectedValue: 2500,
        leprechaunMultiplier: 0,
        limit: "special"
      });
    }
    if (location.zone === "Dinseylandfill" && have($familiar(_templateObject5104 || (_templateObject5104 = _taggedTemplateLiteral63(["Space Jellyfish"]))))) {
      familiarMenu.push({
        familiar: $familiar(_templateObject677 || (_templateObject677 = _taggedTemplateLiteral63(["Space Jellyfish"]))),
        expectedValue: garboValue($item(_templateObject757 || (_templateObject757 = _taggedTemplateLiteral63(["stench jelly"])))) / (get("_spaceJellyfishDrops") < 5 ? get("_spaceJellyfishDrops") + 1 : 20),
        leprechaunMultiplier: 0,
        limit: "special"
      });
    }
  }
  var meatFam = meatFamiliar();
  if (!familiarMenu.some(function(_ref) {
    var familiar4 = _ref.familiar;
    return familiar4 === meatFam;
  })) {
    familiarMenu.push({
      familiar: meatFam,
      expectedValue: 0,
      leprechaunMultiplier: findLeprechaunMultiplier(meatFam),
      limit: "none"
    });
  }
  if (!allowAttackFamiliars) {
    return familiarMenu.filter(function(fam2) {
      return !(fam2.familiar.physicalDamage || fam2.familiar.elementalDamage);
    });
  }
  return familiarMenu;
}
function getAllJellyfishDrops() {
  if (!have($familiar(_templateObject850 || (_templateObject850 = _taggedTemplateLiteral63(["Space Jellyfish"])))))
    return [{
      expectedValue: 0,
      turnsAtValue: 0
    }];
  var current = get("_spaceJellyfishDrops");
  var returnValue = [];
  for (var dropNumber = clamp(current + 1, 0, 6); dropNumber <= 6; dropNumber++) {
    returnValue.push({
      expectedValue: garboValue($item(_templateObject945 || (_templateObject945 = _taggedTemplateLiteral63(["stench jelly"])))) / (dropNumber > 5 ? 20 : dropNumber),
      turnsAtValue: dropNumber > 5 ? Infinity : dropNumber
    });
  }
  return returnValue;
}
function freeFightFamiliarData() {
  var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var compareFamiliars = function(a, b) {
    if (a.expectedValue === b.expectedValue) {
      return a.leprechaunMultiplier > b.leprechaunMultiplier ? a : b;
    }
    return a.expectedValue > b.expectedValue ? a : b;
  };
  return menu2(options).reduce(compareFamiliars);
}
function freeFightFamiliar() {
  var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  return freeFightFamiliarData(options).familiar;
}

// src/wanderer/freefight.ts
function _toConsumableArray35(arr) {
  return _arrayWithoutHoles35(arr) || _iterableToArray35(arr) || _unsupportedIterableToArray49(arr) || _nonIterableSpread35();
}
function _nonIterableSpread35() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray35(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles35(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray49(arr);
}
function _createForOfIteratorHelper27(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray49(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray49(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray49(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray49(o, minLen);
}
function _arrayLikeToArray49(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function averageYrValue(location, forceItemDrops) {
  var badAttributes = ["LUCKY", "ULTRARARE", "BOSS"];
  var rates = (0, import_kolmafia71.appearanceRates)(location);
  var monsters = (0, import_kolmafia71.getMonsters)(location).filter(function(m) {
    return !badAttributes.some(function(s) {
      return m.attributes.includes(s);
    }) && rates[m.name] > 0;
  });
  var canDuplicate = SourceTerminal_exports.have() && SourceTerminal_exports.duplicateUsesRemaining() > 0;
  if (monsters.length === 0) {
    return 0;
  } else {
    return sum(monsters, function(m) {
      var items = (0, import_kolmafia71.itemDropsArray)(m).filter(function(drop) {
        return ["", "n"].includes(drop.type);
      });
      var duplicateFactor = canDuplicate && !m.attributes.includes("NOCOPY") ? 2 : 1;
      var meatDrop = clamp((m.minMeat + m.maxMeat) / 2, 0, 1e3);
      var itemDrop = duplicateFactor * sum(items, function(drop) {
        var yrRate = (drop.type === "" && forceItemDrops ? 100 : drop.rate) / 100;
        return yrRate * garboValue(drop.drop, true);
      });
      return itemDrop + meatDrop + bofaValue(m);
    }) / monsters.length;
  }
}
function monsterValues(forceItemDrops) {
  var values = /* @__PURE__ */ new Map();
  var _iterator = _createForOfIteratorHelper27(import_kolmafia71.Location.all().filter(function(l) {
    return canAdventureOrUnlock(l) && !underwater(l);
  })), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var location = _step.value;
      values.set(location, averageYrValue(location, forceItemDrops) + freeFightFamiliarData({
        location: location
      }).expectedValue);
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return values;
}
function freefightFactory(type, locationSkiplist) {
  if (type === "yellow ray" || type === "freefight") {
    var validLocations = import_kolmafia71.Location.all().filter(function(location) {
      return canWander(location, "yellow ray") && canAdventureOrUnlock(location);
    });
    var locationValues = monsterValues(type === "yellow ray");
    var bestZones = /* @__PURE__ */ new Set([maxBy(validLocations, function(l) {
      var _locationValues$get;
      return (_locationValues$get = locationValues.get(l)) !== null && _locationValues$get !== void 0 ? _locationValues$get : 0;
    })]);
    var _iterator2 = _createForOfIteratorHelper27(UnlockableZones), _step2;
    try {
      var _loop = function _loop2() {
        var unlockableZone = _step2.value;
        var extraLocations = import_kolmafia71.Location.all().filter(function(l) {
          return l.zone === unlockableZone.zone && !locationSkiplist.includes(l);
        });
        bestZones.add(maxBy(extraLocations, function(l) {
          var _locationValues$get3;
          return (_locationValues$get3 = locationValues.get(l)) !== null && _locationValues$get3 !== void 0 ? _locationValues$get3 : 0;
        }));
      };
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
        _loop();
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    if (bestZones.size > 0) {
      return _toConsumableArray35(bestZones).map(function(l) {
        var _locationValues$get2;
        return new WandererTarget("Yellow Ray ".concat(l), l, (_locationValues$get2 = locationValues.get(l)) !== null && _locationValues$get2 !== void 0 ? _locationValues$get2 : 0);
      });
    }
  }
  return [];
}

// src/wanderer/index.ts
var _templateObject678;
var _templateObject2148;
var _templateObject3131;
var _templateObject4117;
var _templateObject5105;
var _templateObject679;
var _templateObject758;
var _templateObject851;
var _templateObject946;
var _templateObject1038;
var _templateObject1135;
var _templateObject1233;
var _templateObject1333;
var _templateObject1430;
var _templateObject1528;
var _templateObject1628;
var _templateObject1728;
var _templateObject1828;
var _templateObject1928;
var _templateObject2028;
var _templateObject2149;
var _templateObject2228;
var _templateObject2327;
var _templateObject2427;
var _templateObject2527;
var _templateObject2627;
var _templateObject2724;
function _taggedTemplateLiteral64(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _classCallCheck23(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties23(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey30(descriptor.key), descriptor);
  }
}
function _createClass23(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties23(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties23(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty27(obj, key, value) {
  key = _toPropertyKey30(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey30(arg) {
  var key = _toPrimitive30(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive30(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray36(arr) {
  return _arrayWithoutHoles36(arr) || _iterableToArray36(arr) || _unsupportedIterableToArray50(arr) || _nonIterableSpread36();
}
function _nonIterableSpread36() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray36(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles36(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray50(arr);
}
function _createForOfIteratorHelper28(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray50(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray50(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray50(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray50(o, minLen);
}
function _arrayLikeToArray50(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
var wanderFactories = [defaultFactory, freefightFactory, lovebugsFactory, guzzlrFactory];
function bestWander(type, locationSkiplist, nameSkiplist) {
  var possibleLocations = /* @__PURE__ */ new Map();
  for (var _i = 0, _wanderFactories = wanderFactories; _i < _wanderFactories.length; _i++) {
    var wanderFactory = _wanderFactories[_i];
    var wanderTargets = wanderFactory(type, locationSkiplist);
    var _iterator = _createForOfIteratorHelper28(wanderTargets), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var wanderTarget = _step.value;
        if (!nameSkiplist.includes(wanderTarget.name) && !locationSkiplist.includes(wanderTarget.location) && canWander(wanderTarget.location, type)) {
          var _possibleLocations$ge;
          var wandererLocation = (_possibleLocations$ge = possibleLocations.get(wanderTarget.location)) !== null && _possibleLocations$ge !== void 0 ? _possibleLocations$ge : {
            location: wanderTarget.location,
            targets: [],
            value: 0
          };
          wandererLocation.targets = [].concat(_toConsumableArray36(wandererLocation.targets), [wanderTarget]);
          wandererLocation.value += wanderTarget.value;
          possibleLocations.set(wandererLocation.location, wandererLocation);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  if (possibleLocations.size === 0) {
    throw "Could not determine a wander target!";
  }
  return maxBy(_toConsumableArray36(possibleLocations.values()), "value");
}
function wanderWhere(type) {
  var nameSkiplist = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  var locationSkiplist = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
  var candidate = bestWander(type, locationSkiplist, nameSkiplist);
  var failed = candidate.targets.filter(function(target) {
    return !target.prepareTurn();
  });
  var badLocation = !canAdventureOrUnlock(candidate.location) || !unlock(candidate.location, candidate.value) || !canWander(candidate.location, type) ? [candidate.location] : [];
  if (failed.length > 0 || badLocation.length > 0) {
    return wanderWhere(type, [].concat(_toConsumableArray36(nameSkiplist), _toConsumableArray36(failed.map(function(target) {
      return target.name;
    }))), [].concat(_toConsumableArray36(locationSkiplist), badLocation));
  } else {
    var targets = candidate.targets.map(function(t) {
      return t.name;
    }).join("; ");
    var value = candidate.value.toFixed(2);
    (0, import_kolmafia72.print)("Wandering at ".concat(candidate.location, " for expected value ").concat(value, " (").concat(targets, ")"), HIGHLIGHT);
    return candidate.location;
  }
}
var WandererManager = /* @__PURE__ */ function() {
  function WandererManager2() {
    _classCallCheck23(this, WandererManager2);
    _defineProperty27(this, "quartetChoice", get("lastQuartetRequest") || 4);
    _defineProperty27(this, "unsupportedChoices", /* @__PURE__ */ new Map([
      [$location(_templateObject678 || (_templateObject678 = _taggedTemplateLiteral64(["The Spooky Forest"]))), {
        502: 2,
        505: 2
      }],
      [$location(_templateObject2148 || (_templateObject2148 = _taggedTemplateLiteral64(["Guano Junction"]))), {
        1427: 1
      }],
      [$location(_templateObject3131 || (_templateObject3131 = _taggedTemplateLiteral64(["The Hidden Apartment Building"]))), {
        780: 6,
        1578: 6
      }],
      [$location(_templateObject4117 || (_templateObject4117 = _taggedTemplateLiteral64(["The Black Forest"]))), {
        923: 1,
        924: 1
      }],
      [$location(_templateObject5105 || (_templateObject5105 = _taggedTemplateLiteral64(["LavaCo\u2122 Lamp Factory"]))), {
        1091: 9
      }],
      [$location(_templateObject679 || (_templateObject679 = _taggedTemplateLiteral64(["The Haunted Laboratory"]))), {
        884: 6
      }],
      [$location(_templateObject758 || (_templateObject758 = _taggedTemplateLiteral64(["The Haunted Nursery"]))), {
        885: 6
      }],
      [$location(_templateObject851 || (_templateObject851 = _taggedTemplateLiteral64(["The Haunted Storage Room"]))), {
        886: 6
      }],
      [$location(_templateObject946 || (_templateObject946 = _taggedTemplateLiteral64(["The Haunted Ballroom"]))), {
        106: 3,
        90: this.quartetChoice
      }],
      // Skip, and Choose currently playing song, or skip
      [$location(_templateObject1038 || (_templateObject1038 = _taggedTemplateLiteral64(["The Haunted Library"]))), {
        163: 4,
        888: 4,
        889: 5
      }],
      [$location(_templateObject1135 || (_templateObject1135 = _taggedTemplateLiteral64(["The Haunted Gallery"]))), {
        89: 6,
        91: 2
      }],
      [$location(_templateObject1233 || (_templateObject1233 = _taggedTemplateLiteral64(["The Hidden Park"]))), {
        789: 6
      }],
      [$location(_templateObject1333 || (_templateObject1333 = _taggedTemplateLiteral64(["A Mob of Zeppelin Protesters"]))), {
        1432: 1,
        856: 2,
        857: 2,
        858: 2
      }],
      [$location(_templateObject1430 || (_templateObject1430 = _taggedTemplateLiteral64(["A-Boo Peak"]))), {
        1430: 2
      }],
      [$location(_templateObject1528 || (_templateObject1528 = _taggedTemplateLiteral64(["Sloppy Seconds Diner"]))), {
        919: 6
      }],
      [$location(_templateObject1628 || (_templateObject1628 = _taggedTemplateLiteral64(["VYKEA"]))), {
        1115: 6
      }],
      [$location(_templateObject1728 || (_templateObject1728 = _taggedTemplateLiteral64(["The Castle in the Clouds in the Sky (Basement)"]))), {
        669: 1,
        670: 4,
        671: 4
      }],
      [$location(_templateObject1828 || (_templateObject1828 = _taggedTemplateLiteral64(["The Haunted Bedroom"]))), {
        876: 1,
        // old leather wallet, 500 meat
        877: 1,
        // old coin purse, 500 meat
        878: 1,
        // 400-600 meat
        879: 2,
        // grouchy spirit
        880: 2
        // a dumb 75 meat club
      }],
      [$location(_templateObject1928 || (_templateObject1928 = _taggedTemplateLiteral64(["The Copperhead Club"]))), {
        855: 4
      }],
      [$location(_templateObject2028 || (_templateObject2028 = _taggedTemplateLiteral64(["The Haunted Bathroom"]))), {
        882: 2
      }],
      // skip; it's the towel adventure but we don't want towels
      [$location(_templateObject2149 || (_templateObject2149 = _taggedTemplateLiteral64(["The Castle in the Clouds in the Sky (Top Floor)"]))), {
        1431: 1,
        675: 4,
        // Go to Steampunk choice
        676: 4,
        // Go to Punk Rock choice
        677: 1,
        // Fight Steam Punk Giant
        678: 3
        // Go to Steampunk choice
      }],
      [$location(_templateObject2228 || (_templateObject2228 = _taggedTemplateLiteral64(["The Castle in the Clouds in the Sky (Ground Floor)"]))), {
        672: 3,
        // Skip
        673: 3,
        // Skip
        674: 3,
        // Skip
        1026: 3
        // Skip
      }],
      [$location(_templateObject2327 || (_templateObject2327 = _taggedTemplateLiteral64(["The Hidden Office Building"]))), {
        786: 6
      }],
      [$location(_templateObject2427 || (_templateObject2427 = _taggedTemplateLiteral64(["Cobb's Knob Barracks"]))), {
        522: 2
      }],
      // skip
      [$location(_templateObject2527 || (_templateObject2527 = _taggedTemplateLiteral64(["The Penultimate Fantasy Airship"]))), {
        178: 2,
        182: 1
      }],
      // Skip, and Fight random enemy
      [$location(_templateObject2627 || (_templateObject2627 = _taggedTemplateLiteral64(["The Haiku Dungeon"]))), {
        297: 3
      }]
      // skip
    ]));
    _defineProperty27(this, "cacheKey", "");
    _defineProperty27(this, "targets", {});
  }
  _createClass23(WandererManager2, [{
    key: "getTarget",
    value: function getTarget(draggableFight) {
      var _this$targets, _this$targets$draggab;
      var drunkSafe = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
      var newKey = "".concat((0, import_kolmafia72.myTotalTurnsSpent)(), ";").concat((0, import_kolmafia72.totalTurnsPlayed)(), ";").concat(get("familiarSweat"));
      if (this.cacheKey !== newKey)
        this.clear();
      this.cacheKey = newKey;
      return sober() || !drunkSafe ? (_this$targets$draggab = (_this$targets = this.targets)[draggableFight]) !== null && _this$targets$draggab !== void 0 ? _this$targets$draggab : _this$targets[draggableFight] = wanderWhere(draggableFight) : $location(_templateObject2724 || (_templateObject2724 = _taggedTemplateLiteral64(["Drunken Stupor"])));
    }
  }, {
    key: "getChoices",
    value: function getChoices(draggableFight) {
      var _this$unsupportedChoi;
      var drunkSafe = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
      return (_this$unsupportedChoi = this.unsupportedChoices.get(this.getTarget(draggableFight, drunkSafe))) !== null && _this$unsupportedChoi !== void 0 ? _this$unsupportedChoi : {};
    }
  }, {
    key: "clear",
    value: function clear() {
      this.targets = {};
    }
  }]);
  return WandererManager2;
}();
var wandererManager = new WandererManager();
var wanderer_default = wandererManager;

// src/embezzler.ts
var _templateObject680;
var _templateObject2150;
var _templateObject3132;
var _templateObject4118;
var _templateObject5106;
var _templateObject681;
var _templateObject759;
var _templateObject855;
var _templateObject947;
var _templateObject1039;
var _templateObject1136;
var _templateObject1234;
var _templateObject1334;
var _templateObject1431;
var _templateObject1529;
var _templateObject1629;
var _templateObject1729;
var _templateObject1829;
var _templateObject1929;
var _templateObject2029;
var _templateObject2151;
var _templateObject2229;
var _templateObject2328;
var _templateObject2428;
var _templateObject2528;
var _templateObject2628;
var _templateObject2725;
var _templateObject2822;
var _templateObject2922;
var _templateObject3020;
var _templateObject3133;
var _templateObject3222;
var _templateObject3321;
var _templateObject3420;
var _templateObject3519;
var _templateObject3617;
var _templateObject3716;
var _templateObject3815;
var _templateObject3914;
var _templateObject4014;
var _templateObject4119;
var _templateObject4217;
var _templateObject4317;
var _templateObject4415;
var _templateObject4514;
var _templateObject4612;
var _templateObject4712;
var _templateObject4812;
var _templateObject4912;
var _templateObject5012;
var _templateObject5117;
var _templateObject5217;
var _templateObject5316;
var _templateObject5414;
var _templateObject5513;
var _templateObject5612;
var _templateObject5711;
var _templateObject5811;
var _templateObject5911;
var _templateObject6010;
var _templateObject6114;
var _templateObject6214;
var _templateObject6313;
var _templateObject6411;
var _templateObject6510;
var _templateObject6610;
var _templateObject6710;
var _templateObject685;
var _templateObject695;
var _templateObject705;
var _templateObject7111;
var _templateObject7211;
var _templateObject7311;
var _templateObject7410;
var _templateObject7510;
var _templateObject764;
var _templateObject774;
var _templateObject784;
var _templateObject794;
var _templateObject804;
var _templateObject8111;
var _templateObject8211;
var _templateObject8310;
var _templateObject8410;
var _templateObject856;
var _templateObject863;
var _templateObject873;
var _templateObject883;
var _templateObject893;
var _templateObject903;
var _templateObject9111;
var _templateObject9211;
var _templateObject9310;
var _templateObject948;
var _templateObject954;
var _templateObject963;
var _templateObject973;
var _templateObject983;
var _templateObject993;
var _templateObject1003;
var _templateObject10111;
var _templateObject10211;
var _templateObject10310;
var _templateObject1043;
var _templateObject1053;
var _templateObject1063;
var _templateObject1073;
var _templateObject1083;
var _templateObject1093;
var _templateObject1103;
var _templateObject11111;
var _templateObject11210;
var _templateObject1137;
var _templateObject1143;
var _templateObject1153;
var _templateObject1163;
var _templateObject1173;
var _templateObject1183;
var _templateObject1193;
var _templateObject1203;
var _templateObject12111;
var _templateObject12210;
var _templateObject1235;
var _templateObject1243;
var _templateObject1253;
var _templateObject1263;
var _templateObject1273;
var _templateObject1283;
var _templateObject1293;
var _templateObject1303;
var _templateObject13111;
var _templateObject13210;
var _templateObject1335;
var _templateObject1343;
var _templateObject1353;
var _templateObject1363;
var _templateObject1373;
var _templateObject1383;
var _templateObject1393;
function _toConsumableArray37(arr) {
  return _arrayWithoutHoles37(arr) || _iterableToArray37(arr) || _unsupportedIterableToArray51(arr) || _nonIterableSpread37();
}
function _nonIterableSpread37() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray51(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray51(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray51(o, minLen);
}
function _iterableToArray37(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles37(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray51(arr);
}
function _arrayLikeToArray51(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _defineProperty28(obj, key, value) {
  key = _toPropertyKey31(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _classCallCheck24(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties24(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey31(descriptor.key), descriptor);
  }
}
function _createClass24(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties24(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties24(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey31(arg) {
  var key = _toPrimitive31(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive31(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _classPrivateFieldInitSpec2(obj, privateMap, value) {
  _checkPrivateRedeclaration2(obj, privateMap);
  privateMap.set(obj, value);
}
function _checkPrivateRedeclaration2(obj, privateCollection) {
  if (privateCollection.has(obj)) {
    throw new TypeError("Cannot initialize the same private elements twice on an object");
  }
}
function _classPrivateFieldGet2(receiver, privateMap) {
  var descriptor = _classExtractFieldDescriptor2(receiver, privateMap, "get");
  return _classApplyDescriptorGet2(receiver, descriptor);
}
function _classApplyDescriptorGet2(receiver, descriptor) {
  if (descriptor.get) {
    return descriptor.get.call(receiver);
  }
  return descriptor.value;
}
function _classPrivateFieldSet2(receiver, privateMap, value) {
  var descriptor = _classExtractFieldDescriptor2(receiver, privateMap, "set");
  _classApplyDescriptorSet2(receiver, descriptor, value);
  return value;
}
function _classExtractFieldDescriptor2(receiver, privateMap, action) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to " + action + " private field on non-instance");
  }
  return privateMap.get(receiver);
}
function _classApplyDescriptorSet2(receiver, descriptor, value) {
  if (descriptor.set) {
    descriptor.set.call(receiver, value);
  } else {
    if (!descriptor.writable) {
      throw new TypeError("attempted to set read only private field");
    }
    descriptor.value = value;
  }
}
function _taggedTemplateLiteral65(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var embezzler2 = $monster(_templateObject680 || (_templateObject680 = _taggedTemplateLiteral65(["Knob Goblin Embezzler"])));
var _macro = /* @__PURE__ */ new WeakMap();
var _location = /* @__PURE__ */ new WeakMap();
var _useAuto = /* @__PURE__ */ new WeakMap();
var EmbezzlerFightRunOptions = /* @__PURE__ */ function() {
  function EmbezzlerFightRunOptions2(macro, location) {
    var useAuto = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
    _classCallCheck24(this, EmbezzlerFightRunOptions2);
    _classPrivateFieldInitSpec2(this, _macro, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldInitSpec2(this, _location, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldInitSpec2(this, _useAuto, {
      writable: true,
      value: void 0
    });
    _classPrivateFieldSet2(this, _macro, macro);
    _classPrivateFieldSet2(this, _location, location);
    _classPrivateFieldSet2(this, _useAuto, useAuto);
  }
  _createClass24(EmbezzlerFightRunOptions2, [{
    key: "macro",
    get: function get4() {
      return _classPrivateFieldGet2(this, _macro);
    }
  }, {
    key: "location",
    get: function get4() {
      if (!_classPrivateFieldGet2(this, _location)) {
        throw "Embezzler fight tried to access a location, but none was set";
      } else {
        return _classPrivateFieldGet2(this, _location);
      }
    }
  }, {
    key: "useAuto",
    get: function get4() {
      return _classPrivateFieldGet2(this, _useAuto);
    }
  }]);
  return EmbezzlerFightRunOptions2;
}();
var EmbezzlerFight = /* @__PURE__ */ function() {
  function EmbezzlerFight2(name, available3, potential, execute) {
    var _options$spec, _options$canInitializ, _options$gregariousRe, _options$wrongEncount;
    var options = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {};
    _classCallCheck24(this, EmbezzlerFight2);
    _defineProperty28(this, "name", void 0);
    _defineProperty28(this, "available", void 0);
    _defineProperty28(this, "potential", void 0);
    _defineProperty28(this, "execute", void 0);
    _defineProperty28(this, "spec", void 0);
    _defineProperty28(this, "draggable", void 0);
    _defineProperty28(this, "canInitializeWandererCounters", void 0);
    _defineProperty28(this, "wrongEncounterName", void 0);
    _defineProperty28(this, "gregariousReplace", void 0);
    this.name = name;
    this.available = available3;
    this.potential = potential;
    this.execute = execute;
    this.spec = (_options$spec = options.spec) !== null && _options$spec !== void 0 ? _options$spec : {};
    this.draggable = options.draggable;
    this.canInitializeWandererCounters = (_options$canInitializ = options.canInitializeWandererCounters) !== null && _options$canInitializ !== void 0 ? _options$canInitializ : false;
    this.gregariousReplace = (_options$gregariousRe = options.gregariousReplace) !== null && _options$gregariousRe !== void 0 ? _options$gregariousRe : false;
    this.wrongEncounterName = (_options$wrongEncount = options.wrongEncounterName) !== null && _options$wrongEncount !== void 0 ? _options$wrongEncount : this.gregariousReplace;
  }
  _createClass24(EmbezzlerFight2, [{
    key: "run",
    value: function run() {
      var _options$macro;
      var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
      if (!this.available() || !(0, import_kolmafia73.myAdventures)())
        return;
      (0, import_kolmafia73.print)("Now running Embezzler fight: ".concat(this.name, ". Stay tuned for details."));
      var fightMacro = (_options$macro = options.macro) !== null && _options$macro !== void 0 ? _options$macro : Macro2.embezzler();
      if (this.draggable) {
        this.execute(new EmbezzlerFightRunOptions(fightMacro, this.location(options.location), options.useAuto));
      } else {
        this.execute(new EmbezzlerFightRunOptions(fightMacro, void 0, options.useAuto));
      }
    }
  }, {
    key: "location",
    value: function location(_location2) {
      var taffyIsWorthIt = function() {
        return (0, import_kolmafia73.mallPrice)($item(_templateObject2150 || (_templateObject2150 = _taggedTemplateLiteral65(["pulled green taffy"])))) < EMBEZZLER_MULTIPLIER() * get("valueOfAdventure") && (0, import_kolmafia73.retrieveItem)($item(_templateObject3132 || (_templateObject3132 = _taggedTemplateLiteral65(["pulled green taffy"]))));
      };
      var suggestion = this.draggable && !_location2 && checkUnderwater() && taffyIsWorthIt() ? $location(_templateObject4118 || (_templateObject4118 = _taggedTemplateLiteral65(["The Briny Deeps"]))) : _location2;
      if (this.draggable && !suggestion || this.draggable === "backup" && suggestion && suggestion.combatPercent < 100) {
        propertyManager.setChoices(wanderer_default.getChoices(this.draggable));
        return wanderer_default.getTarget(this.draggable);
      }
      return suggestion !== null && suggestion !== void 0 ? suggestion : $location(_templateObject5106 || (_templateObject5106 = _taggedTemplateLiteral65(["Noob Cave"])));
    }
  }]);
  return EmbezzlerFight2;
}();
function checkUnderwater() {
  if (questStep("questS01OldGuy") >= 0 && !(get("_envyfishEggUsed") || have($item(_templateObject681 || (_templateObject681 = _taggedTemplateLiteral65(["envyfish egg"]))))) && (get("_garbo_weightChain", false) || !have($familiar(_templateObject759 || (_templateObject759 = _taggedTemplateLiteral65(["Pocket Professor"]))))) && ((0, import_kolmafia73.booleanModifier)("Adventure Underwater") || waterBreathingEquipment.some(function(item9) {
    return have(item9) && (0, import_kolmafia73.canEquip)(item9);
  })) && (have($effect(_templateObject855 || (_templateObject855 = _taggedTemplateLiteral65(["Fishy"])))) || have($item(_templateObject947 || (_templateObject947 = _taggedTemplateLiteral65(["fishy pipe"])))) && !get("_fishyPipeUsed"))) {
    if (!have($effect(_templateObject1039 || (_templateObject1039 = _taggedTemplateLiteral65(["Fishy"])))) && !get("_fishyPipeUsed"))
      (0, import_kolmafia73.use)($item(_templateObject1136 || (_templateObject1136 = _taggedTemplateLiteral65(["fishy pipe"]))));
    return have($effect(_templateObject1234 || (_templateObject1234 = _taggedTemplateLiteral65(["Fishy"]))));
  }
  return false;
}
function checkFax() {
  if (!have($item(_templateObject1334 || (_templateObject1334 = _taggedTemplateLiteral65(["photocopied monster"])))))
    (0, import_kolmafia73.cliExecute)("fax receive");
  if (property_exports.getString("photocopyMonster") === "Knob Goblin Embezzler")
    return true;
  (0, import_kolmafia73.cliExecute)("fax send");
  return false;
}
function faxEmbezzler() {
  if (!get("_photocopyUsed")) {
    if (checkFax())
      return;
    (0, import_kolmafia73.chatPrivate)("cheesefax", "Knob Goblin Embezzler");
    for (var i = 0; i < 3; i++) {
      (0, import_kolmafia73.wait)(10);
      if (checkFax())
        return;
    }
    throw new Error("Failed to acquire photocopied Knob Goblin Embezzler.");
  }
}
var wandererFailsafeMacro = function() {
  return Macro2.externalIf((0, import_kolmafia73.haveEquipped)($item(_templateObject1431 || (_templateObject1431 = _taggedTemplateLiteral65(["backup camera"])))) && get("_backUpUses") < 11 && get("lastCopyableMonster") === embezzler2, Macro2.if_("!monsterid ".concat(embezzler2.id), Macro2.skill($skill(_templateObject1529 || (_templateObject1529 = _taggedTemplateLiteral65(["Back-Up to your Last Enemy"]))))));
};
var chainStarters = [new EmbezzlerFight("Chateau Painting", function() {
  return ChateauMantegna_exports.have() && !ChateauMantegna_exports.paintingFought() && ChateauMantegna_exports.paintingMonster() === embezzler2;
}, function() {
  return ChateauMantegna_exports.have() && !ChateauMantegna_exports.paintingFought() && ChateauMantegna_exports.paintingMonster() === embezzler2 ? 1 : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return ChateauMantegna_exports.fightPainting();
  }, options.useAuto);
}), new EmbezzlerFight("Combat Lover's Locket", function() {
  return CombatLoversLocket_exports.availableLocketMonsters().includes(embezzler2);
}, function() {
  return CombatLoversLocket_exports.availableLocketMonsters().includes(embezzler2) ? 1 : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return CombatLoversLocket_exports.reminisce(embezzler2);
  }, options.useAuto);
}), new EmbezzlerFight("Fax", function() {
  return have($item(_templateObject1629 || (_templateObject1629 = _taggedTemplateLiteral65(["Clan VIP Lounge key"])))) && !get("_photocopyUsed") && (0, import_kolmafia73.getClanLounge)()["deluxe fax machine"] !== void 0;
}, function() {
  return have($item(_templateObject1729 || (_templateObject1729 = _taggedTemplateLiteral65(["Clan VIP Lounge key"])))) && !get("_photocopyUsed") && (0, import_kolmafia73.getClanLounge)()["deluxe fax machine"] !== void 0 ? 1 : 0;
}, function(options) {
  faxEmbezzler();
  withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject1829 || (_templateObject1829 = _taggedTemplateLiteral65(["photocopied monster"]))));
  }, options.useAuto);
}), new EmbezzlerFight(
  "Scepter Semirare",
  function() {
    return (0, import_kolmafia73.canAdventure)($location(_templateObject1929 || (_templateObject1929 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"])))) && shouldAugustCast($skill(_templateObject2029 || (_templateObject2029 = _taggedTemplateLiteral65(["Aug. 2nd: Find an Eleven-Leaf Clover Day"]))));
  },
  function() {
    return 0;
  },
  // prevent circular reference
  function(options) {
    (0, import_kolmafia73.retrieveItem)($item(_templateObject2151 || (_templateObject2151 = _taggedTemplateLiteral65(["august scepter"]))));
    (0, import_kolmafia73.useSkill)($skill(_templateObject2229 || (_templateObject2229 = _taggedTemplateLiteral65(["Aug. 2nd: Find an Eleven-Leaf Clover Day"]))));
    if (!have($effect(_templateObject2328 || (_templateObject2328 = _taggedTemplateLiteral65(["Lucky!"]))))) {
      _set("_aug2Cast", true);
      return;
    }
    var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
    adventureFunction($location(_templateObject2428 || (_templateObject2428 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"]))), options.macro, options.macro);
  }
), new EmbezzlerFight("Pillkeeper Semirare", function() {
  return have($item(_templateObject2528 || (_templateObject2528 = _taggedTemplateLiteral65(["Eight Days a Week Pill Keeper"])))) && (0, import_kolmafia73.canAdventure)($location(_templateObject2628 || (_templateObject2628 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"])))) && !get("_freePillKeeperUsed") && !have($effect(_templateObject2725 || (_templateObject2725 = _taggedTemplateLiteral65(["Lucky!"]))));
}, function() {
  return have($item(_templateObject2822 || (_templateObject2822 = _taggedTemplateLiteral65(["Eight Days a Week Pill Keeper"])))) && (0, import_kolmafia73.canAdventure)($location(_templateObject2922 || (_templateObject2922 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"])))) && !get("_freePillKeeperUsed") && !have($effect(_templateObject3020 || (_templateObject3020 = _taggedTemplateLiteral65(["Lucky!"])))) ? 1 : 0;
}, function(options) {
  (0, import_kolmafia73.retrieveItem)($item(_templateObject3133 || (_templateObject3133 = _taggedTemplateLiteral65(["Eight Days a Week Pill Keeper"]))));
  (0, import_kolmafia73.cliExecute)("pillkeeper semirare");
  if (!have($effect(_templateObject3222 || (_templateObject3222 = _taggedTemplateLiteral65(["Lucky!"]))))) {
    _set("_freePillKeeperUsed", true);
    return;
  }
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction($location(_templateObject3321 || (_templateObject3321 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"]))), options.macro, options.macro);
})];
var copySources = [new EmbezzlerFight("Time-Spinner", function() {
  return have($item(_templateObject3420 || (_templateObject3420 = _taggedTemplateLiteral65(["Time-Spinner"])))) && $locations(_templateObject3519 || (_templateObject3519 = _taggedTemplateLiteral65(["Noob Cave, The Dire Warren, The Haunted Kitchen"]))).some(function(location) {
    return location.combatQueue.includes(embezzler2.name);
  }) && get("_timeSpinnerMinutesUsed") <= 7;
}, function() {
  return have($item(_templateObject3617 || (_templateObject3617 = _taggedTemplateLiteral65(["Time-Spinner"])))) && $locations(_templateObject3716 || (_templateObject3716 = _taggedTemplateLiteral65(["Noob Cave, The Dire Warren, The Haunted Kitchen"]))).some(function(location) {
    return location.combatQueue.includes(embezzler2.name) || get("beGregariousCharges") > 0;
  }) ? Math.floor((10 - get("_timeSpinnerMinutesUsed")) / 3) : 0;
}, function(options) {
  withMacro(options.macro, function() {
    (0, import_kolmafia73.visitUrl)("inv_use.php?whichitem=".concat((0, import_kolmafia73.toInt)($item(_templateObject3815 || (_templateObject3815 = _taggedTemplateLiteral65(["Time-Spinner"]))))));
    (0, import_kolmafia73.runChoice)(1);
    (0, import_kolmafia73.visitUrl)("choice.php?whichchoice=1196&monid=".concat(embezzler2.id, "&option=1"));
    (0, import_kolmafia73.runCombat)();
  }, options.useAuto);
}), new EmbezzlerFight("Spooky Putty & Rain-Doh", function() {
  return have($item(_templateObject3914 || (_templateObject3914 = _taggedTemplateLiteral65(["Spooky Putty monster"])))) && get("spookyPuttyMonster") === embezzler2 || have($item(_templateObject4014 || (_templateObject4014 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"])))) && get("rainDohMonster") === embezzler2;
}, function() {
  var havePutty = have($item(_templateObject4119 || (_templateObject4119 = _taggedTemplateLiteral65(["Spooky Putty sheet"])))) || have($item(_templateObject4217 || (_templateObject4217 = _taggedTemplateLiteral65(["Spooky Putty monster"]))));
  var haveRainDoh = have($item(_templateObject4317 || (_templateObject4317 = _taggedTemplateLiteral65(["Rain-Doh black box"])))) || have($item(_templateObject4415 || (_templateObject4415 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"]))));
  var puttyLocked = have($item(_templateObject4514 || (_templateObject4514 = _taggedTemplateLiteral65(["Spooky Putty monster"])))) && get("spookyPuttyMonster") !== embezzler2;
  var rainDohLocked = have($item(_templateObject4612 || (_templateObject4612 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"])))) && get("rainDohMonster") !== embezzler2;
  if (havePutty && haveRainDoh) {
    if (puttyLocked && rainDohLocked)
      return 0;
    else if (puttyLocked) {
      return 5 - get("_raindohCopiesMade") + (0, import_kolmafia73.itemAmount)($item(_templateObject4712 || (_templateObject4712 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"]))));
    } else if (rainDohLocked) {
      return 5 - get("spookyPuttyCopiesMade") + (0, import_kolmafia73.itemAmount)($item(_templateObject4812 || (_templateObject4812 = _taggedTemplateLiteral65(["Spooky Putty monster"]))));
    }
    return 6 - get("spookyPuttyCopiesMade") - get("_raindohCopiesMade") + (0, import_kolmafia73.itemAmount)($item(_templateObject4912 || (_templateObject4912 = _taggedTemplateLiteral65(["Spooky Putty monster"])))) + (0, import_kolmafia73.itemAmount)($item(_templateObject5012 || (_templateObject5012 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"]))));
  } else if (havePutty) {
    if (puttyLocked)
      return 0;
    return 5 - get("spookyPuttyCopiesMade") - get("_raindohCopiesMade") + (0, import_kolmafia73.itemAmount)($item(_templateObject5117 || (_templateObject5117 = _taggedTemplateLiteral65(["Spooky Putty monster"]))));
  } else if (haveRainDoh) {
    if (rainDohLocked)
      return 0;
    return 5 - get("spookyPuttyCopiesMade") - get("_raindohCopiesMade") + (0, import_kolmafia73.itemAmount)($item(_templateObject5217 || (_templateObject5217 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"]))));
  }
  return 0;
}, function(options) {
  var macro = options.macro;
  withMacro(macro, function() {
    if (have($item(_templateObject5316 || (_templateObject5316 = _taggedTemplateLiteral65(["Spooky Putty monster"])))))
      return (0, import_kolmafia73.use)($item(_templateObject5414 || (_templateObject5414 = _taggedTemplateLiteral65(["Spooky Putty monster"]))));
    return (0, import_kolmafia73.use)($item(_templateObject5513 || (_templateObject5513 = _taggedTemplateLiteral65(["Rain-Doh box full of monster"]))));
  }, options.useAuto);
}), new EmbezzlerFight("4-d Camera", function() {
  return have($item(_templateObject5612 || (_templateObject5612 = _taggedTemplateLiteral65(["shaking 4-d camera"])))) && get("cameraMonster") === embezzler2 && !get("_cameraUsed");
}, function() {
  return have($item(_templateObject5711 || (_templateObject5711 = _taggedTemplateLiteral65(["shaking 4-d camera"])))) && get("cameraMonster") === embezzler2 && !get("_cameraUsed") ? 1 : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject5811 || (_templateObject5811 = _taggedTemplateLiteral65(["shaking 4-d camera"]))));
  }, options.useAuto);
}), new EmbezzlerFight("Ice Sculpture", function() {
  return have($item(_templateObject5911 || (_templateObject5911 = _taggedTemplateLiteral65(["ice sculpture"])))) && get("iceSculptureMonster") === embezzler2 && !get("_iceSculptureUsed");
}, function() {
  return have($item(_templateObject6010 || (_templateObject6010 = _taggedTemplateLiteral65(["ice sculpture"])))) && get("iceSculptureMonster") === embezzler2 && !get("_iceSculptureUsed") ? 1 : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject6114 || (_templateObject6114 = _taggedTemplateLiteral65(["ice sculpture"]))));
  }, options.useAuto);
}), new EmbezzlerFight("Green Taffy", function() {
  return have($item(_templateObject6214 || (_templateObject6214 = _taggedTemplateLiteral65(["envyfish egg"])))) && get("envyfishMonster") === embezzler2 && !get("_envyfishEggUsed");
}, function() {
  return have($item(_templateObject6313 || (_templateObject6313 = _taggedTemplateLiteral65(["envyfish egg"])))) && get("envyfishMonster") === embezzler2 && !get("_envyfishEggUsed") ? 1 : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject6411 || (_templateObject6411 = _taggedTemplateLiteral65(["envyfish egg"]))));
  }), options.useAuto;
}), new EmbezzlerFight("Screencapped Monster", function() {
  return have($item(_templateObject6510 || (_templateObject6510 = _taggedTemplateLiteral65(["screencapped monster"])))) && property_exports.getString("screencappedMonster") === "Knob Goblin Embezzler";
}, function() {
  return property_exports.getString("screencappedMonster") === "Knob Goblin Embezzler" ? (0, import_kolmafia73.itemAmount)($item(_templateObject6610 || (_templateObject6610 = _taggedTemplateLiteral65(["screencapped monster"])))) : 0;
}, function(options) {
  withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject6710 || (_templateObject6710 = _taggedTemplateLiteral65(["screencapped monster"]))));
  }, options.useAuto);
}), new EmbezzlerFight("Sticky Clay Homunculus", function() {
  return have($item(_templateObject685 || (_templateObject685 = _taggedTemplateLiteral65(["sticky clay homunculus"])))) && property_exports.getString("crudeMonster") === "Knob Goblin Embezzler";
}, function() {
  return property_exports.getString("crudeMonster") === "Knob Goblin Embezzler" ? (0, import_kolmafia73.itemAmount)($item(_templateObject695 || (_templateObject695 = _taggedTemplateLiteral65(["sticky clay homunculus"])))) : 0;
}, function(options) {
  return withMacro(options.macro, function() {
    return (0, import_kolmafia73.use)($item(_templateObject705 || (_templateObject705 = _taggedTemplateLiteral65(["sticky clay homunculus"]))));
  }, options.useAuto);
})];
var wanderSources = [new EmbezzlerFight("Lucky!", function() {
  return (0, import_kolmafia73.canAdventure)($location(_templateObject7111 || (_templateObject7111 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"])))) && have($effect(_templateObject7211 || (_templateObject7211 = _taggedTemplateLiteral65(["Lucky!"]))));
}, function() {
  return (0, import_kolmafia73.canAdventure)($location(_templateObject7311 || (_templateObject7311 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"])))) && have($effect(_templateObject7410 || (_templateObject7410 = _taggedTemplateLiteral65(["Lucky!"])))) ? 1 : 0;
}, function(options) {
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction($location(_templateObject7510 || (_templateObject7510 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"]))), options.macro, options.macro);
}), new EmbezzlerFight("Digitize", function() {
  return get("_sourceTerminalDigitizeMonster") === embezzler2 && counter_exports.get("Digitize Monster") <= 0;
}, function() {
  return SourceTerminal_exports.have() && SourceTerminal_exports.getDigitizeUses() === 0 ? 1 : 0;
}, function(options) {
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction(options.location, wandererFailsafeMacro().step(options.macro), wandererFailsafeMacro().step(options.macro));
}, {
  draggable: "wanderer"
}), new EmbezzlerFight("Guaranteed Romantic Monster", function() {
  return get("_romanticFightsLeft") > 0 && counter_exports.get("Romantic Monster window begin") <= 0 && counter_exports.get("Romantic Monster window end") <= 0;
}, function() {
  return 0;
}, function(options) {
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction(options.location, wandererFailsafeMacro().step(options.macro), wandererFailsafeMacro().step(options.macro));
}, {
  draggable: "wanderer"
}), new EmbezzlerFight("Enamorang", function() {
  return counter_exports.get("Enamorang") <= 0 && get("enamorangMonster") === embezzler2;
}, function() {
  return counter_exports.get("Enamorang") <= 0 && get("enamorangMonster") === embezzler2 || have($item(_templateObject764 || (_templateObject764 = _taggedTemplateLiteral65(["LOV Enamorang"])))) && !get("_enamorangs") ? 1 : 0;
}, function(options) {
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction(options.location, wandererFailsafeMacro().step(options.macro), wandererFailsafeMacro().step(options.macro));
}, {
  draggable: "wanderer"
})];
var gregFights = function(name, haveCheck, monsterProp, fightsProp, totalCharges) {
  return [new EmbezzlerFight(name, function() {
    return haveCheck() && get(monsterProp) === embezzler2 && get(fightsProp) > (have($item(_templateObject774 || (_templateObject774 = _taggedTemplateLiteral65(["miniature crystal ball"])))) ? 1 : 0);
  }, function() {
    return get(monsterProp) === embezzler2 ? totalCharges() : 0;
  }, function(options) {
    var _run$constraints$prep, _run$constraints;
    var run = ltbRun();
    (_run$constraints$prep = (_run$constraints = run.constraints).preparation) === null || _run$constraints$prep === void 0 ? void 0 : _run$constraints$prep.call(_run$constraints);
    var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
    adventureFunction($location(_templateObject784 || (_templateObject784 = _taggedTemplateLiteral65(["The Dire Warren"]))), Macro2.if_($monster(_templateObject794 || (_templateObject794 = _taggedTemplateLiteral65(["fluffy bunny"]))), run.macro).step(options.macro), Macro2.if_($monster(_templateObject804 || (_templateObject804 = _taggedTemplateLiteral65(["fluffy bunny"]))), run.macro).step(options.macro));
    if (get(fightsProp) === 1 && have($item(_templateObject8111 || (_templateObject8111 = _taggedTemplateLiteral65(["miniature crystal ball"]))))) {
      var warrenPrediction = CrystalBall_exports.ponder().get($location(_templateObject8211 || (_templateObject8211 = _taggedTemplateLiteral65(["The Dire Warren"]))));
      if (warrenPrediction !== embezzler2)
        toasterGaze();
    }
  }, {
    canInitializeWandererCounters: true
  }), new EmbezzlerFight("".concat(name, " (Set Up Crystal Ball)"), function() {
    return get(monsterProp) === embezzler2 && get(fightsProp) === 1 && have($item(_templateObject8310 || (_templateObject8310 = _taggedTemplateLiteral65(["miniature crystal ball"])))) && !CrystalBall_exports.ponder().get($location(_templateObject8410 || (_templateObject8410 = _taggedTemplateLiteral65(["The Dire Warren"]))));
  }, function() {
    return get(monsterProp) === embezzler2 && get(fightsProp) > 0 || totalCharges() > 0 ? 1 : 0;
  }, function(options) {
    var _run$constraints$prep2, _run$constraints2;
    var run = ltbRun();
    (_run$constraints$prep2 = (_run$constraints2 = run.constraints).preparation) === null || _run$constraints$prep2 === void 0 ? void 0 : _run$constraints$prep2.call(_run$constraints2);
    garboAdventure($location(_templateObject856 || (_templateObject856 = _taggedTemplateLiteral65(["The Dire Warren"]))), Macro2.if_($monster(_templateObject863 || (_templateObject863 = _taggedTemplateLiteral65(["fluffy bunny"]))), run.macro).step(options.macro));
  }, {
    spec: {
      equip: $items(_templateObject873 || (_templateObject873 = _taggedTemplateLiteral65(["miniature crystal ball"]))).filter(function(item9) {
        return have(item9);
      })
    },
    canInitializeWandererCounters: true
  })];
};
var conditionalSources = [new EmbezzlerFight("Orb Prediction", function() {
  return have($item(_templateObject883 || (_templateObject883 = _taggedTemplateLiteral65(["miniature crystal ball"])))) && !get("_garbo_doneGregging", false) && CrystalBall_exports.ponder().get($location(_templateObject893 || (_templateObject893 = _taggedTemplateLiteral65(["The Dire Warren"])))) === embezzler2;
}, function() {
  return possibleGregCrystalBall();
}, function(options) {
  (0, import_kolmafia73.visitUrl)("inventory.php?ponder=1");
  if (CrystalBall_exports.ponder().get($location(_templateObject903 || (_templateObject903 = _taggedTemplateLiteral65(["The Dire Warren"])))) !== $monster(_templateObject9111 || (_templateObject9111 = _taggedTemplateLiteral65(["Knob Goblin Embezzler"])))) {
    return;
  }
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction($location(_templateObject9211 || (_templateObject9211 = _taggedTemplateLiteral65(["The Dire Warren"]))), options.macro, options.macro);
  toasterGaze();
  if (!doingGregFight())
    _set("_garbo_doneGregging", true);
}, {
  spec: {
    equip: $items(_templateObject9310 || (_templateObject9310 = _taggedTemplateLiteral65(["miniature crystal ball"])))
  },
  canInitializeWandererCounters: true
}), new EmbezzlerFight("Macrometeorite", function() {
  return gregReady() && have($skill(_templateObject948 || (_templateObject948 = _taggedTemplateLiteral65(["Meteor Lore"])))) && get("_macrometeoriteUses") < 10 && proceedWithOrb();
}, function() {
  return (get("beGregariousMonster") === embezzler2 && get("beGregariousFightsLeft") > 0 || get("beGregariousCharges") > 0) && have($skill(_templateObject954 || (_templateObject954 = _taggedTemplateLiteral65(["Meteor Lore"])))) ? 10 - get("_macrometeoriteUses") : 0;
}, function(options) {
  equipOrbIfDesired();
  var crateIsSabered = get("_saberForceMonster") === $monster(_templateObject963 || (_templateObject963 = _taggedTemplateLiteral65(["crate"])));
  var notEnoughCratesSabered = get("_saberForceMonsterCount") < 2;
  var weWantToSaberCrates = !crateIsSabered || notEnoughCratesSabered;
  setChoice(1387, 2);
  var macro = Macro2.if_($monster(_templateObject973 || (_templateObject973 = _taggedTemplateLiteral65(["crate"]))), Macro2.externalIf(crateStrategy() !== "Saber" && !have($effect(_templateObject983 || (_templateObject983 = _taggedTemplateLiteral65(["On the Trail"])))) && get("_olfactionsUsed") < 2, Macro2.tryHaveSkill($skill(_templateObject993 || (_templateObject993 = _taggedTemplateLiteral65(["Transcendent Olfaction"]))))).externalIf((0, import_kolmafia73.haveEquipped)($item(_templateObject1003 || (_templateObject1003 = _taggedTemplateLiteral65(["Fourth of May Cosplay Saber"])))) && weWantToSaberCrates && get("_saberForceUses") < 5, Macro2.trySkill($skill(_templateObject10111 || (_templateObject10111 = _taggedTemplateLiteral65(["Use the Force"]))))).skill($skill(_templateObject10211 || (_templateObject10211 = _taggedTemplateLiteral65(["Macrometeorite"]))))).step(options.macro);
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction($location(_templateObject10310 || (_templateObject10310 = _taggedTemplateLiteral65(["Noob Cave"]))), macro, macro);
  if (CrystalBall_exports.ponder().get($location(_templateObject1043 || (_templateObject1043 = _taggedTemplateLiteral65(["Noob Cave"])))) === embezzler2)
    toasterGaze();
}, {
  gregariousReplace: true
}), new EmbezzlerFight("Powerful Glove", function() {
  return gregReady() && have($item(_templateObject1053 || (_templateObject1053 = _taggedTemplateLiteral65(["Powerful Glove"])))) && get("_powerfulGloveBatteryPowerUsed") <= 90 && proceedWithOrb();
}, function() {
  return (get("beGregariousMonster") === embezzler2 && get("beGregariousFightsLeft") > 0 || get("beGregariousCharges") > 0) && have($item(_templateObject1063 || (_templateObject1063 = _taggedTemplateLiteral65(["Powerful Glove"])))) ? Math.min((100 - get("_powerfulGloveBatteryPowerUsed")) / 10) : 0;
}, function(options) {
  equipOrbIfDesired();
  var crateIsSabered = get("_saberForceMonster") === $monster(_templateObject1073 || (_templateObject1073 = _taggedTemplateLiteral65(["crate"])));
  var notEnoughCratesSabered = get("_saberForceMonsterCount") < 2;
  var weWantToSaberCrates = !crateIsSabered || notEnoughCratesSabered;
  setChoice(1387, 2);
  var macro = Macro2.if_($monster(_templateObject1083 || (_templateObject1083 = _taggedTemplateLiteral65(["crate"]))), Macro2.externalIf(crateStrategy() !== "Saber" && !have($effect(_templateObject1093 || (_templateObject1093 = _taggedTemplateLiteral65(["On the Trail"])))) && get("_olfactionsUsed") < 2, Macro2.tryHaveSkill($skill(_templateObject1103 || (_templateObject1103 = _taggedTemplateLiteral65(["Transcendent Olfaction"]))))).externalIf((0, import_kolmafia73.haveEquipped)($item(_templateObject11111 || (_templateObject11111 = _taggedTemplateLiteral65(["Fourth of May Cosplay Saber"])))) && weWantToSaberCrates && get("_saberForceUses") < 5, Macro2.trySkill($skill(_templateObject11210 || (_templateObject11210 = _taggedTemplateLiteral65(["Use the Force"]))))).skill($skill(_templateObject1137 || (_templateObject1137 = _taggedTemplateLiteral65(["CHEAT CODE: Replace Enemy"]))))).step(options.macro);
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction($location(_templateObject1143 || (_templateObject1143 = _taggedTemplateLiteral65(["Noob Cave"]))), macro, macro);
  if (CrystalBall_exports.ponder().get($location(_templateObject1153 || (_templateObject1153 = _taggedTemplateLiteral65(["Noob Cave"])))) === embezzler2)
    toasterGaze();
}, {
  spec: {
    equip: $items(_templateObject1163 || (_templateObject1163 = _taggedTemplateLiteral65(["Powerful Glove"])))
  },
  gregariousReplace: true
})].concat(_toConsumableArray37(gregFights(
  "Be Gregarious",
  function() {
    return true;
  },
  // we can always use extrovermectin
  "beGregariousMonster",
  "beGregariousFightsLeft",
  function() {
    return get("beGregariousCharges") * 3 + get("beGregariousFightsLeft");
  }
)), _toConsumableArray37(gregFights("Habitats Monster", function() {
  return have($skill(_templateObject1173 || (_templateObject1173 = _taggedTemplateLiteral65(["Just the Facts"]))));
}, "monsterHabitatsMonster", "monsterHabitatsFightsLeft", function() {
  return have($skill(_templateObject1183 || (_templateObject1183 = _taggedTemplateLiteral65(["Just the Facts"])))) ? (3 - get("_monsterHabitatsRecalled")) * 5 + get("monsterHabitatsFightsLeft") : 0;
})), [new EmbezzlerFight("Backup", function() {
  return get("lastCopyableMonster") === embezzler2 && have($item(_templateObject1193 || (_templateObject1193 = _taggedTemplateLiteral65(["backup camera"])))) && get("_backUpUses") < 11;
}, function() {
  return have($item(_templateObject1203 || (_templateObject1203 = _taggedTemplateLiteral65(["backup camera"])))) ? 11 - get("_backUpUses") : 0;
}, function(options) {
  var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
  adventureFunction(options.location, Macro2.if_("!monsterid ".concat(embezzler2.id), Macro2.skill($skill(_templateObject12111 || (_templateObject12111 = _taggedTemplateLiteral65(["Back-Up to your Last Enemy"]))))).step(options.macro), Macro2.if_("!monsterid ".concat(embezzler2.id), Macro2.skill($skill(_templateObject12210 || (_templateObject12210 = _taggedTemplateLiteral65(["Back-Up to your Last Enemy"]))))).step(options.macro));
}, {
  spec: {
    equip: $items(_templateObject1235 || (_templateObject1235 = _taggedTemplateLiteral65(["backup camera"]))),
    modes: {
      backupcamera: "meat"
    }
  },
  draggable: "backup",
  wrongEncounterName: true,
  canInitializeWandererCounters: true
})]);
var fakeSources = [new EmbezzlerFight("Professor MeatChain", function() {
  return false;
}, function() {
  return have($familiar(_templateObject1243 || (_templateObject1243 = _taggedTemplateLiteral65(["Pocket Professor"])))) && !get("_garbo_meatChain", false) ? Math.max(10 - get("_pocketProfessorLectures"), 0) : 0;
}, function() {
  return;
}), new EmbezzlerFight("Professor WeightChain", function() {
  return false;
}, function() {
  return have($familiar(_templateObject1253 || (_templateObject1253 = _taggedTemplateLiteral65(["Pocket Professor"])))) && !get("_garbo_weightChain", false) ? Math.min(15 - get("_pocketProfessorLectures"), 5) : 0;
}, function() {
  return;
})];
var emergencyChainStarters = [
  // These are very deliberately the last embezzler fights.
  new EmbezzlerFight("11-leaf clover (untapped potential)", function() {
    var potential = Math.floor(embezzlerCount());
    if (potential < 1)
      return false;
    if (!(0, import_kolmafia73.canAdventure)($location(_templateObject1263 || (_templateObject1263 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"]))))) {
      return false;
    }
    if (get("_genieFightsUsed") < 3 && (0, import_kolmafia73.mallPrice)($item(_templateObject1273 || (_templateObject1273 = _taggedTemplateLiteral65(["11-leaf clover"])))) >= WISH_VALUE) {
      return false;
    }
    if (globalOptions.askedAboutWish)
      return globalOptions.wishAnswer;
    var profit = (potential + 1) * averageEmbezzlerNet() - (0, import_kolmafia73.mallPrice)($item(_templateObject1283 || (_templateObject1283 = _taggedTemplateLiteral65(["11-leaf clover"]))));
    if (profit < 0)
      return false;
    (0, import_kolmafia73.print)("You have the following embezzler-sources untapped right now:", HIGHLIGHT);
    embezzlerSources.filter(function(source) {
      return source.potential() > 0;
    }).map(function(source) {
      return "".concat(source.potential(), " from ").concat(source.name);
    }).forEach(function(text) {
      return (0, import_kolmafia73.print)(text, HIGHLIGHT);
    });
    globalOptions.askedAboutWish = true;
    globalOptions.wishAnswer = userConfirmDialog("Garbo has detected you have ".concat(potential, " potential ways to copy an Embezzler, but no way to start a fight with one. Current embezzler net (before potions) is ").concat(averageEmbezzlerNet(), ", so we expect to earn ").concat(profit, " meat, after the cost of a 11-leaf clover. Should we get Lucky! for an Embezzler?"), true);
    return globalOptions.wishAnswer;
  }, function() {
    return 0;
  }, function(options) {
    globalOptions.askedAboutWish = false;
    property_exports.withProperty("autoSatisfyWithCloset", true, function() {
      return (0, import_kolmafia73.retrieveItem)($item(_templateObject1293 || (_templateObject1293 = _taggedTemplateLiteral65(["11-leaf clover"]))));
    });
    (0, import_kolmafia73.use)($item(_templateObject1303 || (_templateObject1303 = _taggedTemplateLiteral65(["11-leaf clover"]))));
    if (have($effect(_templateObject13111 || (_templateObject13111 = _taggedTemplateLiteral65(["Lucky!"]))))) {
      var adventureFunction = options.useAuto ? garboAdventureAuto : garboAdventure;
      adventureFunction($location(_templateObject13210 || (_templateObject13210 = _taggedTemplateLiteral65(["Cobb's Knob Treasury"]))), options.macro, options.macro);
    }
    globalOptions.askedAboutWish = false;
  }),
  new EmbezzlerFight("Pocket Wish (untapped potential)", function() {
    var potential = Math.floor(embezzlerCount());
    if (potential < 1)
      return false;
    if (get("_genieFightsUsed") >= 3)
      return false;
    if (globalOptions.askedAboutWish)
      return globalOptions.wishAnswer;
    var profit = (potential + 1) * averageEmbezzlerNet() - WISH_VALUE;
    if (profit < 0)
      return false;
    (0, import_kolmafia73.print)("You have the following embezzler-sources untapped right now:", HIGHLIGHT);
    embezzlerSources.filter(function(source) {
      return source.potential() > 0;
    }).map(function(source) {
      return "".concat(source.potential(), " from ").concat(source.name);
    }).forEach(function(text) {
      return (0, import_kolmafia73.print)(text, HIGHLIGHT);
    });
    globalOptions.askedAboutWish = true;
    globalOptions.wishAnswer = userConfirmDialog("Garbo has detected you have ".concat(potential, " potential ways to copy an Embezzler, but no way to start a fight with one. Current embezzler net (before potions) is ").concat(averageEmbezzlerNet(), ", so we expect to earn ").concat(profit, " meat, after the cost of a wish. Should we wish for an Embezzler?"), true);
    return globalOptions.wishAnswer;
  }, function() {
    return 0;
  }, function(options) {
    globalOptions.askedAboutWish = false;
    withMacro(options.macro, function() {
      acquire(1, $item(_templateObject1335 || (_templateObject1335 = _taggedTemplateLiteral65(["pocket wish"]))), WISH_VALUE);
      (0, import_kolmafia73.visitUrl)("inv_use.php?pwd=".concat((0, import_kolmafia73.myHash)(), "&which=3&whichitem=9537"), false, true);
      (0, import_kolmafia73.visitUrl)("choice.php?pwd&whichchoice=1267&option=1&wish=to fight a Knob Goblin Embezzler ", true, true);
      (0, import_kolmafia73.visitUrl)("main.php", false);
      (0, import_kolmafia73.runCombat)();
      globalOptions.askedAboutWish = false;
    }, options.useAuto);
  })
];
var embezzlerSources = [].concat(wanderSources, _toConsumableArray37(conditionalSources), copySources, chainStarters, emergencyChainStarters, fakeSources);
function embezzlerCount() {
  return sum(embezzlerSources, function(source) {
    return source.potential();
  });
}
function getNextEmbezzlerFight() {
  var _ref;
  var wanderer = wanderSources.find(function(fight) {
    return fight.available();
  });
  if (wanderer)
    return wanderer;
  var conditional = conditionalSources.find(function(fight) {
    return fight.available();
  });
  if (conditional) {
    var leftoverReplacers = (have($skill(_templateObject1343 || (_templateObject1343 = _taggedTemplateLiteral65(["Meteor Lore"])))) ? 10 - get("_macrometeoriteUses") : 0) + (have($item(_templateObject1353 || (_templateObject1353 = _taggedTemplateLiteral65(["Powerful Glove"])))) ? Math.floor(100 - get("_powerfulGloveBatteryPowerUsed") / 10) : 0);
    var skip = conditional.name === "Be Gregarious" && crateStrategy() === "Orb" && leftoverReplacers;
    if (!skip)
      return conditional;
  }
  var copy = copySources.find(function(fight) {
    return fight.available();
  });
  if (copy)
    return copy;
  var chainStart = chainStarters.find(function(fight) {
    return fight.available();
  });
  if (chainStart)
    return chainStart;
  return (_ref = conditional !== null && conditional !== void 0 ? conditional : emergencyChainStarters.find(function(fight) {
    return fight.available();
  })) !== null && _ref !== void 0 ? _ref : null;
}
function proceedWithOrb() {
  var strat = crateStrategy();
  if (!have($item(_templateObject1363 || (_templateObject1363 = _taggedTemplateLiteral65(["miniature crystal ball"])))) || strat !== "Orb")
    return true;
  var gregFightNames = ["Macrometeorite", "Powerful Glove", "Habitats Monster", "Be Gregarious", "Orb Prediction"];
  if (CrystalBall_exports.ponder().get($location(_templateObject1373 || (_templateObject1373 = _taggedTemplateLiteral65(["Noob Cave"])))) === embezzler2 && embezzlerSources.filter(function(source) {
    return !gregFightNames.some(function(name) {
      return source.name.includes(name);
    });
  }).find(function(source) {
    return source.available();
  })) {
    return false;
  }
  return true;
}
function toasterGaze() {
  var shore = $location(_templateObject1383 || (_templateObject1383 = _taggedTemplateLiteral65(["The Shore, Inc. Travel Agency"])));
  var pass = $item(_templateObject1393 || (_templateObject1393 = _taggedTemplateLiteral65(["Desert Bus pass"])));
  if (!(0, import_kolmafia73.canAdventure)(shore) && !have(pass)) {
    (0, import_kolmafia73.retrieveItem)(pass);
  }
  try {
    var store = (0, import_kolmafia73.visitUrl)((0, import_kolmafia73.toUrl)(shore));
    if (!store.includes("Check out the gift shop")) {
      (0, import_kolmafia73.print)("Unable to stare longingly at toast");
    }
    (0, import_kolmafia73.runChoice)(4);
  } catch (e) {
    (0, import_kolmafia73.print)("We ran into an issue when gazing at toast: ".concat(e, "."), "red");
  } finally {
    (0, import_kolmafia73.visitUrl)("main.php");
  }
}

// src/turns.ts
var _templateObject686;
var _templateObject2153;
var _templateObject3134;
var _templateObject4120;
var _templateObject5107;
var _templateObject687;
var _templateObject760;
var _templateObject857;
var _templateObject949;
var _templateObject1040;
function _taggedTemplateLiteral66(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function estimatedGarboTurns() {
  var pantsgivingAdventures = have($item(_templateObject686 || (_templateObject686 = _taggedTemplateLiteral66(["Pantsgiving"])))) ? Math.max(0, 2 - get("_pantsgivingFullness")) * 8 : 0;
  var potentialSausages = (0, import_kolmafia74.itemAmount)($item(_templateObject2153 || (_templateObject2153 = _taggedTemplateLiteral66(["magical sausage"])))) + (0, import_kolmafia74.itemAmount)($item(_templateObject3134 || (_templateObject3134 = _taggedTemplateLiteral66(["magical sausage casing"]))));
  var sausageAdventures = have($item(_templateObject4120 || (_templateObject4120 = _taggedTemplateLiteral66(["Kramco Sausage-o-Matic\u2122"])))) ? Math.min(potentialSausages, 23 - get("_sausagesEaten")) : 0;
  var thesisAdventures = have($familiar(_templateObject5107 || (_templateObject5107 = _taggedTemplateLiteral66(["Pocket Professor"])))) && !get("_thesisDelivered") ? 11 : 0;
  var nightcapAdventures = globalOptions.ascend && (0, import_kolmafia74.myInebriety)() <= (0, import_kolmafia74.inebrietyLimit)() && have($item(_templateObject687 || (_templateObject687 = _taggedTemplateLiteral66(["Drunkula's wineglass"])))) ? ESTIMATED_OVERDRUNK_TURNS : 0;
  var thumbRingMultiplier = usingThumbRing() ? 1 / 0.96 : 1;
  var yachtzeeTurns = 30;
  var adventuresAfterChaining = globalOptions.prefs.yachtzeechain && !get("_garboYachtzeeChainCompleted") ? Math.max(potentialFullnessAdventures() + potentialInebrietyAdventures() + potentialNonOrganAdventures() - yachtzeeTurns, 0) : 0;
  var turns2;
  if (globalOptions.stopTurncount)
    turns2 = globalOptions.stopTurncount - (0, import_kolmafia74.myTurncount)();
  else if (globalOptions.nobarf)
    turns2 = embezzlerCount();
  else if (globalOptions.saveTurns > 0 || !globalOptions.ascend) {
    turns2 = ((0, import_kolmafia74.myAdventures)() + sausageAdventures + pantsgivingAdventures + thesisAdventures + adventuresAfterChaining - globalOptions.saveTurns) * thumbRingMultiplier;
  } else {
    turns2 = ((0, import_kolmafia74.myAdventures)() + sausageAdventures + pantsgivingAdventures + nightcapAdventures + thesisAdventures + adventuresAfterChaining) * thumbRingMultiplier;
  }
  return turns2;
}
function remainingUserTurns() {
  var dietAdventures = Math.max(potentialFullnessAdventures() + potentialInebrietyAdventures() + potentialNonOrganAdventures(), 0);
  var turns2 = (0, import_kolmafia74.myAdventures)() + dietAdventures - estimatedGarboTurns() + globalOptions.saveTurns;
  return turns2;
}
var estimatedTurnsTomorrow = 400 + clamp((get("valueOfAdventure") - 4e3) / 8, 0, 600);
function untangleDigitizes(turnCount, chunks) {
  var turnsPerChunk = turnCount / chunks;
  var monstersPerChunk = Math.sqrt((turnsPerChunk + 3) / 5 + 1 / 4) - 1 / 2;
  return Math.round(chunks * monstersPerChunk);
}
function digitizedMonstersRemaining() {
  if (!SourceTerminal_exports.have())
    return 0;
  var digitizesLeft = SourceTerminal_exports.getDigitizeUsesRemaining();
  if (digitizesLeft === SourceTerminal_exports.getMaximumDigitizeUses()) {
    return untangleDigitizes(estimatedGarboTurns(), SourceTerminal_exports.getMaximumDigitizeUses());
  }
  var monsterCount = SourceTerminal_exports.getDigitizeMonsterCount() + 1;
  var turnsLeftAtNextMonster = estimatedGarboTurns() - counter_exports.get("Digitize Monster");
  if (turnsLeftAtNextMonster <= 0)
    return 0;
  var turnsAtLastDigitize = turnsLeftAtNextMonster + ((monsterCount + 1) * monsterCount * 5 - 3);
  return untangleDigitizes(turnsAtLastDigitize, digitizesLeft + 1) - SourceTerminal_exports.getDigitizeMonsterCount();
}
function potentialFullnessAdventures() {
  var distentionPillSpace = have($item(_templateObject760 || (_templateObject760 = _taggedTemplateLiteral66(["distention pill"])))) && !get("_distentionPillUsed") ? 1 : 0;
  return ((0, import_kolmafia74.fullnessLimit)() - (0, import_kolmafia74.myFullness)() + distentionPillSpace) * 8;
}
function potentialInebrietyAdventures() {
  var syntheticPillSpace = have($item(_templateObject857 || (_templateObject857 = _taggedTemplateLiteral66(["synthetic dog hair pill"])))) && !get("_syntheticDogHairPillUsed") ? 1 : 0;
  var shotglassSpace = have($item(_templateObject949 || (_templateObject949 = _taggedTemplateLiteral66(["mime army shotglass"])))) && !get("_mimeArmyShotglassUsed") ? 1 : 0;
  var sweatSpace = have($item(_templateObject1040 || (_templateObject1040 = _taggedTemplateLiteral66(["designer sweatpants"])))) ? 3 - get("_sweatOutSomeBoozeUsed") : 0;
  return ((0, import_kolmafia74.inebrietyLimit)() - (0, import_kolmafia74.myInebriety)() + syntheticPillSpace + sweatSpace + shotglassSpace) * 7;
}
function potentialNonOrganAdventures() {
  var borrowedTimeAdventures = globalOptions.ascend && !get("_borrowedTimeUsed") ? 20 : 0;
  var chocolateAdventures = (3 - get("_chocolatesUsed")) * (4 - get("_chocolatesUsed")) / 2;
  var bufferAdventures = 30;
  return borrowedTimeAdventures + chocolateAdventures + bufferAdventures;
}

// src/familiar/lib.ts
var _templateObject688;
var _templateObject2154;
var _templateObject3135;
var _templateObject4121;
var _templateObject5108;
var _templateObject689;
var _templateObject761;
var _templateObject858;
var _templateObject950;
var _templateObject1041;
var _templateObject1138;
var _templateObject1236;
function _taggedTemplateLiteral67(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function timeToMeatify() {
  if (!have($familiar(_templateObject688 || (_templateObject688 = _taggedTemplateLiteral67(["Grey Goose"])))) || get("_meatifyMatterUsed") || (0, import_kolmafia75.myInebriety)() > (0, import_kolmafia75.inebrietyLimit)()) {
    return false;
  } else if ($familiar(_templateObject2154 || (_templateObject2154 = _taggedTemplateLiteral67(["Grey Goose"]))).experience >= 400)
    return true;
  else if (!globalOptions.ascend || (0, import_kolmafia75.myAdventures)() > 50)
    return false;
  var totalTurns = (0, import_kolmafia75.totalTurnsPlayed)();
  var usingLatte = have($item(_templateObject3135 || (_templateObject3135 = _taggedTemplateLiteral67(["latte lovers member's mug"])))) && get("latteModifier").split(",").includes("Meat Drop: 40");
  var nextProtonicGhost = have($item(_templateObject4121 || (_templateObject4121 = _taggedTemplateLiteral67(["protonic accelerator pack"])))) ? Math.max(1, get("nextParanormalActivity") - totalTurns) : Infinity;
  var nextVoteMonster = have($item(_templateObject5108 || (_templateObject5108 = _taggedTemplateLiteral67(['"I Voted!" sticker'])))) && get("_voteFreeFights") < 3 ? Math.max(0, (totalTurns % 11 - 1) % 11) : Infinity;
  var nextVoidMonster = have($item(_templateObject689 || (_templateObject689 = _taggedTemplateLiteral67(["cursed magnifying glass"])))) && get("_voidFreeFights") < 5 && globalOptions.prefs.valueOfFreeFight / 13 > baseMeat * (usingLatte ? 0.75 : 0.6) ? -get("cursedMagnifyingGlassCount") % 13 : Infinity;
  var freeFightNow = get("questPAGhost") !== "unstarted" || nextVoteMonster === 0 || nextVoidMonster === 0;
  var delay = Math.min(nextProtonicGhost, nextVoteMonster === 0 ? get("_voteFreeFights") < 2 ? 11 : Infinity : nextVoteMonster, nextVoidMonster === 0 ? 13 : nextVoidMonster);
  if (delay < (0, import_kolmafia75.myAdventures)())
    return false;
  else if (freeFightNow || $familiar(_templateObject761 || (_templateObject761 = _taggedTemplateLiteral67(["Grey Goose"]))).experience >= 121)
    return true;
  return false;
}
function pocketProfessorLectures() {
  return 2 + Math.ceil(Math.sqrt((0, import_kolmafia75.familiarWeight)($familiar(_templateObject858 || (_templateObject858 = _taggedTemplateLiteral67(["Pocket Professor"])))) + (0, import_kolmafia75.weightAdjustment)()));
}
function canOpenRedPresent() {
  return have($familiar(_templateObject950 || (_templateObject950 = _taggedTemplateLiteral67(["Crimbo Shrub"])))) && !have($effect(_templateObject1041 || (_templateObject1041 = _taggedTemplateLiteral67(["Everything Looks Red"])))) && !have($skill(_templateObject1138 || (_templateObject1138 = _taggedTemplateLiteral67(["Free-For-All"])))) && get("shrubGifts") === "meat" && (0, import_kolmafia75.myInebriety)() <= (0, import_kolmafia75.inebrietyLimit)();
}
function turnsAvailable() {
  var baseTurns = estimatedGarboTurns();
  var digitizes = digitizedMonstersRemaining();
  var mapTurns = globalOptions.ascend ? clamp((0, import_kolmafia75.availableAmount)($item(_templateObject1236 || (_templateObject1236 = _taggedTemplateLiteral67(["Map to Safety Shelter Grimace Prime"])))), 0, ESTIMATED_OVERDRUNK_TURNS) : 0;
  var barfTurns = baseTurns - digitizes - mapTurns;
  var barfCombatRate = 1 - 1 / turnsToNC;
  return barfTurns * barfCombatRate;
}

// src/familiar/barfFamiliar.ts
var import_kolmafia77 = require("kolmafia");

// src/session.ts
var import_kolmafia76 = require("kolmafia");
var _templateObject690;
function _toConsumableArray38(arr) {
  return _arrayWithoutHoles38(arr) || _iterableToArray38(arr) || _unsupportedIterableToArray52(arr) || _nonIterableSpread38();
}
function _nonIterableSpread38() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray38(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles38(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray52(arr);
}
function _taggedTemplateLiteral68(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _createForOfIteratorHelper29(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray52(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray52(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray52(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray52(o, minLen);
}
function _arrayLikeToArray52(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
var session = null;
function startSession() {
  session = Session.current();
}
function sessionSinceStart() {
  if (session) {
    return Session.current().diff(session);
  }
  return Session.current();
}
var marginalSession = null;
var marginalSessionDiff = null;
var barfSession = null;
var barfSessionStartTurns = (0, import_kolmafia76.totalTurnsPlayed)();
var continueMeatTracking = true;
var numTrackedItemTurns = null;
var marginalFamiliarsExcessValue = 0;
function setMarginalFamiliarsExcessValue(val) {
  marginalFamiliarsExcessValue = Math.max(0, val);
}
var marginalFamiliarsExcessTotal = 0;
var outlierItemList = $items(_templateObject690 || (_templateObject690 = _taggedTemplateLiteral68(["Extrovermectin\u2122, Volcoino, Pok\xE9-Gro fertilizer"])));
function trackBarfSessionStatistics() {
  if ((0, import_kolmafia76.myInebriety)() > (0, import_kolmafia76.inebrietyLimit)())
    return;
  if (!barfSession) {
    barfSession = Session.current();
    barfSessionStartTurns = (0, import_kolmafia76.totalTurnsPlayed)();
  }
  if (!marginalSession && ((0, import_kolmafia76.totalTurnsPlayed)() - barfSessionStartTurns >= 100 || (0, import_kolmafia76.myAdventures)() <= 200 + 25 + globalOptions.saveTurns && (0, import_kolmafia76.myAdventures)() > globalOptions.saveTurns + 25)) {
    marginalSession = Session.current();
    numTrackedItemTurns = (0, import_kolmafia76.myAdventures)() - globalOptions.saveTurns - 25;
  }
  if (marginalSession)
    marginalFamiliarsExcessTotal += marginalFamiliarsExcessValue;
  marginalFamiliarsExcessValue = 0;
  if ((!get("_garboMarginalMeatCheckpoint") || !get("_garboMarginalMeatTurns")) && (0, import_kolmafia76.myAdventures)() - 25 - globalOptions.saveTurns <= 50 && (0, import_kolmafia76.myAdventures)() > 25 + globalOptions.saveTurns) {
    var _sessionSinceStart$va = sessionSinceStart().value(garboValue), meat = _sessionSinceStart$va.meat, items = _sessionSinceStart$va.items;
    var numTrackedMeatTurns = (0, import_kolmafia76.myAdventures)() - 25 - globalOptions.saveTurns;
    (0, import_kolmafia76.setProperty)("_garboMarginalMeatCheckpoint", meat.toFixed(0));
    (0, import_kolmafia76.setProperty)("_garboMarginalItemCheckpoint", (items - marginalFamiliarsExcessTotal).toFixed(0));
    (0, import_kolmafia76.setProperty)("_garboMarginalMeatTurns", numTrackedMeatTurns.toFixed(0));
  }
  if (get("_garboMarginalMeatCheckpoint") && get("_garboMarginalMeatTurns") && continueMeatTracking && (0, import_kolmafia76.myAdventures)() - 25 - globalOptions.saveTurns <= 0) {
    continueMeatTracking = false;
    var _sessionSinceStart$va2 = sessionSinceStart().value(garboValue), _meat = _sessionSinceStart$va2.meat, _items = _sessionSinceStart$va2.items;
    var meatDiff = _meat - get("_garboMarginalMeatCheckpoint", 0);
    var itemDiff = _items - marginalFamiliarsExcessTotal - get("_garboMarginalItemCheckpoint", 0);
    (0, import_kolmafia76.setProperty)("_garboMarginalMeatValue", meatDiff.toFixed(0));
    (0, import_kolmafia76.setProperty)("_garboMarginalItemValue", itemDiff.toFixed(0));
    if (marginalSession)
      marginalSessionDiff = Session.current().diff(marginalSession);
  }
}
function printMarginalSession() {
  if ((0, import_kolmafia76.myInebriety)() > (0, import_kolmafia76.inebrietyLimit)() || (0, import_kolmafia76.myAdventures)() > globalOptions.saveTurns)
    return;
  if (get("_garboMarginalMeatValue") && get("_garboMarginalMeatTurns")) {
    var meat = get("_garboMarginalMeatValue", 0);
    var meatTurns = get("_garboMarginalMeatTurns", 0);
    if (meatTurns <= 0) {
      (0, import_kolmafia76.print)("Error in estimating marginal MPA - meat turns tracked = 0", "red");
      return;
    }
    var MPA2 = meat / meatTurns;
    if (marginalSessionDiff && barfSession && numTrackedItemTurns && numTrackedItemTurns >= Math.max(50, meatTurns)) {
      var _marginalSessionDiff$ = marginalSessionDiff.value(garboValue), items = _marginalSessionDiff$.items, itemDetails = _marginalSessionDiff$.itemDetails;
      var barfItemDetails = Session.current().diff(barfSession).value(garboValue).itemDetails;
      var outlierItemDetails = itemDetails.filter(function(detail2) {
        return outlierItemList.includes(detail2.item) || detail2.quantity === 1 && detail2.value >= 5e3 && barfItemDetails.some(function(d) {
          return d.item === detail2.item && d.quantity <= 2;
        });
      }).sort(function(a, b) {
        return b.value - a.value;
      });
      (0, import_kolmafia76.print)("Outliers:", HIGHLIGHT);
      var outlierItems = 0;
      var _iterator2 = _createForOfIteratorHelper29(outlierItemDetails), _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
          var detail = _step2.value;
          (0, import_kolmafia76.print)("".concat(detail.quantity, " ").concat(detail.item, " worth ").concat(detail.value.toFixed(0), " total"), HIGHLIGHT);
          outlierItems += detail.value;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      var outlierIPA = (items - marginalFamiliarsExcessTotal) / numTrackedItemTurns;
      var IPA = (items - marginalFamiliarsExcessTotal - outlierItems) / numTrackedItemTurns;
      var totalOutlierMPA = MPA2 + outlierIPA;
      var totalMPA = MPA2 + IPA;
      (0, import_kolmafia76.print)("Marginal MPA: ".concat(formatNumber(Math.round(MPA2 * 100) / 100), " [raw] + ").concat(formatNumber(Math.round(IPA * 100) / 100), " [items] (").concat(formatNumber(Math.round(outlierIPA * 100) / 100), " [outliers]) = ").concat(formatNumber(Math.round(totalMPA * 100) / 100), " [total] (").concat(formatNumber(Math.round(totalOutlierMPA * 100) / 100), " [w/ outliers])"), HIGHLIGHT);
    } else if (get("_garboMarginalItemValue")) {
      var _items2 = get("_garboMarginalItemValue", 0);
      var _IPA = _items2 / meatTurns;
      var _totalMPA = MPA2 + _IPA;
      (0, import_kolmafia76.print)("Warning: Insufficient turns were run, so this estimate is subject to large variance. Be careful when using these values as is.", "red");
      (0, import_kolmafia76.print)("Marginal MPA: ".concat(formatNumber(Math.round(MPA2 * 100) / 100), " [raw] + ").concat(formatNumber(Math.round(_IPA * 100) / 100), " [items] = ").concat(formatNumber(Math.round(_totalMPA * 100) / 100), " [total]"), HIGHLIGHT);
    }
  }
}
function endSession() {
  var printLog2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
  if (resetDailyPreference("garboResultsDate")) {
    _set("garboResultsMeat", 0);
    _set("garboResultsItems", 0);
  }
  var message = function(head2, meat2, items2) {
    return (0, import_kolmafia76.print)("".concat(head2, ", you generated ").concat(formatNumber(meat2 + items2), " meat, with ").concat(formatNumber(meat2), " raw meat and ").concat(formatNumber(items2), " from items"), HIGHLIGHT);
  };
  var _sessionSinceStart$va3 = sessionSinceStart().value(garboValue), meat = _sessionSinceStart$va3.meat, items = _sessionSinceStart$va3.items, itemDetails = _sessionSinceStart$va3.itemDetails;
  var totalMeat = meat + property_exports.getNumber("garboResultsMeat", 0);
  var totalItems = items + property_exports.getNumber("garboResultsItems", 0);
  if (printLog2) {
    var losers = itemDetails.sort(function(a, b) {
      return a.value - b.value;
    }).slice(0, 3);
    var winners = itemDetails.reverse().slice(0, 3);
    (0, import_kolmafia76.print)("Extreme Items:", HIGHLIGHT);
    for (var _i = 0, _arr = [].concat(_toConsumableArray38(winners), _toConsumableArray38(losers)); _i < _arr.length; _i++) {
      var detail = _arr[_i];
      (0, import_kolmafia76.print)("".concat(detail.quantity, " ").concat(detail.item, " worth ").concat(detail.value.toFixed(0), " total"), HIGHLIGHT);
    }
  }
  _set("garboResultsMeat", totalMeat);
  _set("garboResultsItems", totalItems);
  if (printLog2) {
    message("This run of garbo", meat, items);
    message("So far today", totalMeat, totalItems);
    printMarginalSession();
    if (globalOptions.quick) {
      (0, import_kolmafia76.print)("Quick mode was enabled, results may be less accurate than normal.");
    }
  }
  if (globalOptions.loginvalidwishes) {
    if (failedWishes.length === 0) {
      (0, import_kolmafia76.print)("No invalid wishes found.");
    } else {
      (0, import_kolmafia76.print)("Found the following unwishable effects:");
      failedWishes.forEach(function(effect2) {
        return (0, import_kolmafia76.print)("".concat(effect2));
      });
    }
  }
}

// src/familiar/barfFamiliar.ts
var _templateObject691;
var _templateObject2155;
var _templateObject3136;
var _templateObject4122;
var _templateObject5109;
var _templateObject696;
var _templateObject765;
var _templateObject859;
var _templateObject951;
var _templateObject1044;
function ownKeys13(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread13(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys13(Object(source), true).forEach(function(key) {
      _defineProperty29(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys13(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty29(obj, key, value) {
  key = _toPropertyKey32(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey32(arg) {
  var key = _toPrimitive32(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive32(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _taggedTemplateLiteral69(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var ITEM_DROP_VALUE = 0.72;
var MEAT_DROP_VALUE = baseMeat / 100;
var outfitCache2 = /* @__PURE__ */ new Map();
var outfitSlots2 = $slots(_templateObject691 || (_templateObject691 = _taggedTemplateLiteral69(["hat, back, shirt, weapon, off-hand, pants, acc1, acc2, acc3, familiar"])));
function getCachedOutfitValues(fam2) {
  var lepMult = findLeprechaunMultiplier(fam2);
  var currentValue = outfitCache2.get(lepMult);
  if (currentValue)
    return currentValue;
  var current = (0, import_kolmafia77.myFamiliar)();
  (0, import_kolmafia77.cliExecute)("checkpoint");
  try {
    barfOutfit({
      familiar: fam2,
      avoid: $items(_templateObject2155 || (_templateObject2155 = _taggedTemplateLiteral69(['Kramco Sausage-o-Matic\u2122, cursed magnifying glass, protonic accelerator pack, "I Voted!" sticker, li\'l pirate costume, bag of many confections'])))
    }, true).dress();
    var outfit3 = outfitSlots2.map(function(slot) {
      return (0, import_kolmafia77.equippedItem)(slot);
    });
    var bonuses = bonusGear(BonusEquipMode.EMBEZZLER, false);
    var values = {
      weight: sum(outfit3, function(eq) {
        return get2("Familiar Weight", eq);
      }),
      meat: sum(outfit3, function(eq) {
        return get2("Meat Drop", eq);
      }),
      item: sum(outfit3, function(eq) {
        return get2("Item Drop", eq);
      }),
      bonus: sum(outfit3, function(eq) {
        var _bonuses$get;
        return (_bonuses$get = bonuses.get(eq)) !== null && _bonuses$get !== void 0 ? _bonuses$get : 0;
      })
    };
    outfitCache2.set(lepMult, values);
    return values;
  } finally {
    (0, import_kolmafia77.useFamiliar)(current);
    (0, import_kolmafia77.cliExecute)("outfit checkpoint");
  }
}
var nonOutfitWeightBonus = function() {
  return (0, import_kolmafia77.weightAdjustment)() - sum(outfitSlots2, function(slot) {
    return get2("Familiar Weight", (0, import_kolmafia77.equippedItem)(slot));
  });
};
function familiarModifier(familiar4, modifier) {
  var cachedOutfitWeight = getCachedOutfitValues(familiar4).weight;
  var totalWeight = (0, import_kolmafia77.familiarWeight)(familiar4) + nonOutfitWeightBonus() + cachedOutfitWeight;
  return (0, import_kolmafia77.numericModifier)(familiar4, modifier, totalWeight, $item.none);
}
function familiarAbilityValue(familiar4) {
  return familiarModifier(familiar4, "Meat Drop") * MEAT_DROP_VALUE + familiarModifier(familiar4, "Item Drop") * ITEM_DROP_VALUE;
}
function totalFamiliarValue(_ref) {
  var expectedValue = _ref.expectedValue, outfitValue = _ref.outfitValue, familiar4 = _ref.familiar;
  return expectedValue + outfitValue + familiarAbilityValue(familiar4);
}
function turnsNeededForFamiliar(_ref2, baselineToCompareAgainst) {
  var familiar4 = _ref2.familiar, limit = _ref2.limit, outfitValue = _ref2.outfitValue;
  switch (limit) {
    case "drops":
      return sum(getAllDrops(familiar4).filter(function(_ref3) {
        var expectedValue = _ref3.expectedValue;
        return outfitValue + familiarAbilityValue(familiar4) + expectedValue > totalFamiliarValue(baselineToCompareAgainst);
      }), function(_ref4) {
        var expectedTurns = _ref4.expectedTurns;
        return expectedTurns;
      });
    case "experience":
      return getExperienceFamiliarLimit(familiar4);
    case "none":
      return 0;
    case "special":
      return getSpecialFamiliarLimit({
        familiar: familiar4,
        outfitValue: outfitValue,
        baselineToCompareAgainst: baselineToCompareAgainst
      });
  }
}
function calculateOutfitValue(f) {
  var outfit3 = getCachedOutfitValues(f.familiar);
  var outfitValue = outfit3.bonus + outfit3.meat * MEAT_DROP_VALUE + outfit3.item * ITEM_DROP_VALUE;
  var outfitWeight = outfit3.weight;
  return _objectSpread13(_objectSpread13({}, f), {}, {
    outfitValue: outfitValue,
    outfitWeight: outfitWeight
  });
}
function barfFamiliar() {
  if (timeToMeatify())
    return $familiar(_templateObject3136 || (_templateObject3136 = _taggedTemplateLiteral69(["Grey Goose"])));
  if (get("garbo_IgnoreMarginalFamiliars", false))
    return meatFamiliar();
  var fullMenu = menu2({
    canChooseMacro: true,
    location: $location(_templateObject4122 || (_templateObject4122 = _taggedTemplateLiteral69(["Barf Mountain"]))),
    includeExperienceFamiliars: false
  }).map(calculateOutfitValue);
  var meatFamiliarEntry = fullMenu.find(function(_ref5) {
    var familiar4 = _ref5.familiar;
    return familiar4 === meatFamiliar();
  });
  if (!meatFamiliarEntry)
    throw new Error("Something went wrong when initializing familiars!");
  var meatFamiliarValue = totalFamiliarValue(meatFamiliarEntry);
  var viableMenu = fullMenu.filter(function(f) {
    return totalFamiliarValue(f) > meatFamiliarValue;
  });
  if (viableMenu.every(function(_ref6) {
    var limit = _ref6.limit;
    return limit !== "none";
  })) {
    var turnsNeeded = sum(viableMenu, function(option) {
      return turnsNeededForFamiliar(option, meatFamiliarEntry);
    });
    if (turnsNeeded < turnsAvailable()) {
      var shrubAvailable = viableMenu.some(function(_ref7) {
        var familiar4 = _ref7.familiar;
        return familiar4 === $familiar(_templateObject5109 || (_templateObject5109 = _taggedTemplateLiteral69(["Crimbo Shrub"])));
      });
      return shrubAvailable ? $familiar(_templateObject696 || (_templateObject696 = _taggedTemplateLiteral69(["Crimbo Shrub"]))) : meatFamiliar();
    }
  }
  if (viableMenu.length === 0) {
    setMarginalFamiliarsExcessValue(0);
    return meatFamiliar();
  }
  var best = maxBy(viableMenu, totalFamiliarValue);
  var jellyfish = fullMenu.find(function(_ref8) {
    var familiar4 = _ref8.familiar;
    return familiar4 === $familiar(_templateObject765 || (_templateObject765 = _taggedTemplateLiteral69(["Space Jellyfish"])));
  });
  var jellyfishValue = jellyfish ? garboValue($item(_templateObject859 || (_templateObject859 = _taggedTemplateLiteral69(["stench jelly"])))) / 20 + familiarAbilityValue(jellyfish.familiar) + jellyfish.outfitValue : 0;
  var excessValue = Math.max(best.expectedValue + best.outfitValue + familiarAbilityValue(best.familiar) - Math.max(meatFamiliarValue, jellyfishValue), 0);
  setMarginalFamiliarsExcessValue(excessValue);
  var familiarPrintout = function(x) {
    return "(expected value of ".concat(x.expectedValue.toFixed(1), " from familiar drops, ").concat(familiarAbilityValue(x.familiar).toFixed(1), " from familiar abilities and ").concat(x.outfitValue.toFixed(1), " from outfit)");
  };
  (0, import_kolmafia77.print)("Choosing to use ".concat(best.familiar, " ").concat(familiarPrintout(best), " over ").concat(meatFamiliarEntry.familiar, " ").concat(familiarPrintout(meatFamiliarEntry), "."), HIGHLIGHT);
  return best.familiar;
}
function getSpecialFamiliarLimit(_ref9) {
  var familiar4 = _ref9.familiar, outfitValue = _ref9.outfitValue, baselineToCompareAgainst = _ref9.baselineToCompareAgainst;
  switch (familiar4) {
    case $familiar(_templateObject951 || (_templateObject951 = _taggedTemplateLiteral69(["Space Jellyfish"]))):
      return sum(getAllJellyfishDrops().filter(function(_ref10) {
        var expectedValue = _ref10.expectedValue;
        return outfitValue + familiarAbilityValue(familiar4) + expectedValue > totalFamiliarValue(baselineToCompareAgainst);
      }), function(_ref11) {
        var turnsAtValue = _ref11.turnsAtValue;
        return turnsAtValue;
      });
    case $familiar(_templateObject1044 || (_templateObject1044 = _taggedTemplateLiteral69(["Crimbo Shrub"]))):
      return Math.ceil(estimatedGarboTurns() / 100);
    default:
      return 0;
  }
}

// src/familiar/itemFamiliar.ts
var import_kolmafia78 = require("kolmafia");
var _templateObject697;
var _templateObject2156;
var _templateObject3137;
var _templateObject4123;
var _templateObject5118;
var _templateObject698;
var _templateObject766;
var _templateObject860;
var _templateObject955;
var _templateObject1045;
var _templateObject1139;
var _templateObject1237;
var _templateObject1336;
function _toConsumableArray39(arr) {
  return _arrayWithoutHoles39(arr) || _iterableToArray39(arr) || _unsupportedIterableToArray53(arr) || _nonIterableSpread39();
}
function _nonIterableSpread39() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray53(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray53(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray53(o, minLen);
}
function _iterableToArray39(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles39(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray53(arr);
}
function _arrayLikeToArray53(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral70(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var bestNonCheerleaderFairy;
function bestFairy() {
  if (have($familiar(_templateObject697 || (_templateObject697 = _taggedTemplateLiteral70(["Trick-or-Treating Tot"])))) && have($item(_templateObject2156 || (_templateObject2156 = _taggedTemplateLiteral70(["li'l ninja costume"]))))) {
    return $familiar(_templateObject3137 || (_templateObject3137 = _taggedTemplateLiteral70(["Trick-or-Treating Tot"])));
  }
  if (!bestNonCheerleaderFairy) {
    var viableFairies = import_kolmafia78.Familiar.all().filter(function(f) {
      return have(f) && findFairyMultiplier(f) && f !== $familiar(_templateObject4123 || (_templateObject4123 = _taggedTemplateLiteral70(["Steam-Powered Cheerleader"]))) && !f.physicalDamage && !f.elementalDamage;
    });
    var highestFairyMult = findFairyMultiplier(maxBy(viableFairies, findFairyMultiplier));
    var goodFairies = viableFairies.filter(function(f) {
      return findFairyMultiplier(f) === highestFairyMult;
    });
    if (have($familiar(_templateObject5118 || (_templateObject5118 = _taggedTemplateLiteral70(["Reagnimated Gnome"])))) && !have($item(_templateObject698 || (_templateObject698 = _taggedTemplateLiteral70(["gnomish housemaid's kgnee"])))) && !get("_garbo_triedForKgnee", false)) {
      var current = (0, import_kolmafia78.myFamiliar)();
      (0, import_kolmafia78.useFamiliar)($familiar(_templateObject766 || (_templateObject766 = _taggedTemplateLiteral70(["Reagnimated Gnome"]))));
      (0, import_kolmafia78.visitUrl)("arena.php");
      (0, import_kolmafia78.runChoice)(4);
      (0, import_kolmafia78.useFamiliar)(current);
      _set("_garbo_triedForKgnee", true);
    }
    if (have($item(_templateObject860 || (_templateObject860 = _taggedTemplateLiteral70(["gnomish housemaid's kgnee"])))) && highestFairyMult === 1) {
      goodFairies.push($familiar(_templateObject955 || (_templateObject955 = _taggedTemplateLiteral70(["Reagnimated Gnome"]))));
    }
    var bonuses = [].concat(_toConsumableArray39(menu2({
      includeExperienceFamiliars: false
    })), [{
      familiar: $familiar(_templateObject1045 || (_templateObject1045 = _taggedTemplateLiteral70(["Reagnimated Gnome"]))),
      expectedValue: get("valueOfAdventure") * 70 / 1e3,
      leprechaunMultiplier: 0,
      limit: "none"
    }]);
    bestNonCheerleaderFairy = maxBy(goodFairies, function(f) {
      var _bonuses$find$expecte, _bonuses$find;
      return (_bonuses$find$expecte = (_bonuses$find = bonuses.find(function(_ref) {
        var familiar4 = _ref.familiar;
        return familiar4 === f;
      })) === null || _bonuses$find === void 0 ? void 0 : _bonuses$find.expectedValue) !== null && _bonuses$find$expecte !== void 0 ? _bonuses$find$expecte : 0;
    });
  }
  if (have($familiar(_templateObject1139 || (_templateObject1139 = _taggedTemplateLiteral70(["Steam-Powered Cheerleader"])))) && findFairyMultiplier($familiar(_templateObject1237 || (_templateObject1237 = _taggedTemplateLiteral70(["Steam-Powered Cheerleader"])))) > findFairyMultiplier(bestNonCheerleaderFairy)) {
    return $familiar(_templateObject1336 || (_templateObject1336 = _taggedTemplateLiteral70(["Steam-Powered Cheerleader"])));
  }
  return bestNonCheerleaderFairy;
}

// src/combat.ts
var _templateObject699;
var _templateObject2157;
var _templateObject3138;
var _templateObject4124;
var _templateObject5119;
var _templateObject6100;
var _templateObject767;
var _templateObject861;
var _templateObject956;
var _templateObject1046;
var _templateObject1140;
var _templateObject1238;
var _templateObject1337;
var _templateObject1433;
var _templateObject1530;
var _templateObject1630;
var _templateObject1730;
var _templateObject1830;
var _templateObject1930;
var _templateObject2030;
var _templateObject2158;
var _templateObject2230;
var _templateObject2329;
var _templateObject2429;
var _templateObject2529;
var _templateObject2629;
var _templateObject2726;
var _templateObject2823;
var _templateObject2923;
var _templateObject3021;
var _templateObject3139;
var _templateObject3223;
var _templateObject3322;
var _templateObject3421;
var _templateObject3520;
var _templateObject3618;
var _templateObject3717;
var _templateObject3816;
var _templateObject3915;
var _templateObject4015;
var _templateObject4125;
var _templateObject4218;
var _templateObject4318;
var _templateObject4416;
var _templateObject4515;
var _templateObject4613;
var _templateObject4713;
var _templateObject4813;
var _templateObject4913;
var _templateObject5013;
var _templateObject5120;
var _templateObject5218;
var _templateObject5317;
var _templateObject5415;
var _templateObject5514;
var _templateObject5613;
var _templateObject5712;
var _templateObject5812;
var _templateObject5912;
var _templateObject6011;
var _templateObject6115;
var _templateObject6215;
var _templateObject6314;
var _templateObject6412;
var _templateObject6511;
var _templateObject6611;
var _templateObject6711;
var _templateObject6810;
var _templateObject6910;
var _templateObject706;
var _templateObject7112;
var _templateObject7212;
var _templateObject7312;
var _templateObject7411;
var _templateObject7511;
var _templateObject768;
var _templateObject775;
var _templateObject785;
var _templateObject795;
var _templateObject805;
var _templateObject8112;
var _templateObject8212;
var _templateObject8311;
var _templateObject8411;
var _templateObject8510;
var _templateObject864;
var _templateObject874;
var _templateObject884;
var _templateObject894;
var _templateObject904;
var _templateObject9112;
var _templateObject9212;
var _templateObject9311;
var _templateObject9410;
var _templateObject957;
var _templateObject964;
var _templateObject974;
var _templateObject984;
var _templateObject994;
var _templateObject1004;
var _templateObject10112;
var _templateObject10212;
var _templateObject10311;
var _templateObject1047;
var _templateObject1054;
var _templateObject1064;
var _templateObject1074;
var _templateObject1084;
var _templateObject1094;
var _templateObject1104;
var _templateObject11112;
var _templateObject11211;
var _templateObject11310;
var _templateObject1144;
var _templateObject1154;
var _templateObject1164;
var _templateObject1174;
var _templateObject1184;
var _templateObject1194;
var _templateObject1204;
var _templateObject12112;
var _templateObject12211;
var _templateObject1239;
var _templateObject1244;
var _templateObject1254;
var _templateObject1264;
var _templateObject1274;
var _templateObject1284;
var _templateObject1294;
var _templateObject1304;
var _templateObject13112;
var _templateObject13211;
var _templateObject1338;
var _templateObject1344;
var _templateObject1354;
var _templateObject1364;
var _templateObject1374;
var _templateObject1384;
var _templateObject1394;
var _templateObject1403;
var _templateObject14111;
var _templateObject14210;
var _templateObject1434;
var _templateObject1443;
var _templateObject1453;
var _templateObject1463;
var _templateObject1473;
var _templateObject1483;
var _templateObject1493;
var _templateObject1503;
var _templateObject15111;
var _templateObject15210;
var _templateObject1533;
var _templateObject1543;
var _templateObject1553;
var _templateObject1563;
var _templateObject1573;
var _templateObject1583;
var _templateObject1593;
var _templateObject1603;
var _templateObject16111;
var _templateObject16210;
var _templateObject1633;
var _templateObject1643;
var _templateObject1653;
var _templateObject1663;
var _templateObject1673;
var _templateObject1683;
var _templateObject1693;
var _templateObject1703;
var _templateObject17111;
var _templateObject17210;
var _templateObject1733;
var _templateObject1743;
var _templateObject1753;
var _templateObject1763;
var _templateObject1773;
var _templateObject1783;
var _templateObject1793;
var _templateObject1803;
var _templateObject18111;
var _templateObject18210;
var _templateObject1833;
var _templateObject1843;
var _templateObject1853;
var _templateObject1863;
var _templateObject1873;
var _templateObject1883;
var _templateObject1893;
var _templateObject1903;
var _templateObject19111;
var _templateObject19210;
var _templateObject1933;
var _templateObject1943;
var _templateObject1953;
var _templateObject1963;
var _templateObject1973;
var _templateObject1983;
var _templateObject1993;
var _templateObject2003;
var _templateObject20111;
var _templateObject20210;
var _templateObject2033;
var _templateObject2043;
var _templateObject2053;
var _templateObject2063;
var _templateObject2073;
var _templateObject2083;
var _templateObject2093;
var _templateObject21011;
var _templateObject21111;
var _templateObject21210;
var _templateObject21310;
var _templateObject21410;
var _templateObject2159;
var _templateObject2163;
var _templateObject2172;
function _classCallCheck25(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties25(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey33(descriptor.key), descriptor);
  }
}
function _createClass25(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties25(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties25(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey33(arg) {
  var key = _toPrimitive33(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive33(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _inherits7(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf7(subClass, superClass);
}
function _setPrototypeOf7(o, p) {
  _setPrototypeOf7 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf7(o, p);
}
function _createSuper6(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct6();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf6(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf6(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn6(this, result);
  };
}
function _possibleConstructorReturn6(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized6(self2);
}
function _assertThisInitialized6(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _isNativeReflectConstruct6() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf6(o) {
  _getPrototypeOf6 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf6(o);
}
function _taggedTemplateLiteral71(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var monsterManuelCached = void 0;
function monsterManuelAvailable() {
  if (monsterManuelCached !== void 0)
    return Boolean(monsterManuelCached);
  monsterManuelCached = (0, import_kolmafia79.visitUrl)("questlog.php?which=3").includes("Monster Manuel");
  return Boolean(monsterManuelCached);
}
function maxCarriedFamiliarDamage(familiar4) {
  switch (familiar4) {
    case $familiar(_templateObject699 || (_templateObject699 = _taggedTemplateLiteral71(["Animated Macaroni Duck"]))):
      return 50;
    case $familiar(_templateObject2157 || (_templateObject2157 = _taggedTemplateLiteral71(["Barrrnacle"]))):
    case $familiar(_templateObject3138 || (_templateObject3138 = _taggedTemplateLiteral71(["Gelatinous Cubeling"]))):
    case $familiar(_templateObject4124 || (_templateObject4124 = _taggedTemplateLiteral71(["Penguin Goodfella"]))):
      return 30;
    case $familiar(_templateObject5119 || (_templateObject5119 = _taggedTemplateLiteral71(["Misshapen Animal Skeleton"]))):
      return 40 + (0, import_kolmafia79.numericModifier)("Spooky Damage");
    case $familiar(_templateObject6100 || (_templateObject6100 = _taggedTemplateLiteral71(["Hobo Monkey"]))):
      return 25;
    case $familiar(_templateObject767 || (_templateObject767 = _taggedTemplateLiteral71(["Grouper Groupie"]))):
      return 25 + (0, import_kolmafia79.numericModifier)("Sleaze Damage") * ((0, import_kolmafia79.myLocation)() === $location(_templateObject861 || (_templateObject861 = _taggedTemplateLiteral71(["Barf Mountain"]))) ? 2 : 1);
    case $familiar(_templateObject956 || (_templateObject956 = _taggedTemplateLiteral71(["Jitterbug"]))):
      return 20;
    case $familiar(_templateObject1046 || (_templateObject1046 = _taggedTemplateLiteral71(["Mutant Cactus Bud"]))):
      return 47;
    case $familiar(_templateObject1140 || (_templateObject1140 = _taggedTemplateLiteral71(["Robortender"]))):
      return 20;
  }
  return 0;
}
function maxFamiliarDamage(familiar4) {
  switch (familiar4) {
    case $familiar(_templateObject1238 || (_templateObject1238 = _taggedTemplateLiteral71(["Cocoabo"]))):
      return (0, import_kolmafia79.familiarWeight)(familiar4) + 3;
    case $familiar(_templateObject1337 || (_templateObject1337 = _taggedTemplateLiteral71(["Feather Boa Constrictor"]))):
      return (0, import_kolmafia79.familiarWeight)(familiar4) + 3 + (0, import_kolmafia79.numericModifier)("Sleaze Damage") * ((0, import_kolmafia79.myLocation)() === $location(_templateObject1433 || (_templateObject1433 = _taggedTemplateLiteral71(["Barf Mountain"]))) ? 2 : 1);
    case $familiar(_templateObject1530 || (_templateObject1530 = _taggedTemplateLiteral71(["Ninja Pirate Zombie Robot"]))):
      return Math.floor(((0, import_kolmafia79.familiarWeight)(familiar4) + 3) * 1.5);
  }
  return 0;
}
function maxPassiveDamage() {
  var vykeaMaxDamage = get("_VYKEACompanionLevel") > 0 ? 10 * get("_VYKEACompanionLevel") + 10 : 0;
  var thrallMaxDamage = (0, import_kolmafia79.myThrall)().level >= 5 && $thralls(_templateObject1630 || (_templateObject1630 = _taggedTemplateLiteral71(["Lasagmbie,Vermincelli"]))).includes((0, import_kolmafia79.myThrall)()) ? (0, import_kolmafia79.myThrall)().level * 2 : 0;
  var crownMaxDamage = (0, import_kolmafia79.haveEquipped)($item(_templateObject1730 || (_templateObject1730 = _taggedTemplateLiteral71(["Crown of Thrones"])))) ? maxCarriedFamiliarDamage((0, import_kolmafia79.myEnthronedFamiliar)()) : 0;
  var bjornMaxDamage = (0, import_kolmafia79.haveEquipped)($item(_templateObject1830 || (_templateObject1830 = _taggedTemplateLiteral71(["Buddy Bjorn"])))) ? maxCarriedFamiliarDamage((0, import_kolmafia79.myBjornedFamiliar)()) : 0;
  var familiarMaxDamage = maxFamiliarDamage((0, import_kolmafia79.myFamiliar)());
  return vykeaMaxDamage + thrallMaxDamage + crownMaxDamage + bjornMaxDamage + familiarMaxDamage;
}
function shouldRedigitize() {
  var digitizesLeft = SourceTerminal_exports.getDigitizeUsesRemaining();
  var monsterCount = SourceTerminal_exports.getDigitizeMonsterCount() + 1;
  var digitizeAdventuresUsed = monsterCount * (monsterCount + 1) * 5 - 3;
  return SourceTerminal_exports.have() && SourceTerminal_exports.canDigitize() && (0, import_kolmafia79.myAdventures)() * 1.04 < digitizesLeft * digitizeAdventuresUsed;
}
var Macro2 = /* @__PURE__ */ function(_StrictMacro) {
  _inherits7(Macro3, _StrictMacro);
  var _super = _createSuper6(Macro3);
  function Macro3() {
    _classCallCheck25(this, Macro3);
    return _super.apply(this, arguments);
  }
  _createClass25(Macro3, [{
    key: "abortWithMsg",
    value: function abortWithMsg(errorMessage) {
      return this.step('abort "'.concat(errorMessage, '"'));
    }
  }, {
    key: "tryHaveSkill",
    value: function tryHaveSkill(skill) {
      if (!skill)
        return this;
      return this.externalIf((0, import_kolmafia79.haveSkill)(skill), Macro3.trySkill(skill));
    }
  }, {
    key: "tryHaveItem",
    value: function tryHaveItem(item9) {
      if (!item9)
        return this;
      return this.externalIf(have(item9), Macro3.tryItem(item9));
    }
  }, {
    key: "trySingAlong",
    value: function trySingAlong() {
      if (!SongBoom_exports.have() || SongBoom_exports.song() !== "Total Eclipse of Your Meat")
        return this;
      return this.tryHaveSkill($skill(_templateObject1930 || (_templateObject1930 = _taggedTemplateLiteral71(["Sing Along"]))));
    }
  }, {
    key: "familiarActions",
    value: function familiarActions() {
      return this.externalIf((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject2030 || (_templateObject2030 = _taggedTemplateLiteral71(["Grey Goose"]))) && timeToMeatify(), Macro3.trySkill($skill(_templateObject2158 || (_templateObject2158 = _taggedTemplateLiteral71(["Meatify Matter"]))))).externalIf(canOpenRedPresent() && (0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject2230 || (_templateObject2230 = _taggedTemplateLiteral71(["Crimbo Shrub"]))), Macro3.trySkill($skill(_templateObject2329 || (_templateObject2329 = _taggedTemplateLiteral71(["Open a Big Red Present"]))))).externalIf((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject2429 || (_templateObject2429 = _taggedTemplateLiteral71(["Space Jellyfish"]))), Macro3.externalIf(get("_spaceJellyfishDrops") < 5, Macro3.if_($locations(_templateObject2529 || (_templateObject2529 = _taggedTemplateLiteral71(["Barf Mountain, Pirates of the Garbage Barges, Uncle Gator's Country Fun-Time Liquid Waste Sluice, The Toxic Teacups"]))).map(function(l) {
        return (0, import_kolmafia79.getMonsters)(l);
      }).flat(), Macro3.trySkill($skill(_templateObject2629 || (_templateObject2629 = _taggedTemplateLiteral71(["Extract Jelly"]))))), Macro3.trySkill($skill(_templateObject2726 || (_templateObject2726 = _taggedTemplateLiteral71(["Extract Jelly"]))))));
    }
  }, {
    key: "tryCopier",
    value: function tryCopier(itemOrSkill) {
      switch (itemOrSkill) {
        case $item(_templateObject2823 || (_templateObject2823 = _taggedTemplateLiteral71(["Spooky Putty sheet"]))):
          return this.externalIf(get("spookyPuttyCopiesMade") + Math.max(1, get("_raindohCopiesMade")) < 6 && $items(_templateObject2923 || (_templateObject2923 = _taggedTemplateLiteral71(["Spooky Putty sheet, Spooky Putty monster"]))).some(function(item9) {
            return have(item9);
          }), Macro3.tryItem(itemOrSkill));
        case $item(_templateObject3021 || (_templateObject3021 = _taggedTemplateLiteral71(["Rain-Doh black box"]))):
          return this.externalIf(get("_raindohCopiesMade") + Math.max(1, get("spookyPuttyCopiesMade")) < 6 && $items(_templateObject3139 || (_templateObject3139 = _taggedTemplateLiteral71(["Rain-Doh black box, Rain-Doh box full of monster"]))).some(function(item9) {
            return have(item9);
          }), Macro3.tryItem(itemOrSkill));
        case $item(_templateObject3223 || (_templateObject3223 = _taggedTemplateLiteral71(["4-d camera"]))):
          return this.externalIf(!get("_cameraUsed") && !have($item(_templateObject3322 || (_templateObject3322 = _taggedTemplateLiteral71(["shaking 4-d camera"])))), Macro3.tryHaveItem(itemOrSkill));
        case $item(_templateObject3421 || (_templateObject3421 = _taggedTemplateLiteral71(["crappy camera"]))):
          return this.externalIf(!get("_crappyCameraUsed") && !have($item(_templateObject3520 || (_templateObject3520 = _taggedTemplateLiteral71(["shaking crappy camera"])))), Macro3.tryHaveItem(itemOrSkill));
        case $item(_templateObject3618 || (_templateObject3618 = _taggedTemplateLiteral71(["unfinished ice sculpture"]))):
          return this.externalIf(!get("_iceSculptureUsed") && !have($item(_templateObject3717 || (_templateObject3717 = _taggedTemplateLiteral71(["ice sculpture"])))), Macro3.tryHaveItem(itemOrSkill));
        case $item(_templateObject3816 || (_templateObject3816 = _taggedTemplateLiteral71(["pulled green taffy"]))):
          return this.externalIf(!get("_envyfishEggUsed") && !have($item(_templateObject3915 || (_templateObject3915 = _taggedTemplateLiteral71(["envyfish egg"])))), Macro3.tryHaveItem(itemOrSkill));
        case $item(_templateObject4015 || (_templateObject4015 = _taggedTemplateLiteral71(["print screen button"]))):
          return this.tryHaveItem(itemOrSkill);
        case $item(_templateObject4125 || (_templateObject4125 = _taggedTemplateLiteral71(["alpine watercolor set"]))):
          return this.tryHaveItem(itemOrSkill);
        case $item(_templateObject4218 || (_templateObject4218 = _taggedTemplateLiteral71(["LOV Enamorang"]))):
          return this.externalIf(get("_enamorangs") < 5 && !get("enamorangMonster"), Macro3.tryHaveItem(itemOrSkill));
        case $skill(_templateObject4318 || (_templateObject4318 = _taggedTemplateLiteral71(["Digitize"]))):
          return this.externalIf(SourceTerminal_exports.canDigitize(), Macro3.trySkill(itemOrSkill));
      }
      return this;
    }
  }, {
    key: "meatKill",
    value: function meatKill() {
      var sealClubberSetup = (0, import_kolmafia79.myClass)() === $class(_templateObject4416 || (_templateObject4416 = _taggedTemplateLiteral71(["Seal Clubber"]))) && have($skill(_templateObject4515 || (_templateObject4515 = _taggedTemplateLiteral71(["Furious Wallop"]))));
      var opsSetup = (0, import_kolmafia79.equippedAmount)($item(_templateObject4613 || (_templateObject4613 = _taggedTemplateLiteral71(["Operation Patriot Shield"])))) > 0;
      var katanaSetup = (0, import_kolmafia79.equippedAmount)($item(_templateObject4713 || (_templateObject4713 = _taggedTemplateLiteral71(["haiku katana"])))) > 0;
      var capeSetup = get("retroCapeSuperhero") === "robot" && get("retroCapeWashingInstructions") === "kill" && (0, import_kolmafia79.itemType)((0, import_kolmafia79.equippedItem)($slot(_templateObject4813 || (_templateObject4813 = _taggedTemplateLiteral71(["weapon"]))))) === "pistol";
      var pigSkinnerSetup = have($skill(_templateObject4913 || (_templateObject4913 = _taggedTemplateLiteral71(["Head in the Game"]))));
      var willCrit = (0, import_kolmafia79.equippedAmount)($item(_templateObject5013 || (_templateObject5013 = _taggedTemplateLiteral71(["mafia pointer finger ring"])))) > 0 && (sealClubberSetup || opsSetup || katanaSetup || capeSetup || pigSkinnerSetup);
      return this.externalIf(shouldRedigitize(), Macro3.if_($monster(_templateObject5120 || (_templateObject5120 = _taggedTemplateLiteral71(["Knob Goblin Embezzler"]))), Macro3.trySkill($skill(_templateObject5218 || (_templateObject5218 = _taggedTemplateLiteral71(["Digitize"])))))).trySingAlong().familiarActions().externalIf(have($skill(_templateObject5317 || (_templateObject5317 = _taggedTemplateLiteral71(["Extract Oil"])))) && get("_oilExtracted") < 15, Macro3.if_($monster(_templateObject5415 || (_templateObject5415 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject5514 || (_templateObject5514 = _taggedTemplateLiteral71(["Extract Oil"])))))).externalIf(digitizedMonstersRemaining() <= 5 - get("_meteorShowerUses") && have($skill(_templateObject5613 || (_templateObject5613 = _taggedTemplateLiteral71(["Meteor Lore"])))) && get("_meteorShowerUses") < 5, Macro3.if_($monster(_templateObject5712 || (_templateObject5712 = _taggedTemplateLiteral71(["Knob Goblin Embezzler"]))), Macro3.trySkill($skill(_templateObject5812 || (_templateObject5812 = _taggedTemplateLiteral71(["Meteor Shower"])))))).externalIf(get("cosmicBowlingBallReturnCombats") < 1, Macro3.trySkill($skill(_templateObject5912 || (_templateObject5912 = _taggedTemplateLiteral71(["Bowl Straight Up"]))))).externalIf(have($skill(_templateObject6011 || (_templateObject6011 = _taggedTemplateLiteral71(["Transcendent Olfaction"])))) && (get("olfactedMonster") !== $monster(_templateObject6115 || (_templateObject6115 = _taggedTemplateLiteral71(["garbage tourist"]))) || !have($effect(_templateObject6215 || (_templateObject6215 = _taggedTemplateLiteral71(["On the Trail"]))))) && get("_olfactionsUsed") < 3, Macro3.if_($monster(_templateObject6314 || (_templateObject6314 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject6412 || (_templateObject6412 = _taggedTemplateLiteral71(["Transcendent Olfaction"])))))).externalIf(get("_gallapagosMonster") !== $monster(_templateObject6511 || (_templateObject6511 = _taggedTemplateLiteral71(["garbage tourist"]))) && have($skill(_templateObject6611 || (_templateObject6611 = _taggedTemplateLiteral71(["Gallapagosian Mating Call"])))), Macro3.if_($monster(_templateObject6711 || (_templateObject6711 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject6810 || (_templateObject6810 = _taggedTemplateLiteral71(["Gallapagosian Mating Call"])))))).externalIf(get("longConMonster") !== $monster(_templateObject6910 || (_templateObject6910 = _taggedTemplateLiteral71(["garbage tourist"]))) && get("_longConUsed") < 5 && have($skill(_templateObject706 || (_templateObject706 = _taggedTemplateLiteral71(["Long Con"])))), Macro3.if_($monster(_templateObject7112 || (_templateObject7112 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject7212 || (_templateObject7212 = _taggedTemplateLiteral71(["Long Con"])))))).externalIf(get("motifMonster") !== $monster(_templateObject7312 || (_templateObject7312 = _taggedTemplateLiteral71(["garbage tourist"]))) && have($skill(_templateObject7411 || (_templateObject7411 = _taggedTemplateLiteral71(["Motif"])))) && !have($effect(_templateObject7511 || (_templateObject7511 = _taggedTemplateLiteral71(["Everything Looks Blue"])))), Macro3.if_($monster(_templateObject768 || (_templateObject768 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject775 || (_templateObject775 = _taggedTemplateLiteral71(["Motif"])))))).externalIf(!get("_latteCopyUsed") && (get("_latteMonster") !== $monster(_templateObject785 || (_templateObject785 = _taggedTemplateLiteral71(["garbage tourist"]))) || counter_exports.get("Latte Monster") > 30) && have($item(_templateObject795 || (_templateObject795 = _taggedTemplateLiteral71(["latte lovers member's mug"])))), Macro3.if_($monster(_templateObject805 || (_templateObject805 = _taggedTemplateLiteral71(["garbage tourist"]))), Macro3.trySkill($skill(_templateObject8112 || (_templateObject8112 = _taggedTemplateLiteral71(["Offer Latte to Opponent"])))))).externalIf(get("_feelNostalgicUsed") < 3 && get("lastCopyableMonster") === $monster(_templateObject8212 || (_templateObject8212 = _taggedTemplateLiteral71(["garbage tourist"]))) && have($skill(_templateObject8311 || (_templateObject8311 = _taggedTemplateLiteral71(["Feel Nostalgic"])))), Macro3.if_("!monsterid ".concat($monster(_templateObject8411 || (_templateObject8411 = _taggedTemplateLiteral71(["garbage tourist"]))).id), Macro3.trySkill($skill(_templateObject8510 || (_templateObject8510 = _taggedTemplateLiteral71(["Feel Nostalgic"])))))).externalIf(opsSetup, Macro3.trySkill($skill(_templateObject864 || (_templateObject864 = _taggedTemplateLiteral71(["Throw Shield"]))))).meatStasis(willCrit).externalIf((0, import_kolmafia79.hippyStoneBroken)() && monsterManuelAvailable(), Macro3.if_("(monsterid 1758 || monsterid 1759 || monsterid 1760) && monsterhpbelow ".concat(Math.floor((100 + (0, import_kolmafia79.numericModifier)("Monster Level")) / 5)), Macro3.trySkill($skill(_templateObject874 || (_templateObject874 = _taggedTemplateLiteral71(["Feel Superior"])))))).externalIf(sealClubberSetup, Macro3.trySkill($skill(_templateObject884 || (_templateObject884 = _taggedTemplateLiteral71(["Furious Wallop"]))))).externalIf(opsSetup, Macro3.attack()).externalIf(katanaSetup, Macro3.trySkill($skill(_templateObject894 || (_templateObject894 = _taggedTemplateLiteral71(["Summer Siesta"]))))).externalIf(capeSetup, Macro3.trySkill($skill(_templateObject904 || (_templateObject904 = _taggedTemplateLiteral71(["Precision Shot"]))))).externalIf(pigSkinnerSetup, Macro3.attack()).externalIf((0, import_kolmafia79.myClass)() === $class(_templateObject9112 || (_templateObject9112 = _taggedTemplateLiteral71(["Disco Bandit"]))), Macro3.trySkill($skill(_templateObject9212 || (_templateObject9212 = _taggedTemplateLiteral71(["Disco Dance of Doom"])))).trySkill($skill(_templateObject9311 || (_templateObject9311 = _taggedTemplateLiteral71(["Disco Dance II: Electric Boogaloo"])))).trySkill($skill(_templateObject9410 || (_templateObject9410 = _taggedTemplateLiteral71(["Disco Dance 3: Back in the Habit"]))))).externalIf((0, import_kolmafia79.myClass)() === $class(_templateObject957 || (_templateObject957 = _taggedTemplateLiteral71(["Cheese Wizard"]))) && (0, import_kolmafia79.myFamiliar)().experience < 400, Macro3.trySkill($skill(_templateObject964 || (_templateObject964 = _taggedTemplateLiteral71(["Stilton Splatter"]))))).kill();
    }
  }, {
    key: "meatStasis",
    value: function meatStasis(checkPassive) {
      if (checkPassive && !monsterManuelAvailable()) {
        return this;
      }
      var checkGet = function(i) {
        return have(i) && ((0, import_kolmafia79.itemAmount)(i) > 0 || (0, import_kolmafia79.retrieveItem)(i));
      };
      var stasisItem = $items(_templateObject974 || (_templateObject974 = _taggedTemplateLiteral71(["facsimile dictionary, dictionary, seal tooth"]))).find(checkGet);
      if (!stasisItem)
        throw new Error("Acquire a seal tooth and run garbo again.");
      var passiveDamage = maxPassiveDamage() + 5;
      var hpCheck = checkPassive ? "!hppercentbelow 25 && monsterhpabove ".concat(passiveDamage) : "!hppercentbelow 25";
      var hpCheckSixgun = checkPassive ? "!hppercentbelow 25 && monsterhpabove ".concat(passiveDamage + 40) : "!hppercentbelow 25";
      var stasisRounds = 0;
      if ([$familiar(_templateObject984 || (_templateObject984 = _taggedTemplateLiteral71(["Cocoabo"]))), $familiar(_templateObject994 || (_templateObject994 = _taggedTemplateLiteral71(["Feather Boa Constrictor"]))), $familiar(_templateObject1004 || (_templateObject1004 = _taggedTemplateLiteral71(["Ninja Pirate Zombie Robot"]))), $familiar(_templateObject10112 || (_templateObject10112 = _taggedTemplateLiteral71(["Stocking Mimic"])))].includes((0, import_kolmafia79.myFamiliar)())) {
        stasisRounds = 10;
      }
      if ((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject10212 || (_templateObject10212 = _taggedTemplateLiteral71(["Hobo Monkey"]))) || (0, import_kolmafia79.haveEquipped)($item(_templateObject10311 || (_templateObject10311 = _taggedTemplateLiteral71(["Buddy Bjorn"])))) || (0, import_kolmafia79.haveEquipped)($item(_templateObject1047 || (_templateObject1047 = _taggedTemplateLiteral71(["Crown of Thrones"])))) || get("_bittycar")) {
        stasisRounds = 20;
      }
      if (globalOptions.quick) {
        stasisRounds = Math.min(5, stasisRounds);
      }
      return this.if_("monstername angry tourist || monstername garbage tourist || monstername horrible tourist family || monstername Knob Goblin Embezzler || monstername sausage goblin", Macro3.externalIf(have($item(_templateObject1054 || (_templateObject1054 = _taggedTemplateLiteral71(["Time-Spinner"])))), Macro3.if_("".concat(hpCheck, " && monstername sausage goblin"), Macro3.tryHaveItem($item(_templateObject1064 || (_templateObject1064 = _taggedTemplateLiteral71(["Time-Spinner"])))))).externalIf(have($skill(_templateObject1074 || (_templateObject1074 = _taggedTemplateLiteral71(["Meteor Lore"])))), Macro3.if_("".concat(hpCheck, " && monstername sausage goblin"), Macro3.tryHaveSkill($skill(_templateObject1084 || (_templateObject1084 = _taggedTemplateLiteral71(["Micrometeorite"])))))).externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject1094 || (_templateObject1094 = _taggedTemplateLiteral71(["Pantsgiving"])))), Macro3.if_("".concat(hpCheck), Macro3.trySkill($skill(_templateObject1104 || (_templateObject1104 = _taggedTemplateLiteral71(["Pocket Crumbs"])))))).externalIf(SourceTerminal_exports.getSkills().includes($skill(_templateObject11112 || (_templateObject11112 = _taggedTemplateLiteral71(["Extract"])))), Macro3.if_("".concat(hpCheck), Macro3.trySkill($skill(_templateObject11211 || (_templateObject11211 = _taggedTemplateLiteral71(["Extract"])))))).externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject11310 || (_templateObject11310 = _taggedTemplateLiteral71(["vampyric cloake"])))) && get("_vampyreCloakeFormUses") < 10, Macro3.if_("".concat(hpCheck), Macro3.tryHaveSkill($skill(_templateObject1144 || (_templateObject1144 = _taggedTemplateLiteral71(["Become a Wolf"])))))).externalIf(have($item(_templateObject1154 || (_templateObject1154 = _taggedTemplateLiteral71(["porquoise-handled sixgun"])))), Macro3.if_("".concat(hpCheckSixgun), Macro3.tryItem($item(_templateObject1164 || (_templateObject1164 = _taggedTemplateLiteral71(["porquoise-handled sixgun"])))))).while_("".concat(hpCheck, " && !pastround ").concat(stasisRounds), Macro3.item(stasisItem)));
    }
  }, {
    key: "startCombat",
    value: function startCombat() {
      return this.trySingAlong().tryHaveSkill($skill(_templateObject1174 || (_templateObject1174 = _taggedTemplateLiteral71(["Curse of Weaksauce"])))).familiarActions().externalIf(get("cosmicBowlingBallReturnCombats") < 1, Macro3.trySkill($skill(_templateObject1184 || (_templateObject1184 = _taggedTemplateLiteral71(["Bowl Straight Up"]))))).externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject1194 || (_templateObject1194 = _taggedTemplateLiteral71(["vampyric cloake"])))) && get("_vampyreCloakeFormUses") < 10, Macro3.tryHaveSkill($skill(_templateObject1204 || (_templateObject1204 = _taggedTemplateLiteral71(["Become a Wolf"]))))).externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject12112 || (_templateObject12112 = _taggedTemplateLiteral71(["Pantsgiving"])))), Macro3.trySkill($skill(_templateObject12211 || (_templateObject12211 = _taggedTemplateLiteral71(["Pocket Crumbs"]))))).externalIf(SourceTerminal_exports.getSkills().includes($skill(_templateObject1239 || (_templateObject1239 = _taggedTemplateLiteral71(["Extract"])))), Macro3.trySkill($skill(_templateObject1244 || (_templateObject1244 = _taggedTemplateLiteral71(["Extract"]))))).tryHaveItem($item(_templateObject1254 || (_templateObject1254 = _taggedTemplateLiteral71(["porquoise-handled sixgun"])))).externalIf(have($skill(_templateObject1264 || (_templateObject1264 = _taggedTemplateLiteral71(["Meteor Lore"])))), Macro3.trySkill($skill(_templateObject1274 || (_templateObject1274 = _taggedTemplateLiteral71(["Micrometeorite"]))))).tryHaveItem($item(_templateObject1284 || (_templateObject1284 = _taggedTemplateLiteral71(["Time-Spinner"])))).tryHaveItem($item(_templateObject1294 || (_templateObject1294 = _taggedTemplateLiteral71(["Rain-Doh indigo cup"])))).tryHaveItem($item(_templateObject1304 || (_templateObject1304 = _taggedTemplateLiteral71(["Rain-Doh blue balls"])))).externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject13112 || (_templateObject13112 = _taggedTemplateLiteral71(["Buddy Bjorn"])))) || (0, import_kolmafia79.haveEquipped)($item(_templateObject13211 || (_templateObject13211 = _taggedTemplateLiteral71(["Crown of Thrones"])))), Macro3.while_("!pastround 3 && !hppercentbelow 25", Macro3.item($item(_templateObject1338 || (_templateObject1338 = _taggedTemplateLiteral71(["seal tooth"])))))).externalIf([$familiar(_templateObject1344 || (_templateObject1344 = _taggedTemplateLiteral71(["Cocoabo"]))), $familiar(_templateObject1354 || (_templateObject1354 = _taggedTemplateLiteral71(["Feather Boa Constrictor"]))), $familiar(_templateObject1364 || (_templateObject1364 = _taggedTemplateLiteral71(["Ninja Pirate Zombie Robot"]))), $familiar(_templateObject1374 || (_templateObject1374 = _taggedTemplateLiteral71(["Stocking Mimic"])))].some(function(familiar4) {
        return (0, import_kolmafia79.myFamiliar)() === familiar4;
      }), Macro3.while_("!pastround 10 && !hppercentbelow 25", Macro3.item($item(_templateObject1384 || (_templateObject1384 = _taggedTemplateLiteral71(["seal tooth"])))))).externalIf((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject1394 || (_templateObject1394 = _taggedTemplateLiteral71(["Hobo Monkey"]))), Macro3.while_('!match "shoulder, and hands you some Meat." && !pastround 5 && !hppercentbelow 25', Macro3.item($item(_templateObject1403 || (_templateObject1403 = _taggedTemplateLiteral71(["seal tooth"]))))));
    }
  }, {
    key: "kill",
    value: function kill() {
      var riftId = (0, import_kolmafia79.toInt)($location(_templateObject14111 || (_templateObject14111 = _taggedTemplateLiteral71(["Shadow Rift"]))));
      return this.externalIf((0, import_kolmafia79.myClass)() === $class(_templateObject14210 || (_templateObject14210 = _taggedTemplateLiteral71(["Sauceror"]))) && have($skill(_templateObject1434 || (_templateObject1434 = _taggedTemplateLiteral71(["Curse of Weaksauce"])))), Macro3.trySkill($skill(_templateObject1443 || (_templateObject1443 = _taggedTemplateLiteral71(["Curse of Weaksauce"]))))).tryHaveSkill($skill(_templateObject1453 || (_templateObject1453 = _taggedTemplateLiteral71(["Become a Wolf"])))).externalIf(!((0, import_kolmafia79.myClass)() === $class(_templateObject1463 || (_templateObject1463 = _taggedTemplateLiteral71(["Sauceror"]))) && have($skill(_templateObject1473 || (_templateObject1473 = _taggedTemplateLiteral71(["Curse of Weaksauce"]))))), Macro3.while_("!pastround 24 && !hppercentbelow 25 && !missed 1 && !snarfblat ".concat(riftId), Macro3.attack())).while_("hasskill Saucegeyser", Macro3.skill($skill(_templateObject1483 || (_templateObject1483 = _taggedTemplateLiteral71(["Saucegeyser"]))))).while_("hasskill Weapon of the Pastalord", Macro3.skill($skill(_templateObject1493 || (_templateObject1493 = _taggedTemplateLiteral71(["Weapon of the Pastalord"]))))).while_("hasskill Cannelloni Cannon", Macro3.skill($skill(_templateObject1503 || (_templateObject1503 = _taggedTemplateLiteral71(["Cannelloni Cannon"]))))).while_("hasskill Wave of Sauce", Macro3.skill($skill(_templateObject15111 || (_templateObject15111 = _taggedTemplateLiteral71(["Wave of Sauce"]))))).while_("hasskill Saucestorm", Macro3.skill($skill(_templateObject15210 || (_templateObject15210 = _taggedTemplateLiteral71(["Saucestorm"]))))).while_("hasskill Northern Explosion && snarfblat ".concat(riftId), Macro3.skill($skill(_templateObject1533 || (_templateObject1533 = _taggedTemplateLiteral71(["Northern Explosion"]))))).while_("hasskill Lunging Thrust-Smack && !snarfblat ".concat(riftId), Macro3.skill($skill(_templateObject1543 || (_templateObject1543 = _taggedTemplateLiteral71(["Lunging Thrust-Smack"]))))).attack().repeat();
    }
  }, {
    key: "basicCombat",
    value: function basicCombat() {
      return this.startCombat().kill();
    }
  }, {
    key: "ghostBustin",
    value: function ghostBustin() {
      var _classStun;
      var stunRounds = 0;
      var classStun = null;
      var extraStun = null;
      if (have($item(_templateObject1553 || (_templateObject1553 = _taggedTemplateLiteral71(["Rain-Doh blue balls"])))))
        stunRounds++;
      if (get("lovebugsUnlocked"))
        stunRounds++;
      if ((0, import_kolmafia79.myClass)() === $class(_templateObject1563 || (_templateObject1563 = _taggedTemplateLiteral71(["Seal Clubber"]))) && have($skill(_templateObject1573 || (_templateObject1573 = _taggedTemplateLiteral71(["Club Foot"])))) && (0, import_kolmafia79.myMp)() >= (0, import_kolmafia79.mpCost)($skill(_templateObject1583 || (_templateObject1583 = _taggedTemplateLiteral71(["Club Foot"]))))) {
        var clubRounds = Math.min((0, import_kolmafia79.myFury)(), 3) + ((0, import_kolmafia79.itemType)((0, import_kolmafia79.equippedItem)($slot(_templateObject1593 || (_templateObject1593 = _taggedTemplateLiteral71(["weapon"]))))) === "club" ? 1 : 0) - 1;
        if (stunRounds > 0) {
          classStun = $skill(_templateObject1603 || (_templateObject1603 = _taggedTemplateLiteral71(["Club Foot"])));
          stunRounds += clubRounds;
        }
      } else if ((0, import_kolmafia79.myClass)() === $class(_templateObject16111 || (_templateObject16111 = _taggedTemplateLiteral71(["Turtle Tamer"]))) && have($skill(_templateObject16210 || (_templateObject16210 = _taggedTemplateLiteral71(["Shell Up"])))) && (0, import_kolmafia79.myMp)() >= (0, import_kolmafia79.mpCost)($skill(_templateObject1633 || (_templateObject1633 = _taggedTemplateLiteral71(["Shell Up"]))))) {
        var shellRounds = (have($effect(_templateObject1643 || (_templateObject1643 = _taggedTemplateLiteral71(["Blessing of the Storm Tortoise"])))) ? 2 : 0) + (have($effect(_templateObject1653 || (_templateObject1653 = _taggedTemplateLiteral71(["Grand Blessing of the Storm Tortoise"])))) ? 3 : 0) + (have($effect(_templateObject1663 || (_templateObject1663 = _taggedTemplateLiteral71(["Glorious Blessing of the Storm Tortoise"])))) ? 4 : 0);
        if (shellRounds > 0) {
          classStun = $skill(_templateObject1673 || (_templateObject1673 = _taggedTemplateLiteral71(["Shell Up"])));
          stunRounds += shellRounds;
        }
      } else if ((0, import_kolmafia79.myClass)() === $class(_templateObject1683 || (_templateObject1683 = _taggedTemplateLiteral71(["Pastamancer"]))) && have($skill(_templateObject1693 || (_templateObject1693 = _taggedTemplateLiteral71(["Entangling Noodles"])))) && (0, import_kolmafia79.myMp)() >= (0, import_kolmafia79.mpCost)($skill(_templateObject1703 || (_templateObject1703 = _taggedTemplateLiteral71(["Entangling Noodles"]))))) {
        classStun = $skill(_templateObject17111 || (_templateObject17111 = _taggedTemplateLiteral71(["Entangling Noodles"])));
        stunRounds += 2;
      } else if ((0, import_kolmafia79.myClass)() === $class(_templateObject17210 || (_templateObject17210 = _taggedTemplateLiteral71(["Sauceror"]))) && have($skill(_templateObject1733 || (_templateObject1733 = _taggedTemplateLiteral71(["Soul Bubble"])))) && (0, import_kolmafia79.mySoulsauce)() >= 5) {
        classStun = $skill(_templateObject1743 || (_templateObject1743 = _taggedTemplateLiteral71(["Soul Bubble"])));
        stunRounds += 2;
      } else if ((0, import_kolmafia79.myClass)() === $class(_templateObject1753 || (_templateObject1753 = _taggedTemplateLiteral71(["Accordion Thief"]))) && have($skill(_templateObject1763 || (_templateObject1763 = _taggedTemplateLiteral71(["Accordion Bash"])))) && (0, import_kolmafia79.itemType)((0, import_kolmafia79.equippedItem)($slot(_templateObject1773 || (_templateObject1773 = _taggedTemplateLiteral71(["weapon"]))))) === "accordion" && (0, import_kolmafia79.myMp)() >= (0, import_kolmafia79.mpCost)($skill(_templateObject1783 || (_templateObject1783 = _taggedTemplateLiteral71(["Accordion Bash"]))))) {
        classStun = $skill(_templateObject1793 || (_templateObject1793 = _taggedTemplateLiteral71(["Accordion Bash"])));
        stunRounds += 2;
      } else if ((0, import_kolmafia79.myClass)() === $class(_templateObject1803 || (_templateObject1803 = _taggedTemplateLiteral71(["Disco Bandit"])))) {
      }
      if (stunRounds < 3 && classStun !== $skill(_templateObject18111 || (_templateObject18111 = _taggedTemplateLiteral71(["Entangling Noodles"]))) && have($skill(_templateObject18210 || (_templateObject18210 = _taggedTemplateLiteral71(["Shadow Noodles"])))) && (0, import_kolmafia79.myMp)() >= (0, import_kolmafia79.mpCost)((_classStun = classStun) !== null && _classStun !== void 0 ? _classStun : $skill.none) + (0, import_kolmafia79.mpCost)($skill(_templateObject1833 || (_templateObject1833 = _taggedTemplateLiteral71(["Shadow Noodles"]))))) {
        extraStun = $skill(_templateObject1843 || (_templateObject1843 = _taggedTemplateLiteral71(["Shadow Noodles"])));
        stunRounds += 2;
      }
      if (stunRounds < 3) {
        return this.basicCombat();
      }
      return this.trySingAlong().familiarActions().tryHaveItem($item(_templateObject1853 || (_templateObject1853 = _taggedTemplateLiteral71(["Rain-Doh blue balls"])))).externalIf(get("lovebugsUnlocked"), Macro3.trySkill($skill(_templateObject1863 || (_templateObject1863 = _taggedTemplateLiteral71(["Summon Love Gnats"]))))).tryHaveSkill(classStun).tryHaveSkill(extraStun).trySkill($skill(_templateObject1873 || (_templateObject1873 = _taggedTemplateLiteral71(["Shoot Ghost"])))).trySkill($skill(_templateObject1883 || (_templateObject1883 = _taggedTemplateLiteral71(["Shoot Ghost"])))).trySkill($skill(_templateObject1893 || (_templateObject1893 = _taggedTemplateLiteral71(["Shoot Ghost"])))).trySkill($skill(_templateObject1903 || (_templateObject1903 = _taggedTemplateLiteral71(["Trap Ghost"])))).kill();
    }
  }, {
    key: "embezzler",
    value: function embezzler4() {
      var embezzler5 = $monster(_templateObject19111 || (_templateObject19111 = _taggedTemplateLiteral71(["Knob Goblin Embezzler"])));
      var doneHabitat = !have($skill(_templateObject19210 || (_templateObject19210 = _taggedTemplateLiteral71(["Just the Facts"])))) || get("_monsterHabitatsRecalled") === 3 && get("monsterHabitatsFightsLeft") <= 1;
      return this.if_(embezzler5, Macro3.if_($location(_templateObject1933 || (_templateObject1933 = _taggedTemplateLiteral71(["The Briny Deeps"]))), Macro3.tryCopier($item(_templateObject1943 || (_templateObject1943 = _taggedTemplateLiteral71(["pulled green taffy"]))))).externalIf((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject1953 || (_templateObject1953 = _taggedTemplateLiteral71(["Reanimated Reanimator"]))), Macro3.trySkill($skill(_templateObject1963 || (_templateObject1963 = _taggedTemplateLiteral71(["Wink at"]))))).externalIf((0, import_kolmafia79.myFamiliar)() === $familiar(_templateObject1973 || (_templateObject1973 = _taggedTemplateLiteral71(["Obtuse Angel"]))), Macro3.trySkill($skill(_templateObject1983 || (_templateObject1983 = _taggedTemplateLiteral71(["Fire a badly romantic arrow"]))))).externalIf(doneHabitat && get("beGregariousCharges") > 0 && (get("beGregariousMonster") !== embezzler5 || have($item(_templateObject1993 || (_templateObject1993 = _taggedTemplateLiteral71(["miniature crystal ball"])))) ? get("beGregariousFightsLeft") === 0 : get("beGregariousFightsLeft") <= 1), Macro3.trySkill($skill(_templateObject2003 || (_templateObject2003 = _taggedTemplateLiteral71(["Be Gregarious"]))))).externalIf(have($skill(_templateObject20111 || (_templateObject20111 = _taggedTemplateLiteral71(["Just the Facts"])))) && get("_monsterHabitatsRecalled") < 3 && (get("monsterHabitatsMonster") !== embezzler5 || have($item(_templateObject20210 || (_templateObject20210 = _taggedTemplateLiteral71(["miniature crystal ball"])))) ? get("monsterHabitatsFightsLeft") === 0 : get("monsterHabitatsFightsLeft") <= 1), Macro3.trySkill($skill(_templateObject2033 || (_templateObject2033 = _taggedTemplateLiteral71(["Recall Facts: Monster Habitats"]))))).externalIf(have($skill(_templateObject2043 || (_templateObject2043 = _taggedTemplateLiteral71(["Recall Facts: %phylum Circadian Rhythms"])))) && !get("_circadianRhythmsRecalled"), Macro3.trySkill($skill(_templateObject2053 || (_templateObject2053 = _taggedTemplateLiteral71(["Recall Facts: %phylum Circadian Rhythms"]))))).externalIf(SourceTerminal_exports.getDigitizeMonster() !== embezzler5 || shouldRedigitize(), Macro3.tryCopier($skill(_templateObject2063 || (_templateObject2063 = _taggedTemplateLiteral71(["Digitize"]))))).tryCopier($item(_templateObject2073 || (_templateObject2073 = _taggedTemplateLiteral71(["Spooky Putty sheet"])))).tryCopier($item(_templateObject2083 || (_templateObject2083 = _taggedTemplateLiteral71(["Rain-Doh black box"])))).tryCopier($item(_templateObject2093 || (_templateObject2093 = _taggedTemplateLiteral71(["4-d camera"])))).tryCopier($item(_templateObject21011 || (_templateObject21011 = _taggedTemplateLiteral71(["unfinished ice sculpture"])))).externalIf(get("_enamorangs") === 0, Macro3.tryCopier($item(_templateObject21111 || (_templateObject21111 = _taggedTemplateLiteral71(["LOV Enamorang"]))))).meatKill()).abortWithMsg("Expected ".concat(embezzler5, " but encountered something else."));
    }
  }], [{
    key: "abortWithMsg",
    value: function abortWithMsg(errorMessage) {
      return new Macro3().step('abort "'.concat(errorMessage, '"'));
    }
  }, {
    key: "tryHaveSkill",
    value: function tryHaveSkill(skill) {
      return new Macro3().tryHaveSkill(skill);
    }
  }, {
    key: "tryHaveItem",
    value: function tryHaveItem(item9) {
      return new Macro3().tryHaveItem(item9);
    }
  }, {
    key: "trySingAlong",
    value: function trySingAlong() {
      return new Macro3().trySingAlong();
    }
  }, {
    key: "familiarActions",
    value: function familiarActions() {
      return new Macro3().familiarActions();
    }
  }, {
    key: "tryCopier",
    value: function tryCopier(itemOrSkill) {
      return new Macro3().tryCopier(itemOrSkill);
    }
  }, {
    key: "meatKill",
    value: function meatKill() {
      return new Macro3().meatKill();
    }
  }, {
    key: "meatStasis",
    value: function meatStasis(checkPassive) {
      return new Macro3().meatStasis(checkPassive);
    }
  }, {
    key: "startCombat",
    value: function startCombat() {
      return new Macro3().startCombat();
    }
  }, {
    key: "kill",
    value: function kill() {
      return new Macro3().kill();
    }
  }, {
    key: "basicCombat",
    value: function basicCombat() {
      return new Macro3().basicCombat();
    }
  }, {
    key: "ghostBustin",
    value: function ghostBustin() {
      return new Macro3().ghostBustin();
    }
  }, {
    key: "embezzler",
    value: function embezzler4() {
      return new Macro3().embezzler();
    }
  }]);
  return Macro3;
}(StrictMacro);
function customizeMacro(macro) {
  return Macro2.if_($monsters(_templateObject21210 || (_templateObject21210 = _taggedTemplateLiteral71(["giant rubber spider, time-spinner prank"]))), Macro2.kill()).externalIf(have($effect(_templateObject21310 || (_templateObject21310 = _taggedTemplateLiteral71(["Eldritch Attunement"])))), Macro2.if_($monster(_templateObject21410 || (_templateObject21410 = _taggedTemplateLiteral71(["Eldritch Tentacle"]))), Macro2.basicCombat())).ifHolidayWanderer(Macro2.externalIf((0, import_kolmafia79.haveEquipped)($item(_templateObject2159 || (_templateObject2159 = _taggedTemplateLiteral71(["backup camera"])))) && get("_backUpUses") < 11 && get("lastCopyableMonster") === $monster(_templateObject2163 || (_templateObject2163 = _taggedTemplateLiteral71(["Knob Goblin Embezzler"]))) && (0, import_kolmafia79.myFamiliar)() === meatFamiliar(), Macro2.skill($skill(_templateObject2172 || (_templateObject2172 = _taggedTemplateLiteral71(["Back-Up to your Last Enemy"])))).step(macro), Macro2.basicCombat())).step(macro);
}
function makeCcs(macro) {
  (0, import_kolmafia79.writeCcs)('[default]\n"'.concat(customizeMacro(macro).toString(), '"'), "garbo");
  (0, import_kolmafia79.setCcs)("garbo");
}
function runCombatBy(initiateCombatAction) {
  try {
    var result = initiateCombatAction();
    while ((0, import_kolmafia79.inMultiFight)())
      (0, import_kolmafia79.runCombat)();
    if ((0, import_kolmafia79.choiceFollowsFight)())
      (0, import_kolmafia79.visitUrl)("choice.php");
    return result;
  } catch (e) {
    throw "Combat exception! Last macro error: ".concat(get("lastMacroError"), ". Exception ").concat(e, ".");
  }
}
function withMacro(macro, action) {
  var tryAuto = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if ((0, import_kolmafia79.getAutoAttack)() !== 0)
    (0, import_kolmafia79.setAutoAttack)(0);
  if (tryAuto)
    customizeMacro(macro).setAutoAttack();
  makeCcs(macro);
  try {
    return runCombatBy(action);
  } finally {
    if (tryAuto)
      (0, import_kolmafia79.setAutoAttack)(0);
  }
}
function garboAdventure(loc, macro) {
  if ((0, import_kolmafia79.getAutoAttack)() !== 0)
    (0, import_kolmafia79.setAutoAttack)(0);
  makeCcs(macro);
  runCombatBy(function() {
    return (0, import_kolmafia79.adv1)(loc, -1, "");
  });
}
function garboAdventureAuto(loc, autoMacro) {
  var nextMacro = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Macro2.abort();
  autoMacro.setAutoAttack();
  makeCcs(nextMacro);
  runCombatBy(function() {
    return (0, import_kolmafia79.adv1)(loc, -1, "");
  });
}

// src/fights.ts
var import_kolmafia85 = require("kolmafia");

// src/tasks/postFreeFight.ts
var import_kolmafia80 = require("kolmafia");
var _templateObject700;
var _templateObject2160;
var _templateObject3140;
var _templateObject4126;
var _templateObject5121;
var _templateObject6101;
var _templateObject769;
var _templateObject865;
var _templateObject958;
var _templateObject1048;
var _templateObject1141;
var _templateObject1240;
function _taggedTemplateLiteral72(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function bestVykeaLevel() {
  var vykeas = [{
    level: 1,
    dowelCost: 0
  }, {
    level: 2,
    dowelCost: 1
  }, {
    level: 3,
    dowelCost: 11
  }];
  var vykeaProfit = function(vykea) {
    var level = vykea.level, dowelCost = vykea.dowelCost;
    return estimatedGarboTurns() * baseMeat * 0.1 * level - (5 * (0, import_kolmafia80.mallPrice)($item(_templateObject700 || (_templateObject700 = _taggedTemplateLiteral72(["VYKEA rail"])))) + dowelCost * (0, import_kolmafia80.mallPrice)($item(_templateObject2160 || (_templateObject2160 = _taggedTemplateLiteral72(["VYKEA dowel"])))) + 5 * (0, import_kolmafia80.mallPrice)($item(_templateObject3140 || (_templateObject3140 = _taggedTemplateLiteral72(["VYKEA plank"])))) + 1 * (0, import_kolmafia80.mallPrice)($item(_templateObject4126 || (_templateObject4126 = _taggedTemplateLiteral72(["VYKEA instructions"])))));
  };
  if (vykeas.some(function(vykea) {
    return vykeaProfit(vykea) > 0;
  })) {
    return maxBy(vykeas, vykeaProfit).level;
  }
  return 0;
}
var PostFreeFightTasks = [{
  name: "Configure Vykea",
  ready: function() {
    return get("_VYKEACompanionLevel") === 0 && bestVykeaLevel() > 0;
  },
  completed: function() {
    return get("_VYKEACompanionLevel") > 0;
  },
  do: function() {
    return (0, import_kolmafia80.cliExecute)("create level ".concat(bestVykeaLevel(), " couch"));
  },
  acquire: [{
    item: $item(_templateObject5121 || (_templateObject5121 = _taggedTemplateLiteral72(["VYKEA hex key"])))
  }]
}, {
  name: "Configure Thrall",
  ready: function() {
    return (0, import_kolmafia80.myClass)() === $class(_templateObject6101 || (_templateObject6101 = _taggedTemplateLiteral72(["Pastamancer"]))) && have($skill(_templateObject769 || (_templateObject769 = _taggedTemplateLiteral72(["Bind Lasagmbie"]))));
  },
  completed: function() {
    return (0, import_kolmafia80.myThrall)() === $thrall(_templateObject865 || (_templateObject865 = _taggedTemplateLiteral72(["Lasagmbie"])));
  },
  do: function() {
    return (0, import_kolmafia80.useSkill)($skill(_templateObject958 || (_templateObject958 = _taggedTemplateLiteral72(["Bind Lasagmbie"]))));
  },
  outfit: function() {
    if ((0, import_kolmafia80.myMaxmp)() >= 200)
      return {};
    return {
      modifier: "MP"
    };
  },
  prepare: function() {
    return (0, import_kolmafia80.restoreMp)(200);
  }
}, {
  name: "Level Up Thrall",
  ready: function() {
    return (0, import_kolmafia80.myClass)() === $class(_templateObject1048 || (_templateObject1048 = _taggedTemplateLiteral72(["Pastamancer"]))) && have($item(_templateObject1141 || (_templateObject1141 = _taggedTemplateLiteral72(["experimental carbon fiber pasta additive"])))) && (0, import_kolmafia80.myThrall)() !== $thrall.none;
  },
  completed: function() {
    return get("_pastaAdditive") || (0, import_kolmafia80.myThrall)().level >= 10;
  },
  do: function() {
    return (0, import_kolmafia80.use)($item(_templateObject1240 || (_templateObject1240 = _taggedTemplateLiteral72(["experimental carbon fiber pasta additive"]))));
  }
}];
var PostFreeFightQuest = {
  name: "Post Free Fight",
  tasks: PostFreeFightTasks
};

// src/tasks/engine.ts
function _classCallCheck26(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties26(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey34(descriptor.key), descriptor);
  }
}
function _createClass26(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties26(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties26(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _toPropertyKey34(arg) {
  var key = _toPrimitive34(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive34(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _get2() {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get2 = Reflect.get.bind();
  } else {
    _get2 = function _get3(target, property, receiver) {
      var base = _superPropBase2(target, property);
      if (!base)
        return;
      var desc = Object.getOwnPropertyDescriptor(base, property);
      if (desc.get) {
        return desc.get.call(arguments.length < 3 ? target : receiver);
      }
      return desc.value;
    };
  }
  return _get2.apply(this, arguments);
}
function _superPropBase2(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf7(object);
    if (object === null)
      break;
  }
  return object;
}
function _inherits8(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf8(subClass, superClass);
}
function _setPrototypeOf8(o, p) {
  _setPrototypeOf8 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf8(o, p);
}
function _createSuper7(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct7();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf7(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf7(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn7(this, result);
  };
}
function _possibleConstructorReturn7(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized7(self2);
}
function _assertThisInitialized7(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _isNativeReflectConstruct7() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf7(o) {
  _getPrototypeOf7 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf7(o);
}
var BaseGarboEngine = /* @__PURE__ */ function(_Engine) {
  _inherits8(BaseGarboEngine2, _Engine);
  var _super = _createSuper7(BaseGarboEngine2);
  function BaseGarboEngine2() {
    _classCallCheck26(this, BaseGarboEngine2);
    return _super.apply(this, arguments);
  }
  _createClass26(BaseGarboEngine2, [{
    key: "execute",
    value: (
      // Check for interrupt before executing a task
      function execute(task) {
        safeInterrupt();
        _get2(_getPrototypeOf7(BaseGarboEngine2.prototype), "execute", this).call(this, task);
        wanderer_default.clear();
      }
    )
  }]);
  return BaseGarboEngine2;
}(Engine);
var SafeGarboEngine = /* @__PURE__ */ function(_BaseGarboEngine) {
  _inherits8(SafeGarboEngine2, _BaseGarboEngine);
  var _super2 = _createSuper7(SafeGarboEngine2);
  function SafeGarboEngine2(tasks) {
    _classCallCheck26(this, SafeGarboEngine2);
    var options = new EngineOptions();
    options.default_task_options = {
      limit: {
        skip: 1
      }
    };
    return _super2.call(this, tasks, options);
  }
  return _createClass26(SafeGarboEngine2);
}(BaseGarboEngine);
function runSafeGarboTasks(tasks) {
  var engine = new SafeGarboEngine(tasks);
  try {
    engine.run();
  } finally {
    engine.destruct();
  }
}
function runSafeGarboQuests(quests) {
  runSafeGarboTasks(getTasks(quests));
}

// src/dailiespost.ts
function postFreeFightDailySetup() {
  runSafeGarboQuests([PostFreeFightQuest]);
}

// src/post/index.ts
var import_kolmafia84 = require("kolmafia");

// src/post/autumnaton.ts
var import_kolmafia81 = require("kolmafia");
var _templateObject701;
var _templateObject2161;
function _toConsumableArray40(arr) {
  return _arrayWithoutHoles40(arr) || _iterableToArray40(arr) || _unsupportedIterableToArray54(arr) || _nonIterableSpread40();
}
function _nonIterableSpread40() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray54(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray54(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray54(o, minLen);
}
function _iterableToArray40(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles40(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray54(arr);
}
function _arrayLikeToArray54(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral73(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function bestAutumnatonLocation(locations) {
  return maxBy(mostValuableUpgrade(locations), averageAutumnatonValue);
}
function averageAutumnatonValue(location, acuityOverride, slotOverride) {
  var badAttributes = ["LUCKY", "ULTRARARE", "BOSS"];
  var rates = (0, import_kolmafia81.appearanceRates)(location);
  var monsters = (0, import_kolmafia81.getMonsters)(location).filter(function(m) {
    return !badAttributes.some(function(s) {
      return m.attributes.includes(s);
    }) && rates[m.name] > 0;
  });
  if (monsters.length === 0) {
    return 0;
  } else {
    var maximumDrops = slotOverride !== null && slotOverride !== void 0 ? slotOverride : AutumnAton_exports.zoneItems();
    var acuityCutoff = 20 - (acuityOverride !== null && acuityOverride !== void 0 ? acuityOverride : AutumnAton_exports.visualAcuity()) * 5;
    var validDrops = monsters.map(function(m) {
      return (0, import_kolmafia81.itemDropsArray)(m);
    }).flat().map(function(_ref) {
      var rate = _ref.rate, type = _ref.type, drop = _ref.drop;
      return {
        value: !["c", "0"].includes(type) ? garboValue(drop, true) : 0,
        preAcuityExpectation: ["c", "0", ""].includes(type) ? 2 * rate / 100 : 0,
        postAcuityExpectation: rate >= acuityCutoff && ["c", "0", ""].includes(type) ? 8 * rate / 100 : 0
      };
    });
    var overallExpectedDropQuantity = sum(validDrops, function(_ref2) {
      var preAcuityExpectation = _ref2.preAcuityExpectation, postAcuityExpectation = _ref2.postAcuityExpectation;
      return preAcuityExpectation + postAcuityExpectation;
    });
    var expectedCollectionValue = sum(validDrops, function(_ref3) {
      var value = _ref3.value, preAcuityExpectation = _ref3.preAcuityExpectation, postAcuityExpectation = _ref3.postAcuityExpectation;
      var adjustedDropAmount = (preAcuityExpectation + postAcuityExpectation) * Math.min(1, maximumDrops / overallExpectedDropQuantity);
      return adjustedDropAmount * value;
    });
    return seasonalItemValue(location) + expectedCollectionValue;
  }
}
function seasonalItemValue(location, seasonalOverride) {
  var _AutumnAton$getUnique;
  var autumnItems = $items(_templateObject701 || (_templateObject701 = _taggedTemplateLiteral73(["autumn leaf, AutumnFest ale, autumn breeze, autumn dollar, autumn years wisdom"])));
  var avgValueOfRandomAutumnItem = garboAverageValue.apply(void 0, _toConsumableArray40(autumnItems));
  var autumnMeltables = $items(_templateObject2161 || (_templateObject2161 = _taggedTemplateLiteral73(["autumn debris shield, autumn leaf pendant, autumn sweater-weather sweater"])));
  var autumnItem = (_AutumnAton$getUnique = AutumnAton_exports.getUniques(location)) === null || _AutumnAton$getUnique === void 0 ? void 0 : _AutumnAton$getUnique.item;
  var seasonalItemDrops = seasonalOverride !== null && seasonalOverride !== void 0 ? seasonalOverride : AutumnAton_exports.seasonalItems();
  if (autumnItem) {
    return (seasonalItemDrops > 1 ? avgValueOfRandomAutumnItem : 0) + (autumnMeltables.includes(autumnItem) ? (
      // If we already have the meltable, then we get a random item, else value at 0
      (0, import_kolmafia81.availableAmount)(autumnItem) > 0 ? avgValueOfRandomAutumnItem : 0
    ) : garboValue(autumnItem, true));
  } else {
    return seasonalItemDrops > 1 ? avgValueOfRandomAutumnItem : 0;
  }
}
function expectedRemainingExpeditions() {
  var legs2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : AutumnAton_exports.legs();
  var availableAutumnatonTurns = estimatedGarboTurns() - AutumnAton_exports.turnsLeft() + (globalOptions.ascend ? 0 : estimatedTurnsTomorrow);
  var quests = get("_autumnatonQuests");
  var legOffsetFactor = 11 * Math.max(quests - legs2 - 1, 0);
  return Math.floor(Math.sqrt(Math.pow(quests, 2) + 2 * (availableAutumnatonTurns - legOffsetFactor) / 11));
}
var profitRelevantUpgrades = ["leftarm1", "leftleg1", "rightarm1", "rightleg1", "cowcatcher", "periscope", "radardish"];
function profitFromExtraAcuity(bestLocationContainingUpgrade, bestLocationWithInstalledUpgrade) {
  return averageAutumnatonValue(bestLocationContainingUpgrade) + averageAutumnatonValue(bestLocationWithInstalledUpgrade) * Math.max(0, expectedRemainingExpeditions() - 1);
}
function profitFromExtraLeg(bestLocationContainingUpgrade, bestLocationWithInstalledUpgrade) {
  return averageAutumnatonValue(bestLocationContainingUpgrade) + averageAutumnatonValue(bestLocationWithInstalledUpgrade) * Math.max(0, expectedRemainingExpeditions(AutumnAton_exports.legs() + 1) - 1);
}
function profitFromExtraArm(bestLocationContainingUpgrade, bestLocationWithInstalledUpgrade) {
  return averageAutumnatonValue(bestLocationContainingUpgrade) + averageAutumnatonValue(bestLocationWithInstalledUpgrade) * Math.max(0, expectedRemainingExpeditions() - 1);
}
function profitFromExtraAutumnItem(bestLocationContainingUpgrade, bestLocationWithInstalledUpgrade) {
  return averageAutumnatonValue(bestLocationContainingUpgrade) + (seasonalItemValue(bestLocationWithInstalledUpgrade) + averageAutumnatonValue(bestLocationWithInstalledUpgrade)) * Math.max(0, expectedRemainingExpeditions() - 1);
}
function makeUpgradeValuator(fullLocations, currentBestLocation) {
  return function(upgrade2) {
    var upgradeLocations = fullLocations.filter(function(location) {
      var _AutumnAton$getUnique2;
      return ((_AutumnAton$getUnique2 = AutumnAton_exports.getUniques(location)) === null || _AutumnAton$getUnique2 === void 0 ? void 0 : _AutumnAton$getUnique2.upgrade) === upgrade2;
    });
    if (!upgradeLocations.length) {
      return {
        upgrade: upgrade2,
        profit: 0
      };
    }
    var bestLocationContainingUpgrade = maxBy(upgradeLocations, averageAutumnatonValue);
    switch (upgrade2) {
      case "periscope":
      case "radardish": {
        var bestLocationWithInstalledUpgrade = maxBy(fullLocations, function(loc) {
          return averageAutumnatonValue(loc, AutumnAton_exports.visualAcuity() + 1);
        });
        return {
          upgrade: upgrade2,
          profit: profitFromExtraAcuity(bestLocationContainingUpgrade, bestLocationWithInstalledUpgrade)
        };
      }
      case "rightleg1":
      case "leftleg1": {
        return {
          upgrade: upgrade2,
          profit: profitFromExtraLeg(bestLocationContainingUpgrade, currentBestLocation)
        };
      }
      case "rightarm1":
      case "leftarm1": {
        var _bestLocationWithInstalledUpgrade = maxBy(fullLocations, function(loc) {
          return averageAutumnatonValue(loc, void 0, AutumnAton_exports.zoneItems() + 1);
        });
        return {
          upgrade: upgrade2,
          profit: profitFromExtraArm(bestLocationContainingUpgrade, _bestLocationWithInstalledUpgrade)
        };
      }
      case "cowcatcher": {
        return {
          upgrade: upgrade2,
          profit: profitFromExtraAutumnItem(bestLocationContainingUpgrade, currentBestLocation)
        };
      }
      default: {
        return {
          upgrade: upgrade2,
          profit: 0
        };
      }
    }
  };
}
function mostValuableUpgrade(fullLocations) {
  var validLocations = fullLocations.filter(function(l) {
    return l.parent !== "Clan Basement";
  });
  if (expectedRemainingExpeditions() < 1) {
    return validLocations;
  }
  var currentUpgrades2 = AutumnAton_exports.currentUpgrades();
  var acquirableUpgrades = profitRelevantUpgrades.filter(function(upgrade2) {
    return !currentUpgrades2.includes(upgrade2);
  });
  if (acquirableUpgrades.length === 0) {
    return validLocations;
  }
  var currentBestLocation = maxBy(validLocations, averageAutumnatonValue);
  var currentExpectedProfit = averageAutumnatonValue(currentBestLocation) * expectedRemainingExpeditions();
  var upgradeValuations = acquirableUpgrades.map(makeUpgradeValuator(validLocations, currentBestLocation));
  var _maxBy = maxBy(upgradeValuations, "profit"), highestValueUpgrade = _maxBy.upgrade, profitFromBestUpgrade = _maxBy.profit;
  if (profitFromBestUpgrade > currentExpectedProfit) {
    var upgradeLocations = validLocations.filter(function(location) {
      var _AutumnAton$getUnique3;
      return ((_AutumnAton$getUnique3 = AutumnAton_exports.getUniques(location)) === null || _AutumnAton$getUnique3 === void 0 ? void 0 : _AutumnAton$getUnique3.upgrade) === highestValueUpgrade;
    });
    return upgradeLocations;
  } else {
    return validLocations;
  }
}

// src/post/workshed.ts
var import_kolmafia83 = require("kolmafia");

// src/post/workshed_utils.ts
var import_kolmafia82 = require("kolmafia");
var _templateObject707;
var _templateObject2164;
var _templateObject3141;
var _templateObject4127;
function _taggedTemplateLiteral74(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray41(arr) {
  return _arrayWithoutHoles41(arr) || _iterableToArray41(arr) || _unsupportedIterableToArray55(arr) || _nonIterableSpread41();
}
function _nonIterableSpread41() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray55(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray55(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray55(o, minLen);
}
function _iterableToArray41(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles41(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray55(arr);
}
function _arrayLikeToArray55(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function candyFactoryValue() {
  var lastCalculated = get("garbo_candyFactoryValueDate", 0);
  if (!get("garbo_candyFactoryValue", 0) || today2 - lastCalculated > 7 * 24 * 60 * 60 * 1e3) {
    var candyFactoryDrops = JSON.parse((0, import_kolmafia82.fileToBuffer)("garbo_item_lists.json"))["trainset"];
    var averageDropValue = sum(candyFactoryDrops, function(name) {
      return garboValue((0, import_kolmafia82.toItem)(name), true);
    }) / candyFactoryDrops.length;
    _set("garbo_candyFactoryValue", averageDropValue);
    _set("garbo_candyFactoryValueDate", today2);
  }
  return get("garbo_candyFactoryValue", 0);
}
var GOOD_TRAIN_STATIONS = [{
  piece: TrainSet_exports.Station.GAIN_MEAT,
  value: function() {
    return 900;
  }
}, {
  // Some day this'll be better
  piece: TrainSet_exports.Station.TRACKSIDE_DINER,
  value: function() {
    return garboAverageValue.apply(void 0, _toConsumableArray41($items(_templateObject707 || (_templateObject707 = _taggedTemplateLiteral74(["bowl of cottage cheese, hot buttered roll, toast"])))));
  }
}, {
  piece: TrainSet_exports.Station.CANDY_FACTORY,
  value: candyFactoryValue
}, {
  piece: TrainSet_exports.Station.GRAIN_SILO,
  value: function() {
    return 2 * garboAverageValue.apply(void 0, _toConsumableArray41($items(_templateObject2164 || (_templateObject2164 = _taggedTemplateLiteral74(["bottle of gin, bottle of vodka, bottle of whiskey, bottle of rum, bottle of tequila, boxed wine"])))));
  }
}, {
  piece: TrainSet_exports.Station.ORE_HOPPER,
  value: function() {
    return garboAverageValue.apply(void 0, _toConsumableArray41($items(_templateObject3141 || (_templateObject3141 = _taggedTemplateLiteral74(["linoleum ore, asbestos ore, chrome ore, teflon ore, vinyl ore, velcro ore, bubblewrap ore, cardboard ore, styrofoam ore"])))));
  }
}];
var trainCycle;
function getBestCycle() {
  if (!trainCycle) {
    var cycle2 = [TrainSet_exports.Station.COAL_HOPPER].concat(_toConsumableArray41(GOOD_TRAIN_STATIONS.sort(function(_ref, _ref2) {
      var a = _ref.value;
      var b = _ref2.value;
      return b() - a();
    }).map(function(_ref3) {
      var piece = _ref3.piece;
      return piece;
    })), [TrainSet_exports.Station.TOWER_FIZZY, TrainSet_exports.Station.VIEWING_PLATFORM]);
    trainCycle = cycle2;
  }
  return _toConsumableArray41(trainCycle);
}
function valueStation(station) {
  var _GOOD_TRAIN_STATIONS$, _GOOD_TRAIN_STATIONS$2;
  if (station === TrainSet_exports.Station.COAL_HOPPER) {
    return valueStation(getBestCycle()[1]);
  }
  return (_GOOD_TRAIN_STATIONS$ = (_GOOD_TRAIN_STATIONS$2 = GOOD_TRAIN_STATIONS.find(function(_ref4) {
    var piece = _ref4.piece;
    return piece === station;
  })) === null || _GOOD_TRAIN_STATIONS$2 === void 0 ? void 0 : _GOOD_TRAIN_STATIONS$2.value()) !== null && _GOOD_TRAIN_STATIONS$ !== void 0 ? _GOOD_TRAIN_STATIONS$ : 0;
}
function valueOffset(offset) {
  var firstFortyTurns = 5 * sum(getBestCycle(), valueStation);
  var extraTurns = sum(getBestCycle().slice(0, offset - 1), valueStation);
  return (firstFortyTurns + extraTurns) / (40 + offset);
}
var bestOffset = null;
function getBestOffset() {
  var _bestOffset;
  return (_bestOffset = bestOffset) !== null && _bestOffset !== void 0 ? _bestOffset : bestOffset = maxBy([2, 3, 4, 5, 6, 7, 8], valueOffset);
}
function getPrioritizedStations() {
  return getBestCycle().slice(0, getBestOffset() - 1);
}
function getRotatedCycle() {
  var offset = get("trainsetPosition") % 8;
  var newPieces = [];
  var defaultPieces = getBestCycle();
  for (var i = 0; i < 8; i++) {
    var newPos = (i + offset) % 8;
    newPieces[newPos] = defaultPieces[i];
  }
  return newPieces;
}
function rotateToOptimalCycle() {
  return TrainSet_exports.setConfiguration(getRotatedCycle());
}
function grabMedicine() {
  var options = (0, import_kolmafia82.visitUrl)("campground.php?action=workshed");
  var i = 0;
  var match;
  var regexp = /descitem\((\d+)\)/g;
  var itemChoices = /* @__PURE__ */ new Map();
  if (!globalOptions.nobarf) {
    itemChoices.set($item(_templateObject4127 || (_templateObject4127 = _taggedTemplateLiteral74(["Extrovermectin\u2122"]))), -1);
  }
  while ((match = regexp.exec(options)) !== null) {
    i++;
    var item9 = (0, import_kolmafia82.descToItem)(match[1]);
    itemChoices.set(item9, i);
  }
  var bestItem = maxBy(_toConsumableArray41(itemChoices.keys()), garboValue);
  var bestChoice = itemChoices.get(bestItem);
  if (bestChoice && bestChoice > 0) {
    (0, import_kolmafia82.visitUrl)("campground.php?action=workshed");
    (0, import_kolmafia82.runChoice)(bestChoice);
  }
  if ((0, import_kolmafia82.handlingChoice)())
    (0, import_kolmafia82.visitUrl)("main.php");
}

// src/post/workshed.ts
var _templateObject708;
var _templateObject2165;
var _templateObject3142;
var _templateObject4128;
var _templateObject5122;
var _templateObject6102;
var _templateObject770;
var _templateObject866;
var _templateObject959;
var _templateObject1049;
function _taggedTemplateLiteral75(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray42(arr) {
  return _arrayWithoutHoles42(arr) || _iterableToArray42(arr) || _unsupportedIterableToArray56(arr) || _nonIterableSpread42();
}
function _nonIterableSpread42() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray56(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray56(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray56(o, minLen);
}
function _iterableToArray42(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles42(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray56(arr);
}
function _arrayLikeToArray56(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _classCallCheck27(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties27(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey35(descriptor.key), descriptor);
  }
}
function _createClass27(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties27(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties27(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _defineProperty30(obj, key, value) {
  key = _toPropertyKey35(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey35(arg) {
  var key = _toPrimitive35(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive35(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var GarboWorkshed = /* @__PURE__ */ function() {
  function GarboWorkshed2(options) {
    var _options$minTurns;
    _classCallCheck27(this, GarboWorkshed2);
    _defineProperty30(this, "workshed", void 0);
    _defineProperty30(this, "done", void 0);
    _defineProperty30(this, "action", void 0);
    _defineProperty30(this, "minTurns", void 0);
    this.workshed = options.workshed;
    if (options.done)
      this.done = options.done;
    if (options.action)
      this.action = options.action;
    this.minTurns = (_options$minTurns = options.minTurns) !== null && _options$minTurns !== void 0 ? _options$minTurns : 0;
  }
  _createClass27(GarboWorkshed2, [{
    key: "canRemove",
    value: function canRemove() {
      var _this$done, _this$done2, _GarboWorkshed$next$m, _GarboWorkshed$next;
      return ((_this$done = (_this$done2 = this.done) === null || _this$done2 === void 0 ? void 0 : _this$done2.call(this)) !== null && _this$done !== void 0 ? _this$done : true) || estimatedGarboTurns() <= ((_GarboWorkshed$next$m = (_GarboWorkshed$next = GarboWorkshed2.next) === null || _GarboWorkshed$next === void 0 ? void 0 : _GarboWorkshed$next.minTurns) !== null && _GarboWorkshed$next$m !== void 0 ? _GarboWorkshed$next$m : 0);
    }
  }, {
    key: "use",
    value: function use23() {
      var _this$done3, _this$action;
      if (!((_this$done3 = this.done) !== null && _this$done3 !== void 0 && _this$done3.call(this)))
        (_this$action = this.action) === null || _this$action === void 0 ? void 0 : _this$action.call(this);
    }
  }], [{
    key: "get",
    value: function get4(item9) {
      var _worksheds$find;
      return (_worksheds$find = worksheds.find(function(_ref) {
        var workshed = _ref.workshed;
        return workshed === item9;
      })) !== null && _worksheds$find !== void 0 ? _worksheds$find : null;
    }
  }, {
    key: "current",
    get: function get4() {
      var _GarboWorkshed$_curre;
      (_GarboWorkshed$_curre = GarboWorkshed2._currentWorkshed) !== null && _GarboWorkshed$_curre !== void 0 ? _GarboWorkshed$_curre : GarboWorkshed2._currentWorkshed = GarboWorkshed2.get((0, import_kolmafia83.getWorkshed)());
      return GarboWorkshed2._currentWorkshed;
    }
  }, {
    key: "next",
    get: function get4() {
      var _GarboWorkshed$_nextW;
      if (get("_workshedItemUsed"))
        return null;
      (_GarboWorkshed$_nextW = GarboWorkshed2._nextWorkshed) !== null && _GarboWorkshed$_nextW !== void 0 ? _GarboWorkshed$_nextW : GarboWorkshed2._nextWorkshed = GarboWorkshed2.get(globalOptions.workshed);
      return GarboWorkshed2._nextWorkshed;
    }
  }, {
    key: "useNext",
    value: function useNext() {
      if (get("_workshedItemUsed"))
        return null;
      var next2 = GarboWorkshed2.next;
      if (next2 && have(next2.workshed)) {
        (0, import_kolmafia83.use)(next2.workshed);
        if (GarboWorkshed2.get((0, import_kolmafia83.getWorkshed)()) === next2) {
          GarboWorkshed2._nextWorkshed = null;
          GarboWorkshed2._currentWorkshed = next2;
        }
      }
      return GarboWorkshed2._currentWorkshed;
    }
  }]);
  return GarboWorkshed2;
}();
_defineProperty30(GarboWorkshed, "_nextWorkshed", null);
_defineProperty30(GarboWorkshed, "_currentWorkshed", null);
var _attemptedMakingTonics = false;
var worksheds = [new GarboWorkshed({
  workshed: $item(_templateObject708 || (_templateObject708 = _taggedTemplateLiteral75(["model train set"]))),
  done: function() {
    return false;
  },
  action: function() {
    if (!TrainSet_exports.canConfigure())
      return;
    if (!get("trainsetConfiguration")) {
      (0, import_kolmafia83.visitUrl)("campground.php?action=workshed");
      (0, import_kolmafia83.visitUrl)("main.php");
    }
    if (!get("trainsetConfiguration")) {
      (0, import_kolmafia83.print)("Reconfiguring trainset, as it is empty", HIGHLIGHT);
      return rotateToOptimalCycle();
    } else if (globalOptions.ascend && estimatedGarboTurns() <= 40) {
      (0, import_kolmafia83.print)("Refusing to reconfigure trainset, to save a reconfiguration for your upcoming ascension.", HIGHLIGHT);
      return;
    } else {
      var bestStations = getPrioritizedStations();
      if (bestStations.includes(TrainSet_exports.next()))
        return;
      (0, import_kolmafia83.print)("Reconfiguring trainset, as our next station is ".concat(TrainSet_exports.next()), HIGHLIGHT);
      return rotateToOptimalCycle();
    }
  }
}), new GarboWorkshed({
  workshed: $item(_templateObject2165 || (_templateObject2165 = _taggedTemplateLiteral75(["cold medicine cabinet"]))),
  done: function() {
    return get("_coldMedicineConsults") >= 5;
  },
  action: function() {
    if (get("_nextColdMedicineConsult") > (0, import_kolmafia83.totalTurnsPlayed)())
      return;
    grabMedicine();
  },
  minTurns: 80
}), new GarboWorkshed({
  workshed: $item(_templateObject3142 || (_templateObject3142 = _taggedTemplateLiteral75(["Asdon Martin keyfob"]))),
  done: function() {
    return (0, import_kolmafia83.haveEffect)($effect(_templateObject4128 || (_templateObject4128 = _taggedTemplateLiteral75(["Driving Observantly"])))) >= estimatedGarboTurns() + (globalOptions.ascend ? 0 : estimatedTurnsTomorrow);
  },
  action: function() {
    AsdonMartin_exports.drive($effect(_templateObject5122 || (_templateObject5122 = _taggedTemplateLiteral75(["Driving Observantly"]))), estimatedGarboTurns() + (globalOptions.ascend ? 0 : estimatedTurnsTomorrow));
  }
}), new GarboWorkshed({
  workshed: $item(_templateObject6102 || (_templateObject6102 = _taggedTemplateLiteral75(["Little Geneticist DNA-Splicing Lab"]))),
  done: function() {
    return _attemptedMakingTonics || get("_dnaPotionsMade") >= 3;
  },
  action: function() {
    if (get("dnaSyringe"))
      DNALab_exports.makeTonic(3);
    _attemptedMakingTonics = true;
  }
}), new GarboWorkshed({
  workshed: $item(_templateObject770 || (_templateObject770 = _taggedTemplateLiteral75(["spinning wheel"]))),
  done: function() {
    return get("_spinningWheel");
  },
  action: function() {
    (0, import_kolmafia83.visitUrl)("campground.php?action=spinningwheel");
  }
})].concat(_toConsumableArray42($items(_templateObject866 || (_templateObject866 = _taggedTemplateLiteral75(["diabolic pizza cube, portable Mayo Clinic, warbear high-efficiency still, warbear induction oven"]))).map(function(item9) {
  return new GarboWorkshed({
    workshed: item9,
    done: dietCompleted
  });
})), _toConsumableArray42($items(_templateObject959 || (_templateObject959 = _taggedTemplateLiteral75(["warbear chemistry lab, warbear LP-ROM burner"]))).map(function(item9) {
  return new GarboWorkshed({
    workshed: item9,
    done: potionSetupCompleted
  });
})), _toConsumableArray42($items(_templateObject1049 || (_templateObject1049 = _taggedTemplateLiteral75(["snow machine, warbear jackhammer drill press, warbear auto-anvil"]))).map(function(item9) {
  return new GarboWorkshed({
    workshed: item9
  });
})));
function handleWorkshed() {
  var _GarboWorkshed$curren, _GarboWorkshed$curren2, _GarboWorkshed$curren3;
  (_GarboWorkshed$curren = GarboWorkshed.current) === null || _GarboWorkshed$curren === void 0 ? void 0 : _GarboWorkshed$curren.use();
  var safetyTurns = 25;
  if (!get("_workshedItemUsed") && ((_GarboWorkshed$curren2 = (_GarboWorkshed$curren3 = GarboWorkshed.current) === null || _GarboWorkshed$curren3 === void 0 ? void 0 : _GarboWorkshed$curren3.canRemove()) !== null && _GarboWorkshed$curren2 !== void 0 ? _GarboWorkshed$curren2 : true) && GarboWorkshed.next && have(GarboWorkshed.next.workshed) && (!GarboWorkshed.next.minTurns || GarboWorkshed.next.minTurns + safetyTurns > estimatedGarboTurns())) {
    var _GarboWorkshed$curren4;
    GarboWorkshed.useNext();
    (_GarboWorkshed$curren4 = GarboWorkshed.current) === null || _GarboWorkshed$curren4 === void 0 ? void 0 : _GarboWorkshed$curren4.use();
  }
}

// src/post/index.ts
var _templateObject709;
var _templateObject2166;
var _templateObject3143;
var _templateObject4129;
var _templateObject5123;
var _templateObject6103;
var _templateObject771;
var _templateObject867;
var _templateObject960;
var _templateObject1050;
var _templateObject1145;
var _templateObject1241;
var _templateObject1339;
var _templateObject1435;
var _templateObject1531;
var _templateObject1631;
var _templateObject1731;
function _toConsumableArray43(arr) {
  return _arrayWithoutHoles43(arr) || _iterableToArray43(arr) || _unsupportedIterableToArray57(arr) || _nonIterableSpread43();
}
function _nonIterableSpread43() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray43(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles43(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray57(arr);
}
function _taggedTemplateLiteral76(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _createForOfIteratorHelper30(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray57(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray57(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray57(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray57(o, minLen);
}
function _arrayLikeToArray57(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function closetStuff() {
  var _iterator = _createForOfIteratorHelper30($items(_templateObject709 || (_templateObject709 = _taggedTemplateLiteral76(["bowling ball, funky junk key"])))), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var i = _step.value;
      (0, import_kolmafia84.putCloset)((0, import_kolmafia84.itemAmount)(i), i);
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
function floristFriars() {
  if (!Florist_exports.have() || (0, import_kolmafia84.myLocation)() !== $location(_templateObject2166 || (_templateObject2166 = _taggedTemplateLiteral76(["Barf Mountain"]))) || Florist_exports.isFull()) {
    return;
  }
  [Florist_exports.StealingMagnolia, Florist_exports.AloeGuvnor, Florist_exports.PitcherPlant].forEach(function(flower) {
    return flower.plant();
  });
}
function fillPantsgivingFullness() {
  if (getRemainingStomach() > 0 && (!globalOptions.prefs.yachtzeechain || get("_garboYachtzeeChainCompleted", false))) {
    consumeDiet(computeDiet().pantsgiving(), "PANTSGIVING");
  }
}
function fillSweatyLiver() {
  if (globalOptions.prefs.yachtzeechain && !get("_garboYachtzeeChainCompleted", false))
    return;
  var castsWanted = 3 - get("_sweatOutSomeBoozeUsed");
  if (castsWanted <= 0 || !have($item(_templateObject3143 || (_templateObject3143 = _taggedTemplateLiteral76(["designer sweatpants"])))))
    return;
  var sweatNeeded = 25 * castsWanted;
  if (get("sweat") >= sweatNeeded) {
    while (get("_sweatOutSomeBoozeUsed") < 3) {
      (0, import_kolmafia84.useSkill)($skill(_templateObject4129 || (_templateObject4129 = _taggedTemplateLiteral76(["Sweat Out Some Booze"]))));
    }
    consumeDiet(computeDiet().sweatpants(), "SWEATPANTS");
  }
}
function numberology() {
  if ((0, import_kolmafia84.myAdventures)() > 0 && Object.keys((0, import_kolmafia84.reverseNumberology)()).includes("69") && get("_universeCalculated") < get("skillLevel144")) {
    (0, import_kolmafia84.cliExecute)("numberology 69");
  }
}
function updateMallPrices() {
  sessionSinceStart().value(garboValue);
}
var juneCleaverSkipChoices;
function skipJuneCleaverChoices() {
  if (!juneCleaverSkipChoices) {
    juneCleaverSkipChoices = _toConsumableArray43(JuneCleaver_exports.choices).sort(function(a, b) {
      return valueJuneCleaverOption(juneCleaverChoiceValues[a][bestJuneCleaverOption(a)]) - valueJuneCleaverOption(juneCleaverChoiceValues[b][bestJuneCleaverOption(b)]);
    }).splice(0, 3);
  }
  if (JuneCleaver_exports.skipsRemaining() > 0) {
    var _iterator2 = _createForOfIteratorHelper30(juneCleaverSkipChoices), _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
        var choice = _step2.value;
        setChoice(choice, 4);
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  } else {
    var _iterator3 = _createForOfIteratorHelper30(juneCleaverSkipChoices), _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
        var _choice = _step3.value;
        setChoice(_choice, bestJuneCleaverOption(_choice));
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
}
function juneCleave() {
  if (get("_juneCleaverFightsLeft") <= 0 && teleportEffects.every(function(e) {
    return !have(e);
  })) {
    (0, import_kolmafia84.equip)($slot(_templateObject5123 || (_templateObject5123 = _taggedTemplateLiteral76(["weapon"]))), $item(_templateObject6103 || (_templateObject6103 = _taggedTemplateLiteral76(["June cleaver"]))));
    skipJuneCleaverChoices();
    withProperty("recoveryScript", "", function() {
      garboAdventure($location(_templateObject771 || (_templateObject771 = _taggedTemplateLiteral76(["Noob Cave"]))), Macro2.abortWithMsg("Expected June Cleaver non-combat but ended up in combat."));
      if (["Poetic Justice", "Lost and Found"].includes(get("lastEncounter"))) {
        uneffect($effect(_templateObject867 || (_templateObject867 = _taggedTemplateLiteral76(["Beaten Up"]))));
      }
    });
  }
}
function stillsuit() {
  if ((0, import_kolmafia84.itemAmount)($item(_templateObject960 || (_templateObject960 = _taggedTemplateLiteral76(["tiny stillsuit"]))))) {
    var familiarTarget = $familiar(_templateObject1050 || (_templateObject1050 = _taggedTemplateLiteral76(["Blood-Faced Volleyball"])));
    if (have(familiarTarget))
      (0, import_kolmafia84.equip)(familiarTarget, $item(_templateObject1145 || (_templateObject1145 = _taggedTemplateLiteral76(["tiny stillsuit"]))));
  }
}
var funguyWorthIt = true;
function funguySpores() {
  if ((0, import_kolmafia84.myLevel)() >= 15 && // It applies -100 to all stats, and Level 15 seems to be a reasonable place where you will survive -100 to all stats
  !have($effect(_templateObject1241 || (_templateObject1241 = _taggedTemplateLiteral76(["Mush-Mouth"])))) && (!globalOptions.ascend || (0, import_kolmafia84.myAdventures)() > 11) && get("dinseyRollercoasterNext") && // If it were to expire on a rails adventure, you'd waste the cost of the spore. Using it when next turn is rails is easiest way to make sure it won't
  funguyWorthIt) {
    var value = 0.75 * garboAverageValue.apply(void 0, _toConsumableArray43($items(_templateObject1339 || (_templateObject1339 = _taggedTemplateLiteral76(["Boletus Broletus mushroom, Omphalotus Omphaloskepsis mushroom, Gyromitra Dynomita mushroom"]))))) + 0.25 * garboAverageValue.apply(void 0, _toConsumableArray43($items(_templateObject1435 || (_templateObject1435 = _taggedTemplateLiteral76(["Helvella Haemophilia mushroom, Stemonitis Staticus mushroom, Tremella Tarantella mushroom"])))));
    if ((0, import_kolmafia84.mallPrice)($item(_templateObject1531 || (_templateObject1531 = _taggedTemplateLiteral76(["Fun-Guy spore"])))) < value && acquire(1, $item(_templateObject1631 || (_templateObject1631 = _taggedTemplateLiteral76(["Fun-Guy spore"]))), value, false) > 0) {
      (0, import_kolmafia84.use)($item(_templateObject1731 || (_templateObject1731 = _taggedTemplateLiteral76(["Fun-Guy spore"]))));
    } else
      funguyWorthIt = false;
  }
}
function postCombatActions() {
  var skipDiet = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  closetStuff();
  juneCleave();
  numberology();
  if (!skipDiet && !globalOptions.nodiet) {
    fillPantsgivingFullness();
    fillSweatyLiver();
  }
  floristFriars();
  handleWorkshed();
  safeInterrupt();
  safeRestore();
  updateMallPrices();
  stillsuit();
  funguySpores();
  wanderer_default.clear();
  if (globalOptions.ascend || AutumnAton_exports.turnsForQuest() < estimatedGarboTurns() + remainingUserTurns()) {
    AutumnAton_exports.sendTo(bestAutumnatonLocation);
  }
}

// src/fights.ts
var _templateObject776;
var _templateObject2167;
var _templateObject3144;
var _templateObject4130;
var _templateObject5124;
var _templateObject6104;
var _templateObject777;
var _templateObject868;
var _templateObject961;
var _templateObject1051;
var _templateObject1146;
var _templateObject1245;
var _templateObject1340;
var _templateObject1436;
var _templateObject1534;
var _templateObject1634;
var _templateObject1734;
var _templateObject1831;
var _templateObject1931;
var _templateObject2031;
var _templateObject2168;
var _templateObject2231;
var _templateObject2330;
var _templateObject2430;
var _templateObject2530;
var _templateObject2630;
var _templateObject2727;
var _templateObject2824;
var _templateObject2924;
var _templateObject3022;
var _templateObject3145;
var _templateObject3224;
var _templateObject3323;
var _templateObject3422;
var _templateObject3521;
var _templateObject3619;
var _templateObject3718;
var _templateObject3817;
var _templateObject3916;
var _templateObject4016;
var _templateObject4131;
var _templateObject4219;
var _templateObject4319;
var _templateObject4417;
var _templateObject4516;
var _templateObject4614;
var _templateObject4714;
var _templateObject4814;
var _templateObject4914;
var _templateObject5014;
var _templateObject5125;
var _templateObject5219;
var _templateObject5318;
var _templateObject5416;
var _templateObject5515;
var _templateObject5614;
var _templateObject5713;
var _templateObject5813;
var _templateObject5913;
var _templateObject6012;
var _templateObject6116;
var _templateObject6216;
var _templateObject6315;
var _templateObject6413;
var _templateObject6512;
var _templateObject6612;
var _templateObject6712;
var _templateObject6811;
var _templateObject6911;
var _templateObject7010;
var _templateObject7113;
var _templateObject7213;
var _templateObject7313;
var _templateObject7412;
var _templateObject7512;
var _templateObject7610;
var _templateObject778;
var _templateObject786;
var _templateObject796;
var _templateObject806;
var _templateObject8113;
var _templateObject8213;
var _templateObject8312;
var _templateObject8412;
var _templateObject8511;
var _templateObject869;
var _templateObject875;
var _templateObject885;
var _templateObject895;
var _templateObject905;
var _templateObject9113;
var _templateObject9213;
var _templateObject9312;
var _templateObject9411;
var _templateObject9510;
var _templateObject965;
var _templateObject975;
var _templateObject985;
var _templateObject995;
var _templateObject1005;
var _templateObject10113;
var _templateObject10213;
var _templateObject10312;
var _templateObject10410;
var _templateObject1055;
var _templateObject1065;
var _templateObject1075;
var _templateObject1085;
var _templateObject1095;
var _templateObject1105;
var _templateObject11113;
var _templateObject11212;
var _templateObject11311;
var _templateObject1147;
var _templateObject1155;
var _templateObject1165;
var _templateObject1175;
var _templateObject1185;
var _templateObject1195;
var _templateObject1205;
var _templateObject12113;
var _templateObject12212;
var _templateObject12310;
var _templateObject1246;
var _templateObject1255;
var _templateObject1265;
var _templateObject1275;
var _templateObject1285;
var _templateObject1295;
var _templateObject1305;
var _templateObject13113;
var _templateObject13212;
var _templateObject13310;
var _templateObject1345;
var _templateObject1355;
var _templateObject1365;
var _templateObject1375;
var _templateObject1385;
var _templateObject1395;
var _templateObject1404;
var _templateObject14112;
var _templateObject14211;
var _templateObject1437;
var _templateObject1444;
var _templateObject1454;
var _templateObject1464;
var _templateObject1474;
var _templateObject1484;
var _templateObject1494;
var _templateObject1504;
var _templateObject15112;
var _templateObject15211;
var _templateObject1535;
var _templateObject1544;
var _templateObject1554;
var _templateObject1564;
var _templateObject1574;
var _templateObject1584;
var _templateObject1594;
var _templateObject1604;
var _templateObject16112;
var _templateObject16211;
var _templateObject1635;
var _templateObject1644;
var _templateObject1654;
var _templateObject1664;
var _templateObject1674;
var _templateObject1684;
var _templateObject1694;
var _templateObject1704;
var _templateObject17112;
var _templateObject17211;
var _templateObject1735;
var _templateObject1744;
var _templateObject1754;
var _templateObject1764;
var _templateObject1774;
var _templateObject1784;
var _templateObject1794;
var _templateObject1804;
var _templateObject18112;
var _templateObject18211;
var _templateObject1834;
var _templateObject1844;
var _templateObject1854;
var _templateObject1864;
var _templateObject1874;
var _templateObject1884;
var _templateObject1894;
var _templateObject1904;
var _templateObject19112;
var _templateObject19211;
var _templateObject1934;
var _templateObject1944;
var _templateObject1954;
var _templateObject1964;
var _templateObject1974;
var _templateObject1984;
var _templateObject1994;
var _templateObject2004;
var _templateObject20112;
var _templateObject20211;
var _templateObject2034;
var _templateObject2044;
var _templateObject2054;
var _templateObject2064;
var _templateObject2074;
var _templateObject2084;
var _templateObject2094;
var _templateObject21012;
var _templateObject21112;
var _templateObject21211;
var _templateObject21311;
var _templateObject21411;
var _templateObject21510;
var _templateObject2169;
var _templateObject2173;
var _templateObject2182;
var _templateObject2192;
var _templateObject2202;
var _templateObject22110;
var _templateObject22210;
var _templateObject2232;
var _templateObject2242;
var _templateObject2252;
var _templateObject2262;
var _templateObject2272;
var _templateObject2282;
var _templateObject2292;
var _templateObject2302;
var _templateObject23110;
var _templateObject23210;
var _templateObject2332;
var _templateObject2342;
var _templateObject2352;
var _templateObject2362;
var _templateObject2372;
var _templateObject2382;
var _templateObject2392;
var _templateObject2402;
var _templateObject24110;
var _templateObject24210;
var _templateObject2432;
var _templateObject2442;
var _templateObject2452;
var _templateObject2462;
var _templateObject2472;
var _templateObject2482;
var _templateObject2492;
var _templateObject2502;
var _templateObject25110;
var _templateObject25210;
var _templateObject2532;
var _templateObject2542;
var _templateObject2552;
var _templateObject2562;
var _templateObject2572;
var _templateObject2582;
var _templateObject2592;
var _templateObject2602;
var _templateObject26110;
var _templateObject26210;
var _templateObject2632;
var _templateObject2642;
var _templateObject2652;
var _templateObject2662;
var _templateObject2672;
var _templateObject2682;
var _templateObject2692;
var _templateObject2702;
var _templateObject27110;
var _templateObject2728;
var _templateObject2732;
var _templateObject2742;
var _templateObject2752;
var _templateObject2762;
var _templateObject2772;
var _templateObject2782;
var _templateObject2792;
var _templateObject2802;
var _templateObject28110;
var _templateObject2825;
var _templateObject2832;
var _templateObject2842;
var _templateObject2852;
var _templateObject2862;
var _templateObject2872;
var _templateObject2882;
var _templateObject2892;
var _templateObject2902;
var _templateObject29110;
var _templateObject2925;
var _templateObject2932;
var _templateObject2942;
var _templateObject2952;
var _templateObject2962;
var _templateObject2972;
var _templateObject2982;
var _templateObject2992;
var _templateObject3002;
var _templateObject30110;
var _templateObject3023;
var _templateObject3032;
var _templateObject3042;
var _templateObject3052;
var _templateObject3062;
var _templateObject3072;
var _templateObject3082;
var _templateObject3092;
var _templateObject31010;
var _templateObject31110;
var _templateObject31210;
var _templateObject31310;
var _templateObject3146;
var _templateObject3152;
var _templateObject3162;
var _templateObject3172;
var _templateObject3182;
var _templateObject3192;
var _templateObject3202;
var _templateObject32110;
var _templateObject3225;
var _templateObject3232;
var _templateObject3242;
var _templateObject3252;
var _templateObject3262;
var _templateObject3272;
var _templateObject3282;
var _templateObject3292;
var _templateObject3302;
var _templateObject33110;
var _templateObject3324;
var _templateObject3332;
var _templateObject3342;
var _templateObject3352;
var _templateObject3362;
var _templateObject3372;
var _templateObject3382;
var _templateObject3392;
var _templateObject3402;
var _templateObject34110;
var _templateObject3423;
var _templateObject3432;
var _templateObject3442;
var _templateObject3452;
var _templateObject3462;
var _templateObject3472;
var _templateObject3482;
var _templateObject3492;
var _templateObject3502;
var _templateObject35110;
var _templateObject3522;
var _templateObject3532;
var _templateObject3542;
var _templateObject3552;
var _templateObject3562;
var _templateObject3572;
var _templateObject3582;
var _templateObject3592;
var _templateObject3602;
var _templateObject36110;
var _templateObject3622;
var _templateObject3632;
var _templateObject3642;
var _templateObject3652;
var _templateObject3662;
var _templateObject3672;
var _templateObject3682;
var _templateObject3692;
var _templateObject3702;
var _templateObject3719;
var _templateObject3722;
var _templateObject3732;
var _templateObject3742;
var _templateObject3752;
var _templateObject3762;
var _templateObject3772;
var _templateObject3782;
var _templateObject3792;
var _templateObject3802;
var _templateObject3818;
var _templateObject3822;
var _templateObject3832;
var _templateObject3842;
var _templateObject3852;
var _templateObject3862;
var _templateObject3872;
var _templateObject3882;
var _templateObject3892;
var _templateObject3902;
var _templateObject3917;
var _templateObject3922;
var _templateObject3932;
var _templateObject3942;
var _templateObject3952;
var _templateObject3962;
var _templateObject3972;
var _templateObject3982;
var _templateObject3992;
var _templateObject4002;
var _templateObject4017;
var _templateObject4022;
var _templateObject4032;
var _templateObject4042;
var _templateObject4052;
var _templateObject4062;
var _templateObject4072;
var _templateObject4082;
var _templateObject4092;
var _templateObject41010;
var _templateObject41110;
var _templateObject41210;
var _templateObject4132;
var _templateObject4142;
var _templateObject4152;
var _templateObject4162;
var _templateObject4172;
var _templateObject4182;
var _templateObject4192;
var _templateObject4202;
var _templateObject42110;
var _templateObject4222;
var _templateObject4232;
var _templateObject4242;
var _templateObject4252;
var _templateObject4262;
var _templateObject4272;
var _templateObject4282;
var _templateObject4292;
var _templateObject4302;
var _templateObject43110;
var _templateObject4322;
var _templateObject4332;
var _templateObject4342;
var _templateObject4352;
var _templateObject4362;
var _templateObject4372;
var _templateObject4382;
var _templateObject4392;
var _templateObject4402;
var _templateObject4418;
var _templateObject4422;
var _templateObject4432;
var _templateObject4442;
var _templateObject4452;
var _templateObject4462;
var _templateObject4472;
var _templateObject4482;
var _templateObject4492;
var _templateObject4502;
var _templateObject4517;
var _templateObject4522;
var _templateObject4532;
var _templateObject4542;
var _templateObject4552;
var _templateObject4562;
var _templateObject4572;
var _templateObject4582;
var _templateObject4592;
var _templateObject4602;
var _templateObject4615;
var _templateObject4622;
var _templateObject4632;
var _templateObject4642;
var _templateObject4652;
var _templateObject4662;
var _templateObject4672;
var _templateObject4682;
var _templateObject4692;
var _templateObject4702;
var _templateObject4715;
var _templateObject4722;
var _templateObject4732;
var _templateObject4742;
var _templateObject4752;
var _templateObject4762;
var _templateObject4772;
var _templateObject4782;
var _templateObject4792;
var _templateObject4802;
var _templateObject4815;
var _templateObject4822;
var _templateObject4832;
var _templateObject4842;
var _templateObject4852;
var _templateObject4862;
var _templateObject4872;
var _templateObject4882;
var _templateObject4892;
var _templateObject4902;
var _templateObject4915;
var _templateObject4922;
var _templateObject4932;
var _templateObject4942;
var _templateObject4952;
var _templateObject4962;
var _templateObject4972;
var _templateObject4982;
var _templateObject4992;
var _templateObject5002;
var _templateObject5015;
var _templateObject5022;
var _templateObject5032;
var _templateObject5042;
var _templateObject5052;
var _templateObject5062;
var _templateObject5072;
var _templateObject5082;
var _templateObject5092;
var _templateObject51010;
var _templateObject51110;
var _templateObject5126;
var _templateObject5132;
var _templateObject5142;
var _templateObject5152;
var _templateObject5162;
var _templateObject5172;
var _templateObject5182;
var _templateObject5192;
var _templateObject5202;
var _templateObject52110;
var _templateObject5222;
var _templateObject5232;
var _templateObject5242;
var _templateObject5252;
var _templateObject5262;
var _templateObject5272;
var _templateObject5282;
var _templateObject5292;
var _templateObject5302;
var _templateObject5319;
var _templateObject5322;
var _templateObject5332;
var _templateObject5342;
var _templateObject5352;
var _templateObject5362;
var _templateObject5372;
var _templateObject5382;
var _templateObject5392;
var _templateObject5402;
var _templateObject5417;
var _templateObject5422;
var _templateObject5432;
var _templateObject5442;
var _templateObject5452;
var _templateObject5462;
var _templateObject5472;
var _templateObject5482;
var _templateObject5492;
var _templateObject5502;
var _templateObject5516;
var _templateObject5522;
var _templateObject5532;
var _templateObject5542;
var _templateObject5552;
var _templateObject5562;
var _templateObject5572;
var _templateObject5582;
var _templateObject5592;
var _templateObject5602;
var _templateObject5615;
var _templateObject5622;
var _templateObject5632;
var _templateObject5642;
var _templateObject5652;
var _templateObject5662;
var _templateObject5672;
var _templateObject5682;
var _templateObject5692;
var _templateObject5702;
var _templateObject5714;
var _templateObject5722;
var _templateObject5732;
var _templateObject5742;
var _templateObject5752;
var _templateObject5762;
var _templateObject5772;
var _templateObject5782;
var _templateObject5792;
var _templateObject5802;
var _templateObject5814;
var _templateObject5822;
var _templateObject5832;
var _templateObject5842;
var _templateObject5852;
var _templateObject5862;
var _templateObject5872;
var _templateObject5882;
var _templateObject5892;
var _templateObject5902;
var _templateObject5914;
var _templateObject5922;
var _templateObject5932;
var _templateObject5942;
var _templateObject5952;
var _templateObject5962;
var _templateObject5972;
var _templateObject5982;
var _templateObject5992;
var _templateObject6002;
var _templateObject6013;
var _templateObject6022;
var _templateObject6032;
var _templateObject6042;
var _templateObject6052;
var _templateObject6062;
var _templateObject6072;
var _templateObject6082;
var _templateObject6092;
var _templateObject6105;
var _templateObject6117;
var _templateObject6122;
var _templateObject6132;
var _templateObject6142;
var _templateObject6152;
var _templateObject6162;
var _templateObject6172;
var _templateObject6182;
var _templateObject6192;
var _templateObject6202;
var _templateObject6217;
var _templateObject6222;
var _templateObject6232;
var _templateObject6242;
var _templateObject6252;
var _templateObject6262;
var _templateObject6272;
var _templateObject6282;
var _templateObject6292;
var _templateObject6302;
var _templateObject6316;
var _templateObject6322;
function _slicedToArray25(arr, i) {
  return _arrayWithHoles25(arr) || _iterableToArrayLimit25(arr, i) || _unsupportedIterableToArray58(arr, i) || _nonIterableRest25();
}
function _nonIterableRest25() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit25(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles25(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper31(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray58(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _inherits9(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });
  Object.defineProperty(subClass, "prototype", { writable: false });
  if (superClass)
    _setPrototypeOf9(subClass, superClass);
}
function _setPrototypeOf9(o, p) {
  _setPrototypeOf9 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf10(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf9(o, p);
}
function _createSuper8(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct8();
  return function _createSuperInternal() {
    var Super = _getPrototypeOf8(Derived), result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf8(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _possibleConstructorReturn8(this, result);
  };
}
function _possibleConstructorReturn8(self2, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return _assertThisInitialized8(self2);
}
function _assertThisInitialized8(self2) {
  if (self2 === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self2;
}
function _isNativeReflectConstruct8() {
  if (typeof Reflect === "undefined" || !Reflect.construct)
    return false;
  if (Reflect.construct.sham)
    return false;
  if (typeof Proxy === "function")
    return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    }));
    return true;
  } catch (e) {
    return false;
  }
}
function _getPrototypeOf8(o) {
  _getPrototypeOf8 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf9(o2) {
    return o2.__proto__ || Object.getPrototypeOf(o2);
  };
  return _getPrototypeOf8(o);
}
function _classCallCheck28(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties28(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey36(descriptor.key), descriptor);
  }
}
function _createClass28(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties28(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties28(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function ownKeys14(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread14(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys14(Object(source), true).forEach(function(key) {
      _defineProperty31(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys14(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty31(obj, key, value) {
  key = _toPropertyKey36(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey36(arg) {
  var key = _toPrimitive36(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive36(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toConsumableArray44(arr) {
  return _arrayWithoutHoles44(arr) || _iterableToArray44(arr) || _unsupportedIterableToArray58(arr) || _nonIterableSpread44();
}
function _nonIterableSpread44() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray58(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray58(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray58(o, minLen);
}
function _iterableToArray44(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles44(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray58(arr);
}
function _arrayLikeToArray58(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral77(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var firstChainMacro = function() {
  return Macro2.if_($monster(_templateObject776 || (_templateObject776 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))), Macro2.if_("!hasskill Lecture on Relativity", Macro2.externalIf(SourceTerminal_exports.getDigitizeMonster() !== $monster(_templateObject2167 || (_templateObject2167 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))), Macro2.tryCopier($skill(_templateObject3144 || (_templateObject3144 = _taggedTemplateLiteral77(["Digitize"]))))).tryCopier($item(_templateObject4130 || (_templateObject4130 = _taggedTemplateLiteral77(["Spooky Putty sheet"])))).tryCopier($item(_templateObject5124 || (_templateObject5124 = _taggedTemplateLiteral77(["Rain-Doh black box"])))).tryCopier($item(_templateObject6104 || (_templateObject6104 = _taggedTemplateLiteral77(["4-d camera"])))).tryCopier($item(_templateObject777 || (_templateObject777 = _taggedTemplateLiteral77(["unfinished ice sculpture"])))).externalIf(get("_enamorangs") === 0, Macro2.tryCopier($item(_templateObject868 || (_templateObject868 = _taggedTemplateLiteral77(["LOV Enamorang"])))))).trySkill($skill(_templateObject961 || (_templateObject961 = _taggedTemplateLiteral77(["lecture on relativity"])))).meatKill()).abort();
};
var secondChainMacro = function() {
  return Macro2.if_($monster(_templateObject1051 || (_templateObject1051 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))), Macro2.if_("!hasskill Lecture on Relativity", Macro2.trySkill($skill(_templateObject1146 || (_templateObject1146 = _taggedTemplateLiteral77(["Meteor Shower"]))))).if_("!hasskill Lecture on Relativity", Macro2.externalIf(get("_sourceTerminalDigitizeMonster") !== $monster(_templateObject1245 || (_templateObject1245 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))), Macro2.tryCopier($skill(_templateObject1340 || (_templateObject1340 = _taggedTemplateLiteral77(["Digitize"]))))).tryCopier($item(_templateObject1436 || (_templateObject1436 = _taggedTemplateLiteral77(["Spooky Putty sheet"])))).tryCopier($item(_templateObject1534 || (_templateObject1534 = _taggedTemplateLiteral77(["Rain-Doh black box"])))).tryCopier($item(_templateObject1634 || (_templateObject1634 = _taggedTemplateLiteral77(["4-d camera"])))).tryCopier($item(_templateObject1734 || (_templateObject1734 = _taggedTemplateLiteral77(["unfinished ice sculpture"])))).externalIf(get("_enamorangs") === 0, Macro2.tryCopier($item(_templateObject1831 || (_templateObject1831 = _taggedTemplateLiteral77(["LOV Enamorang"])))))).trySkill($skill(_templateObject1931 || (_templateObject1931 = _taggedTemplateLiteral77(["lecture on relativity"])))).meatKill()).abort();
};
function embezzlerSetup() {
  (0, import_kolmafia85.setLocation)($location(_templateObject2031 || (_templateObject2031 = _taggedTemplateLiteral77(["Friar Ceremony Location"]))));
  potionSetup(false);
  (0, import_kolmafia85.maximize)("MP", false);
  meatMood(true, 750 + baseMeat).execute(embezzlerCount());
  safeRestore();
  freeFightMood().execute(50);
  useBuffExtenders();
  burnLibrams(400);
  if (globalOptions.ascend && questStep2("questM16Temple") > 0 && get("lastTempleAdventures") < (0, import_kolmafia85.myAscensions)() && acquire(1, $item(_templateObject2168 || (_templateObject2168 = _taggedTemplateLiteral77(["stone wool"]))), 3 * get("valueOfAdventure") + 100, false) > 0) {
    ensureEffect($effect(_templateObject2231 || (_templateObject2231 = _taggedTemplateLiteral77(["Stone-Faced"]))));
    setChoice(582, 1);
    setChoice(579, 3);
    while (get("lastTempleAdventures") < (0, import_kolmafia85.myAscensions)()) {
      var _tryFindFreeRun, _run$constraints$prep, _run$constraints;
      var run = (_tryFindFreeRun = tryFindFreeRun()) !== null && _tryFindFreeRun !== void 0 ? _tryFindFreeRun : ltbRun();
      if (!run)
        break;
      (_run$constraints$prep = (_run$constraints = run.constraints).preparation) === null || _run$constraints$prep === void 0 ? void 0 : _run$constraints$prep.call(_run$constraints);
      freeFightOutfit(toSpec(run)).dress();
      garboAdventure($location(_templateObject2330 || (_templateObject2330 = _taggedTemplateLiteral77(["The Hidden Temple"]))), run.macro);
    }
  }
  bathroomFinance(embezzlerCount());
  if (SourceTerminal_exports.have())
    SourceTerminal_exports.educate([$skill(_templateObject2430 || (_templateObject2430 = _taggedTemplateLiteral77(["Extract"]))), $skill(_templateObject2530 || (_templateObject2530 = _taggedTemplateLiteral77(["Digitize"])))]);
  if (!get("_cameraUsed") && !have($item(_templateObject2630 || (_templateObject2630 = _taggedTemplateLiteral77(["shaking 4-d camera"])))) && expectedEmbezzlerProfit() > (0, import_kolmafia85.mallPrice)($item(_templateObject2727 || (_templateObject2727 = _taggedTemplateLiteral77(["4-d camera"]))))) {
    property_exports.withProperty("autoSatisfyWithCloset", true, function() {
      return (0, import_kolmafia85.retrieveItem)($item(_templateObject2824 || (_templateObject2824 = _taggedTemplateLiteral77(["4-d camera"]))));
    });
  }
  if (!get("_iceSculptureUsed") && !have($item(_templateObject2924 || (_templateObject2924 = _taggedTemplateLiteral77(["ice sculpture"])))) && expectedEmbezzlerProfit() > ((0, import_kolmafia85.mallPrice)($item(_templateObject3022 || (_templateObject3022 = _taggedTemplateLiteral77(["snow berries"])))) + (0, import_kolmafia85.mallPrice)($item(_templateObject3145 || (_templateObject3145 = _taggedTemplateLiteral77(["ice harvest"]))))) * 3) {
    property_exports.withProperty("autoSatisfyWithCloset", true, function() {
      (0, import_kolmafia85.cliExecute)("refresh inventory");
      (0, import_kolmafia85.retrieveItem)($item(_templateObject3224 || (_templateObject3224 = _taggedTemplateLiteral77(["unfinished ice sculpture"]))));
    });
  }
  if (!get("_enamorangs") && !(0, import_kolmafia85.itemAmount)($item(_templateObject3323 || (_templateObject3323 = _taggedTemplateLiteral77(["LOV Enamorang"])))) && expectedEmbezzlerProfit() > 2e4) {
    (0, import_kolmafia85.retrieveItem)($item(_templateObject3422 || (_templateObject3422 = _taggedTemplateLiteral77(["LOV Enamorang"]))));
  }
  if (have($item(_templateObject3521 || (_templateObject3521 = _taggedTemplateLiteral77(["Spooky Putty monster"])))) && !get("spookyPuttyMonster")) {
    (0, import_kolmafia85.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject3619 || (_templateObject3619 = _taggedTemplateLiteral77(["Spooky Putty monster"]))).descid), false, false);
    if (!get("spookyPuttyMonster")) {
      (0, import_kolmafia85.use)($item(_templateObject3718 || (_templateObject3718 = _taggedTemplateLiteral77(["Spooky Putty monster"]))));
    }
  }
  if (have($item(_templateObject3817 || (_templateObject3817 = _taggedTemplateLiteral77(["Rain-Doh box full of monster"])))) && !get("rainDohMonster")) {
    (0, import_kolmafia85.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject3916 || (_templateObject3916 = _taggedTemplateLiteral77(["Rain-Doh box full of monster"]))).descid), false, false);
  }
  if (have($item(_templateObject4016 || (_templateObject4016 = _taggedTemplateLiteral77(["shaking 4-d camera"])))) && !get("cameraMonster")) {
    (0, import_kolmafia85.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject4131 || (_templateObject4131 = _taggedTemplateLiteral77(["shaking 4-d camera"]))).descid), false, false);
  }
  if (have($item(_templateObject4219 || (_templateObject4219 = _taggedTemplateLiteral77(["envyfish egg"])))) && !get("envyfishMonster")) {
    (0, import_kolmafia85.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject4319 || (_templateObject4319 = _taggedTemplateLiteral77(["envyfish egg"]))).descid), false, false);
  }
  if (have($item(_templateObject4417 || (_templateObject4417 = _taggedTemplateLiteral77(["ice sculpture"])))) && !get("iceSculptureMonster")) {
    (0, import_kolmafia85.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject4516 || (_templateObject4516 = _taggedTemplateLiteral77(["ice sculpture"]))).descid), false, false);
  }
  if (doingGregFight()) {
    initializeExtrovermectinZones();
  }
}
function startWandererCounter() {
  var nextFight = getNextEmbezzlerFight();
  if (!nextFight || nextFight.canInitializeWandererCounters || nextFight.draggable) {
    return;
  }
  var digitizeNeedsStarting = counter_exports.get("Digitize Monster") === Infinity && SourceTerminal_exports.getDigitizeUses() !== 0;
  var romanceNeedsStarting = get("_romanticFightsLeft") > 0 && counter_exports.get("Romantic Monster window begin") === Infinity && counter_exports.get("Romantic Monster window end") === Infinity;
  if (digitizeNeedsStarting || romanceNeedsStarting) {
    if (digitizeNeedsStarting)
      (0, import_kolmafia85.print)("Starting digitize counter by visiting the Haunted Kitchen!");
    if (romanceNeedsStarting)
      (0, import_kolmafia85.print)("Starting romance counter by visiting the Haunted Kitchen!");
    do {
      var run = void 0;
      if (get("beGregariousFightsLeft") > 0) {
        var _run$constraints$prep2, _run$constraints2;
        (0, import_kolmafia85.print)("You still have gregs active, so we're going to wear your meat outfit.");
        run = ltbRun();
        (_run$constraints$prep2 = (_run$constraints2 = run.constraints).preparation) === null || _run$constraints$prep2 === void 0 ? void 0 : _run$constraints$prep2.call(_run$constraints2);
        embezzlerOutfit().dress();
      } else {
        var _tryFindFreeRun2, _run$constraints$prep3, _run$constraints3;
        (0, import_kolmafia85.print)("You do not have gregs active, so this is a regular free run.");
        run = (_tryFindFreeRun2 = tryFindFreeRun()) !== null && _tryFindFreeRun2 !== void 0 ? _tryFindFreeRun2 : ltbRun();
        (_run$constraints$prep3 = (_run$constraints3 = run.constraints).preparation) === null || _run$constraints$prep3 === void 0 ? void 0 : _run$constraints$prep3.call(_run$constraints3);
        freeFightOutfit(toSpec(run)).dress();
      }
      garboAdventure($location(_templateObject4714 || (_templateObject4714 = _taggedTemplateLiteral77(["The Haunted Kitchen"]))), Macro2.if_($monster(_templateObject4814 || (_templateObject4814 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))), Macro2.embezzler()).step(run.macro));
    } while (get("lastCopyableMonster") === $monster(_templateObject4614 || (_templateObject4614 = _taggedTemplateLiteral77(["Government agent"]))) || dogOrHolidayWanderer(["Lights Out in the Kitchen"]));
  }
}
var witchessPieces = [{
  piece: $monster(_templateObject4914 || (_templateObject4914 = _taggedTemplateLiteral77(["Witchess Bishop"]))),
  drop: $item(_templateObject5014 || (_templateObject5014 = _taggedTemplateLiteral77(["Sacramento wine"])))
}, {
  piece: $monster(_templateObject5125 || (_templateObject5125 = _taggedTemplateLiteral77(["Witchess Knight"]))),
  drop: $item(_templateObject5219 || (_templateObject5219 = _taggedTemplateLiteral77(["jumping horseradish"])))
}, {
  piece: $monster(_templateObject5318 || (_templateObject5318 = _taggedTemplateLiteral77(["Witchess Pawn"]))),
  drop: $item(_templateObject5416 || (_templateObject5416 = _taggedTemplateLiteral77(["armored prawn"])))
}, {
  piece: $monster(_templateObject5515 || (_templateObject5515 = _taggedTemplateLiteral77(["Witchess Rook"]))),
  drop: $item(_templateObject5614 || (_templateObject5614 = _taggedTemplateLiteral77(["Greek fire"])))
}];
function bestWitchessPiece() {
  return maxBy(witchessPieces, function(_ref) {
    var drop = _ref.drop;
    return garboValue(drop);
  }).piece;
}
function pygmyOptions() {
  var equip14 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
  return {
    spec: function() {
      return {
        equip: equip14,
        avoid: $items(_templateObject5713 || (_templateObject5713 = _taggedTemplateLiteral77(["Staff of Queso Escusado, stinky cheese sword"]))),
        bonuses: new Map([[$item(_templateObject5813 || (_templateObject5813 = _taggedTemplateLiteral77(["garbage sticker"]))), 100]].concat(_toConsumableArray44(magnifyingGlass())))
      };
    },
    macroAllowsFamiliarActions: false
  };
}
function dailyFights() {
  if ((0, import_kolmafia85.myInebriety)() > (0, import_kolmafia85.inebrietyLimit)())
    return;
  if (getFoldGroup($item(_templateObject5913 || (_templateObject5913 = _taggedTemplateLiteral77(["Spooky Putty sheet"])))).some(function(item9) {
    return have(item9);
  })) {
    (0, import_kolmafia85.cliExecute)("fold spooky putty sheet");
  }
  if (embezzlerSources.some(function(source) {
    return source.potential();
  })) {
    withStash($items(_templateObject6012 || (_templateObject6012 = _taggedTemplateLiteral77(["Spooky Putty sheet"]))), function() {
      if (!getNextEmbezzlerFight())
        return;
      embezzlerSetup();
      if (have($familiar(_templateObject6116 || (_templateObject6116 = _taggedTemplateLiteral77(["Pocket Professor"]))))) {
        var potentialPocketProfessorLectures = [{
          property: "_garbo_meatChain",
          macro: firstChainMacro,
          goalMaximize: function(spec) {
            return embezzlerOutfit(spec).dress();
          }
        }, {
          property: "_garbo_weightChain",
          macro: secondChainMacro,
          goalMaximize: function(spec) {
            return Outfit.from(_objectSpread14(_objectSpread14({}, spec), {}, {
              modifier: ["Familiar Weight"]
            }), new Error("Unable to build outfit for weight chain!")).dress();
          }
        }];
        for (var _i = 0, _potentialPocketProfe = potentialPocketProfessorLectures; _i < _potentialPocketProfe.length; _i++) {
          var potentialLecture = _potentialPocketProfe[_i];
          var _property = potentialLecture.property, macro = potentialLecture.macro, goalMaximize = potentialLecture.goalMaximize;
          var fightSource = getNextEmbezzlerFight();
          if (!fightSource)
            return;
          if (get(_property, false))
            continue;
          if (fightSource.gregariousReplace) {
            var crateIsSabered = get("_saberForceMonster") === $monster(_templateObject6216 || (_templateObject6216 = _taggedTemplateLiteral77(["crate"])));
            var notEnoughCratesSabered = get("_saberForceMonsterCount") < 2;
            var weWantToSaberCrates = !crateIsSabered || notEnoughCratesSabered;
            if (weWantToSaberCrates)
              saberCrateIfSafe();
          }
          var chip = $item(_templateObject6315 || (_templateObject6315 = _taggedTemplateLiteral77(["Pocket Professor memory chip"])));
          var jacks = $item(_templateObject6413 || (_templateObject6413 = _taggedTemplateLiteral77(["box of Familiar Jacks"])));
          (0, import_kolmafia85.useFamiliar)($familiar(_templateObject6512 || (_templateObject6512 = _taggedTemplateLiteral77(["Pocket Professor"]))));
          if (!have(chip)) {
            if ((0, import_kolmafia85.mallPrice)(jacks) < (0, import_kolmafia85.mallPrice)(chip)) {
              (0, import_kolmafia85.retrieveItem)(jacks);
              (0, import_kolmafia85.use)(jacks);
            } else {
              (0, import_kolmafia85.retrieveItem)(chip);
            }
          }
          var profSpec = {
            familiar: $familiar(_templateObject6612 || (_templateObject6612 = _taggedTemplateLiteral77(["Pocket Professor"])))
          };
          if (have(chip)) {
            profSpec.famequip = chip;
          }
          goalMaximize(_objectSpread14(_objectSpread14({}, profSpec), fightSource.spec));
          if (get("_pocketProfessorLectures") < pocketProfessorLectures()) {
            var _eventLog$embezzlerSo;
            var startLectures = get("_pocketProfessorLectures");
            fightSource.run({
              macro: macro(),
              useAuto: false
            });
            eventLog.initialEmbezzlersFought += 1 + get("_pocketProfessorLectures") - startLectures;
            eventLog.embezzlerSources.push(fightSource.name);
            (_eventLog$embezzlerSo = eventLog.embezzlerSources).push.apply(_eventLog$embezzlerSo, _toConsumableArray44(new Array(get("_pocketProfessorLectures") - startLectures).fill("Pocket Professor")));
          }
          _set(_property, true);
          postCombatActions();
          var predictedNextFight = getNextEmbezzlerFight();
          if (!(predictedNextFight !== null && predictedNextFight !== void 0 && predictedNextFight.draggable))
            doSausage();
          doGhost();
          startWandererCounter();
        }
      }
      (0, import_kolmafia85.useFamiliar)(meatFamiliar());
      var nextFight = getNextEmbezzlerFight();
      while (nextFight !== null && (0, import_kolmafia85.myAdventures)()) {
        var _find;
        (0, import_kolmafia85.print)("Running fight ".concat(nextFight.name));
        var startTurns = (0, import_kolmafia85.totalTurnsPlayed)();
        if (nextFight.draggable === "backup" && have($skill(_templateObject6712 || (_templateObject6712 = _taggedTemplateLiteral77(["Musk of the Moose"])))) && !have($effect(_templateObject6811 || (_templateObject6811 = _taggedTemplateLiteral77(["Musk of the Moose"]))))) {
          (0, import_kolmafia85.useSkill)($skill(_templateObject6911 || (_templateObject6911 = _taggedTemplateLiteral77(["Musk of the Moose"]))));
        }
        if (nextFight.gregariousReplace) {
          var _crateIsSabered = get("_saberForceMonster") === $monster(_templateObject7010 || (_templateObject7010 = _taggedTemplateLiteral77(["crate"])));
          var _notEnoughCratesSabered = get("_saberForceMonsterCount") < 2;
          var _weWantToSaberCrates = !_crateIsSabered || _notEnoughCratesSabered;
          if (_weWantToSaberCrates)
            saberCrateIfSafe();
        }
        var location = nextFight.location();
        var underwater2 = location.environment === "underwater";
        var familiar4 = get("_badlyRomanticArrows") === 0 && !underwater2 ? (_find = $familiars(_templateObject7113 || (_templateObject7113 = _taggedTemplateLiteral77(["Obtuse Angel, Reanimated Reanimator"]))).find(have)) !== null && _find !== void 0 ? _find : meatFamiliar() : meatFamiliar();
        (0, import_kolmafia85.setLocation)(location);
        embezzlerOutfit(_objectSpread14(_objectSpread14({}, nextFight.spec), {}, {
          familiar: familiar4
        }), location).dress();
        nextFight.run();
        postCombatActions();
        (0, import_kolmafia85.print)("Finished ".concat(nextFight.name));
        if ((0, import_kolmafia85.totalTurnsPlayed)() - startTurns === 1 && get("lastCopyableMonster") === $monster(_templateObject7213 || (_templateObject7213 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"]))) && (nextFight.wrongEncounterName || get("lastEncounter") === "Knob Goblin Embezzler")) {
          eventLog.initialEmbezzlersFought++;
          eventLog.embezzlerSources.push(nextFight.name);
        }
        nextFight = getNextEmbezzlerFight();
        if (romanticMonsterImpossible() && (!nextFight || !nextFight.draggable)) {
          doSausage();
          yachtzee();
        }
        doGhost();
        startWandererCounter();
      }
    });
  }
}
var consecutiveNonFreeFights = 0;
var FreeFight = /* @__PURE__ */ function() {
  function FreeFight2(available3, run, tentacle) {
    var options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    _classCallCheck28(this, FreeFight2);
    _defineProperty31(this, "available", void 0);
    _defineProperty31(this, "run", void 0);
    _defineProperty31(this, "tentacle", void 0);
    _defineProperty31(this, "options", void 0);
    this.available = available3;
    this.run = run;
    this.tentacle = tentacle;
    this.options = options;
  }
  _createClass28(FreeFight2, [{
    key: "isAvailable",
    value: function isAvailable() {
      var avail = this.available();
      return typeof avail === "number" ? avail > 0 : avail;
    }
  }, {
    key: "getSpec",
    value: function getSpec() {
      var _this$options$spec;
      var noncombat = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
      var spec = undelay((_this$options$spec = this.options.spec) !== null && _this$options$spec !== void 0 ? _this$options$spec : {});
      if (noncombat)
        delete spec.familiar;
      return spec;
    }
  }, {
    key: "runAll",
    value: function runAll() {
      var _this$options$cost, _this$options$cost2, _this$options;
      if (!this.isAvailable())
        return;
      if (((_this$options$cost = (_this$options$cost2 = (_this$options = this.options).cost) === null || _this$options$cost2 === void 0 ? void 0 : _this$options$cost2.call(_this$options)) !== null && _this$options$cost !== void 0 ? _this$options$cost : 0) > globalOptions.prefs.valueOfFreeFight) {
        return;
      }
      while (this.isAvailable()) {
        var _this$options2, _this$options2$noncom, _this$options3, _this$options$effects, _this$options$effects2, _this$options4;
        voidMonster();
        var noncombat = !!((_this$options2 = this.options) !== null && _this$options2 !== void 0 && (_this$options2$noncom = (_this$options3 = _this$options2).noncombat) !== null && _this$options2$noncom !== void 0 && _this$options2$noncom.call(_this$options3));
        var effects = (_this$options$effects = (_this$options$effects2 = (_this$options4 = this.options).effects) === null || _this$options$effects2 === void 0 ? void 0 : _this$options$effects2.call(_this$options4)) !== null && _this$options$effects !== void 0 ? _this$options$effects : [];
        freeFightMood.apply(void 0, _toConsumableArray44(effects)).execute();
        freeFightOutfit(this.getSpec(noncombat)).dress();
        safeRestore();
        var curTurncount = (0, import_kolmafia85.myTurncount)();
        withMacro(Macro2.basicCombat(), this.run);
        if ((0, import_kolmafia85.myTurncount)() > curTurncount)
          consecutiveNonFreeFights++;
        else
          consecutiveNonFreeFights = 0;
        if (consecutiveNonFreeFights >= 5)
          throw new Error("The last 5 FreeRunFights were not free!");
        postCombatActions();
        if (!have($effect(_templateObject7313 || (_templateObject7313 = _taggedTemplateLiteral77(["Feeling Lost"])))))
          deliverThesisIfAble();
      }
    }
  }]);
  return FreeFight2;
}();
var FreeRunFight = /* @__PURE__ */ function(_FreeFight) {
  _inherits9(FreeRunFight2, _FreeFight);
  var _super = _createSuper8(FreeRunFight2);
  function FreeRunFight2(available3, run) {
    var _this;
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var freeRunPicker = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    _classCallCheck28(this, FreeRunFight2);
    _this = _super.call(this, available3, function() {
      return null;
    }, false, _objectSpread14(_objectSpread14({}, options), {}, {
      macroAllowsFamiliarActions: false
    }));
    _defineProperty31(_assertThisInitialized8(_this), "freeRun", void 0);
    _defineProperty31(_assertThisInitialized8(_this), "constraints", void 0);
    _this.freeRun = run;
    _this.constraints = freeRunPicker;
    return _this;
  }
  _createClass28(FreeRunFight2, [{
    key: "runAll",
    value: function runAll() {
      var _this2 = this;
      if (!this.isAvailable())
        return;
      if ((this.options.cost ? this.options.cost() : 0) > globalOptions.prefs.valueOfFreeFight) {
        return;
      }
      var _loop = function _loop2() {
        var _this2$options$spec, _runSource$constraint, _runSource$constraint2, _this2$options$effect, _this2$options$effect2, _this2$options;
        var initialSpec = undelay((_this2$options$spec = _this2.options.spec) !== null && _this2$options$spec !== void 0 ? _this2$options$spec : {});
        var constraints = _objectSpread14({
          noFamiliar: function() {
            return "familiar" in initialSpec;
          }
        }, _this2.constraints);
        var runSource = tryFindFreeRun(constraints);
        if (!runSource)
          return "break";
        (_runSource$constraint = (_runSource$constraint2 = runSource.constraints).preparation) === null || _runSource$constraint === void 0 ? void 0 : _runSource$constraint.call(_runSource$constraint2);
        var mergingOutfit = Outfit.from(initialSpec, new Error("Failed to build outfit from ".concat((0, import_kolmafia85.toJson)(initialSpec))));
        mergingOutfit.equip(toSpec(runSource));
        freeFightOutfit(mergingOutfit.spec()).dress();
        freeFightMood.apply(void 0, _toConsumableArray44((_this2$options$effect = (_this2$options$effect2 = (_this2$options = _this2.options).effects) === null || _this2$options$effect2 === void 0 ? void 0 : _this2$options$effect2.call(_this2$options)) !== null && _this2$options$effect !== void 0 ? _this2$options$effect : []));
        safeRestore();
        var curTurncount = (0, import_kolmafia85.myTurncount)();
        withMacro(Macro2.step(runSource.macro), function() {
          return _this2.freeRun(runSource);
        });
        if ((0, import_kolmafia85.myTurncount)() > curTurncount)
          consecutiveNonFreeFights++;
        else
          consecutiveNonFreeFights = 0;
        if (consecutiveNonFreeFights >= 5)
          throw new Error("The last 5 FreeRunFights were not free!");
        postCombatActions();
      };
      while (this.isAvailable()) {
        var _ret = _loop();
        if (_ret === "break")
          break;
      }
    }
  }]);
  return FreeRunFight2;
}(FreeFight);
var pygmyBanishHandlers = [{
  pygmy: $monster(_templateObject7412 || (_templateObject7412 = _taggedTemplateLiteral77(["pygmy bowler"]))),
  skill: $skill(_templateObject7512 || (_templateObject7512 = _taggedTemplateLiteral77(["Snokebomb"]))),
  check: "_snokebombUsed",
  limit: 3,
  item: $item(_templateObject7610 || (_templateObject7610 = _taggedTemplateLiteral77(["Louder Than Bomb"])))
}, {
  pygmy: $monster(_templateObject778 || (_templateObject778 = _taggedTemplateLiteral77(["pygmy orderlies"]))),
  skill: $skill(_templateObject786 || (_templateObject786 = _taggedTemplateLiteral77(["Feel Hatred"]))),
  check: "_feelHatredUsed",
  limit: 3,
  item: $item(_templateObject796 || (_templateObject796 = _taggedTemplateLiteral77(["divine champagne popper"])))
}, {
  pygmy: $monster(_templateObject806 || (_templateObject806 = _taggedTemplateLiteral77(["pygmy janitor"]))),
  skill: void 0,
  check: void 0,
  limit: 0,
  item: $item(_templateObject8113 || (_templateObject8113 = _taggedTemplateLiteral77(["tennis ball"])))
}];
var sniffSources = ["_gallapagosMonster", "olfactedMonster", "_latteMonster", "motifMonster", "longConMonster"];
var pygmySniffed = function() {
  return sniffSources.some(function(source) {
    return pygmyBanishHandlers.some(function(_ref2) {
      var pygmy = _ref2.pygmy;
      return pygmy === get(source);
    });
  });
};
var pygmyMacro = Macro2.step.apply(Macro2, _toConsumableArray44(pygmyBanishHandlers.map(function(_ref3) {
  var pygmy = _ref3.pygmy, skill = _ref3.skill, item9 = _ref3.item;
  return Macro2.if_(pygmy, skill ? Macro2.trySkill(skill).item(item9) : Macro2.item(item9));
}))).if_($monster(_templateObject8213 || (_templateObject8213 = _taggedTemplateLiteral77(["drunk pygmy"]))), Macro2.trySkill($skill(_templateObject8312 || (_templateObject8312 = _taggedTemplateLiteral77(["Extract"])))).trySingAlong()).ifHolidayWanderer(Macro2.basicCombat()).abort();
function getStenchLocation() {
  var _find2;
  return (_find2 = $locations(_templateObject8412 || (_templateObject8412 = _taggedTemplateLiteral77(["Uncle Gator's Country Fun-Time Liquid Waste Sluice, The Hippy Camp (Bombed Back to the Stone Age), The Dark and Spooky Swamp"]))).find(function(l) {
    return (0, import_kolmafia85.canAdventure)(l);
  })) !== null && _find2 !== void 0 ? _find2 : $location.none;
}
function bowlOfScorpionsAvailable() {
  if (get("hiddenTavernUnlock") === (0, import_kolmafia85.myAscensions)()) {
    return true;
  } else if (globalOptions.triedToUnlockHiddenTavern) {
    return false;
  } else {
    globalOptions.triedToUnlockHiddenTavern = true;
    (0, import_kolmafia85.retrieveItem)($item(_templateObject8511 || (_templateObject8511 = _taggedTemplateLiteral77(["book of matches"]))));
    if (have($item(_templateObject869 || (_templateObject869 = _taggedTemplateLiteral77(["book of matches"]))))) {
      (0, import_kolmafia85.use)($item(_templateObject875 || (_templateObject875 = _taggedTemplateLiteral77(["book of matches"]))));
    }
    return get("hiddenTavernUnlock") === (0, import_kolmafia85.myAscensions)() || (0, import_kolmafia85.mallPrice)($item(_templateObject885 || (_templateObject885 = _taggedTemplateLiteral77(["Bowl of Scorpions"])))) < 1e3;
  }
}
function molemanReady() {
  return have($item(_templateObject895 || (_templateObject895 = _taggedTemplateLiteral77(["molehill mountain"])))) && !get("_molehillMountainUsed");
}
var stunDurations = /* @__PURE__ */ new Map([[$skill(_templateObject905 || (_templateObject905 = _taggedTemplateLiteral77(["Blood Bubble"]))), 1], [$skill(_templateObject9113 || (_templateObject9113 = _taggedTemplateLiteral77(["Entangling Noodles"]))), function() {
  return (0, import_kolmafia85.myClass)() === $class(_templateObject9213 || (_templateObject9213 = _taggedTemplateLiteral77(["Pastamancer"]))) && !have($skill(_templateObject9312 || (_templateObject9312 = _taggedTemplateLiteral77(["Shadow Noodles"])))) ? 1 : 0;
}], [$skill(_templateObject9411 || (_templateObject9411 = _taggedTemplateLiteral77(["Frost Bite"]))), 1], [$skill(_templateObject9510 || (_templateObject9510 = _taggedTemplateLiteral77(["Shadow Noodles"]))), 2], [$skill(_templateObject965 || (_templateObject965 = _taggedTemplateLiteral77(["Shell Up"]))), function() {
  if ((0, import_kolmafia85.myClass)() !== $class(_templateObject975 || (_templateObject975 = _taggedTemplateLiteral77(["Turtle Tamer"]))))
    return 0;
  var _iterator = _createForOfIteratorHelper31(/* @__PURE__ */ new Map([[$effect(_templateObject985 || (_templateObject985 = _taggedTemplateLiteral77(["Glorious Blessing of the Storm Tortoise"]))), 4], [$effect(_templateObject995 || (_templateObject995 = _taggedTemplateLiteral77(["Grand Blessing of the Storm Tortoise"]))), 3], [$effect(_templateObject1005 || (_templateObject1005 = _taggedTemplateLiteral77(["Blessing of the Storm Tortoise"]))), 2]])), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _step$value = _slicedToArray25(_step.value, 2), effect2 = _step$value[0], duration = _step$value[1];
      if (have(effect2))
        return duration;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return 0;
}], [$skill(_templateObject10113 || (_templateObject10113 = _taggedTemplateLiteral77(["Soul Bubble"]))), function() {
  return (0, import_kolmafia85.mySoulsauce)() >= 5 ? 2 : 0;
}], [$skill(_templateObject10213 || (_templateObject10213 = _taggedTemplateLiteral77(["Summon Love Gnats"]))), 1], [$item(_templateObject10312 || (_templateObject10312 = _taggedTemplateLiteral77(["Rain-Doh blue balls"]))), 1]]);
var freeFightSources = [
  new FreeFight(function() {
    return have($item(_templateObject10410 || (_templateObject10410 = _taggedTemplateLiteral77(["protonic accelerator pack"])))) && get("questPAGhost") !== "unstarted" && get("ghostLocation") !== null;
  }, function() {
    var ghostLocation = get("ghostLocation");
    if (!ghostLocation)
      return;
    garboAdventure(ghostLocation, Macro2.ghostBustin());
  }, true, {
    spec: {
      back: $item(_templateObject1055 || (_templateObject1055 = _taggedTemplateLiteral77(["protonic accelerator pack"])))
    }
  }),
  new FreeFight(function() {
    return molemanReady() && (get("_thesisDelivered") || !have($familiar(_templateObject1065 || (_templateObject1065 = _taggedTemplateLiteral77(["Pocket Professor"]))))) ? 1 : 0;
  }, function() {
    return withMacro(Macro2.basicCombat(), function() {
      return (0, import_kolmafia85.use)($item(_templateObject1075 || (_templateObject1075 = _taggedTemplateLiteral77(["molehill mountain"]))));
    });
  }, true),
  new FreeFight(function() {
    return TunnelOfLove_exports.have() && !TunnelOfLove_exports.isUsed();
  }, function() {
    TunnelOfLove_exports.fightAll("LOV Epaulettes", "Open Heart Surgery", "LOV Extraterrestrial Chocolate");
  }, false, {
    macroAllowsFamiliarActions: true
  }),
  new FreeFight(function() {
    var _ChateauMantegna$pain, _ChateauMantegna$pain2;
    return ChateauMantegna_exports.have() && !ChateauMantegna_exports.paintingFought() && ((_ChateauMantegna$pain = (_ChateauMantegna$pain2 = ChateauMantegna_exports.paintingMonster()) === null || _ChateauMantegna$pain2 === void 0 || (_ChateauMantegna$pain2 = _ChateauMantegna$pain2.attributes) === null || _ChateauMantegna$pain2 === void 0 ? void 0 : _ChateauMantegna$pain2.includes("FREE")) !== null && _ChateauMantegna$pain !== void 0 ? _ChateauMantegna$pain : false);
  }, function() {
    return ChateauMantegna_exports.fightPainting();
  }, true, {
    spec: function() {
      return have($familiar(_templateObject1085 || (_templateObject1085 = _taggedTemplateLiteral77(["Robortender"])))) && $phyla(_templateObject1095 || (_templateObject1095 = _taggedTemplateLiteral77(["elf, fish, hobo, penguin, constellation"]))).some(function(phylum) {
        var _ChateauMantegna$pain3;
        return phylum === ((_ChateauMantegna$pain3 = ChateauMantegna_exports.paintingMonster()) === null || _ChateauMantegna$pain3 === void 0 ? void 0 : _ChateauMantegna$pain3.phylum);
      }) ? {
        familiar: $familiar(_templateObject1105 || (_templateObject1105 = _taggedTemplateLiteral77(["Robortender"])))
      } : {};
    }
  }),
  new FreeFight(function() {
    return get("questL02Larva") !== "unstarted" && !get("_eldritchTentacleFought");
  }, function() {
    var haveEldritchEssence = (0, import_kolmafia85.itemAmount)($item(_templateObject11113 || (_templateObject11113 = _taggedTemplateLiteral77(["eldritch essence"])))) !== 0;
    (0, import_kolmafia85.visitUrl)("place.php?whichplace=forestvillage&action=fv_scientist", false);
    if (!(0, import_kolmafia85.handlingChoice)())
      throw "No choice?";
    (0, import_kolmafia85.runChoice)(haveEldritchEssence ? 2 : 1);
  }, false),
  new FreeFight(function() {
    return have($skill(_templateObject11212 || (_templateObject11212 = _taggedTemplateLiteral77(["Evoke Eldritch Horror"])))) && !get("_eldritchHorrorEvoked");
  }, function() {
    if (!have($effect(_templateObject11311 || (_templateObject11311 = _taggedTemplateLiteral77(["Crappily Disguised as a Waiter"]))))) {
      var expectedIchors = 1;
      var rate = 11 / 200;
      var value = expectedIchors * garboValue($item(_templateObject1147 || (_templateObject1147 = _taggedTemplateLiteral77(["eldritch ichor"])))) * rate - (0, import_kolmafia85.mallPrice)($item(_templateObject1155 || (_templateObject1155 = _taggedTemplateLiteral77(["crappy waiter disguise"]))));
      if (value > 0) {
        (0, import_kolmafia85.retrieveItem)($item(_templateObject1165 || (_templateObject1165 = _taggedTemplateLiteral77(["crappy waiter disguise"]))));
        (0, import_kolmafia85.use)($item(_templateObject1175 || (_templateObject1175 = _taggedTemplateLiteral77(["crappy waiter disguise"]))));
      }
    }
    withMacro(Macro2.if_(
      $monster(_templateObject1185 || (_templateObject1185 = _taggedTemplateLiteral77(["Sssshhsssblllrrggghsssssggggrrgglsssshhssslblgl"]))),
      // Using while_ here in case you run out of mp
      Macro2.while_("hasskill Awesome Balls of Fire", Macro2.skill($skill(_templateObject1195 || (_templateObject1195 = _taggedTemplateLiteral77(["Awesome Balls of Fire"]))))).while_("hasskill Eggsplosion", Macro2.skill($skill(_templateObject1205 || (_templateObject1205 = _taggedTemplateLiteral77(["Eggsplosion"]))))).while_("hasskill Saucegeyser", Macro2.skill($skill(_templateObject12113 || (_templateObject12113 = _taggedTemplateLiteral77(["Saucegeyser"]))))).while_("hasskill Weapon of the Pastalord", Macro2.skill($skill(_templateObject12212 || (_templateObject12212 = _taggedTemplateLiteral77(["Weapon of the Pastalord"]))))).while_("hasskill Lunging Thrust-Smack", Macro2.skill($skill(_templateObject12310 || (_templateObject12310 = _taggedTemplateLiteral77(["Lunging Thrust-Smack"]))))).attack().repeat()
    ).basicCombat(), function() {
      (0, import_kolmafia85.useSkill)($skill(_templateObject1246 || (_templateObject1246 = _taggedTemplateLiteral77(["Evoke Eldritch Horror"]))));
      if (have($effect(_templateObject1255 || (_templateObject1255 = _taggedTemplateLiteral77(["Beaten Up"])))))
        uneffect($effect(_templateObject1265 || (_templateObject1265 = _taggedTemplateLiteral77(["Beaten Up"]))));
    }, false);
  }, false),
  new FreeFight(function() {
    return clamp(3 - get("_lynyrdSnareUses"), 0, 3);
  }, function() {
    return (0, import_kolmafia85.use)($item(_templateObject1275 || (_templateObject1275 = _taggedTemplateLiteral77(["lynyrd snare"]))));
  }, true, {
    cost: function() {
      return (0, import_kolmafia85.mallPrice)($item(_templateObject1285 || (_templateObject1285 = _taggedTemplateLiteral77(["lynyrd snare"]))));
    }
  }),
  new FreeFight(function() {
    return have($item(_templateObject1295 || (_templateObject1295 = _taggedTemplateLiteral77(["[glitch season reward name]"])))) && have($item(_templateObject1305 || (_templateObject1305 = _taggedTemplateLiteral77(["unwrapped knock-off retro superhero cape"])))) && !get("_glitchMonsterFights") && get("garbo_fightGlitch", false) && sum(_toConsumableArray44(stunDurations), function(_ref4) {
      var _ref5 = _slicedToArray25(_ref4, 2), thing = _ref5[0], duration = _ref5[1];
      return have(thing) ? undelay(duration) : 0;
    }) >= 5;
  }, function() {
    return withMacro(Macro2.trySkill($skill(_templateObject13113 || (_templateObject13113 = _taggedTemplateLiteral77(["Curse of Marinara"])))).trySkill($skill(_templateObject13212 || (_templateObject13212 = _taggedTemplateLiteral77(["Shell Up"])))).trySkill($skill(_templateObject13310 || (_templateObject13310 = _taggedTemplateLiteral77(["Shadow Noodles"])))).trySkill($skill(_templateObject1345 || (_templateObject1345 = _taggedTemplateLiteral77(["Entangling Noodles"])))).trySkill($skill(_templateObject1355 || (_templateObject1355 = _taggedTemplateLiteral77(["Summon Love Gnats"])))).trySkill($skill(_templateObject1365 || (_templateObject1365 = _taggedTemplateLiteral77(["Frost Bite"])))).trySkill($skill(_templateObject1375 || (_templateObject1375 = _taggedTemplateLiteral77(["Soul Bubble"])))).tryItem($item(_templateObject1385 || (_templateObject1385 = _taggedTemplateLiteral77(["Rain-Doh blue balls"])))).skill($skill(_templateObject1395 || (_templateObject1395 = _taggedTemplateLiteral77(["Blow a Robo-Kiss"])))).repeat(), function() {
      (0, import_kolmafia85.restoreHp)((0, import_kolmafia85.myMaxhp)());
      if (have($skill(_templateObject1404 || (_templateObject1404 = _taggedTemplateLiteral77(["Blood Bubble"])))))
        ensureEffect($effect(_templateObject14112 || (_templateObject14112 = _taggedTemplateLiteral77(["Blood Bubble"]))));
      (0, import_kolmafia85.retrieveItem)($item(_templateObject14211 || (_templateObject14211 = _taggedTemplateLiteral77(["[glitch season reward name]"]))));
      (0, import_kolmafia85.visitUrl)("inv_eat.php?pwd&whichitem=10207");
      (0, import_kolmafia85.runCombat)();
    });
  }, true, {
    spec: {
      back: $items(_templateObject1437 || (_templateObject1437 = _taggedTemplateLiteral77(["unwrapped knock-off retro superhero cape"]))),
      modes: {
        retrocape: ["robot", "kiss"]
      }
    },
    macroAllowsFamiliarActions: false
  }),
  new FreeFight(function() {
    return have($item(_templateObject1444 || (_templateObject1444 = _taggedTemplateLiteral77(["[glitch season reward name]"])))) && !get("_glitchMonsterFights") && get("garbo_fightGlitch", false);
  }, function() {
    return withMacro(Macro2.trySkill($skill(_templateObject1454 || (_templateObject1454 = _taggedTemplateLiteral77(["Curse of Marinara"])))).trySkill($skill(_templateObject1464 || (_templateObject1464 = _taggedTemplateLiteral77(["Conspiratorial Whispers"])))).trySkill($skill(_templateObject1474 || (_templateObject1474 = _taggedTemplateLiteral77(["Shadow Noodles"])))).externalIf(get("glitchItemImplementationCount") * (0, import_kolmafia85.itemAmount)($item(_templateObject1484 || (_templateObject1484 = _taggedTemplateLiteral77(["[glitch season reward name]"])))) >= 400, Macro2.item([$item(_templateObject1494 || (_templateObject1494 = _taggedTemplateLiteral77(["gas can"]))), $item(_templateObject1504 || (_templateObject1504 = _taggedTemplateLiteral77(["gas can"])))])).externalIf(get("lovebugsUnlocked"), Macro2.trySkill($skill(_templateObject15112 || (_templateObject15112 = _taggedTemplateLiteral77(["Summon Love Gnats"])))).trySkill($skill(_templateObject15211 || (_templateObject15211 = _taggedTemplateLiteral77(["Summon Love Mosquito"]))))).tryItem($item(_templateObject1535 || (_templateObject1535 = _taggedTemplateLiteral77(["train whistle"])))).trySkill($skill(_templateObject1544 || (_templateObject1544 = _taggedTemplateLiteral77(["Micrometeorite"])))).tryItem($item(_templateObject1554 || (_templateObject1554 = _taggedTemplateLiteral77(["Time-Spinner"])))).tryItem($item(_templateObject1564 || (_templateObject1564 = _taggedTemplateLiteral77(["little red book"])))).tryItem($item(_templateObject1574 || (_templateObject1574 = _taggedTemplateLiteral77(["Rain-Doh blue balls"])))).tryItem($item(_templateObject1584 || (_templateObject1584 = _taggedTemplateLiteral77(["Rain-Doh indigo cup"])))).trySkill($skill(_templateObject1594 || (_templateObject1594 = _taggedTemplateLiteral77(["Entangling Noodles"])))).trySkill($skill(_templateObject1604 || (_templateObject1604 = _taggedTemplateLiteral77(["Frost Bite"])))).kill(), function() {
      (0, import_kolmafia85.restoreHp)((0, import_kolmafia85.myMaxhp)());
      if (have($skill(_templateObject16112 || (_templateObject16112 = _taggedTemplateLiteral77(["Ruthless Efficiency"])))))
        ensureEffect($effect(_templateObject16211 || (_templateObject16211 = _taggedTemplateLiteral77(["Ruthlessly Efficient"]))));
      if (have($skill(_templateObject1635 || (_templateObject1635 = _taggedTemplateLiteral77(["Mathematical Precision"])))))
        ensureEffect($effect(_templateObject1644 || (_templateObject1644 = _taggedTemplateLiteral77(["Mathematically Precise"]))));
      if (have($skill(_templateObject1654 || (_templateObject1654 = _taggedTemplateLiteral77(["Blood Bubble"])))))
        ensureEffect($effect(_templateObject1664 || (_templateObject1664 = _taggedTemplateLiteral77(["Blood Bubble"]))));
      (0, import_kolmafia85.retrieveItem)($item(_templateObject1674 || (_templateObject1674 = _taggedTemplateLiteral77(["[glitch season reward name]"]))));
      if (get("glitchItemImplementationCount") * (0, import_kolmafia85.itemAmount)($item(_templateObject1684 || (_templateObject1684 = _taggedTemplateLiteral77(["[glitch season reward name]"])))) >= 400) {
        (0, import_kolmafia85.retrieveItem)($item(_templateObject1694 || (_templateObject1694 = _taggedTemplateLiteral77(["gas can"]))), 2);
      }
      (0, import_kolmafia85.visitUrl)("inv_eat.php?pwd&whichitem=10207");
      (0, import_kolmafia85.runCombat)();
    });
  }, true, {
    spec: function() {
      return {
        modifiers: ["1000 mainstat"],
        avoid: $items(_templateObject1704 || (_templateObject1704 = _taggedTemplateLiteral77(["mutant crown, mutant arm, mutant legs, shield of the Skeleton Lord"])))
      };
    },
    macroAllowsFamiliarActions: false
  }),
  // 6	10	0	0	Infernal Seals	variety of items; must be Seal Clubber for 5, must also have Claw of the Infernal Seal in inventory for 10.
  new FreeFight(function() {
    var maxSeals = (0, import_kolmafia85.retrieveItem)(1, $item(_templateObject17112 || (_templateObject17112 = _taggedTemplateLiteral77(["Claw of the Infernal Seal"])))) ? 10 : 5;
    var maxSealsAvailable = get("lastGuildStoreOpen") === (0, import_kolmafia85.myAscensions)() ? maxSeals : Math.min(maxSeals, Math.floor((0, import_kolmafia85.availableAmount)($item(_templateObject17211 || (_templateObject17211 = _taggedTemplateLiteral77(["seal-blubber candle"])))) / 3));
    return (0, import_kolmafia85.myClass)() === $class(_templateObject1735 || (_templateObject1735 = _taggedTemplateLiteral77(["Seal Clubber"]))) ? Math.max(maxSealsAvailable - get("_sealsSummoned"), 0) : 0;
  }, function() {
    var figurine = get("lastGuildStoreOpen") === (0, import_kolmafia85.myAscensions)() ? $item(_templateObject1744 || (_templateObject1744 = _taggedTemplateLiteral77(["figurine of a wretched-looking seal"]))) : $item(_templateObject1754 || (_templateObject1754 = _taggedTemplateLiteral77(["figurine of an ancient seal"])));
    (0, import_kolmafia85.retrieveItem)(1, figurine);
    (0, import_kolmafia85.retrieveItem)(get("lastGuildStoreOpen") === (0, import_kolmafia85.myAscensions)() ? 1 : 3, $item(_templateObject1764 || (_templateObject1764 = _taggedTemplateLiteral77(["seal-blubber candle"]))));
    withMacro(Macro2.startCombat().trySkill($skill(_templateObject1774 || (_templateObject1774 = _taggedTemplateLiteral77(["Furious Wallop"])))).while_("hasskill Lunging Thrust-Smack", Macro2.skill($skill(_templateObject1784 || (_templateObject1784 = _taggedTemplateLiteral77(["Lunging Thrust-Smack"]))))).while_("hasskill Thrust-Smack", Macro2.skill($skill(_templateObject1794 || (_templateObject1794 = _taggedTemplateLiteral77(["Thrust-Smack"]))))).while_("hasskill Lunge Smack", Macro2.skill($skill(_templateObject1804 || (_templateObject1804 = _taggedTemplateLiteral77(["Lunge Smack"]))))).attack().repeat(), function() {
      return (0, import_kolmafia85.use)(figurine);
    });
  }, true, {
    spec: function() {
      var _ref6, _clubs$find;
      var clubs = import_kolmafia85.Item.all().filter(function(i) {
        return have(i) && (0, import_kolmafia85.canEquip)(i) && (0, import_kolmafia85.itemType)(i) === "club";
      });
      var club = (_ref6 = (_clubs$find = clubs.find(function(i) {
        return (0, import_kolmafia85.weaponHands)(i) === 1;
      })) !== null && _clubs$find !== void 0 ? _clubs$find : clubs.find(function(i) {
        return (0, import_kolmafia85.weaponHands)(i) === 2;
      })) !== null && _ref6 !== void 0 ? _ref6 : $item(_templateObject18112 || (_templateObject18112 = _taggedTemplateLiteral77(["seal-clubbing club"])));
      (0, import_kolmafia85.retrieveItem)(club);
      return {
        weapon: club
      };
    }
  }),
  new FreeFight(function() {
    return clamp(10 - get("_brickoFights"), 0, 10);
  }, function() {
    return (0, import_kolmafia85.use)($item(_templateObject18211 || (_templateObject18211 = _taggedTemplateLiteral77(["BRICKO ooze"]))));
  }, true, {
    cost: function() {
      return (0, import_kolmafia85.mallPrice)($item(_templateObject1834 || (_templateObject1834 = _taggedTemplateLiteral77(["BRICKO eye brick"])))) + 2 * (0, import_kolmafia85.mallPrice)($item(_templateObject1844 || (_templateObject1844 = _taggedTemplateLiteral77(["BRICKO brick"]))));
    },
    // They just die too dang quickly
    macroAllowsFamiliarActions: false
  }),
  new FreeFight(function() {
    return wantPills() ? 5 - get("_saberForceUses") : 0;
  }, function() {
    if (have($familiar(_templateObject1854 || (_templateObject1854 = _taggedTemplateLiteral77(["Red-Nosed Snapper"])))))
      (0, import_kolmafia85.cliExecute)("snapper ".concat($phylum(_templateObject1864 || (_templateObject1864 = _taggedTemplateLiteral77(["dude"])))));
    setChoice(1387, 3);
    if (have($skill(_templateObject1874 || (_templateObject1874 = _taggedTemplateLiteral77(["Comprehensive Cartography"])))) && get("_monstersMapped") < (getBestItemStealZone(true) && get("_fireExtinguisherCharge") >= 10 ? 2 : 3)) {
      withMacro(Macro2.skill($skill(_templateObject1884 || (_templateObject1884 = _taggedTemplateLiteral77(["Use the Force"])))), function() {
        mapMonster($location(_templateObject1894 || (_templateObject1894 = _taggedTemplateLiteral77(["Domed City of Grimacia"]))), $monster(_templateObject1904 || (_templateObject1904 = _taggedTemplateLiteral77(["grizzled survivor"]))));
        (0, import_kolmafia85.runCombat)();
        (0, import_kolmafia85.runChoice)(-1);
      });
    } else {
      if ((0, import_kolmafia85.numericModifier)($item(_templateObject19112 || (_templateObject19112 = _taggedTemplateLiteral77(["Grimacite guayabera"]))), "Monster Level") < 40) {
        (0, import_kolmafia85.retrieveItem)(1, $item(_templateObject19211 || (_templateObject19211 = _taggedTemplateLiteral77(["tennis ball"]))));
        (0, import_kolmafia85.retrieveItem)(1, $item(_templateObject1934 || (_templateObject1934 = _taggedTemplateLiteral77(["Louder Than Bomb"]))));
        (0, import_kolmafia85.retrieveItem)(1, $item(_templateObject1944 || (_templateObject1944 = _taggedTemplateLiteral77(["divine champagne popper"]))));
      }
      garboAdventure($location(_templateObject1954 || (_templateObject1954 = _taggedTemplateLiteral77(["Domed City of Grimacia"]))), Macro2.if_($monster(_templateObject1964 || (_templateObject1964 = _taggedTemplateLiteral77(["alielf"]))), Macro2.trySkill($skill(_templateObject1974 || (_templateObject1974 = _taggedTemplateLiteral77(["Asdon Martin: Spring-Loaded Front Bumper"])))).tryItem($item(_templateObject1984 || (_templateObject1984 = _taggedTemplateLiteral77(["Louder Than Bomb"]))))).if_($monster(_templateObject1994 || (_templateObject1994 = _taggedTemplateLiteral77(["cat-alien"]))), Macro2.trySkill($skill(_templateObject2004 || (_templateObject2004 = _taggedTemplateLiteral77(["Snokebomb"])))).tryItem($item(_templateObject20112 || (_templateObject20112 = _taggedTemplateLiteral77(["tennis ball"]))))).if_($monster(_templateObject20211 || (_templateObject20211 = _taggedTemplateLiteral77(["dog-alien"]))), Macro2.trySkill($skill(_templateObject2034 || (_templateObject2034 = _taggedTemplateLiteral77(["Feel Hatred"])))).tryItem($item(_templateObject2044 || (_templateObject2044 = _taggedTemplateLiteral77(["divine champagne popper"]))))).step("pickpocket").skill($skill(_templateObject2054 || (_templateObject2054 = _taggedTemplateLiteral77(["Use the Force"])))));
    }
  }, false, {
    spec: function() {
      var _spec$equip;
      var canPickPocket = (0, import_kolmafia85.myClass)() === $class(_templateObject2064 || (_templateObject2064 = _taggedTemplateLiteral77(["Accordion Thief"]))) || (0, import_kolmafia85.myClass)() === $class(_templateObject2074 || (_templateObject2074 = _taggedTemplateLiteral77(["Disco Bandit"])));
      var bestPickpocketItem = $items(_templateObject2084 || (_templateObject2084 = _taggedTemplateLiteral77(["tiny black hole, mime army infiltration glove"]))).find(function(item9) {
        return have(item9) && (0, import_kolmafia85.canEquip)(item9);
      });
      var spec = {
        modifier: ["1000 Pickpocket Chance"],
        equip: $items(_templateObject2094 || (_templateObject2094 = _taggedTemplateLiteral77(["Fourth of May Cosplay Saber"])))
      };
      if (have($familiar(_templateObject21012 || (_templateObject21012 = _taggedTemplateLiteral77(["Red-Nosed Snapper"])))))
        spec.familiar = $familiar(_templateObject21112 || (_templateObject21112 = _taggedTemplateLiteral77(["Red-Nosed Snapper"])));
      if (!canPickPocket && bestPickpocketItem)
        (_spec$equip = spec.equip) === null || _spec$equip === void 0 ? void 0 : _spec$equip.push(bestPickpocketItem);
      return spec;
    },
    effects: function() {
      return $effects(_templateObject21211 || (_templateObject21211 = _taggedTemplateLiteral77(["Transpondent"])));
    },
    macroAllowsFamiliarActions: false
  }),
  // Initial 9 Pygmy fights
  new FreeFight(function() {
    return get("questL11Worship") !== "unstarted" && bowlOfScorpionsAvailable() && !pygmySniffed() ? clamp(9 - get("_drunkPygmyBanishes"), 0, 9) : 0;
  }, function() {
    (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject21311 || (_templateObject21311 = _taggedTemplateLiteral77(["bowling ball"])))), $item(_templateObject21411 || (_templateObject21411 = _taggedTemplateLiteral77(["bowling ball"]))));
    (0, import_kolmafia85.retrieveItem)(clamp(9 - get("_drunkPygmyBanishes"), 0, 9), $item(_templateObject21510 || (_templateObject21510 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2169 || (_templateObject2169 = _taggedTemplateLiteral77(["Louder Than Bomb"]))));
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2173 || (_templateObject2173 = _taggedTemplateLiteral77(["tennis ball"]))));
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2182 || (_templateObject2182 = _taggedTemplateLiteral77(["divine champagne popper"]))));
    garboAdventure($location(_templateObject2192 || (_templateObject2192 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), pygmyMacro);
  }, true, {
    cost: function() {
      var banishers = pygmyBanishHandlers.filter(function(_ref7) {
        var skill = _ref7.skill, check = _ref7.check, limit = _ref7.limit;
        return !skill || !have(skill) || check && get(check) >= limit;
      }).map(function(_ref8) {
        var item9 = _ref8.item;
        return item9;
      });
      return (0, import_kolmafia85.retrievePrice)($item(_templateObject2202 || (_templateObject2202 = _taggedTemplateLiteral77(["Bowl of Scorpions"])))) + sum(banishers, import_kolmafia85.mallPrice) / 11;
    }
  }),
  // 10th Pygmy fight. If we have an orb, equip it for this fight, to save for later
  new FreeFight(function() {
    return get("questL11Worship") !== "unstarted" && get("_drunkPygmyBanishes") === 9 && !pygmySniffed();
  }, function() {
    (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject22110 || (_templateObject22110 = _taggedTemplateLiteral77(["bowling ball"])))), $item(_templateObject22210 || (_templateObject22210 = _taggedTemplateLiteral77(["bowling ball"]))));
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2232 || (_templateObject2232 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
    garboAdventure($location(_templateObject2242 || (_templateObject2242 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), pygmyMacro);
  }, true, pygmyOptions($items(_templateObject2252 || (_templateObject2252 = _taggedTemplateLiteral77(["miniature crystal ball"]))).filter(function(item9) {
    return have(item9);
  }))),
  // 11th pygmy fight if we lack a saber
  new FreeFight(function() {
    return get("questL11Worship") !== "unstarted" && get("_drunkPygmyBanishes") === 10 && (!have($item(_templateObject2262 || (_templateObject2262 = _taggedTemplateLiteral77(["Fourth of May Cosplay Saber"])))) || crateStrategy() === "Saber") && !pygmySniffed();
  }, function() {
    (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject2272 || (_templateObject2272 = _taggedTemplateLiteral77(["bowling ball"])))), $item(_templateObject2282 || (_templateObject2282 = _taggedTemplateLiteral77(["bowling ball"]))));
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2292 || (_templateObject2292 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
    garboAdventureAuto($location(_templateObject2302 || (_templateObject2302 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), pygmyMacro);
  }, true, pygmyOptions()),
  // 11th+ pygmy fight if we have a saber- saber friends
  new FreeFight(function() {
    var rightTime = have($item(_templateObject23110 || (_templateObject23110 = _taggedTemplateLiteral77(["Fourth of May Cosplay Saber"])))) && crateStrategy() !== "Saber" && get("_drunkPygmyBanishes") >= 10;
    var saberedMonster = get("_saberForceMonster");
    var wrongPygmySabered = saberedMonster && $monsters(_templateObject23210 || (_templateObject23210 = _taggedTemplateLiteral77(["pygmy orderlies, pygmy bowler, pygmy janitor"]))).includes(saberedMonster);
    var drunksCanAppear = get("_drunkPygmyBanishes") === 10 || saberedMonster === $monster(_templateObject2332 || (_templateObject2332 = _taggedTemplateLiteral77(["drunk pygmy"]))) && get("_saberForceMonsterCount");
    return get("questL11Worship") !== "unstarted" && rightTime && !wrongPygmySabered && drunksCanAppear && !pygmySniffed();
  }, function() {
    if ((get("_saberForceMonster") !== $monster(_templateObject2342 || (_templateObject2342 = _taggedTemplateLiteral77(["drunk pygmy"]))) || get("_saberForceMonsterCount") === 1) && get("_saberForceUses") < 5) {
      (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject2352 || (_templateObject2352 = _taggedTemplateLiteral77(["bowling ball"])))), $item(_templateObject2362 || (_templateObject2362 = _taggedTemplateLiteral77(["bowling ball"]))));
      (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject2372 || (_templateObject2372 = _taggedTemplateLiteral77(["Bowl of Scorpions"])))), $item(_templateObject2382 || (_templateObject2382 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
      garboAdventure($location(_templateObject2392 || (_templateObject2392 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), Macro2.skill($skill(_templateObject2402 || (_templateObject2402 = _taggedTemplateLiteral77(["Use the Force"])))));
    } else {
      if ((0, import_kolmafia85.closetAmount)($item(_templateObject24110 || (_templateObject24110 = _taggedTemplateLiteral77(["Bowl of Scorpions"])))) > 0) {
        (0, import_kolmafia85.takeCloset)((0, import_kolmafia85.closetAmount)($item(_templateObject24210 || (_templateObject24210 = _taggedTemplateLiteral77(["Bowl of Scorpions"])))), $item(_templateObject2432 || (_templateObject2432 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
      } else
        (0, import_kolmafia85.retrieveItem)($item(_templateObject2442 || (_templateObject2442 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
      garboAdventure($location(_templateObject2452 || (_templateObject2452 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), pygmyMacro);
    }
  }, false, pygmyOptions($items(_templateObject2462 || (_templateObject2462 = _taggedTemplateLiteral77(["Fourth of May Cosplay Saber"]))))),
  // Finally, saber or not, if we have a drunk pygmy in our crystal ball, let it out.
  new FreeFight(function() {
    return get("questL11Worship") !== "unstarted" && CrystalBall_exports.ponder().get($location(_templateObject2472 || (_templateObject2472 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"])))) === $monster(_templateObject2482 || (_templateObject2482 = _taggedTemplateLiteral77(["drunk pygmy"]))) && get("_drunkPygmyBanishes") >= 11 && !pygmySniffed();
  }, function() {
    (0, import_kolmafia85.putCloset)((0, import_kolmafia85.itemAmount)($item(_templateObject2492 || (_templateObject2492 = _taggedTemplateLiteral77(["bowling ball"])))), $item(_templateObject2502 || (_templateObject2502 = _taggedTemplateLiteral77(["bowling ball"]))));
    (0, import_kolmafia85.retrieveItem)(1, $item(_templateObject25110 || (_templateObject25110 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
    garboAdventure($location(_templateObject25210 || (_templateObject25210 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))), Macro2.if_($monster(_templateObject2532 || (_templateObject2532 = _taggedTemplateLiteral77(["drunk pygmy"]))), pygmyMacro).abort());
  }, true, pygmyOptions($items(_templateObject2542 || (_templateObject2542 = _taggedTemplateLiteral77(["miniature crystal ball"]))).filter(function(item9) {
    return have(item9);
  }))),
  new FreeFight(function() {
    return have($item(_templateObject2552 || (_templateObject2552 = _taggedTemplateLiteral77(["Time-Spinner"])))) && !doingGregFight() && $location(_templateObject2562 || (_templateObject2562 = _taggedTemplateLiteral77(["The Hidden Bowling Alley"]))).combatQueue.includes("drunk pygmy") && get("_timeSpinnerMinutesUsed") < 8;
  }, function() {
    (0, import_kolmafia85.retrieveItem)($item(_templateObject2572 || (_templateObject2572 = _taggedTemplateLiteral77(["Bowl of Scorpions"]))));
    Macro2.trySkill($skill(_templateObject2582 || (_templateObject2582 = _taggedTemplateLiteral77(["Extract"])))).trySingAlong().setAutoAttack();
    (0, import_kolmafia85.visitUrl)("inv_use.php?whichitem=".concat((0, import_kolmafia85.toInt)($item(_templateObject2592 || (_templateObject2592 = _taggedTemplateLiteral77(["Time-Spinner"]))))));
    (0, import_kolmafia85.runChoice)(1);
    (0, import_kolmafia85.visitUrl)("choice.php?whichchoice=1196&monid=".concat($monster(_templateObject2602 || (_templateObject2602 = _taggedTemplateLiteral77(["drunk pygmy"]))).id, "&option=1"));
  }, true, pygmyOptions()),
  new FreeFight(function() {
    return get("_sausageFights") === 0 && have($item(_templateObject26110 || (_templateObject26110 = _taggedTemplateLiteral77(["Kramco Sausage-o-Matic\u2122"]))));
  }, function() {
    propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
    (0, import_kolmafia85.adv1)(wanderer_default.getTarget("wanderer"), -1, "");
  }, true, {
    spec: {
      offhand: $item(_templateObject26210 || (_templateObject26210 = _taggedTemplateLiteral77(["Kramco Sausage-o-Matic\u2122"])))
    }
  }),
  new FreeFight(function() {
    return get("questL11Ron") === "finished" ? clamp(5 - get("_glarkCableUses"), 0, (0, import_kolmafia85.itemAmount)($item(_templateObject2632 || (_templateObject2632 = _taggedTemplateLiteral77(["glark cable"]))))) : 0;
  }, function() {
    garboAdventure($location(_templateObject2642 || (_templateObject2642 = _taggedTemplateLiteral77(["The Red Zeppelin"]))), Macro2.item($item(_templateObject2652 || (_templateObject2652 = _taggedTemplateLiteral77(["glark cable"])))));
  }, true, {
    macroAllowsFamiliarActions: false
  }),
  // Mushroom garden
  new FreeFight(function() {
    return (have($item(_templateObject2662 || (_templateObject2662 = _taggedTemplateLiteral77(["packet of mushroom spores"])))) || (0, import_kolmafia85.getCampground)()["packet of mushroom spores"] !== void 0) && get("_mushroomGardenFights") === 0;
  }, function() {
    if (have($item(_templateObject2672 || (_templateObject2672 = _taggedTemplateLiteral77(["packet of mushroom spores"])))))
      (0, import_kolmafia85.use)($item(_templateObject2682 || (_templateObject2682 = _taggedTemplateLiteral77(["packet of mushroom spores"]))));
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject2692 || (_templateObject2692 = _taggedTemplateLiteral77(["Extract"]))), $skill(_templateObject2702 || (_templateObject2702 = _taggedTemplateLiteral77(["Portscan"])))]);
    }
    garboAdventure($location(_templateObject27110 || (_templateObject27110 = _taggedTemplateLiteral77(["Your Mushroom Garden"]))), Macro2.externalIf(!doingGregFight(), Macro2.if_($skill(_templateObject2728 || (_templateObject2728 = _taggedTemplateLiteral77(["Macrometeorite"]))), Macro2.trySkill($skill(_templateObject2732 || (_templateObject2732 = _taggedTemplateLiteral77(["Portscan"])))))).basicCombat());
    if (have($item(_templateObject2742 || (_templateObject2742 = _taggedTemplateLiteral77(["packet of tall grass seeds"])))))
      (0, import_kolmafia85.use)($item(_templateObject2752 || (_templateObject2752 = _taggedTemplateLiteral77(["packet of tall grass seeds"]))));
  }, true, {
    spec: function() {
      return have($familiar(_templateObject2762 || (_templateObject2762 = _taggedTemplateLiteral77(["Robortender"])))) ? {
        familiar: $familiar(_templateObject2772 || (_templateObject2772 = _taggedTemplateLiteral77(["Robortender"])))
      } : {};
    }
  }),
  // Portscan and mushroom garden
  new FreeFight(function() {
    return !doingGregFight() && (have($item(_templateObject2782 || (_templateObject2782 = _taggedTemplateLiteral77(["packet of mushroom spores"])))) || (0, import_kolmafia85.getCampground)()["packet of mushroom spores"] !== void 0) && counter_exports.get("portscan.edu") === 0 && have($skill(_templateObject2792 || (_templateObject2792 = _taggedTemplateLiteral77(["Macrometeorite"])))) && get("_macrometeoriteUses") < 10;
  }, function() {
    if (have($item(_templateObject2802 || (_templateObject2802 = _taggedTemplateLiteral77(["packet of mushroom spores"])))))
      (0, import_kolmafia85.use)($item(_templateObject28110 || (_templateObject28110 = _taggedTemplateLiteral77(["packet of mushroom spores"]))));
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject2825 || (_templateObject2825 = _taggedTemplateLiteral77(["Extract"]))), $skill(_templateObject2832 || (_templateObject2832 = _taggedTemplateLiteral77(["Portscan"])))]);
    }
    garboAdventure($location(_templateObject2842 || (_templateObject2842 = _taggedTemplateLiteral77(["Your Mushroom Garden"]))), Macro2.if_($monster(_templateObject2852 || (_templateObject2852 = _taggedTemplateLiteral77(["Government agent"]))), Macro2.skill($skill(_templateObject2862 || (_templateObject2862 = _taggedTemplateLiteral77(["Macrometeorite"]))))).if_($monster(_templateObject2872 || (_templateObject2872 = _taggedTemplateLiteral77(["piranha plant"]))), Macro2.if_($skill(_templateObject2882 || (_templateObject2882 = _taggedTemplateLiteral77(["Macrometeorite"]))), Macro2.trySkill($skill(_templateObject2892 || (_templateObject2892 = _taggedTemplateLiteral77(["Portscan"]))))).basicCombat()));
    if (have($item(_templateObject2902 || (_templateObject2902 = _taggedTemplateLiteral77(["packet of tall grass seeds"])))))
      (0, import_kolmafia85.use)($item(_templateObject29110 || (_templateObject29110 = _taggedTemplateLiteral77(["packet of tall grass seeds"]))));
  }, true),
  new FreeFight(function() {
    return have($familiar(_templateObject2925 || (_templateObject2925 = _taggedTemplateLiteral77(["God Lobster"])))) ? clamp(3 - get("_godLobsterFights"), 0, 3) : 0;
  }, function() {
    propertyManager.setChoices({
      1310: !have($item(_templateObject2932 || (_templateObject2932 = _taggedTemplateLiteral77(["God Lobster's Crown"])))) ? 1 : 2
      // god lob equipment, then stats
    });
    (0, import_kolmafia85.restoreHp)((0, import_kolmafia85.myMaxhp)());
    (0, import_kolmafia85.visitUrl)("main.php?fightgodlobster=1");
    (0, import_kolmafia85.runCombat)();
    (0, import_kolmafia85.visitUrl)("choice.php");
    if ((0, import_kolmafia85.handlingChoice)())
      (0, import_kolmafia85.runChoice)(-1);
  }, false, {
    spec: function() {
      return {
        familiar: $familiar(_templateObject2942 || (_templateObject2942 = _taggedTemplateLiteral77(["God Lobster"]))),
        bonuses: /* @__PURE__ */ new Map([[$item(_templateObject2952 || (_templateObject2952 = _taggedTemplateLiteral77(["God Lobster's Scepter"]))), 1e3], [$item(_templateObject2962 || (_templateObject2962 = _taggedTemplateLiteral77(["God Lobster's Ring"]))), 2e3], [$item(_templateObject2972 || (_templateObject2972 = _taggedTemplateLiteral77(["God Lobster's Rod"]))), 3e3], [$item(_templateObject2982 || (_templateObject2982 = _taggedTemplateLiteral77(["God Lobster's Robe"]))), 4e3], [$item(_templateObject2992 || (_templateObject2992 = _taggedTemplateLiteral77(["God Lobster's Crown"]))), 5e3]])
      };
    }
  }),
  new FreeFight(
    function() {
      return have($familiar(_templateObject3002 || (_templateObject3002 = _taggedTemplateLiteral77(["Machine Elf"])))) ? clamp(5 - get("_machineTunnelsAdv"), 0, 5) : 0;
    },
    function() {
      propertyManager.setChoices({
        1119: 6
        // escape DMT
      });
      var thought = garboValue($item(_templateObject30110 || (_templateObject30110 = _taggedTemplateLiteral77(["abstraction: certainty"])))) >= garboValue($item(_templateObject3023 || (_templateObject3023 = _taggedTemplateLiteral77(["abstraction: thought"]))));
      var action = garboValue($item(_templateObject3032 || (_templateObject3032 = _taggedTemplateLiteral77(["abstraction: joy"])))) >= garboValue($item(_templateObject3042 || (_templateObject3042 = _taggedTemplateLiteral77(["abstraction: action"]))));
      var sensation = garboValue($item(_templateObject3052 || (_templateObject3052 = _taggedTemplateLiteral77(["abstraction: motion"])))) >= garboValue($item(_templateObject3062 || (_templateObject3062 = _taggedTemplateLiteral77(["abstraction: sensation"]))));
      if (thought) {
        acquire(1, $item(_templateObject3072 || (_templateObject3072 = _taggedTemplateLiteral77(["abstraction: thought"]))), garboValue($item(_templateObject3082 || (_templateObject3082 = _taggedTemplateLiteral77(["abstraction: certainty"])))), false);
      }
      if (action) {
        acquire(1, $item(_templateObject3092 || (_templateObject3092 = _taggedTemplateLiteral77(["abstraction: action"]))), garboValue($item(_templateObject31010 || (_templateObject31010 = _taggedTemplateLiteral77(["abstraction: joy"])))), false);
      }
      if (sensation) {
        acquire(1, $item(_templateObject31110 || (_templateObject31110 = _taggedTemplateLiteral77(["abstraction: sensation"]))), garboValue($item(_templateObject31210 || (_templateObject31210 = _taggedTemplateLiteral77(["abstraction: motion"])))), false);
      }
      garboAdventure($location(_templateObject31310 || (_templateObject31310 = _taggedTemplateLiteral77(["The Deep Machine Tunnels"]))), Macro2.externalIf(thought, Macro2.if_($monster(_templateObject3146 || (_templateObject3146 = _taggedTemplateLiteral77(["Perceiver of Sensations"]))), Macro2.tryItem($item(_templateObject3152 || (_templateObject3152 = _taggedTemplateLiteral77(["abstraction: thought"])))))).externalIf(action, Macro2.if_($monster(_templateObject3162 || (_templateObject3162 = _taggedTemplateLiteral77(["Thinker of Thoughts"]))), Macro2.tryItem($item(_templateObject3172 || (_templateObject3172 = _taggedTemplateLiteral77(["abstraction: action"])))))).externalIf(sensation, Macro2.if_($monster(_templateObject3182 || (_templateObject3182 = _taggedTemplateLiteral77(["Performer of Actions"]))), Macro2.tryItem($item(_templateObject3192 || (_templateObject3192 = _taggedTemplateLiteral77(["abstraction: sensation"])))))).basicCombat());
    },
    false,
    // Marked like this as 2 DMT fights get overriden by tentacles.
    {
      spec: {
        familiar: $familiar(_templateObject3202 || (_templateObject3202 = _taggedTemplateLiteral77(["Machine Elf"])))
      }
    }
  ),
  // 28	5	0	0	Witchess pieces	must have a Witchess Set; can copy for more
  new FreeFight(function() {
    return Witchess_exports.have() ? clamp(5 - Witchess_exports.fightsDone(), 0, 5) : 0;
  }, function() {
    return Witchess_exports.fightPiece(bestWitchessPiece());
  }, true),
  new FreeFight(function() {
    return get("snojoAvailable") && get("snojoSetting") !== null && clamp(10 - get("_snojoFreeFights"), 0, 10);
  }, function() {
    (0, import_kolmafia85.adv1)($location(_templateObject32110 || (_templateObject32110 = _taggedTemplateLiteral77(["The X-32-F Combat Training Snowman"]))), -1, "");
  }, false),
  new FreeFight(function() {
    return get("neverendingPartyAlways") && questStep2("_questPartyFair") < 999 ? clamp(10 - get("_neverendingPartyFreeTurns") - (!molemanReady() && !get("_thesisDelivered") && have($familiar(_templateObject3225 || (_templateObject3225 = _taggedTemplateLiteral77(["Pocket Professor"])))) ? 1 : 0), 0, 10) : 0;
  }, function() {
    var constructedMacro = Macro2.tryHaveSkill($skill(_templateObject3232 || (_templateObject3232 = _taggedTemplateLiteral77(["Feel Pride"])))).basicCombat();
    setNepQuestChoicesAndPrepItems();
    garboAdventure($location(_templateObject3242 || (_templateObject3242 = _taggedTemplateLiteral77(["The Neverending Party"]))), constructedMacro);
  }, true, {
    spec: function() {
      return {
        modifier: get("_questPartyFairQuest") === "trash" ? ["100 Item Drop"] : get("_questPartyFairQuest") === "dj" ? ["100 Meat Drop"] : [],
        equip: have($item(_templateObject3252 || (_templateObject3252 = _taggedTemplateLiteral77(["January's Garbage Tote"])))) ? $items(_templateObject3262 || (_templateObject3262 = _taggedTemplateLiteral77(["makeshift garbage shirt"]))) : []
      };
    }
  }),
  new FreeFight(function() {
    return get("ownsSpeakeasy") ? 3 - get("_speakeasyFreeFights") : 0;
  }, function() {
    return (0, import_kolmafia85.adv1)($location(_templateObject3272 || (_templateObject3272 = _taggedTemplateLiteral77(["An Unusually Quiet Barroom Brawl"]))), -1, "");
  }, true),
  new FreeFight(function() {
    return CombatLoversLocket_exports.have() && !!locketMonster() && CombatLoversLocket_exports.reminiscesLeft() > 1;
  }, function() {
    var monster = locketMonster();
    if (!monster)
      return;
    CombatLoversLocket_exports.reminisce(monster);
  }, true, {
    spec: function() {
      return have($familiar(_templateObject3282 || (_templateObject3282 = _taggedTemplateLiteral77(["Robortender"])))) ? {
        familiar: $familiar(_templateObject3292 || (_templateObject3292 = _taggedTemplateLiteral77(["Robortender"])))
      } : {};
    }
  }),
  // Get a li'l ninja costume for 150% item drop
  new FreeFight(function() {
    return !have($item(_templateObject3302 || (_templateObject3302 = _taggedTemplateLiteral77(["li'l ninja costume"])))) && have($familiar(_templateObject33110 || (_templateObject33110 = _taggedTemplateLiteral77(["Trick-or-Treating Tot"])))) && !get("_firedJokestersGun") && have($item(_templateObject3324 || (_templateObject3324 = _taggedTemplateLiteral77(["The Jokester's gun"])))) && (0, import_kolmafia85.canEquip)($item(_templateObject3332 || (_templateObject3332 = _taggedTemplateLiteral77(["The Jokester's gun"])))) && questStep2("questL08Trapper") >= 2;
  }, function() {
    return garboAdventure($location(_templateObject3342 || (_templateObject3342 = _taggedTemplateLiteral77(["Lair of the Ninja Snowmen"]))), Macro2.skill($skill(_templateObject3352 || (_templateObject3352 = _taggedTemplateLiteral77(["Fire the Jokester's Gun"])))).abort());
  }, true, {
    spec: {
      equip: $items(_templateObject3362 || (_templateObject3362 = _taggedTemplateLiteral77(["The Jokester's gun"])))
    },
    macroAllowsFamiliarActions: false
  }),
  // Fallback for li'l ninja costume if Lair of the Ninja Snowmen is unavailable
  new FreeFight(function() {
    return !have($item(_templateObject3372 || (_templateObject3372 = _taggedTemplateLiteral77(["li'l ninja costume"])))) && have($familiar(_templateObject3382 || (_templateObject3382 = _taggedTemplateLiteral77(["Trick-or-Treating Tot"])))) && !get("_firedJokestersGun") && have($item(_templateObject3392 || (_templateObject3392 = _taggedTemplateLiteral77(["The Jokester's gun"])))) && (0, import_kolmafia85.canEquip)($item(_templateObject3402 || (_templateObject3402 = _taggedTemplateLiteral77(["The Jokester's gun"])))) && have($skill(_templateObject34110 || (_templateObject34110 = _taggedTemplateLiteral77(["Comprehensive Cartography"])))) && get("_monstersMapped") < 3;
  }, function() {
    try {
      Macro2.skill($skill(_templateObject3423 || (_templateObject3423 = _taggedTemplateLiteral77(["Fire the Jokester's Gun"])))).abort().setAutoAttack();
      mapMonster($location(_templateObject3432 || (_templateObject3432 = _taggedTemplateLiteral77(["The Haiku Dungeon"]))), $monster(_templateObject3442 || (_templateObject3442 = _taggedTemplateLiteral77(["amateur ninja"]))));
    } finally {
      (0, import_kolmafia85.setAutoAttack)(0);
    }
  }, true, {
    spec: {
      equip: $items(_templateObject3452 || (_templateObject3452 = _taggedTemplateLiteral77(["The Jokester's gun"])))
    },
    macroAllowsFamiliarActions: false
  }),
  new FreeFight(function() {
    if (!have($item(_templateObject3462 || (_templateObject3462 = _taggedTemplateLiteral77(["closed-circuit pay phone"])))))
      return false;
    if (have($effect(_templateObject3472 || (_templateObject3472 = _taggedTemplateLiteral77(["Shadow Affinity"])))))
      return true;
    if (!get("_shadowAffinityToday") && !ClosedCircuitPayphone_exports.rufusTarget())
      return true;
    if (get("rufusQuestType") === "items" || get("rufusQuestType") === "entity") {
      return false;
    }
    if (get("encountersUntilSRChoice") === 0) {
      return true;
    }
    if (globalOptions.prefs.yachtzeechain)
      return false;
    if (have($item(_templateObject3482 || (_templateObject3482 = _taggedTemplateLiteral77(["Clara's bell"])))) && !globalOptions.clarasBellClaimed) {
      return true;
    }
    if (CinchoDeMayo_exports.have() && CinchoDeMayo_exports.totalAvailableCinch() >= 60) {
      return true;
    }
    return false;
  }, function() {
    if (have($item(_templateObject3492 || (_templateObject3492 = _taggedTemplateLiteral77(["Rufus's shadow lodestone"]))))) {
      setChoice(1500, 2);
      (0, import_kolmafia85.adv1)(bestShadowRift(), -1, "");
    }
    if (!get("_shadowAffinityToday") && !ClosedCircuitPayphone_exports.rufusTarget()) {
      ClosedCircuitPayphone_exports.chooseQuest(function() {
        return 2;
      });
    }
    runShadowRiftTurn();
    if (get("encountersUntilSRChoice", 0) === 0) {
      if (ClosedCircuitPayphone_exports.have() && !ClosedCircuitPayphone_exports.rufusTarget()) {
        ClosedCircuitPayphone_exports.chooseQuest(function() {
          return 2;
        });
      }
      (0, import_kolmafia85.adv1)(bestShadowRift(), -1, "");
    }
    if (questStep2("questRufus") === 1) {
      withChoice(1498, 1, function() {
        return (0, import_kolmafia85.use)($item(_templateObject3502 || (_templateObject3502 = _taggedTemplateLiteral77(["closed-circuit pay phone"]))));
      });
    }
    if (have($item(_templateObject35110 || (_templateObject35110 = _taggedTemplateLiteral77(["Rufus's shadow lodestone"]))))) {
      setChoice(1500, 2);
      (0, import_kolmafia85.adv1)(bestShadowRift(), -1, "");
    }
    if (!have($effect(_templateObject3522 || (_templateObject3522 = _taggedTemplateLiteral77(["Shadow Affinity"])))) && get("encountersUntilSRChoice", 0) !== 0) {
      (0, import_kolmafia85.setLocation)($location.none);
    }
  }, true)
];
var priorityFreeRunFightSources = [new FreeRunFight(function() {
  return have($familiar(_templateObject3532 || (_templateObject3532 = _taggedTemplateLiteral77(["Patriotic Eagle"])))) && !have($effect(_templateObject3542 || (_templateObject3542 = _taggedTemplateLiteral77(["Citizen of a Zone"])))) && $locations(_templateObject3552 || (_templateObject3552 = _taggedTemplateLiteral77(["Barf Mountain, The Fun-Guy Mansion"]))).some(function(l) {
    return (0, import_kolmafia85.canAdventure)(l);
  });
}, function(runSource) {
  var location = (0, import_kolmafia85.canAdventure)($location(_templateObject3562 || (_templateObject3562 = _taggedTemplateLiteral77(["Barf Mountain"])))) ? $location(_templateObject3572 || (_templateObject3572 = _taggedTemplateLiteral77(["Barf Mountain"]))) : $location(_templateObject3582 || (_templateObject3582 = _taggedTemplateLiteral77(["The Fun-Guy Mansion"])));
  garboAdventure(location, Macro2.skill($skill(_templateObject3592 || (_templateObject3592 = _taggedTemplateLiteral77(["%fn, let's pledge allegiance to a Zone"])))).step(runSource.macro));
}, {
  spec: {
    familiar: $familiar(_templateObject3602 || (_templateObject3602 = _taggedTemplateLiteral77(["Patriotic Eagle"]))),
    famequip: $items(_templateObject36110 || (_templateObject36110 = _taggedTemplateLiteral77(["little bitty bathysphere, das boot"]))),
    modifier: ["ML 100 Max", "-Familiar Weight"],
    avoid: $items(_templateObject3622 || (_templateObject3622 = _taggedTemplateLiteral77(["Drunkula's wineglass"])))
  }
})];
var freeRunFightSources = [
  // Unlock Latte ingredients
  new FreeRunFight(function() {
    return have($item(_templateObject3632 || (_templateObject3632 = _taggedTemplateLiteral77(["latte lovers member's mug"])))) && !get("latteUnlocks").includes("cajun") && questStep2("questL11MacGuffin") > -1;
  }, function(runSource) {
    propertyManager.setChoices({
      923: 1,
      // go to the blackberries in All Around the Map
      924: 1
      // fight a blackberry bush, so that we can freerun
    });
    garboAdventure($location(_templateObject3642 || (_templateObject3642 = _taggedTemplateLiteral77(["The Black Forest"]))), runSource.macro);
  }, {
    spec: {
      equip: $items(_templateObject3652 || (_templateObject3652 = _taggedTemplateLiteral77(["latte lovers member's mug"])))
    }
  }, latteActionSourceFinderConstraints),
  new FreeRunFight(function() {
    return have($item(_templateObject3662 || (_templateObject3662 = _taggedTemplateLiteral77(["latte lovers member's mug"])))) && get("latteUnlocks").includes("cajun") && !get("latteUnlocks").includes("rawhide") && questStep2("questL02Larva") > -1;
  }, function(runSource) {
    propertyManager.setChoices({
      502: 2,
      // go towards the stream in Arboreal Respite, so we can skip adventure
      505: 2
      // skip adventure
    });
    garboAdventure($location(_templateObject3672 || (_templateObject3672 = _taggedTemplateLiteral77(["The Spooky Forest"]))), runSource.macro);
  }, {
    spec: {
      equip: $items(_templateObject3682 || (_templateObject3682 = _taggedTemplateLiteral77(["latte lovers member's mug"])))
    }
  }, latteActionSourceFinderConstraints),
  new FreeRunFight(function() {
    return have($item(_templateObject3692 || (_templateObject3692 = _taggedTemplateLiteral77(["latte lovers member's mug"])))) && !get("latteUnlocks").includes("carrot") && get("latteUnlocks").includes("cajun") && get("latteUnlocks").includes("rawhide");
  }, function(runSource) {
    garboAdventure($location(_templateObject3702 || (_templateObject3702 = _taggedTemplateLiteral77(["The Dire Warren"]))), runSource.macro);
  }, {
    spec: {
      equip: $items(_templateObject3719 || (_templateObject3719 = _taggedTemplateLiteral77(["latte lovers member's mug"])))
    }
  }, latteActionSourceFinderConstraints),
  new FreeRunFight(function() {
    return have($familiar(_templateObject3722 || (_templateObject3722 = _taggedTemplateLiteral77(["Space Jellyfish"])))) && get("_spaceJellyfishDrops") < 5 && getStenchLocation() !== $location.none;
  }, function(runSource) {
    garboAdventure(getStenchLocation(), Macro2.trySkill($skill(_templateObject3732 || (_templateObject3732 = _taggedTemplateLiteral77(["Extract Jelly"])))).step(runSource.macro));
  }, {
    spec: {
      familiar: $familiar(_templateObject3742 || (_templateObject3742 = _taggedTemplateLiteral77(["Space Jellyfish"])))
    }
  }),
  new FreeRunFight(function() {
    return !doingGregFight() && have($familiar(_templateObject3752 || (_templateObject3752 = _taggedTemplateLiteral77(["Space Jellyfish"])))) && have($skill(_templateObject3762 || (_templateObject3762 = _taggedTemplateLiteral77(["Meteor Lore"])))) && get("_macrometeoriteUses") < 10 && getStenchLocation() !== $location.none;
  }, function(runSource) {
    garboAdventure(getStenchLocation(), Macro2.while_("!pastround 28 && hasskill macrometeorite", Macro2.skill($skill(_templateObject3772 || (_templateObject3772 = _taggedTemplateLiteral77(["Extract Jelly"])))).skill($skill(_templateObject3782 || (_templateObject3782 = _taggedTemplateLiteral77(["Macrometeorite"]))))).trySkill($skill(_templateObject3792 || (_templateObject3792 = _taggedTemplateLiteral77(["Extract Jelly"])))).step(runSource.macro));
  }, {
    spec: {
      familiar: $familiar(_templateObject3802 || (_templateObject3802 = _taggedTemplateLiteral77(["Space Jellyfish"])))
    }
  }),
  new FreeRunFight(function() {
    return !doingGregFight() && have($familiar(_templateObject3818 || (_templateObject3818 = _taggedTemplateLiteral77(["Space Jellyfish"])))) && have($item(_templateObject3822 || (_templateObject3822 = _taggedTemplateLiteral77(["Powerful Glove"])))) && get("_powerfulGloveBatteryPowerUsed") < 91 && getStenchLocation() !== $location.none;
  }, function(runSource) {
    garboAdventure(getStenchLocation(), Macro2.while_("!pastround 28 && hasskill CHEAT CODE: Replace Enemy", Macro2.skill($skill(_templateObject3832 || (_templateObject3832 = _taggedTemplateLiteral77(["Extract Jelly"])))).skill($skill(_templateObject3842 || (_templateObject3842 = _taggedTemplateLiteral77(["CHEAT CODE: Replace Enemy"]))))).trySkill($skill(_templateObject3852 || (_templateObject3852 = _taggedTemplateLiteral77(["Extract Jelly"])))).step(runSource.macro));
  }, {
    spec: {
      familiar: $familiar(_templateObject3862 || (_templateObject3862 = _taggedTemplateLiteral77(["Space Jellyfish"]))),
      equip: $items(_templateObject3872 || (_templateObject3872 = _taggedTemplateLiteral77(["Powerful Glove"])))
    }
  }),
  new FreeFight(function() {
    return (get("gingerbreadCityAvailable") || get("_gingerbreadCityToday")) && get("gingerAdvanceClockUnlocked") && !get("_gingerbreadClockVisited") && get("_gingerbreadCityTurns") <= 3;
  }, function() {
    propertyManager.setChoices({
      1215: 1
      // Gingerbread Civic Center advance clock
    });
    garboAdventure($location(_templateObject3882 || (_templateObject3882 = _taggedTemplateLiteral77(["Gingerbread Civic Center"]))), Macro2.abortWithMsg('Expected "Setting the Clock" but ended up in combat.'));
  }, false, {
    noncombat: function() {
      return true;
    }
  }),
  new FreeRunFight(function() {
    return (get("gingerbreadCityAvailable") || get("_gingerbreadCityToday")) && get("_gingerbreadCityTurns") + (get("_gingerbreadClockAdvanced") ? 5 : 0) < 9;
  }, function(runSource) {
    propertyManager.setChoices({
      1215: 1
      // Gingerbread Civic Center advance clock
    });
    garboAdventure($location(_templateObject3892 || (_templateObject3892 = _taggedTemplateLiteral77(["Gingerbread Civic Center"]))), runSource.macro);
    if (["Even Tamer Than Usual", "Never Break the Chain", "Close, but Yes Cigar", "Armchair Quarterback"].includes(get("lastEncounter"))) {
      _set("_gingerbreadCityTurns", 1 + get("_gingerbreadCityTurns"));
    }
  }, {
    spec: {
      bonuses: /* @__PURE__ */ new Map([[$item(_templateObject3902 || (_templateObject3902 = _taggedTemplateLiteral77(["carnivorous potted plant"]))), 100]])
    }
  }),
  new FreeFight(function() {
    return (get("gingerbreadCityAvailable") || get("_gingerbreadCityToday")) && get("_gingerbreadCityTurns") + (get("_gingerbreadClockAdvanced") ? 5 : 0) === 9;
  }, function() {
    propertyManager.setChoices({
      1204: 1
      // Gingerbread Train Station Noon random candy
    });
    garboAdventure($location(_templateObject3917 || (_templateObject3917 = _taggedTemplateLiteral77(["Gingerbread Train Station"]))), Macro2.abortWithMsg('Expected "Noon at the Train Station" but ended up in combat.'));
  }, false, {
    noncombat: function() {
      return true;
    }
  }),
  new FreeRunFight(function() {
    return (get("gingerbreadCityAvailable") || get("_gingerbreadCityToday")) && get("_gingerbreadCityTurns") + (get("_gingerbreadClockAdvanced") ? 5 : 0) >= 10 && get("_gingerbreadCityTurns") + (get("_gingerbreadClockAdvanced") ? 5 : 0) < 19 && ((0, import_kolmafia85.availableAmount)($item(_templateObject3922 || (_templateObject3922 = _taggedTemplateLiteral77(["sprinkles"])))) > 5 || (0, import_kolmafia85.haveOutfit)("gingerbread best"));
  }, function(runSource) {
    propertyManager.setChoices({
      1215: 1
      // Gingerbread Civic Center advance clock
    });
    garboAdventure($location(_templateObject3932 || (_templateObject3932 = _taggedTemplateLiteral77(["Gingerbread Civic Center"]))), runSource.macro);
    if (["Even Tamer Than Usual", "Never Break the Chain", "Close, but Yes Cigar", "Armchair Quarterback"].includes(get("lastEncounter"))) {
      _set("_gingerbreadCityTurns", 1 + get("_gingerbreadCityTurns"));
    }
  }, {
    spec: {
      bonuses: /* @__PURE__ */ new Map([[$item(_templateObject3942 || (_templateObject3942 = _taggedTemplateLiteral77(["carnivorous potted plant"]))), 100]])
    }
  }),
  new FreeFight(function() {
    return (get("gingerbreadCityAvailable") || get("_gingerbreadCityToday")) && get("_gingerbreadCityTurns") + (get("_gingerbreadClockAdvanced") ? 5 : 0) === 19 && ((0, import_kolmafia85.availableAmount)($item(_templateObject3952 || (_templateObject3952 = _taggedTemplateLiteral77(["sprinkles"])))) > 5 || (0, import_kolmafia85.haveOutfit)("gingerbread best"));
  }, function() {
    propertyManager.setChoices({
      1203: 4,
      // Gingerbread Civic Center 5 gingerbread cigarettes
      1215: 1,
      // Gingerbread Civic Center advance clock
      1209: 2,
      // enter the gallery at Upscale Midnight
      1214: 1
      // get High-End ginger wine
    });
    var best = bestConsumable("booze", true, $items(_templateObject3962 || (_templateObject3962 = _taggedTemplateLiteral77(["high-end ginger wine, astral pilsner"]))));
    var gingerWineValue = (0.5 * 30 * (baseMeat + 750) + getAverageAdventures($item(_templateObject3972 || (_templateObject3972 = _taggedTemplateLiteral77(["high-end ginger wine"])))) * get("valueOfAdventure")) / 2;
    var valueDif = gingerWineValue - best.value;
    if ((0, import_kolmafia85.haveOutfit)("gingerbread best") && ((0, import_kolmafia85.availableAmount)($item(_templateObject3982 || (_templateObject3982 = _taggedTemplateLiteral77(["sprinkles"])))) < 5 || valueDif * 2 > garboValue($item(_templateObject3992 || (_templateObject3992 = _taggedTemplateLiteral77(["gingerbread cigarette"])))) * 5 && (0, import_kolmafia85.itemAmount)($item(_templateObject4002 || (_templateObject4002 = _taggedTemplateLiteral77(["high-end ginger wine"])))) < 11)) {
      (0, import_kolmafia85.outfit)("gingerbread best");
      garboAdventure($location(_templateObject4017 || (_templateObject4017 = _taggedTemplateLiteral77(["Gingerbread Upscale Retail District"]))), Macro2.abort());
    } else {
      garboAdventure($location(_templateObject4022 || (_templateObject4022 = _taggedTemplateLiteral77(["Gingerbread Civic Center"]))), Macro2.abort());
    }
  }, false, {
    noncombat: function() {
      return true;
    }
  }),
  // Fire Extinguisher on best available target.
  new FreeRunFight(function() {
    return (have($item(_templateObject4032 || (_templateObject4032 = _taggedTemplateLiteral77(["industrial fire extinguisher"])))) && get("_fireExtinguisherCharge") >= 10 || have($familiar(_templateObject4042 || (_templateObject4042 = _taggedTemplateLiteral77(["XO Skeleton"])))) && get("_xoHugsUsed") < 11 || have($skill(_templateObject4052 || (_templateObject4052 = _taggedTemplateLiteral77(["Perpetrate Mild Evil"])))) && get("_mildEvilPerpetrated") < 3) && get("_VYKEACompanionLevel") === 0 && // don't attempt this in case you re-run garbo after making a vykea furniture
    getBestItemStealZone(true) !== null;
  }, function(runSource) {
    setupItemStealZones();
    var best = getBestItemStealZone(true);
    if (!best)
      throw "Unable to find fire extinguisher zone?";
    var mappingMonster = have($skill(_templateObject4062 || (_templateObject4062 = _taggedTemplateLiteral77(["Comprehensive Cartography"])))) && get("_monstersMapped") < 3 && best.location.wanderers && have($skill(_templateObject4072 || (_templateObject4072 = _taggedTemplateLiteral77(["Comprehensive Cartography"])))) && get("_monstersMapped") < 3;
    var monsters = asArray(best.monster);
    try {
      if (best.preReq)
        best.preReq();
      var vortex = $skill(_templateObject4082 || (_templateObject4082 = _taggedTemplateLiteral77(["Fire Extinguisher: Polar Vortex"])));
      var evil = $skill(_templateObject4092 || (_templateObject4092 = _taggedTemplateLiteral77(["Perpetrate Mild Evil"])));
      var hasXO = (0, import_kolmafia85.myFamiliar)() === $familiar(_templateObject41010 || (_templateObject41010 = _taggedTemplateLiteral77(["XO Skeleton"])));
      if ((0, import_kolmafia85.myThrall)() !== $thrall.none)
        (0, import_kolmafia85.useSkill)($skill(_templateObject41110 || (_templateObject41110 = _taggedTemplateLiteral77(["Dismiss Pasta Thrall"]))));
      Macro2.if_(monsters.map(function(m) {
        return "!monsterid ".concat(m.id);
      }).join(" && "), runSource.macro).externalIf(hasXO && get("_xoHugsUsed") < 11, Macro2.skill($skill(_templateObject41210 || (_templateObject41210 = _taggedTemplateLiteral77(["Hugs and Kisses!"]))))).externalIf(!best.requireMapTheMonsters && hasXO && get("_xoHugsUsed") < 10, Macro2.step(itemStealOlfact(best))).while_("hasskill ".concat((0, import_kolmafia85.toInt)(vortex)), Macro2.skill(vortex)).while_("hasskill ".concat((0, import_kolmafia85.toInt)(evil)), Macro2.skill(evil)).step(runSource.macro).setAutoAttack();
      if (mappingMonster) {
        mapMonster(best.location, monsters[0]);
      } else {
        (0, import_kolmafia85.adv1)(best.location, -1, "");
      }
    } finally {
      (0, import_kolmafia85.setAutoAttack)(0);
    }
  }, {
    spec: function() {
      var _zone$maximize;
      var zone = getBestItemStealZone();
      var spec = have($familiar(_templateObject4132 || (_templateObject4132 = _taggedTemplateLiteral77(["XO Skeleton"])))) && get("_xoHugsUsed") < 11 ? {
        familiar: $familiar(_templateObject4142 || (_templateObject4142 = _taggedTemplateLiteral77(["XO Skeleton"])))
      } : {};
      if (have($item(_templateObject4152 || (_templateObject4152 = _taggedTemplateLiteral77(["industrial fire extinguisher"])))) && get("_fireExtinguisherCharge") >= 10) {
        spec.equip = $items(_templateObject4162 || (_templateObject4162 = _taggedTemplateLiteral77(["industrial fire extinguisher"])));
      }
      spec.modifier = (_zone$maximize = zone === null || zone === void 0 ? void 0 : zone.maximize) !== null && _zone$maximize !== void 0 ? _zone$maximize : [];
      return spec;
    }
  }),
  // Try for an ultra-rare with mayfly runs and pickpocket if we have a manuel to detect monster hp ;)
  new FreeRunFight(function() {
    return monsterManuelAvailable() && have($item(_templateObject4172 || (_templateObject4172 = _taggedTemplateLiteral77(["mayfly bait necklace"])))) && (0, import_kolmafia85.canAdventure)($location(_templateObject4182 || (_templateObject4182 = _taggedTemplateLiteral77(["Cobb's Knob Menagerie, Level 1"])))) && get("_mayflySummons") < 30;
  }, function(runSource) {
    var willSurvivePassive = "monsterhpabove ".concat(maxPassiveDamage());
    garboAdventure($location(_templateObject4192 || (_templateObject4192 = _taggedTemplateLiteral77(["Cobb's Knob Menagerie, Level 1"]))), Macro2.if_($monster(_templateObject4202 || (_templateObject4202 = _taggedTemplateLiteral77(["QuickBASIC elemental"]))), Macro2.basicCombat()).if_($monster(_templateObject42110 || (_templateObject42110 = _taggedTemplateLiteral77(["BASIC Elemental"]))), Macro2.if_(willSurvivePassive, Macro2.step("pickpocket")).externalIf(have($skill(_templateObject4222 || (_templateObject4222 = _taggedTemplateLiteral77(["Transcendent Olfaction"])))) && get("_olfactionsUsed") < 1, Macro2.if_(willSurvivePassive, Macro2.trySkill($skill(_templateObject4232 || (_templateObject4232 = _taggedTemplateLiteral77(["Transcendent Olfaction"])))))).externalIf(have($skill(_templateObject4242 || (_templateObject4242 = _taggedTemplateLiteral77(["Gallapagosian Mating Call"])))) && get("_gallapagosMonster") !== $monster(_templateObject4252 || (_templateObject4252 = _taggedTemplateLiteral77(["BASIC Elemental"]))), Macro2.if_(willSurvivePassive, Macro2.skill($skill(_templateObject4262 || (_templateObject4262 = _taggedTemplateLiteral77(["Gallapagosian Mating Call"])))))).trySkill($skill(_templateObject4272 || (_templateObject4272 = _taggedTemplateLiteral77(["Summon Mayfly Swarm"]))))).if_($monster(_templateObject4282 || (_templateObject4282 = _taggedTemplateLiteral77(["Fruit Golem"]))), Macro2.trySkill($skill(_templateObject4292 || (_templateObject4292 = _taggedTemplateLiteral77(["Feel Hatred"]))))).if_($monster(_templateObject4302 || (_templateObject4302 = _taggedTemplateLiteral77(["Knob Goblin Mutant"]))), Macro2.trySkill($skill(_templateObject43110 || (_templateObject43110 = _taggedTemplateLiteral77(["Snokebomb"]))))).step(runSource.macro));
  }, {
    spec: function() {
      var _spec$equip2;
      var canPickPocket = (0, import_kolmafia85.myClass)() === $class(_templateObject4322 || (_templateObject4322 = _taggedTemplateLiteral77(["Accordion Thief"]))) || (0, import_kolmafia85.myClass)() === $class(_templateObject4332 || (_templateObject4332 = _taggedTemplateLiteral77(["Disco Bandit"])));
      var bestPickpocketItem = $items(_templateObject4342 || (_templateObject4342 = _taggedTemplateLiteral77(["tiny black hole, mime army infiltration glove"]))).find(function(item9) {
        return have(item9) && (0, import_kolmafia85.canEquip)(item9);
      });
      var pickPocketValue = 3e-3 * garboValue($item(_templateObject4352 || (_templateObject4352 = _taggedTemplateLiteral77(["GOTO"]))));
      var spec = {
        equip: $items(_templateObject4362 || (_templateObject4362 = _taggedTemplateLiteral77(["mayfly bait necklace"]))),
        bonuses: /* @__PURE__ */ new Map([[$item(_templateObject4372 || (_templateObject4372 = _taggedTemplateLiteral77(["carnivorous potted plant"]))), 100]]),
        familiar: freeFightFamiliar({
          allowAttackFamiliars: false
        })
      };
      if (!canPickPocket && bestPickpocketItem)
        (_spec$equip2 = spec.equip) === null || _spec$equip2 === void 0 ? void 0 : _spec$equip2.push(bestPickpocketItem);
      if (canPickPocket || bestPickpocketItem) {
        spec.modifier = ["".concat(pickPocketValue, " Pickpocket Chance")];
      }
      return spec;
    }
  }),
  // Try for mini-hipster\goth kid free fights with any remaining non-familiar free runs
  new FreeRunFight(function() {
    return get("_hipsterAdv") < 7 && (have($familiar(_templateObject4382 || (_templateObject4382 = _taggedTemplateLiteral77(["Mini-Hipster"])))) || have($familiar(_templateObject4392 || (_templateObject4392 = _taggedTemplateLiteral77(["Artistic Goth Kid"])))));
  }, function(runSource) {
    propertyManager.setChoices(wanderer_default.getChoices("backup"));
    var targetLocation = wanderer_default.getTarget("backup");
    garboAdventure(targetLocation, Macro2.if_("(monsterid 969) || (monsterid 970) || (monsterid 971) || (monsterid 972) || (monsterid 973) || (monstername Black Crayon *)", Macro2.basicCombat()).step(runSource.macro));
  }, {
    spec: function() {
      if (have($familiar(_templateObject4402 || (_templateObject4402 = _taggedTemplateLiteral77(["Mini-Hipster"]))))) {
        return {
          familiar: $familiar(_templateObject4418 || (_templateObject4418 = _taggedTemplateLiteral77(["Mini-Hipster"]))),
          bonuses: /* @__PURE__ */ new Map([[$item(_templateObject4422 || (_templateObject4422 = _taggedTemplateLiteral77(["ironic moustache"]))), garboValue($item(_templateObject4432 || (_templateObject4432 = _taggedTemplateLiteral77(["mole skin notebook"]))))], [$item(_templateObject4442 || (_templateObject4442 = _taggedTemplateLiteral77(["chiptune guitar"]))), garboValue($item(_templateObject4452 || (_templateObject4452 = _taggedTemplateLiteral77(["ironic knit cap"]))))], [$item(_templateObject4462 || (_templateObject4462 = _taggedTemplateLiteral77(["fixed-gear bicycle"]))), garboValue($item(_templateObject4472 || (_templateObject4472 = _taggedTemplateLiteral77(["ironic oversized sunglasses"]))))]])
        };
      } else {
        return {
          familiar: $familiar(_templateObject4482 || (_templateObject4482 = _taggedTemplateLiteral77(["Artistic Goth Kid"])))
        };
      }
    }
  }),
  // Try to accelerate the shadow nc, if you're able to do a quest
  new FreeRunFight(function() {
    return have($item(_templateObject4492 || (_templateObject4492 = _taggedTemplateLiteral77(["closed-circuit pay phone"])))) && get("rufusQuestType") !== "items" && !have($effect(_templateObject4502 || (_templateObject4502 = _taggedTemplateLiteral77(["Shadow Affinity"])))) && get("encountersUntilSRChoice") > 0;
  }, function(runSource) {
    return garboAdventure(bestShadowRift(), runSource.macro);
  }),
  // Try for an ultra-rare with mayfly runs if we didn't have a manuel ;)
  new FreeRunFight(function() {
    return have($item(_templateObject4517 || (_templateObject4517 = _taggedTemplateLiteral77(["mayfly bait necklace"])))) && (0, import_kolmafia85.canAdventure)($location(_templateObject4522 || (_templateObject4522 = _taggedTemplateLiteral77(["Cobb's Knob Menagerie, Level 1"])))) && get("_mayflySummons") < 30;
  }, function(runSource) {
    garboAdventure($location(_templateObject4532 || (_templateObject4532 = _taggedTemplateLiteral77(["Cobb's Knob Menagerie, Level 1"]))), Macro2.if_($monster(_templateObject4542 || (_templateObject4542 = _taggedTemplateLiteral77(["QuickBASIC elemental"]))), Macro2.basicCombat()).if_($monster(_templateObject4552 || (_templateObject4552 = _taggedTemplateLiteral77(["BASIC Elemental"]))), Macro2.trySkill($skill(_templateObject4562 || (_templateObject4562 = _taggedTemplateLiteral77(["Summon Mayfly Swarm"]))))).step(runSource.macro));
  }, {
    spec: {
      equip: $items(_templateObject4572 || (_templateObject4572 = _taggedTemplateLiteral77(["mayfly bait necklace"]))),
      bonuses: /* @__PURE__ */ new Map([[$item(_templateObject4582 || (_templateObject4582 = _taggedTemplateLiteral77(["carnivorous potted plant"]))), 100]])
    }
  })
];
function sandwormSpec() {
  var _spec$equip3, _copy$equip3;
  var spec = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var copy = _objectSpread14(_objectSpread14({}, spec), {}, {
    equip: _toConsumableArray44((_spec$equip3 = spec.equip) !== null && _spec$equip3 !== void 0 ? _spec$equip3 : [])
  });
  var itemDropBonus = 0.1 / 1e4 * garboValue($item(_templateObject4592 || (_templateObject4592 = _taggedTemplateLiteral77(["spice melange"]))));
  copy.modifier = ["".concat(itemDropBonus.toFixed(2), " Item Drop 10000 max")];
  if (have($item(_templateObject4602 || (_templateObject4602 = _taggedTemplateLiteral77(["January's Garbage Tote"])))) && get("garbageChampagneCharge") > 0) {
    var _copy$equip;
    (_copy$equip = copy.equip) === null || _copy$equip === void 0 ? void 0 : _copy$equip.push($item(_templateObject4615 || (_templateObject4615 = _taggedTemplateLiteral77(["broken champagne bottle"]))));
  }
  if (have($item(_templateObject4622 || (_templateObject4622 = _taggedTemplateLiteral77(["Lil' Doctor\u2122 bag"])))) && get("_otoscopeUsed")) {
    var _copy$equip2;
    (_copy$equip2 = copy.equip) === null || _copy$equip2 === void 0 ? void 0 : _copy$equip2.push($item(_templateObject4632 || (_templateObject4632 = _taggedTemplateLiteral77(["Lil' Doctor\u2122 bag"]))));
  }
  var familiar4 = bestFairy();
  copy.familiar = familiar4;
  if (familiar4 === $familiar(_templateObject4642 || (_templateObject4642 = _taggedTemplateLiteral77(["Reagnimated Gnome"]))))
    (_copy$equip3 = copy.equip) === null || _copy$equip3 === void 0 ? void 0 : _copy$equip3.push($item(_templateObject4652 || (_templateObject4652 = _taggedTemplateLiteral77(["gnomish housemaid's kgnee"]))));
  copy.equip = _toConsumableArray44(new Set(copy.equip));
  return copy;
}
var freeKillSources = [
  // 22	3	0	0	Chest X-Ray	combat skill	must have a Lil' Doctor bag equipped
  new FreeFight(function() {
    return have($item(_templateObject4662 || (_templateObject4662 = _taggedTemplateLiteral77(["Lil' Doctor\u2122 bag"])))) ? clamp(3 - get("_chestXRayUsed"), 0, 3) : 0;
  }, function() {
    ensureBeachAccess();
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4672 || (_templateObject4672 = _taggedTemplateLiteral77(["Otoscope"])))).trySkill($skill(_templateObject4682 || (_templateObject4682 = _taggedTemplateLiteral77(["Chest X-Ray"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4692 || (_templateObject4692 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: function() {
      return sandwormSpec({
        equip: $items(_templateObject4702 || (_templateObject4702 = _taggedTemplateLiteral77(["Lil' Doctor\u2122 bag"])))
      });
    },
    effects: function() {
      return have($skill(_templateObject4715 || (_templateObject4715 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject4722 || (_templateObject4722 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return !get("_gingerbreadMobHitUsed") && have($skill(_templateObject4732 || (_templateObject4732 = _taggedTemplateLiteral77(["Gingerbread Mob Hit"]))));
  }, function() {
    ensureBeachAccess();
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4742 || (_templateObject4742 = _taggedTemplateLiteral77(["Otoscope"])))).trySkill($skill(_templateObject4752 || (_templateObject4752 = _taggedTemplateLiteral77(["Gingerbread Mob Hit"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4762 || (_templateObject4762 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: sandwormSpec,
    effects: function() {
      return have($skill(_templateObject4772 || (_templateObject4772 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject4782 || (_templateObject4782 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return have($skill(_templateObject4792 || (_templateObject4792 = _taggedTemplateLiteral77(["Shattering Punch"])))) ? clamp(3 - get("_shatteringPunchUsed"), 0, 3) : 0;
  }, function() {
    ensureBeachAccess();
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4802 || (_templateObject4802 = _taggedTemplateLiteral77(["Otoscope"])))).trySkill($skill(_templateObject4815 || (_templateObject4815 = _taggedTemplateLiteral77(["Shattering Punch"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4822 || (_templateObject4822 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: sandwormSpec,
    effects: function() {
      return have($skill(_templateObject4832 || (_templateObject4832 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject4842 || (_templateObject4842 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return have($item(_templateObject4852 || (_templateObject4852 = _taggedTemplateLiteral77(["replica bat-oomerang"])))) ? clamp(3 - get("_usedReplicaBatoomerang"), 0, 3) : 0;
  }, function() {
    ensureBeachAccess();
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4862 || (_templateObject4862 = _taggedTemplateLiteral77(["Otoscope"])))).item($item(_templateObject4872 || (_templateObject4872 = _taggedTemplateLiteral77(["replica bat-oomerang"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4882 || (_templateObject4882 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: sandwormSpec,
    effects: function() {
      return have($skill(_templateObject4892 || (_templateObject4892 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject4902 || (_templateObject4902 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return !get("_missileLauncherUsed") && (0, import_kolmafia85.getCampground)()["Asdon Martin keyfob"] !== void 0;
  }, function() {
    ensureBeachAccess();
    AsdonMartin_exports.fillTo(100);
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4915 || (_templateObject4915 = _taggedTemplateLiteral77(["Otoscope"])))).skill($skill(_templateObject4922 || (_templateObject4922 = _taggedTemplateLiteral77(["Asdon Martin: Missile Launcher"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4932 || (_templateObject4932 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: sandwormSpec,
    effects: function() {
      return have($skill(_templateObject4942 || (_templateObject4942 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject4952 || (_templateObject4952 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return globalOptions.ascend ? get("shockingLickCharges") : 0;
  }, function() {
    ensureBeachAccess();
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject4962 || (_templateObject4962 = _taggedTemplateLiteral77(["Otoscope"])))).skill($skill(_templateObject4972 || (_templateObject4972 = _taggedTemplateLiteral77(["Shocking Lick"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject4982 || (_templateObject4982 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: sandwormSpec,
    effects: function() {
      return have($skill(_templateObject4992 || (_templateObject4992 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject5002 || (_templateObject5002 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  }),
  new FreeFight(function() {
    return have($item(_templateObject5015 || (_templateObject5015 = _taggedTemplateLiteral77(["Jurassic Parka"])))) && !have($effect(_templateObject5022 || (_templateObject5022 = _taggedTemplateLiteral77(["Everything Looks Yellow"]))));
  }, function() {
    ensureBeachAccess();
    (0, import_kolmafia85.cliExecute)("parka dilophosaur");
    withMacro(Macro2.trySingAlong().tryHaveSkill($skill(_templateObject5032 || (_templateObject5032 = _taggedTemplateLiteral77(["Otoscope"])))).trySkill($skill(_templateObject5042 || (_templateObject5042 = _taggedTemplateLiteral77(["Spit jurassic acid"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject5052 || (_templateObject5052 = _taggedTemplateLiteral77(["drum machine"]))));
    });
  }, true, {
    spec: function() {
      return sandwormSpec({
        equip: $items(_templateObject5062 || (_templateObject5062 = _taggedTemplateLiteral77(["Jurassic Parka"])))
      });
    },
    effects: function() {
      return have($skill(_templateObject5072 || (_templateObject5072 = _taggedTemplateLiteral77(["Emotionally Chipped"])))) && get("_feelLostUsed") < 3 ? $effects(_templateObject5082 || (_templateObject5082 = _taggedTemplateLiteral77(["Feeling Lost"]))) : [];
    }
  })
];
function freeRunFights() {
  if ((0, import_kolmafia85.myInebriety)() > (0, import_kolmafia85.inebrietyLimit)())
    return;
  if (get("beGregariousFightsLeft") > 0 && get("beGregariousMonster") === $monster(_templateObject5092 || (_templateObject5092 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"])))) {
    return;
  }
  propertyManager.setChoices({
    1387: 2,
    // "You will go find two friends and meet me here."
    1324: 5
    // Fight a random partier
  });
  var onlyPriorityRuns = globalOptions.prefs.yachtzeechain && !get("_garboYachtzeeChainCompleted", false);
  var stashRun = (0, import_kolmafia85.stashAmount)($item(_templateObject51010 || (_templateObject51010 = _taggedTemplateLiteral77(["navel ring of navel gazing"])))) ? $items(_templateObject51110 || (_templateObject51110 = _taggedTemplateLiteral77(["navel ring of navel gazing"]))) : (0, import_kolmafia85.stashAmount)($item(_templateObject5126 || (_templateObject5126 = _taggedTemplateLiteral77(["Greatest American Pants"])))) ? $items(_templateObject5132 || (_templateObject5132 = _taggedTemplateLiteral77(["Greatest American Pants"]))) : [];
  (0, import_kolmafia85.refreshStash)();
  withStash(stashRun, function() {
    var _iterator2 = _createForOfIteratorHelper31(priorityFreeRunFightSources), _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
        var priorityRunFight = _step2.value;
        priorityRunFight.runAll();
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    if (onlyPriorityRuns)
      return;
    var _iterator3 = _createForOfIteratorHelper31(freeRunFightSources), _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
        var freeRunFightSource = _step3.value;
        freeRunFightSource.runAll();
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  });
}
function freeFights() {
  if ((0, import_kolmafia85.myInebriety)() > (0, import_kolmafia85.inebrietyLimit)())
    return;
  if (get("beGregariousFightsLeft") > 0 && get("beGregariousMonster") === $monster(_templateObject5142 || (_templateObject5142 = _taggedTemplateLiteral77(["Knob Goblin Embezzler"])))) {
    return;
  }
  propertyManager.setChoices({
    1387: 2,
    // "You will go find two friends and meet me here."
    1324: 5
    // Fight a random partier
  });
  freeRunFights();
  killRobortCreaturesForFree();
  var canSquint = have($effect(_templateObject5152 || (_templateObject5152 = _taggedTemplateLiteral77(["Steely-Eyed Squint"])))) || have($skill(_templateObject5162 || (_templateObject5162 = _taggedTemplateLiteral77(["Steely-Eyed Squint"])))) && !get("_steelyEyedSquintUsed");
  if (have($item(_templateObject5172 || (_templateObject5172 = _taggedTemplateLiteral77(["January's Garbage Tote"])))) && canSquint && (0, import_kolmafia85.mallPrice)($item(_templateObject5182 || (_templateObject5182 = _taggedTemplateLiteral77(["drum machine"])))) < 0.02 * (0, import_kolmafia85.mallPrice)($item(_templateObject5192 || (_templateObject5192 = _taggedTemplateLiteral77(["spice melange"]))))) {
    try {
      var _iterator4 = _createForOfIteratorHelper31(freeKillSources), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var freeKillSource = _step4.value;
          if (freeKillSource.isAvailable()) {
            ensureEffect($effect(_templateObject5202 || (_templateObject5202 = _taggedTemplateLiteral77(["Steely-Eyed Squint"]))));
          }
          freeKillSource.runAll();
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    } finally {
      if (have($item(_templateObject52110 || (_templateObject52110 = _taggedTemplateLiteral77(["January's Garbage Tote"])))))
        (0, import_kolmafia85.cliExecute)("fold wad of used tape");
    }
  }
  if ((0, import_kolmafia85.canAdventure)($location(_templateObject5222 || (_templateObject5222 = _taggedTemplateLiteral77(["The Red Zeppelin"])))) && !have($item(_templateObject5232 || (_templateObject5232 = _taggedTemplateLiteral77(["glark cable"]))), clamp(5 - get("_glarkCableUses"), 0, 5))) {
    (0, import_kolmafia85.buy)(clamp(5 - get("_glarkCableUses"), 0, 5), $item(_templateObject5242 || (_templateObject5242 = _taggedTemplateLiteral77(["glark cable"]))), globalOptions.prefs.valueOfFreeFight);
  }
  var _iterator5 = _createForOfIteratorHelper31(freeFightSources), _step5;
  try {
    for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
      var freeFightSource = _step5.value;
      freeFightSource.runAll();
    }
  } catch (err) {
    _iterator5.e(err);
  } finally {
    _iterator5.f();
  }
  tryFillLatte();
  postFreeFightDailySetup();
}
function setNepQuestChoicesAndPrepItems() {
  var quest = get("_questPartyFairQuest");
  if (quest === "food") {
    if (!questStep2("_questPartyFair")) {
      setChoice(1324, 2);
      setChoice(1326, 3);
    } else if (get("choiceAdventure1324") !== 5) {
      setChoice(1324, 5);
      (0, import_kolmafia85.print)("Found Geraldine!", HIGHLIGHT);
      var partyFairInfo = get("_questPartyFairProgress").split(" ");
      logMessage("Geraldine wants ".concat(partyFairInfo[0], " ").concat((0, import_kolmafia85.toItem)(partyFairInfo[1]).plural, ", please!"));
    }
  } else if (quest === "booze") {
    if (!questStep2("_questPartyFair")) {
      setChoice(1324, 3);
      setChoice(1327, 3);
    } else if (get("choiceAdventure1324") !== 5) {
      setChoice(1324, 5);
      (0, import_kolmafia85.print)("Found Gerald!", HIGHLIGHT);
      var _partyFairInfo = get("_questPartyFairProgress").split(" ");
      logMessage("Gerald wants ".concat(_partyFairInfo[0], " ").concat((0, import_kolmafia85.toItem)(_partyFairInfo[1]).plural, ", please!"));
    }
  } else {
    setChoice(1324, 5);
  }
}
function thesisReady() {
  return !get("_thesisDelivered") && have($familiar(_templateObject5252 || (_templateObject5252 = _taggedTemplateLiteral77(["Pocket Professor"])))) && $familiar(_templateObject5262 || (_templateObject5262 = _taggedTemplateLiteral77(["Pocket Professor"]))).experience >= 400;
}
function deliverThesisIfAble() {
  if (!thesisReady())
    return;
  freeFightMood().execute();
  freeFightOutfit({
    modifier: ["100 Muscle"],
    familiar: $familiar(_templateObject5272 || (_templateObject5272 = _taggedTemplateLiteral77(["Pocket Professor"])))
  }).dress();
  safeRestore();
  var requiredThesisHP = 1296;
  var thesisLocation = $location(_templateObject5282 || (_templateObject5282 = _taggedTemplateLiteral77(["Uncle Gator's Country Fun-Time Liquid Waste Sluice"])));
  var requiredMuscle = requiredThesisHP / 0.75 - 5;
  if (molemanReady()) {
    requiredMuscle = requiredThesisHP / 1.5 - 15;
    thesisLocation = $location(_templateObject5292 || (_templateObject5292 = _taggedTemplateLiteral77(["Noob Cave"])));
  } else if ((get("neverendingPartyAlways") || get("_neverEndingPartyToday")) && questStep2("_questPartyFair") < 999) {
    setNepQuestChoicesAndPrepItems();
    thesisLocation = $location(_templateObject5302 || (_templateObject5302 = _taggedTemplateLiteral77(["The Neverending Party"])));
    requiredMuscle = requiredThesisHP / 0.75 + 10;
  } else if (!(0, import_kolmafia85.canAdventure)(thesisLocation)) {
    if (!have($item(_templateObject5319 || (_templateObject5319 = _taggedTemplateLiteral77(["transporter transponder"]))))) {
      acquire(1, $item(_templateObject5322 || (_templateObject5322 = _taggedTemplateLiteral77(["transporter transponder"]))), 1e4);
    }
    (0, import_kolmafia85.use)($item(_templateObject5332 || (_templateObject5332 = _taggedTemplateLiteral77(["transporter transponder"]))));
    thesisLocation = $location(_templateObject5342 || (_templateObject5342 = _taggedTemplateLiteral77(["Hamburglaris Shield Generator"])));
    requiredMuscle = requiredThesisHP / 0.75 - 1;
  }
  if ((0, import_kolmafia85.myBuffedstat)($stat(_templateObject5352 || (_templateObject5352 = _taggedTemplateLiteral77(["Muscle"])))) < requiredMuscle && have($item(_templateObject5362 || (_templateObject5362 = _taggedTemplateLiteral77(["Powerful Glove"])))) && !have($effect(_templateObject5372 || (_templateObject5372 = _taggedTemplateLiteral77(["Triple-Sized"])))) && get("_powerfulGloveBatteryPowerUsed") <= 95 && // We only get triple-sized if it doesn't lose us a replace enemy use
  (get("_powerfulGloveBatteryPowerUsed") % 10 === 5 || !doingGregFight())) {
    (0, import_kolmafia85.cliExecute)("checkpoint");
    (0, import_kolmafia85.equip)($slot(_templateObject5382 || (_templateObject5382 = _taggedTemplateLiteral77(["acc1"]))), $item(_templateObject5392 || (_templateObject5392 = _taggedTemplateLiteral77(["Powerful Glove"]))));
    ensureEffect($effect(_templateObject5402 || (_templateObject5402 = _taggedTemplateLiteral77(["Triple-Sized"]))));
    (0, import_kolmafia85.outfit)("checkpoint");
  }
  (0, import_kolmafia85.cliExecute)("gain ".concat(requiredMuscle, " muscle"));
  if (molemanReady()) {
    withMacro(Macro2.skill($skill(_templateObject5417 || (_templateObject5417 = _taggedTemplateLiteral77(["deliver your thesis!"])))), function() {
      return (0, import_kolmafia85.use)($item(_templateObject5422 || (_templateObject5422 = _taggedTemplateLiteral77(["molehill mountain"]))));
    }, true);
  } else {
    garboAdventure(thesisLocation, Macro2.skill($skill(_templateObject5432 || (_templateObject5432 = _taggedTemplateLiteral77(["deliver your thesis!"])))));
  }
  postCombatActions();
}
function doSausage() {
  if (!kramcoGuaranteed()) {
    return;
  }
  freeFightOutfit({
    equip: $items(_templateObject5442 || (_templateObject5442 = _taggedTemplateLiteral77(["Kramco Sausage-o-Matic\u2122"])))
  }).dress();
  var currentTurncount;
  do {
    currentTurncount = (0, import_kolmafia85.myTurncount)();
    propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
    var goblin = $monster(_templateObject5452 || (_templateObject5452 = _taggedTemplateLiteral77(["sausage goblin"])));
    garboAdventureAuto(wanderer_default.getTarget("wanderer"), Macro2.if_(goblin, Macro2.basicCombat()).ifHolidayWanderer(Macro2.basicCombat()).abortWithMsg("Expected ".concat(goblin, " but got something else.")));
  } while (dogOrHolidayWanderer() || (0, import_kolmafia85.toMonster)(get("lastEncounter")) === $monster.none && currentTurncount === (0, import_kolmafia85.myTurncount)());
  if ((0, import_kolmafia85.getAutoAttack)() !== 0)
    (0, import_kolmafia85.setAutoAttack)(0);
  postCombatActions();
}
function doGhost() {
  if (!have($item(_templateObject5462 || (_templateObject5462 = _taggedTemplateLiteral77(["protonic accelerator pack"])))) || get("questPAGhost") === "unstarted")
    return;
  var ghostLocation = get("ghostLocation");
  if (!ghostLocation)
    return;
  freeFightOutfit({
    equip: $items(_templateObject5472 || (_templateObject5472 = _taggedTemplateLiteral77(["protonic accelerator pack"])))
  }).dress();
  var currentTurncount;
  do {
    currentTurncount = (0, import_kolmafia85.myTurncount)();
    garboAdventure(ghostLocation, Macro2.ghostBustin());
  } while (get("ghostLocation") !== $location.none && currentTurncount === (0, import_kolmafia85.myTurncount)());
  postCombatActions();
}
function ensureBeachAccess() {
  if (get("lastDesertUnlock") !== (0, import_kolmafia85.myAscensions)() && (0, import_kolmafia85.myPath)() !== $path(_templateObject5482 || (_templateObject5482 = _taggedTemplateLiteral77(["Actually Ed the Undying"])))) {
    (0, import_kolmafia85.create)($item(_templateObject5492 || (_templateObject5492 = _taggedTemplateLiteral77(["bitchin' meatcar"]))));
  }
}
var itemStealZones = [{
  location: $location(_templateObject5502 || (_templateObject5502 = _taggedTemplateLiteral77(["The Deep Dark Jungle"]))),
  monster: $monster(_templateObject5516 || (_templateObject5516 = _taggedTemplateLiteral77(["smoke monster"]))),
  item: $item(_templateObject5522 || (_templateObject5522 = _taggedTemplateLiteral77(["transdermal smoke patch"]))),
  dropRate: 1,
  maximize: [],
  requireMapTheMonsters: false,
  isOpen: function() {
    return get("_spookyAirportToday") || get("spookyAirportAlways");
  },
  openCost: function() {
    return 0;
  },
  preReq: null
}, {
  location: $location(_templateObject5532 || (_templateObject5532 = _taggedTemplateLiteral77(["The Ice Hotel"]))),
  monster: $monster(_templateObject5542 || (_templateObject5542 = _taggedTemplateLiteral77(["ice bartender"]))),
  item: $item(_templateObject5552 || (_templateObject5552 = _taggedTemplateLiteral77(["perfect ice cube"]))),
  dropRate: 1,
  maximize: [],
  requireMapTheMonsters: false,
  isOpen: function() {
    return get("_coldAirportToday") || get("coldAirportAlways");
  },
  openCost: function() {
    return 0;
  },
  preReq: null
}, {
  location: $location(_templateObject5562 || (_templateObject5562 = _taggedTemplateLiteral77(["The Haunted Library"]))),
  monster: $monster(_templateObject5572 || (_templateObject5572 = _taggedTemplateLiteral77(["bookbat"]))),
  item: $item(_templateObject5582 || (_templateObject5582 = _taggedTemplateLiteral77(["tattered scrap of paper"]))),
  dropRate: 1,
  maximize: ["99 monster level 100 max"],
  // Bookbats need up to +100 ML to survive the polar vortices
  requireMapTheMonsters: false,
  isOpen: function() {
    return have($item(_templateObject5592 || (_templateObject5592 = _taggedTemplateLiteral77(["[7302]Spookyraven library key"]))));
  },
  openCost: function() {
    return 0;
  },
  preReq: null
}, {
  location: $location(_templateObject5602 || (_templateObject5602 = _taggedTemplateLiteral77(["The Stately Pleasure Dome"]))),
  monster: $monster(_templateObject5615 || (_templateObject5615 = _taggedTemplateLiteral77(["toothless mastiff bitch"]))),
  item: $item(_templateObject5622 || (_templateObject5622 = _taggedTemplateLiteral77(["disintegrating spiky collar"]))),
  dropRate: 1,
  maximize: ["99 muscle 100 max"],
  // Ensure mastiff is at least 100 hp
  requireMapTheMonsters: false,
  isOpen: function() {
    return true;
  },
  openCost: function() {
    return !have($effect(_templateObject5632 || (_templateObject5632 = _taggedTemplateLiteral77(["Absinthe-Minded"])))) ? (0, import_kolmafia85.mallPrice)($item(_templateObject5642 || (_templateObject5642 = _taggedTemplateLiteral77(["tiny bottle of absinthe"])))) : 0;
  },
  preReq: function() {
    if (!have($effect(_templateObject5652 || (_templateObject5652 = _taggedTemplateLiteral77(["Absinthe-Minded"]))))) {
      if (!have($item(_templateObject5662 || (_templateObject5662 = _taggedTemplateLiteral77(["tiny bottle of absinthe"])))))
        (0, import_kolmafia85.buy)(1, $item(_templateObject5672 || (_templateObject5672 = _taggedTemplateLiteral77(["tiny bottle of absinthe"]))));
      (0, import_kolmafia85.use)($item(_templateObject5682 || (_templateObject5682 = _taggedTemplateLiteral77(["tiny bottle of absinthe"]))));
    }
  }
}, {
  location: $location(_templateObject5692 || (_templateObject5692 = _taggedTemplateLiteral77(["Twin Peak"]))),
  monster: $monsters(_templateObject5702 || (_templateObject5702 = _taggedTemplateLiteral77(["bearpig topiary animal, elephant (meatcar?) topiary animal, spider (duck?) topiary animal"]))),
  item: $item(_templateObject5714 || (_templateObject5714 = _taggedTemplateLiteral77(["rusty hedge trimmers"]))),
  dropRate: 0.5,
  maximize: ["99 monster level 11 max"],
  // Topiary animals need an extra 11 HP to survive polar vortices
  requireMapTheMonsters: false,
  isOpen: function() {
    return (0, import_kolmafia85.myLevel)() >= 9 && get("chasmBridgeProgress") >= 30 && get("twinPeakProgress") >= 15;
  },
  openCost: function() {
    return 0;
  },
  preReq: null
}, {
  location: $location(_templateObject5722 || (_templateObject5722 = _taggedTemplateLiteral77(["The Hidden Temple"]))),
  monster: $monster(_templateObject5732 || (_templateObject5732 = _taggedTemplateLiteral77(["baa-relief sheep"]))),
  item: $item(_templateObject5742 || (_templateObject5742 = _taggedTemplateLiteral77(["stone wool"]))),
  requireMapTheMonsters: true,
  dropRate: 1,
  maximize: ["99 monster level 100 max"],
  // Sheeps need up to +100 ML to survive the polar vortices
  isOpen: function() {
    return get("lastTempleUnlock") === (0, import_kolmafia85.myAscensions)();
  },
  openCost: function() {
    return 0;
  },
  preReq: null
}].concat(_toConsumableArray44($locations(_templateObject5752 || (_templateObject5752 = _taggedTemplateLiteral77(["Shadow Rift (The Ancient Buried Pyramid), Shadow Rift (The Hidden City), Shadow Rift (The Misspelled Cemetary)"]))).map(function(location) {
  return {
    location: location,
    monster: $monster(_templateObject5762 || (_templateObject5762 = _taggedTemplateLiteral77(["shadow slab"]))),
    item: $item(_templateObject5772 || (_templateObject5772 = _taggedTemplateLiteral77(["shadow brick"]))),
    requireMapTheMonsters: false,
    dropRate: 1,
    isOpen: function() {
      return (0, import_kolmafia85.canAdventure)(location);
    },
    openCost: function() {
      return 0;
    },
    preReq: null
  };
})));
function getBestItemStealZone() {
  var mappingMonster = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
  var targets = itemStealZones.filter(function(zone) {
    return zone.isOpen() && (mappingMonster || !zone.requireMapTheMonsters) && asArray(zone.monster).some(function(m) {
      return !(0, import_kolmafia85.isBanished)(m) || get("olfactedMonster") === m || get("_gallapagosMonster") === m;
    });
  });
  var vorticesAvail = have($item(_templateObject5782 || (_templateObject5782 = _taggedTemplateLiteral77(["industrial fire extinguisher"])))) ? Math.floor(get("_fireExtinguisherCharge") / 10) : 0;
  var hugsAvail = have($familiar(_templateObject5792 || (_templateObject5792 = _taggedTemplateLiteral77(["XO Skeleton"])))) ? clamp(11 - get("_xoHugsUsed"), 0, 11) : 0;
  var value = function(zone) {
    return zone.dropRate * garboValue(zone.item) * (vorticesAvail + hugsAvail / 2) - zone.openCost();
  };
  return targets.length ? maxBy(targets, value) : null;
}
function setupItemStealZones() {
  propertyManager.set({
    lightsOutAutomation: 2
  });
  propertyManager.setChoices({
    163: 4,
    164: 3,
    165: 4,
    166: 1,
    888: 4,
    889: 5
  });
}
function itemStealOlfact(best) {
  return Macro2.externalIf(have($skill(_templateObject5802 || (_templateObject5802 = _taggedTemplateLiteral77(["Transcendent Olfaction"])))) && get("_olfactionsUsed") < 1 && itemStealZones.every(function(zone) {
    return !asArray(zone.monster).includes(get("olfactedMonster"));
  }), Macro2.skill($skill(_templateObject5814 || (_templateObject5814 = _taggedTemplateLiteral77(["Transcendent Olfaction"]))))).externalIf(have($skill(_templateObject5822 || (_templateObject5822 = _taggedTemplateLiteral77(["Gallapagosian Mating Call"])))) && get("_gallapagosMonster") !== best.monster, Macro2.skill($skill(_templateObject5832 || (_templateObject5832 = _taggedTemplateLiteral77(["Gallapagosian Mating Call"])))));
}
var haveEnoughPills = clamp((0, import_kolmafia85.availableAmount)($item(_templateObject5842 || (_templateObject5842 = _taggedTemplateLiteral77(["synthetic dog hair pill"])))), 0, 100) + clamp((0, import_kolmafia85.availableAmount)($item(_templateObject5852 || (_templateObject5852 = _taggedTemplateLiteral77(["distention pill"])))), 0, 100) + (0, import_kolmafia85.availableAmount)($item(_templateObject5862 || (_templateObject5862 = _taggedTemplateLiteral77(["Map to Safety Shelter Grimace Prime"])))) < 200 && (0, import_kolmafia85.availableAmount)($item(_templateObject5872 || (_templateObject5872 = _taggedTemplateLiteral77(["Map to Safety Shelter Grimace Prime"])))) < ESTIMATED_OVERDRUNK_TURNS;
function wantPills() {
  return have($item(_templateObject5882 || (_templateObject5882 = _taggedTemplateLiteral77(["Fourth of May Cosplay Saber"])))) && crateStrategy() !== "Saber" && haveEnoughPills;
}
function voidMonster() {
  if (get("cursedMagnifyingGlassCount") < 13 || !have($item(_templateObject5892 || (_templateObject5892 = _taggedTemplateLiteral77(["cursed magnifying glass"])))) || get("_voidFreeFights") >= 5) {
    return;
  }
  freeFightOutfit({
    equip: $items(_templateObject5902 || (_templateObject5902 = _taggedTemplateLiteral77(["cursed magnifying glass"])))
  }).dress();
  propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
  garboAdventure(wanderer_default.getTarget("wanderer"), Macro2.basicCombat());
  postCombatActions();
}
var freeKills = [{
  spec: {
    equip: $items(_templateObject5914 || (_templateObject5914 = _taggedTemplateLiteral77(["The Jokester's gun"])))
  },
  macro: $skill(_templateObject5922 || (_templateObject5922 = _taggedTemplateLiteral77(["Fire the Jokester's Gun"]))),
  used: function() {
    return get("_firedJokestersGun");
  }
}, {
  spec: {
    equip: $items(_templateObject5932 || (_templateObject5932 = _taggedTemplateLiteral77(["Lil' Doctor\u2122 bag"])))
  },
  macro: $skill(_templateObject5942 || (_templateObject5942 = _taggedTemplateLiteral77(["Chest X-Ray"]))),
  used: function() {
    return get("_chestXRayUsed") >= 3;
  }
}, {
  macro: $skill(_templateObject5952 || (_templateObject5952 = _taggedTemplateLiteral77(["Shattering Punch"]))),
  used: function() {
    return get("_shatteringPunchUsed") >= 3;
  }
}, {
  macro: $skill(_templateObject5962 || (_templateObject5962 = _taggedTemplateLiteral77(["Gingerbread Mob Hit"]))),
  used: function() {
    return get("_gingerbreadMobHitUsed");
  }
}, {
  macro: $item(_templateObject5972 || (_templateObject5972 = _taggedTemplateLiteral77(["replica bat-oomerang"]))),
  used: function() {
    return get("_usedReplicaBatoomerang") >= 3;
  }
}];
var canUseSource = function(_ref9) {
  var _spec$equip$every, _spec$equip4;
  var spec = _ref9.spec, macro = _ref9.macro, used = _ref9.used;
  return ((_spec$equip$every = spec === null || spec === void 0 || (_spec$equip4 = spec.equip) === null || _spec$equip4 === void 0 ? void 0 : _spec$equip4.every(function(i) {
    return have(i);
  })) !== null && _spec$equip$every !== void 0 ? _spec$equip$every : have(macro)) && !used();
};
function findFreeKill() {
  var _freeKills$find;
  return (_freeKills$find = freeKills.find(canUseSource)) !== null && _freeKills$find !== void 0 ? _freeKills$find : null;
}
function killRobortCreaturesForFree() {
  if (!have($familiar(_templateObject5982 || (_templateObject5982 = _taggedTemplateLiteral77(["Robortender"])))))
    return;
  var currentHeads = (0, import_kolmafia85.availableAmount)($item(_templateObject5992 || (_templateObject5992 = _taggedTemplateLiteral77(["fish head"]))));
  var freeKill = findFreeKill();
  while (freeKill && (0, import_kolmafia85.canAdventure)($location(_templateObject6002 || (_templateObject6002 = _taggedTemplateLiteral77(["The Copperhead Club"])))) && have($skill(_templateObject6013 || (_templateObject6013 = _taggedTemplateLiteral77(["Comprehensive Cartography"])))) && get("_monstersMapped") < 3) {
    if (have($effect(_templateObject6022 || (_templateObject6022 = _taggedTemplateLiteral77(["Crappily Disguised as a Waiter"]))))) {
      setChoice(855, 4);
      garboAdventure($location(_templateObject6032 || (_templateObject6032 = _taggedTemplateLiteral77(["The Copperhead Club"]))), Macro2.abort());
    }
    freeFightOutfit(_objectSpread14(_objectSpread14({}, freeKill.spec), {}, {
      familiar: $familiar(_templateObject6042 || (_templateObject6042 = _taggedTemplateLiteral77(["Robortender"])))
    })).dress();
    withMacro(freeKill.macro instanceof import_kolmafia85.Item ? Macro2.item(freeKill.macro) : Macro2.skill(freeKill.macro), function() {
      mapMonster($location(_templateObject6052 || (_templateObject6052 = _taggedTemplateLiteral77(["The Copperhead Club"]))), $monster(_templateObject6062 || (_templateObject6062 = _taggedTemplateLiteral77(["Mob Penguin Capo"]))));
      (0, import_kolmafia85.runCombat)();
    }, true);
    freeKill = findFreeKill();
  }
  var _loop2 = function _loop22() {
    var roboTarget = CombatLoversLocket_exports.findMonster(function() {
      return true;
    }, function(monster) {
      return valueDrops(monster) + garboValue(Robortender_exports.dropFrom(monster)) * Robortender_exports.dropChance();
    });
    if (!roboTarget)
      return "break";
    var regularTarget = CombatLoversLocket_exports.findMonster(function() {
      return true;
    }, valueDrops);
    var familiar4 = regularTarget === roboTarget ? freeFightFamiliar({
      canChooseMacro: roboTarget.attributes.includes("FREE")
    }) : $familiar(_templateObject6122 || (_templateObject6122 = _taggedTemplateLiteral77(["Robortender"])));
    freeFightOutfit(roboTarget.attributes.includes("FREE") ? {
      familiar: familiar4
    } : _objectSpread14(_objectSpread14({}, freeKill.spec), {}, {
      familiar: familiar4
    })).dress();
    withMacro(isFree(roboTarget) ? Macro2.basicCombat() : freeKill.macro instanceof import_kolmafia85.Item ? Macro2.item(freeKill.macro) : Macro2.skill(freeKill.macro), function() {
      return CombatLoversLocket_exports.reminisce(roboTarget);
    }, true);
    freeKill = findFreeKill();
  };
  while (freeKill && CombatLoversLocket_exports.have() && CombatLoversLocket_exports.reminiscesLeft() > 1) {
    var _ret2 = _loop2();
    if (_ret2 === "break")
      break;
  }
  if (!Robortender_exports.currentDrinks().includes($item(_templateObject6072 || (_templateObject6072 = _taggedTemplateLiteral77(["drive-by shooting"])))) && (0, import_kolmafia85.availableAmount)($item(_templateObject6082 || (_templateObject6082 = _taggedTemplateLiteral77(["fish head"])))) > currentHeads && userConfirmDialog("Garbo managed to rustle up a fish head, would you like it to use it to make a drive-by shooting so you can benefit from your robortender? Sorry for flip-flopping on this, life is hard.", true)) {
    if (!have($item(_templateObject6092 || (_templateObject6092 = _taggedTemplateLiteral77(["drive-by shooting"])))))
      (0, import_kolmafia85.create)($item(_templateObject6105 || (_templateObject6105 = _taggedTemplateLiteral77(["drive-by shooting"]))));
    Robortender_exports.feed($item(_templateObject6117 || (_templateObject6117 = _taggedTemplateLiteral77(["drive-by shooting"]))));
    setBestLeprechaunAsMeatFamiliar();
  }
}
var isFree = function(monster) {
  return monster.attributes.includes("FREE");
};
var valueDrops = function(monster) {
  return sum((0, import_kolmafia85.itemDropsArray)(monster), function(_ref10) {
    var drop = _ref10.drop, rate = _ref10.rate, type = _ref10.type;
    return !["c", "0", "p"].includes(type) ? garboValue(drop, true) * rate / 100 : 0;
  });
};
var locketMonster = function() {
  return CombatLoversLocket_exports.findMonster(isFree, valueDrops);
};
function estimatedTentacles() {
  return sum(freeFightSources, function(source) {
    var avail = source.tentacle ? source.available() : 0;
    return typeof avail === "number" ? avail : (0, import_kolmafia85.toInt)(avail);
  });
}
function yachtzee() {
  if (!realmAvailable("sleaze") || !have($effect(_templateObject6132 || (_templateObject6132 = _taggedTemplateLiteral77(["Fishy"])))))
    return;
  for (var _i2 = 0, _arr2 = [{
    available: have($item(_templateObject6142 || (_templateObject6142 = _taggedTemplateLiteral77(["Clara's bell"])))) && !globalOptions.clarasBellClaimed,
    success: function() {
      globalOptions.clarasBellClaimed = true;
      if ((0, import_kolmafia85.use)($item(_templateObject6152 || (_templateObject6152 = _taggedTemplateLiteral77(["Clara's bell"])))))
        return true;
      return false;
    }
  }, {
    available: have($item(_templateObject6162 || (_templateObject6162 = _taggedTemplateLiteral77(["Eight Days a Week Pill Keeper"])))) && !get("_freePillKeeperUsed"),
    success: function() {
      if ((0, import_kolmafia85.cliExecute)("pillkeeper noncombat") && get("_freePillKeeperUsed")) {
        _set("_freePillKeeperUsed", true);
        return true;
      }
      return false;
    }
  }]; _i2 < _arr2.length; _i2++) {
    var _arr2$_i = _arr2[_i2], available3 = _arr2$_i.available, success = _arr2$_i.success;
    if (available3) {
      var familiarOptions = import_kolmafia85.Familiar.all().filter(function(familiar4) {
        return have(familiar4) && familiar4.underwater && familiar4 !== $familiar(_templateObject6172 || (_templateObject6172 = _taggedTemplateLiteral77(["Robortender"])));
      });
      var familiarChoice = familiarOptions.length ? maxBy(familiarOptions, findLeprechaunMultiplier) : $familiar.none;
      (0, import_kolmafia85.useFamiliar)(familiarChoice);
      var underwaterBreathingGear = waterBreathingEquipment.find(function(item9) {
        return have(item9) && (0, import_kolmafia85.canEquip)(item9);
      });
      if (!underwaterBreathingGear)
        return;
      var equippedOutfit = new Requirement(["meat", "-tie"], {
        forceEquip: [underwaterBreathingGear]
      }).maximize();
      if ((0, import_kolmafia85.haveEquipped)($item(_templateObject6182 || (_templateObject6182 = _taggedTemplateLiteral77(["The Crown of Ed the Undying"])))))
        (0, import_kolmafia85.cliExecute)("edpiece fish");
      if (!equippedOutfit || !success())
        return;
      var lastUMDDate = property_exports.getString("umdLastObtained");
      var getUMD = !get("_sleazeAirportToday") && // We cannot get the UMD with a one-day pass
      garboValue($item(_templateObject6192 || (_templateObject6192 = _taggedTemplateLiteral77(["Ultimate Mind Destroyer"])))) >= 2e3 * (1 + (0, import_kolmafia85.numericModifier)("meat drop") / 100) && (!lastUMDDate || today2 - Date.parse(lastUMDDate) >= 1e3 * 60 * 60 * 24 * 7);
      setChoice(918, getUMD ? 1 : 2);
      garboAdventureAuto($location(_templateObject6202 || (_templateObject6202 = _taggedTemplateLiteral77(["The Sunken Party Yacht"]))), Macro2.abort());
      if (Florist_exports.have() && Florist_exports.Crookweed.available()) {
        Florist_exports.Crookweed.plant();
      }
      if (get("lastEncounter") === "Yacht, See?") {
        garboAdventureAuto($location(_templateObject6217 || (_templateObject6217 = _taggedTemplateLiteral77(["The Sunken Party Yacht"]))), Macro2.abort());
      }
      return;
    }
  }
}
function runShadowRiftTurn() {
  if (get("encountersUntilSRChoice") === 0)
    return;
  if (globalOptions.prefs.yachtzeechain || get("rufusQuestType") === "items" || get("rufusQuestType") === "entity") {
    (0, import_kolmafia85.adv1)(bestShadowRift(), -1, "");
    return;
  }
  if (have($item(_templateObject6222 || (_templateObject6222 = _taggedTemplateLiteral77(["Clara's bell"])))) && !globalOptions.clarasBellClaimed) {
    globalOptions.clarasBellClaimed = true;
    (0, import_kolmafia85.use)($item(_templateObject6232 || (_templateObject6232 = _taggedTemplateLiteral77(["Clara's bell"]))));
    _set("encountersUntilSRChoice", 0);
  } else if (CinchoDeMayo_exports.have() && CinchoDeMayo_exports.totalAvailableCinch() >= 60) {
    var lastAcc = (0, import_kolmafia85.equippedItem)($slot(_templateObject6242 || (_templateObject6242 = _taggedTemplateLiteral77(["acc3"]))));
    (0, import_kolmafia85.equip)($slot(_templateObject6252 || (_templateObject6252 = _taggedTemplateLiteral77(["acc3"]))), $item(_templateObject6262 || (_templateObject6262 = _taggedTemplateLiteral77(["Cincho de Mayo"]))));
    while (CinchoDeMayo_exports.currentCinch() < 60) {
      if (!freeRest())
        throw new Error("We are out of free rests!");
    }
    (0, import_kolmafia85.useSkill)($skill(_templateObject6272 || (_templateObject6272 = _taggedTemplateLiteral77(["Cincho: Fiesta Exit"]))));
    _set("encountersUntilSRChoice", 0);
    (0, import_kolmafia85.equip)($slot(_templateObject6282 || (_templateObject6282 = _taggedTemplateLiteral77(["acc3"]))), lastAcc);
  } else if (have($item(_templateObject6292 || (_templateObject6292 = _taggedTemplateLiteral77(["Jurassic Parka"])))) && get("_spikolodonSpikeUses") < 5 && have($effect(_templateObject6302 || (_templateObject6302 = _taggedTemplateLiteral77(["Shadow Affinity"])))) && get("encountersUntilSRChoice") >= 2) {
    freeFightOutfit({
      shirt: $item(_templateObject6316 || (_templateObject6316 = _taggedTemplateLiteral77(["Jurassic Parka"])))
    }).dress();
    (0, import_kolmafia85.cliExecute)("parka spikolodon");
    var macro = Macro2.skill($skill(_templateObject6322 || (_templateObject6322 = _taggedTemplateLiteral77(["Launch spikolodon spikes"])))).basicCombat();
    garboAdventureAuto(bestShadowRift(), macro);
    _set("encountersUntilSRChoice", 0);
  } else {
    (0, import_kolmafia85.adv1)(bestShadowRift(), -1, "");
  }
}

// src/tasks/daily.ts
var import_kolmafia86 = require("kolmafia");
var _templateObject779;
var _templateObject2170;
var _templateObject3147;
var _templateObject4133;
var _templateObject5127;
var _templateObject6106;
var _templateObject780;
var _templateObject870;
var _templateObject966;
var _templateObject1056;
var _templateObject1148;
var _templateObject1247;
var _templateObject1341;
var _templateObject1438;
var _templateObject1536;
var _templateObject1636;
var _templateObject1736;
var _templateObject1835;
var _templateObject1935;
var _templateObject2035;
var _templateObject2171;
var _templateObject2233;
var _templateObject2331;
var _templateObject2431;
var _templateObject2531;
var _templateObject2631;
var _templateObject2729;
var _templateObject2826;
var _templateObject2926;
var _templateObject3024;
var _templateObject3148;
var _templateObject3226;
var _templateObject3325;
var _templateObject3424;
var _templateObject3523;
var _templateObject3620;
var _templateObject3720;
var _templateObject3819;
var _templateObject3918;
var _templateObject4018;
var _templateObject4134;
var _templateObject4220;
var _templateObject4320;
var _templateObject4419;
var _templateObject4518;
var _templateObject4616;
var _templateObject4716;
var _templateObject4816;
var _templateObject4916;
var _templateObject5016;
var _templateObject5128;
var _templateObject5220;
var _templateObject5320;
var _templateObject5418;
var _templateObject5517;
var _templateObject5616;
var _templateObject5715;
var _templateObject5815;
var _templateObject5915;
var _templateObject6014;
var _templateObject6118;
var _templateObject6218;
var _templateObject6317;
var _templateObject6414;
var _templateObject6513;
var _templateObject6613;
var _templateObject6713;
var _templateObject6812;
var _templateObject6912;
var _templateObject7011;
var _templateObject7114;
var _templateObject7214;
var _templateObject7314;
var _templateObject7413;
var _templateObject7513;
var _templateObject7611;
var _templateObject7710;
var _templateObject787;
var _templateObject797;
var _templateObject807;
var _templateObject8114;
var _templateObject8214;
var _templateObject8313;
var _templateObject8413;
var _templateObject8512;
var _templateObject8610;
var _templateObject876;
var _templateObject886;
var _templateObject896;
var _templateObject906;
var _templateObject9114;
var _templateObject9214;
var _templateObject9313;
var _templateObject9412;
var _templateObject9511;
var _templateObject967;
var _templateObject976;
var _templateObject986;
function _slicedToArray26(arr, i) {
  return _arrayWithHoles26(arr) || _iterableToArrayLimit26(arr, i) || _unsupportedIterableToArray59(arr, i) || _nonIterableRest26();
}
function _nonIterableRest26() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit26(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles26(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper32(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray59(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _toConsumableArray45(arr) {
  return _arrayWithoutHoles45(arr) || _iterableToArray45(arr) || _unsupportedIterableToArray59(arr) || _nonIterableSpread45();
}
function _nonIterableSpread45() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray59(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray59(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray59(o, minLen);
}
function _iterableToArray45(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles45(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray59(arr);
}
function _arrayLikeToArray59(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral78(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var closetItems = $items(_templateObject779 || (_templateObject779 = _taggedTemplateLiteral78(["4-d camera, sand dollar, unfinished ice sculpture"])));
var retrieveItems = $items(_templateObject2170 || (_templateObject2170 = _taggedTemplateLiteral78(["Half a Purse, seal tooth, The Jokester's gun"])));
var latteRefreshed = false;
var attemptCompletingBarfQuest = true;
var snojoConfigured = false;
function voterSetup() {
  var initPriority = /* @__PURE__ */ new Map([["Meat Drop: +30", 0.3 * ((baseMeat + 750) * embezzlerCount() + baseMeat * (estimatedGarboTurns() - embezzlerCount()))], ["Item Drop: +15", 0.15 * (4 * 100 * 0.3 * embezzlerCount() + 3 * 200 * 0.15 * (estimatedGarboTurns() - embezzlerCount()))], ["Adventures: +1", globalOptions.ascend ? 0 : get("valueOfAdventure")], ["Familiar Experience: +2", 8], ["Monster Level: +10", 5], ["".concat((0, import_kolmafia86.myPrimestat)(), " Percent: +25"), 3], ["Experience (".concat((0, import_kolmafia86.myPrimestat)(), "): +4"), 2], ["Meat Drop: -30", -2], ["Item Drop: -15", -2], ["Familiar Experience: -2", -2]]);
  if (!get("voteAlways") && !get("_voteToday")) {
    var availableInitiatives = new Map(Object.keys((0, import_kolmafia86.votingBoothInitiatives)((0, import_kolmafia86.myClass)(), (0, import_kolmafia86.myPath)(), (0, import_kolmafia86.myDaycount)())).map(function(init2) {
      var _initPriority$get;
      var val = (_initPriority$get = initPriority.get(init2)) !== null && _initPriority$get !== void 0 ? _initPriority$get : 0;
      return [init2, val];
    }));
    var initiativeValue = 2 * Math.max.apply(Math, _toConsumableArray45(availableInitiatives.values()));
    var fightValue = 3 * globalOptions.prefs.valueOfFreeFight;
    var ballotValue = initiativeValue + fightValue;
    if (ballotValue > (0, import_kolmafia86.mallPrice)($item(_templateObject3147 || (_templateObject3147 = _taggedTemplateLiteral78(["absentee voter ballot"])))) && acquire(1, $item(_templateObject4133 || (_templateObject4133 = _taggedTemplateLiteral78(["absentee voter ballot"]))), ballotValue, false)) {
      (0, import_kolmafia86.visitUrl)("inv_use.php?which=3&whichitem=9991&pwd=".concat((0, import_kolmafia86.myHash)()));
    } else
      return;
  }
  var voterValueTable = [{
    monster: $monster(_templateObject5127 || (_templateObject5127 = _taggedTemplateLiteral78(["terrible mutant"]))),
    value: garboValue($item(_templateObject6106 || (_templateObject6106 = _taggedTemplateLiteral78(["glob of undifferentiated tissue"])))) + 10
  }, {
    monster: $monster(_templateObject780 || (_templateObject780 = _taggedTemplateLiteral78(["angry ghost"]))),
    value: garboValue($item(_templateObject870 || (_templateObject870 = _taggedTemplateLiteral78(["ghostly ectoplasm"])))) * 1.11
  }, {
    monster: $monster(_templateObject966 || (_templateObject966 = _taggedTemplateLiteral78(["government bureaucrat"]))),
    value: garboValue($item(_templateObject1056 || (_templateObject1056 = _taggedTemplateLiteral78(["absentee voter ballot"])))) * 0.05 + 75 * 0.25 + 50
  }, {
    monster: $monster(_templateObject1148 || (_templateObject1148 = _taggedTemplateLiteral78(["annoyed snake"]))),
    value: (0, import_kolmafia86.gamedayToInt)()
  }, {
    monster: $monster(_templateObject1247 || (_templateObject1247 = _taggedTemplateLiteral78(["slime blob"]))),
    value: 95 - (0, import_kolmafia86.gamedayToInt)()
  }];
  (0, import_kolmafia86.visitUrl)("place.php?whichplace=town_right&action=townright_vote");
  var votingMonsterPriority = voterValueTable.sort(function(a, b) {
    return b.value - a.value;
  }).map(function(element) {
    return element.monster.name;
  });
  var monsterVote = votingMonsterPriority.indexOf(get("_voteMonster1")) < votingMonsterPriority.indexOf(get("_voteMonster2")) ? 1 : 2;
  var voteLocalPriorityArr = [1, 2, 3, 4].map(function(index) {
    var _initPriority$get2;
    return {
      urlString: index - 1,
      value: (_initPriority$get2 = initPriority.get(get("_voteLocal".concat(index)))) !== null && _initPriority$get2 !== void 0 ? _initPriority$get2 : get("_voteLocal".concat(index)).includes("-") ? -1 : 1
    };
  });
  var init = maxBy(voteLocalPriorityArr, "value").urlString;
  (0, import_kolmafia86.visitUrl)("choice.php?option=1&whichchoice=1331&g=".concat(monsterVote, "&local[]=").concat(init, "&local[]=").concat(init));
}
function pantogram2() {
  if (!Pantogram_exports.have() || Pantogram_exports.havePants())
    return;
  var pantogramValue;
  if (have($item(_templateObject1341 || (_templateObject1341 = _taggedTemplateLiteral78(["repaid diaper"])))) && have($familiar(_templateObject1438 || (_templateObject1438 = _taggedTemplateLiteral78(["Robortender"]))))) {
    var expectedBarfTurns = globalOptions.nobarf ? 0 : estimatedGarboTurns() - digitizedMonstersRemaining() - embezzlerCount();
    pantogramValue = 100 * expectedBarfTurns;
  } else {
    var lepMult = findLeprechaunMultiplier(meatFamiliar());
    var lepBonus = 2 * lepMult + Math.sqrt(lepMult);
    var totalPantsValue = function(pants2) {
      return get2("Meat Drop", pants2) + get2("Familiar Weight", pants2) * lepBonus;
    };
    var alternativePants2 = import_kolmafia86.Item.all().filter(function(item9) {
      return have(item9) && (0, import_kolmafia86.toSlot)(item9) === $slot(_templateObject1536 || (_templateObject1536 = _taggedTemplateLiteral78(["pants"])));
    }).map(function(pants2) {
      return totalPantsValue(pants2);
    });
    var bestPantsValue = Math.max.apply(Math, [0].concat(_toConsumableArray45(alternativePants2)));
    pantogramValue = (100 + 0.6 * baseMeat - bestPantsValue * baseMeat / 100) * estimatedGarboTurns();
  }
  var cloverPrice = Math.min.apply(Math, _toConsumableArray45($items(_templateObject1636 || (_templateObject1636 = _taggedTemplateLiteral78(["ten-leaf clover, disassembled clover"]))).map(function(item9) {
    return (0, import_kolmafia86.mallPrice)(item9);
  })));
  if (cloverPrice + (0, import_kolmafia86.mallPrice)($item(_templateObject1736 || (_templateObject1736 = _taggedTemplateLiteral78(["porquoise"])))) > pantogramValue) {
    return;
  }
  acquire(1, $item(_templateObject1835 || (_templateObject1835 = _taggedTemplateLiteral78(["porquoise"]))), pantogramValue - cloverPrice, false);
  if (!have($item(_templateObject1935 || (_templateObject1935 = _taggedTemplateLiteral78(["porquoise"])))))
    return;
  (0, import_kolmafia86.retrieveItem)($item(_templateObject2035 || (_templateObject2035 = _taggedTemplateLiteral78(["ten-leaf clover"]))));
  (0, import_kolmafia86.retrieveItem)($item(_templateObject2171 || (_templateObject2171 = _taggedTemplateLiteral78(["bubblin' crude"]))));
  Pantogram_exports.makePants((0, import_kolmafia86.myPrimestat)().toString(), "Sleaze Resistance: 2", "MP Regen Max: 15", "Drops Items: true", "Meat Drop: 60");
}
function nepQuest() {
  if (!(get("neverendingPartyAlways") || get("_neverendingPartyToday")))
    return;
  if (get("_questPartyFair") === "unstarted") {
    (0, import_kolmafia86.visitUrl)((0, import_kolmafia86.toUrl)($location(_templateObject2233 || (_templateObject2233 = _taggedTemplateLiteral78(["The Neverending Party"])))));
    if (["food", "booze", "trash", "dj"].includes(get("_questPartyFairQuest"))) {
      (0, import_kolmafia86.runChoice)(1);
    } else {
      (0, import_kolmafia86.runChoice)(2);
    }
  }
  if (["food", "booze"].includes(get("_questPartyFairQuest"))) {
    (0, import_kolmafia86.print)("Gerald/ine quest!", HIGHLIGHT);
    globalOptions.clarasBellClaimed = true;
  }
}
function completeBarfQuest() {
  if (!attemptCompletingBarfQuest)
    return;
  if (get("questEStGiveMeFuel") === "started") {
    var globuleCosts = (0, import_kolmafia86.retrievePrice)($item(_templateObject2331 || (_templateObject2331 = _taggedTemplateLiteral78(["toxic globule"]))), 20);
    if (globuleCosts < 3 * garboValue($item(_templateObject2431 || (_templateObject2431 = _taggedTemplateLiteral78(["FunFunds\u2122"]))))) {
      (0, import_kolmafia86.print)("The cost of 20 toxic globules (".concat(globuleCosts, ") is less than the profits expected from 3 FunFunds\u2122 (").concat(3 * garboValue($item(_templateObject2531 || (_templateObject2531 = _taggedTemplateLiteral78(["FunFunds\u2122"])))), "). Proceeding to acquire toxic globules."), "green");
      attemptCompletingBarfQuest = acquire(20, $item(_templateObject2631 || (_templateObject2631 = _taggedTemplateLiteral78(["toxic globule"]))), 1.5 * globuleCosts / 20, false) >= 20;
    } else {
      attemptCompletingBarfQuest = false;
      (0, import_kolmafia86.print)("The cost of 20 toxic globules (".concat(globuleCosts, ") exceeds the profits expected from 3 FunFunds\u2122 (").concat(3 * garboValue($item(_templateObject2729 || (_templateObject2729 = _taggedTemplateLiteral78(["FunFunds\u2122"])))), "). Consider farming some globules yourself."), "red");
    }
  }
  if (get("questEStSuperLuber") === "step2" || get("questEStGiveMeFuel") === "step1") {
    (0, import_kolmafia86.print)("Completing Barf Quest", "blue");
    (0, import_kolmafia86.visitUrl)("place.php?whichplace=airport_stench&action=airport3_kiosk");
    (0, import_kolmafia86.visitUrl)("choice.php?whichchoice=1066&pwd&option=3");
  }
  return;
}
function checkBarfQuest() {
  var _page$match$2$match$, _page$match, _page$match$2$match$2, _page$match2;
  var page = (0, import_kolmafia86.visitUrl)("place.php?whichplace=airport_stench&action=airport3_kiosk");
  if (page.includes("Current Assignment")) {
    return completeBarfQuest();
  }
  if (!page.includes("Available Assignments")) {
    _set("questEStSuperLuber", "unstarted");
    _set("questEStGiveMeFuel", "unstarted");
    return;
  }
  var targets = globalOptions.nobarf ? ["Electrical Maintenance"] : ["Track Maintenance", "Electrical Maintenance"];
  var quests = [(_page$match$2$match$ = (_page$match = page.match("(width=250>)(.*?)(value=1>)")) === null || _page$match === void 0 || (_page$match = _page$match[2]) === null || _page$match === void 0 || (_page$match = _page$match.match("(<b>)(.*?)(</b>)")) === null || _page$match === void 0 ? void 0 : _page$match[2]) !== null && _page$match$2$match$ !== void 0 ? _page$match$2$match$ : "", (_page$match$2$match$2 = (_page$match2 = page.match("(value=1>)(.*?)(value=2>)")) === null || _page$match2 === void 0 || (_page$match2 = _page$match2[2]) === null || _page$match2 === void 0 || (_page$match2 = _page$match2.match("(<b>)(.*?)(</b>)")) === null || _page$match2 === void 0 ? void 0 : _page$match2[2]) !== null && _page$match$2$match$2 !== void 0 ? _page$match$2$match$2 : ""];
  (0, import_kolmafia86.print)("Barf Quests Available:", "blue");
  quests.forEach(function(quest) {
    return (0, import_kolmafia86.print)(quest, "blue");
  });
  if (!targets.some(function(target2) {
    return page.includes(target2);
  })) {
    (0, import_kolmafia86.print)("No suitable Barf Quests available.", "red");
    return;
  }
  for (var _i = 0, _targets = targets; _i < _targets.length; _i++) {
    var target = _targets[_i];
    var _iterator = _createForOfIteratorHelper32(quests.entries()), _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done; ) {
        var _step$value = _slicedToArray26(_step.value, 2), idx = _step$value[0], qst = _step$value[1];
        if (target === qst) {
          (0, import_kolmafia86.print)("Accepting Barf Quest: ".concat(qst), "blue");
          (0, import_kolmafia86.visitUrl)("choice.php?whichchoice=1066&pwd&option=".concat(idx + 1));
          return completeBarfQuest();
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
  return;
}
function configureSnojo() {
  if (snojoConfigured)
    return;
  var options = /* @__PURE__ */ new Map([[10 / 7 * garboValue($item(_templateObject2826 || (_templateObject2826 = _taggedTemplateLiteral78(["ancient medicinal herbs"])))), 1], [10 / 7 * garboValue($item(_templateObject2926 || (_templateObject2926 = _taggedTemplateLiteral78(["ice rice"])))), 2], [10 / 7 * garboValue($item(_templateObject3024 || (_templateObject3024 = _taggedTemplateLiteral78(["iced plum wine"])))), 3]]);
  if (!globalOptions.ascend) {
    if (get("snojoMuscleWins") < 50) {
      options.set((7 * garboValue($item(_templateObject3148 || (_templateObject3148 = _taggedTemplateLiteral78(["ancient medicinal herbs"])))) + garboValue($item(_templateObject3226 || (_templateObject3226 = _taggedTemplateLiteral78(["training scroll:  Shattering Punch"]))))) / 5, 1);
    }
    if (get("snojoMysticalityWins") < 50) {
      options.set((7 * garboValue($item(_templateObject3325 || (_templateObject3325 = _taggedTemplateLiteral78(["ice rice"])))) + garboValue($item(_templateObject3424 || (_templateObject3424 = _taggedTemplateLiteral78(["training scroll:  Snokebomb"]))))) / 5, 2);
    }
    if (get("snojoMoxieWins") < 50) {
      options.set((7 * garboValue($item(_templateObject3523 || (_templateObject3523 = _taggedTemplateLiteral78(["iced plum wine"])))) + garboValue($item(_templateObject3620 || (_templateObject3620 = _taggedTemplateLiteral78(["training scroll:  Shivering Monkey Technique"]))))) / 5, 3);
    }
  }
  var bestProfit = Math.max.apply(Math, _toConsumableArray45(options.keys()));
  var option = options.get(bestProfit);
  if (option) {
    (0, import_kolmafia86.visitUrl)("place.php?whichplace=snojo&action=snojo_controller");
    (0, import_kolmafia86.runChoice)(option);
    snojoConfigured = true;
  }
}
var DailyTasks = [
  {
    name: "Chibi Buddy",
    ready: function() {
      return have($item(_templateObject3720 || (_templateObject3720 = _taggedTemplateLiteral78(["ChibiBuddy\u2122 (on)"])))) || have($item(_templateObject3819 || (_templateObject3819 = _taggedTemplateLiteral78(["ChibiBuddy\u2122 (off)"]))));
    },
    completed: function() {
      return get("_chibiChanged", true);
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("chibi chat");
    }
  },
  {
    name: "Refresh Latte",
    ready: function() {
      return have($item(_templateObject3918 || (_templateObject3918 = _taggedTemplateLiteral78(["latte lovers member's mug"]))));
    },
    completed: function() {
      return latteRefreshed;
    },
    do: function() {
      (0, import_kolmafia86.visitUrl)("main.php?latte=1", false);
      latteRefreshed = true;
    }
  },
  {
    name: "Unlock Cemetery",
    ready: function() {
      return (0, import_kolmafia86.guildStoreAvailable)();
    },
    completed: function() {
      return (0, import_kolmafia86.canAdventure)($location(_templateObject4018 || (_templateObject4018 = _taggedTemplateLiteral78(["The Unquiet Garves"]))));
    },
    do: function() {
      return (0, import_kolmafia86.visitUrl)("guild.php?place=scg");
    },
    limit: {
      skip: 3
    }
    // Sometimes need to cycle through some dialogue
  },
  {
    name: "Unlock Woods",
    ready: function() {
      return (0, import_kolmafia86.guildStoreAvailable)() && have($item(_templateObject4134 || (_templateObject4134 = _taggedTemplateLiteral78(["bitchin' meatcar"]))));
    },
    completed: function() {
      return (0, import_kolmafia86.canAdventure)($location(_templateObject4220 || (_templateObject4220 = _taggedTemplateLiteral78(["The Spooky Forest"]))));
    },
    do: function() {
      (0, import_kolmafia86.visitUrl)("guild.php?place=paco");
      if ((0, import_kolmafia86.handlingChoice)())
        (0, import_kolmafia86.runChoice)(1);
    },
    limit: {
      skip: 3
    }
    // Sometimes need to cycle through some dialogue
  },
  {
    name: "Configure I Voted! Sticker",
    completed: function() {
      return have($item(_templateObject4320 || (_templateObject4320 = _taggedTemplateLiteral78(['"I Voted!" sticker']))));
    },
    do: voterSetup
  },
  {
    name: "Configure Pantogram",
    ready: function() {
      return Pantogram_exports.have();
    },
    completed: function() {
      return Pantogram_exports.havePants();
    },
    do: pantogram2
  },
  {
    name: "Configure Fourth of May Cosplay Saber",
    ready: function() {
      return have($item(_templateObject4419 || (_templateObject4419 = _taggedTemplateLiteral78(["Fourth of May Cosplay Saber"]))));
    },
    completed: function() {
      return get("_saberMod") !== 0;
    },
    do: function() {
      (0, import_kolmafia86.visitUrl)("main.php?action=may4");
      (0, import_kolmafia86.runChoice)(4);
    }
  },
  {
    name: "Bastille Battalion",
    ready: function() {
      return have($item(_templateObject4518 || (_templateObject4518 = _taggedTemplateLiteral78(["Bastille Battalion control rig"]))));
    },
    completed: function() {
      return get("_bastilleGames") !== 0;
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("bastille myst brutalist gesture");
    }
  },
  {
    name: "11th Precinct",
    ready: function() {
      return get("hasDetectiveSchool");
    },
    completed: function() {
      return get("_detectiveCasesCompleted") >= 3;
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("Detective Solver.ash");
    }
  },
  {
    name: "Getaway Campsite Buffs",
    ready: function() {
      return get("getawayCampsiteUnlocked");
    },
    completed: function() {
      return get("_campAwayCloudBuffs") + get("_campAwaySmileBuffs") === 4;
    },
    do: function() {
      return (0, import_kolmafia86.visitUrl)("place.php?whichplace=campaway&action=campaway_sky");
    },
    limit: {
      skip: 4
    }
  },
  {
    name: "Verify Horsery",
    completed: function() {
      return get("horseryAvailable");
    },
    do: function() {
      (0, import_kolmafia86.visitUrl)("place.php?whichplace=town_right");
    }
  },
  {
    name: "Prepare Horsery",
    after: ["Verify Horsery"],
    ready: function() {
      return get("horseryAvailable");
    },
    completed: function() {
      return get("_horsery") === "dark horse";
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("horsery dark");
    }
  },
  {
    name: "Beach Comb One-Day",
    ready: function() {
      return have($item(_templateObject4616 || (_templateObject4616 = _taggedTemplateLiteral78(["piece of driftwood"])))) && !have($item(_templateObject4716 || (_templateObject4716 = _taggedTemplateLiteral78(["Beach Comb"]))));
    },
    completed: function() {
      return have($item(_templateObject4816 || (_templateObject4816 = _taggedTemplateLiteral78(["driftwood beach comb"]))));
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject4916 || (_templateObject4916 = _taggedTemplateLiteral78(["piece of driftwood"]))));
    }
  },
  {
    name: "Beach Comb Buff",
    ready: function() {
      return BeachComb_exports.available();
    },
    completed: function() {
      return !BeachComb_exports.headAvailable("FAMILIAR") || BeachComb_exports.freeCombs() < 1;
    },
    do: function() {
      return BeachComb_exports.tryHead($effect(_templateObject5016 || (_templateObject5016 = _taggedTemplateLiteral78(["Do I Know You From Somewhere?"]))));
    }
  },
  {
    name: "Beach Comb Free Walks",
    ready: function() {
      return BeachComb_exports.available();
    },
    completed: function() {
      return BeachComb_exports.freeCombs() < 1;
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("combo ".concat(11 - get("_freeBeachWalksUsed")));
    }
  },
  {
    name: "Clan Fortune Buff",
    ready: function() {
      return have($item(_templateObject5128 || (_templateObject5128 = _taggedTemplateLiteral78(["Clan VIP Lounge key"])))) && (0, import_kolmafia86.getClanLounge)()["Clan Carnival Game"] !== void 0;
    },
    completed: function() {
      return get("_clanFortuneBuffUsed");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("fortune buff meat");
    }
  },
  {
    name: $item(_templateObject5220 || (_templateObject5220 = _taggedTemplateLiteral78(["defective Game Grid token"]))).name,
    completed: function() {
      return get("_defectiveTokenUsed");
    },
    do: function() {
      return withStash([$item(_templateObject5320 || (_templateObject5320 = _taggedTemplateLiteral78(["defective Game Grid token"])))], function() {
        return (0, import_kolmafia86.use)(1, $item(_templateObject5418 || (_templateObject5418 = _taggedTemplateLiteral78(["defective Game Grid token"]))));
      });
    }
  },
  {
    name: $item(_templateObject5517 || (_templateObject5517 = _taggedTemplateLiteral78(["Glenn's golden dice"]))).name,
    ready: function() {
      return have($item(_templateObject5616 || (_templateObject5616 = _taggedTemplateLiteral78(["Glenn's golden dice"]))));
    },
    completed: function() {
      return get("_glennGoldenDiceUsed");
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject5715 || (_templateObject5715 = _taggedTemplateLiteral78(["Glenn's golden dice"]))));
    }
  },
  {
    name: "Clan pool table",
    ready: function() {
      return (0, import_kolmafia86.getClanLounge)()["Clan pool table"] !== void 0;
    },
    completed: function() {
      return get("_poolGames") >= 3;
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("pool aggressive");
    },
    limit: {
      skip: 3
    }
  },
  {
    name: "Daycare",
    ready: function() {
      return get("daycareOpen") || get("_daycareToday");
    },
    completed: function() {
      return get("_daycareSpa");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("daycare mysticality");
    }
  },
  {
    name: $item(_templateObject5815 || (_templateObject5815 = _taggedTemplateLiteral78(["redwood rain stick"]))).name,
    ready: function() {
      return have($item(_templateObject5915 || (_templateObject5915 = _taggedTemplateLiteral78(["redwood rain stick"]))));
    },
    completed: function() {
      return get("_redwoodRainStickUsed");
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject6014 || (_templateObject6014 = _taggedTemplateLiteral78(["redwood rain stick"]))));
    }
  },
  {
    name: "Witchess Puzzle Champ",
    ready: function() {
      return Witchess_exports.have();
    },
    completed: function() {
      return get("_witchessBuff");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("up Puzzle Champ");
    }
  },
  {
    name: "Friar's Blessing",
    ready: function() {
      return questStep("questL06Friar") === 999;
    },
    completed: function() {
      return get("friarsBlessingReceived");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("friars familiar");
    }
  },
  {
    name: $item(_templateObject6118 || (_templateObject6118 = _taggedTemplateLiteral78(["The Legendary Beat"]))).name,
    ready: function() {
      return have($item(_templateObject6218 || (_templateObject6218 = _taggedTemplateLiteral78(["The Legendary Beat"]))));
    },
    completed: function() {
      return get("_legendaryBeat");
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject6317 || (_templateObject6317 = _taggedTemplateLiteral78(["The Legendary Beat"]))));
    }
  },
  {
    name: $item(_templateObject6414 || (_templateObject6414 = _taggedTemplateLiteral78(["portable steam unit"]))).name,
    ready: function() {
      return have($item(_templateObject6513 || (_templateObject6513 = _taggedTemplateLiteral78(["portable steam unit"]))));
    },
    completed: function() {
      return get("_portableSteamUnitUsed");
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject6613 || (_templateObject6613 = _taggedTemplateLiteral78(["portable steam unit"]))));
    }
  },
  {
    name: "Summon Demon",
    ready: function() {
      return !!get("demonName2") && get("questL11Manor") === "finished";
    },
    completed: function() {
      return get("demonSummoned");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("summon Preternatural Greed");
    }
  },
  {
    name: "Source Terminal Enhance",
    ready: function() {
      return SourceTerminal_exports.have();
    },
    completed: function() {
      return SourceTerminal_exports.enhanceUsesRemaining() === 0;
    },
    do: function() {
      return SourceTerminal_exports.enhance($effect(_templateObject6713 || (_templateObject6713 = _taggedTemplateLiteral78(["meat.enh"]))));
    },
    limit: {
      skip: 3
    }
  },
  {
    name: "Source Terminal Enquire",
    ready: function() {
      return SourceTerminal_exports.have();
    },
    completed: function() {
      return get("sourceTerminalEnquiry") === "familiar.enq";
    },
    do: function() {
      return SourceTerminal_exports.enquiry($effect(_templateObject6812 || (_templateObject6812 = _taggedTemplateLiteral78(["familiar.enq"]))));
    }
  },
  {
    name: "Mad Tea Party Buff",
    ready: function() {
      return !get("_madTeaParty");
    },
    completed: function() {
      return get("_madTeaParty");
    },
    do: function() {
      return (0, import_kolmafia86.cliExecute)("hatter 22");
    },
    acquire: [{
      item: $item(_templateObject6912 || (_templateObject6912 = _taggedTemplateLiteral78(["filthy knitted dread sack"])))
    }],
    effects: [$effect(_templateObject7011 || (_templateObject7011 = _taggedTemplateLiteral78(["Down the Rabbit Hole"])))]
  },
  {
    name: "SongBoom Buff",
    ready: function() {
      return SongBoom_exports.have() && SongBoom_exports.songChangesLeft() > 0 && (0, import_kolmafia86.myInebriety)() <= (0, import_kolmafia86.inebrietyLimit)();
    },
    completed: function() {
      return SongBoom_exports.song() === "Total Eclipse of Your Meat";
    },
    do: function() {
      return SongBoom_exports.setSong("Total Eclipse of Your Meat");
    }
  },
  {
    name: "SongBoom Buff (Drunk)",
    ready: function() {
      return SongBoom_exports.have() && SongBoom_exports.songChangesLeft() > 0 && (0, import_kolmafia86.myInebriety)() > (0, import_kolmafia86.inebrietyLimit)();
    },
    completed: function() {
      return SongBoom_exports.song() === "Food Vibrations";
    },
    do: function() {
      return SongBoom_exports.setSong("Food Vibrations");
    }
  },
  {
    name: "Set Mind Control Device",
    ready: function() {
      return (0, import_kolmafia86.canadiaAvailable)() || (0, import_kolmafia86.gnomadsAvailable)() || have($item(_templateObject7114 || (_templateObject7114 = _taggedTemplateLiteral78(["detuned radio"]))));
    },
    completed: function() {
      return (0, import_kolmafia86.currentMcd)() === ((0, import_kolmafia86.canadiaAvailable)() ? 11 : 10);
    },
    do: function() {
      return (0, import_kolmafia86.changeMcd)((0, import_kolmafia86.canadiaAvailable)() ? 11 : 10);
    }
  },
  {
    name: "Implement [glitch season reward name]",
    ready: function() {
      return have($item(_templateObject7214 || (_templateObject7214 = _taggedTemplateLiteral78(["[glitch season reward name]"]))));
    },
    completed: function() {
      return get("_glitchItemImplemented");
    },
    do: function() {
      return (0, import_kolmafia86.use)($item(_templateObject7314 || (_templateObject7314 = _taggedTemplateLiteral78(["[glitch season reward name]"]))));
    }
  },
  {
    name: "Use BittyCar MeatCart",
    ready: function() {
      return get("_bittycar") !== "meatcar";
    },
    completed: function() {
      return get("_bittycar") === "meatcar";
    },
    do: function() {
      return withStash([$item(_templateObject7413 || (_templateObject7413 = _taggedTemplateLiteral78(["BittyCar MeatCar"])))], function() {
        return (0, import_kolmafia86.use)(1, $item(_templateObject7513 || (_templateObject7513 = _taggedTemplateLiteral78(["BittyCar MeatCar"]))));
      });
    }
  },
  {
    name: "Use BittyCar SoulCar",
    ready: function() {
      return get("_bittycar") !== "meatcar" && get("_bittycar") !== "soulcar";
    },
    completed: function() {
      return get("_bittycar") === "soulcar";
    },
    do: function() {
      return withStash([$item(_templateObject7611 || (_templateObject7611 = _taggedTemplateLiteral78(["BittyCar SoulCar"])))], function() {
        return (0, import_kolmafia86.use)(1, $item(_templateObject7710 || (_templateObject7710 = _taggedTemplateLiteral78(["BittyCar SoulCar"]))));
      });
    }
  },
  {
    name: "Holiday Eldritch Attunement",
    ready: function() {
      return (0, import_kolmafia86.holiday)().includes("Generic Summer Holiday") && !have($effect(_templateObject787 || (_templateObject787 = _taggedTemplateLiteral78(["Eldritch Attunement"])))) && estimatedTentacles() * globalOptions.prefs.valueOfFreeFight > get("valueOfAdventure");
    },
    completed: function() {
      return have($effect(_templateObject797 || (_templateObject797 = _taggedTemplateLiteral78(["Eldritch Attunement"]))));
    },
    do: function() {
      return (0, import_kolmafia86.adv1)($location(_templateObject807 || (_templateObject807 = _taggedTemplateLiteral78(["Generic Summer Holiday Swimming!"]))));
    },
    acquire: [{
      item: $item(_templateObject8114 || (_templateObject8114 = _taggedTemplateLiteral78(["water wings"])))
    }],
    outfit: function() {
      return (0, import_kolmafia86.myInebriety)() > (0, import_kolmafia86.inebrietyLimit)() && have($item(_templateObject8214 || (_templateObject8214 = _taggedTemplateLiteral78(["Drunkula's wineglass"])))) && (0, import_kolmafia86.canEquip)($item(_templateObject8313 || (_templateObject8313 = _taggedTemplateLiteral78(["Drunkula's wineglass"])))) ? {
        offhand: $item(_templateObject8413 || (_templateObject8413 = _taggedTemplateLiteral78(["Drunkula's wineglass"]))),
        acc1: $item(_templateObject8512 || (_templateObject8512 = _taggedTemplateLiteral78(["water wings"]))),
        avoid: $items(_templateObject8610 || (_templateObject8610 = _taggedTemplateLiteral78(["June cleaver"])))
      } : {
        acc1: $item(_templateObject876 || (_templateObject876 = _taggedTemplateLiteral78(["water wings"]))),
        avoid: $items(_templateObject886 || (_templateObject886 = _taggedTemplateLiteral78(["June cleaver"])))
      };
    }
  },
  {
    name: "Check Neverending Party Quest",
    ready: function() {
      return (get("neverendingPartyAlways") || get("_neverendingPartyToday")) && get("_questPartyFair") === "unstarted";
    },
    completed: function() {
      return get("_questPartyFair") !== "unstarted";
    },
    do: nepQuest,
    outfit: function() {
      return (0, import_kolmafia86.myInebriety)() > (0, import_kolmafia86.inebrietyLimit)() && have($item(_templateObject896 || (_templateObject896 = _taggedTemplateLiteral78(["Drunkula's wineglass"])))) && (0, import_kolmafia86.canEquip)($item(_templateObject906 || (_templateObject906 = _taggedTemplateLiteral78(["Drunkula's wineglass"])))) ? {
        offhand: $item(_templateObject9114 || (_templateObject9114 = _taggedTemplateLiteral78(["Drunkula's wineglass"]))),
        avoid: $items(_templateObject9214 || (_templateObject9214 = _taggedTemplateLiteral78(["June cleaver"])))
      } : {
        avoid: $items(_templateObject9313 || (_templateObject9313 = _taggedTemplateLiteral78(["June cleaver"])))
      };
    }
  },
  {
    name: "Check Barf Mountain Quest",
    ready: function() {
      return get("stenchAirportAlways") || get("_stenchAirportToday");
    },
    completed: function() {
      return !attemptCompletingBarfQuest;
    },
    do: checkBarfQuest
  },
  {
    name: "Configure Snojo",
    ready: function() {
      return get("snojoAvailable") && get("_snojoFreeFights") < 10;
    },
    completed: function() {
      return snojoConfigured;
    },
    do: configureSnojo
  },
  // Final tasks
  {
    name: "Closet Items",
    ready: function() {
      return closetItems.some(function(item9) {
        return (0, import_kolmafia86.itemAmount)(item9);
      });
    },
    completed: function() {
      return closetItems.every(function(item9) {
        return (0, import_kolmafia86.itemAmount)(item9) === 0;
      });
    },
    do: function() {
      return closetItems.forEach(function(item9) {
        return (0, import_kolmafia86.putCloset)((0, import_kolmafia86.itemAmount)(item9), item9);
      });
    }
  },
  {
    name: "Closet Hobo Nickels",
    ready: function() {
      return have($familiar(_templateObject9412 || (_templateObject9412 = _taggedTemplateLiteral78(["Hobo Monkey"])))) || have($item(_templateObject9511 || (_templateObject9511 = _taggedTemplateLiteral78(["hobo nickel"]))), 1e3);
    },
    completed: function() {
      return (0, import_kolmafia86.itemAmount)($item(_templateObject967 || (_templateObject967 = _taggedTemplateLiteral78(["hobo nickel"])))) === 0;
    },
    do: function() {
      return (0, import_kolmafia86.putCloset)((0, import_kolmafia86.itemAmount)($item(_templateObject976 || (_templateObject976 = _taggedTemplateLiteral78(["hobo nickel"])))), $item(_templateObject986 || (_templateObject986 = _taggedTemplateLiteral78(["hobo nickel"]))));
    }
  },
  {
    name: "Retrieve Items",
    ready: function() {
      return retrieveItems.some(function(item9) {
        return (0, import_kolmafia86.itemAmount)(item9) === 0;
      });
    },
    completed: function() {
      return retrieveItems.every(function(item9) {
        return (0, import_kolmafia86.itemAmount)(item9) > 0;
      });
    },
    do: function() {
      return retrieveItems.forEach(function(item9) {
        return (0, import_kolmafia86.retrieveItem)(item9);
      });
    }
  }
];
var DailyQuest = {
  name: "Daily",
  tasks: DailyTasks
};

// src/barfTurn.ts
var _templateObject781;
var _templateObject2174;
var _templateObject3149;
var _templateObject4135;
var _templateObject5129;
var _templateObject6107;
var _templateObject788;
var _templateObject871;
var _templateObject968;
var _templateObject1057;
var _templateObject1149;
var _templateObject1248;
var _templateObject1346;
var _templateObject1439;
var _templateObject1537;
var _templateObject1637;
var _templateObject1737;
var _templateObject1836;
var _templateObject1936;
var _templateObject2036;
var _templateObject2175;
var _templateObject2234;
var _templateObject2333;
var _templateObject2433;
var _templateObject2533;
var _templateObject2633;
var _templateObject2730;
var _templateObject2827;
var _templateObject2927;
var _templateObject3025;
var _templateObject3150;
var _templateObject3227;
var _templateObject3326;
var _templateObject3425;
var _templateObject3524;
var _templateObject3621;
var _templateObject3721;
var _templateObject3820;
var _templateObject3919;
var _templateObject4019;
var _templateObject4136;
var _templateObject4221;
var _templateObject4321;
var _templateObject4420;
var _templateObject4519;
var _templateObject4617;
var _templateObject4717;
var _templateObject4817;
var _templateObject4917;
var _templateObject5017;
var _templateObject5130;
var _templateObject5221;
var _templateObject5321;
var _templateObject5419;
var _templateObject5518;
var _templateObject5617;
var _templateObject5716;
var _templateObject5816;
var _templateObject5916;
var _templateObject6015;
var _templateObject6119;
var _templateObject6219;
var _templateObject6318;
var _templateObject6415;
var _templateObject6514;
var _templateObject6614;
var _templateObject6714;
var _templateObject6813;
var _templateObject6913;
var _templateObject7012;
var _templateObject7115;
var _templateObject7215;
var _templateObject7315;
var _templateObject7414;
var _templateObject7514;
var _templateObject7612;
var _templateObject7711;
var _templateObject789;
var _templateObject798;
var _templateObject808;
var _templateObject8115;
var _templateObject8215;
var _templateObject8314;
var _templateObject8414;
var _templateObject8513;
var _templateObject8611;
var _templateObject877;
var _templateObject887;
var _templateObject897;
var _templateObject907;
function _toConsumableArray46(arr) {
  return _arrayWithoutHoles46(arr) || _iterableToArray46(arr) || _unsupportedIterableToArray60(arr) || _nonIterableSpread46();
}
function _nonIterableSpread46() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray46(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles46(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray60(arr);
}
function _createForOfIteratorHelper33(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray60(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray60(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray60(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray60(o, minLen);
}
function _arrayLikeToArray60(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral79(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var embezzler3 = $monster(_templateObject781 || (_templateObject781 = _taggedTemplateLiteral79(["Knob Goblin Embezzler"])));
function logEmbezzler(encounterType) {
  var isDigitize = encounterType === "Digitize Wanderer";
  isDigitize ? eventLog.digitizedEmbezzlersFought++ : eventLog.initialEmbezzlersFought++;
  eventLog.embezzlerSources.push(isDigitize ? "Digitize" : "Unknown Source");
}
function shouldGoUnderwater() {
  if (!sober())
    return false;
  if ((0, import_kolmafia87.myLevel)() < 11)
    return false;
  if (questStep2("questS01OldGuy") === -1) {
    (0, import_kolmafia87.visitUrl)("place.php?whichplace=sea_oldman&action=oldman_oldman");
  }
  if (!get2("Adventure Underwater") && waterBreathingEquipment.every(function(item9) {
    return !have(item9) || !(0, import_kolmafia87.canEquip)(item9);
  })) {
    return false;
  }
  if (!get2("Underwater Familiar") && familiarWaterBreathingEquipment.every(function(item9) {
    return !have(item9);
  })) {
    return false;
  }
  if (have($item(_templateObject2174 || (_templateObject2174 = _taggedTemplateLiteral79(["envyfish egg"])))) || globalOptions.ascend && get("_envyfishEggUsed"))
    return false;
  if (!(0, import_kolmafia87.canAdventure)($location(_templateObject3149 || (_templateObject3149 = _taggedTemplateLiteral79(["The Briny Deeps"])))))
    return false;
  if ((0, import_kolmafia87.mallPrice)($item(_templateObject4135 || (_templateObject4135 = _taggedTemplateLiteral79(["pulled green taffy"])))) < EMBEZZLER_MULTIPLIER() * get("valueOfAdventure")) {
    return false;
  }
  if (have($effect(_templateObject5129 || (_templateObject5129 = _taggedTemplateLiteral79(["Fishy"])))))
    return true;
  if (have($item(_templateObject6107 || (_templateObject6107 = _taggedTemplateLiteral79(["fishy pipe"])))) && !get("_fishyPipeUsed")) {
    (0, import_kolmafia87.use)($item(_templateObject788 || (_templateObject788 = _taggedTemplateLiteral79(["fishy pipe"]))));
    return have($effect(_templateObject871 || (_templateObject871 = _taggedTemplateLiteral79(["Fishy"]))));
  }
  return false;
}
var steveAdventures = /* @__PURE__ */ new Map([[$location(_templateObject968 || (_templateObject968 = _taggedTemplateLiteral79(["The Haunted Bedroom"]))), [1, 3, 1]], [$location(_templateObject1057 || (_templateObject1057 = _taggedTemplateLiteral79(["The Haunted Nursery"]))), [1, 2, 2, 1, 1]], [$location(_templateObject1149 || (_templateObject1149 = _taggedTemplateLiteral79(["The Haunted Conservatory"]))), [1, 2, 2]], [$location(_templateObject1248 || (_templateObject1248 = _taggedTemplateLiteral79(["The Haunted Billiards Room"]))), [1, 2, 2]], [$location(_templateObject1346 || (_templateObject1346 = _taggedTemplateLiteral79(["The Haunted Wine Cellar"]))), [1, 2, 2, 3]], [$location(_templateObject1439 || (_templateObject1439 = _taggedTemplateLiteral79(["The Haunted Boiler Room"]))), [1, 2, 2]], [$location(_templateObject1537 || (_templateObject1537 = _taggedTemplateLiteral79(["The Haunted Laboratory"]))), [1, 1, 3, 1, 1]]]);
var Sobriety = /* @__PURE__ */ function(Sobriety2) {
  Sobriety2["SOBER"] = "sober";
  Sobriety2["DRUNK"] = "drunk";
  Sobriety2["EITHER"] = "either";
  return Sobriety2;
}(Sobriety || {});
var turns = [{
  name: "Lights Out",
  available: function() {
    var _get3;
    return (0, import_kolmafia87.totalTurnsPlayed)() % 37 === 0 && (0, import_kolmafia87.totalTurnsPlayed)() !== get("lastLightsOutTurn") && (0, import_kolmafia87.canAdventure)((_get3 = get("nextSpookyravenStephenRoom")) !== null && _get3 !== void 0 ? _get3 : $location(_templateObject1637 || (_templateObject1637 = _taggedTemplateLiteral79(["none"]))));
  },
  execute: function() {
    var steveRoom = get("nextSpookyravenStephenRoom");
    var ghostLocation = get("ghostLocation");
    if (steveRoom && (0, import_kolmafia87.canAdventure)(steveRoom) && steveRoom !== ghostLocation) {
      var fightingSteve = steveRoom === $location(_templateObject1737 || (_templateObject1737 = _taggedTemplateLiteral79(["The Haunted Laboratory"])));
      var drunkSpec = sober() ? {} : {
        offhand: $item(_templateObject1836 || (_templateObject1836 = _taggedTemplateLiteral79(["Drunkula's wineglass"])))
      };
      if (fightingSteve)
        embezzlerOutfit(drunkSpec).dress();
      var plan = steveAdventures.get(steveRoom);
      if (plan) {
        withMacro(Macro2.if_($monster(_templateObject1936 || (_templateObject1936 = _taggedTemplateLiteral79(["Stephen Spookyraven"]))), Macro2.basicCombat()).abort(), function() {
          (0, import_kolmafia87.visitUrl)((0, import_kolmafia87.toUrl)(steveRoom));
          var _iterator = _createForOfIteratorHelper33(plan), _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done; ) {
              var choiceValue = _step.value;
              (0, import_kolmafia87.runChoice)(choiceValue);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
          if (fightingSteve || (0, import_kolmafia87.currentRound)())
            (0, import_kolmafia87.runCombat)();
        }, true);
      }
      return (0, import_kolmafia87.totalTurnsPlayed)() === get("lastLightsOutTurn");
    }
    return false;
  },
  spendsTurn: function() {
    return get("nextSpookyravenStephenRoom") === $location(_templateObject2036 || (_templateObject2036 = _taggedTemplateLiteral79(["The Haunted Laboratory"])));
  },
  sobriety: Sobriety.EITHER
}, {
  name: "Proton Ghost",
  available: function() {
    return have($item(_templateObject2175 || (_templateObject2175 = _taggedTemplateLiteral79(["protonic accelerator pack"])))) && get("questPAGhost") !== "unstarted" && !!get("ghostLocation");
  },
  execute: function() {
    var ghostLocation = get("ghostLocation");
    if (!ghostLocation)
      return false;
    var modifier = ghostLocation === $location(_templateObject2234 || (_templateObject2234 = _taggedTemplateLiteral79(["The Icy Peak"]))) ? ["Cold Resistance 5 min"] : [];
    freeFightOutfit({
      modifier: modifier,
      back: $item(_templateObject2333 || (_templateObject2333 = _taggedTemplateLiteral79(["protonic accelerator pack"])))
    }).dress();
    garboAdventure(ghostLocation, Macro2.ghostBustin());
    return get("questPAGhost") === "unstarted";
  },
  spendsTurn: false,
  // Ghost fights are currently hard
  // and they resist physical attacks!
  sobriety: Sobriety.SOBER
}, {
  name: "Vote Wanderer",
  available: function() {
    return have($item(_templateObject2433 || (_templateObject2433 = _taggedTemplateLiteral79(['"I Voted!" sticker'])))) && (0, import_kolmafia87.totalTurnsPlayed)() % 11 === 1 && get("lastVoteMonsterTurn") < (0, import_kolmafia87.totalTurnsPlayed)() && get("_voteFreeFights") < 3;
  },
  execute: function() {
    var isGhost = get("_voteMonster") === $monster(_templateObject2533 || (_templateObject2533 = _taggedTemplateLiteral79(["angry ghost"])));
    var isMutant = get("_voteMonster") === $monster(_templateObject2633 || (_templateObject2633 = _taggedTemplateLiteral79(["terrible mutant"])));
    freeFightOutfit({
      equip: [$item(_templateObject2730 || (_templateObject2730 = _taggedTemplateLiteral79(['"I Voted!" sticker'])))].concat(_toConsumableArray46(!sober() && !isGhost ? $items(_templateObject2827 || (_templateObject2827 = _taggedTemplateLiteral79(["Drunkula's wineglass"]))) : []), _toConsumableArray46(!have($item(_templateObject2927 || (_templateObject2927 = _taggedTemplateLiteral79(["mutant crown"])))) && isMutant ? $items(_templateObject3025 || (_templateObject3025 = _taggedTemplateLiteral79(["mutant arm, mutant legs"]))).filter(function(i) {
        return have(i);
      }) : []))
    }).dress();
    propertyManager.setChoices(wanderer_default.getChoices("wanderer", !isGhost));
    garboAdventureAuto(wanderer_default.getTarget("wanderer", !isGhost), Macro2.basicCombat());
    return get("lastVoteMonsterTurn") === (0, import_kolmafia87.totalTurnsPlayed)();
  },
  spendsTurn: false,
  sobriety: Sobriety.EITHER
}, {
  name: "Digitize Wanderer",
  available: function() {
    return counter_exports.get("Digitize Monster") <= 0;
  },
  execute: function() {
    var isEmbezzler = SourceTerminal_exports.getDigitizeMonster() === embezzler3;
    var start = get("_sourceTerminalDigitizeMonsterCount");
    var underwater2 = isEmbezzler && shouldGoUnderwater();
    var targetLocation = underwater2 ? $location(_templateObject3150 || (_templateObject3150 = _taggedTemplateLiteral79(["The Briny Deeps"]))) : wanderer_default.getTarget("wanderer");
    if (underwater2)
      (0, import_kolmafia87.retrieveItem)($item(_templateObject3227 || (_templateObject3227 = _taggedTemplateLiteral79(["pulled green taffy"]))));
    else
      propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
    isEmbezzler ? embezzlerOutfit({}, targetLocation).dress() : freeFightOutfit().dress();
    garboAdventureAuto(
      targetLocation,
      Macro2.externalIf(underwater2, Macro2.item($item(_templateObject3326 || (_templateObject3326 = _taggedTemplateLiteral79(["pulled green taffy"]))))).meatKill(),
      // Hacky fix for when we fail init to embezzler, who are special monsters
      // Macro autoattacks fail when you lose the jump to special monsters
      Macro2.if_("(monsterid ".concat(embezzler3.id, ") && !gotjump && !(pastround 2)"), Macro2.externalIf(underwater2, Macro2.item($item(_templateObject3425 || (_templateObject3425 = _taggedTemplateLiteral79(["pulled green taffy"]))))).meatKill()).abortWithMsg("Expected a digitized ".concat(SourceTerminal_exports.getDigitizeMonster(), ", but encountered something else."))
    );
    return get("_sourceTerminalDigitizeMonsterCount") !== start;
  },
  spendsTurn: function() {
    var _SourceTerminal$getDi;
    return !((_SourceTerminal$getDi = SourceTerminal_exports.getDigitizeMonster()) !== null && _SourceTerminal$getDi !== void 0 && _SourceTerminal$getDi.attributes.includes("FREE"));
  },
  sobriety: Sobriety.EITHER
}, {
  name: "Guaranteed Kramco",
  available: function() {
    return kramcoGuaranteed() && romanticMonsterImpossible();
  },
  execute: function() {
    freeFightOutfit({
      offhand: $item(_templateObject3524 || (_templateObject3524 = _taggedTemplateLiteral79(["Kramco Sausage-o-Matic\u2122"])))
    }).dress();
    propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
    garboAdventureAuto(wanderer_default.getTarget("wanderer"), Macro2.basicCombat());
    return !kramcoGuaranteed();
  },
  spendsTurn: false,
  sobriety: Sobriety.EITHER
}, {
  name: "Void Monster",
  available: function() {
    return have($item(_templateObject3621 || (_templateObject3621 = _taggedTemplateLiteral79(["cursed magnifying glass"])))) && get("cursedMagnifyingGlassCount") === 13 && get("_voidFreeFights") < 5;
  },
  execute: function() {
    freeFightOutfit({
      offhand: $item(_templateObject3721 || (_templateObject3721 = _taggedTemplateLiteral79(["cursed magnifying glass"])))
    }).dress();
    propertyManager.setChoices(wanderer_default.getChoices("wanderer"));
    garboAdventureAuto(wanderer_default.getTarget("wanderer"), Macro2.basicCombat());
    return get("cursedMagnifyingGlassCount") === 0;
  },
  spendsTurn: false,
  sobriety: Sobriety.EITHER
}, {
  name: "Envyfish Egg",
  available: function() {
    return have($item(_templateObject3820 || (_templateObject3820 = _taggedTemplateLiteral79(["envyfish egg"])))) && get("envyfishMonster") === embezzler3 && !get("_envyfishEggUsed");
  },
  execute: function() {
    embezzlerOutfit().dress();
    withMacro(Macro2.meatKill(), function() {
      return (0, import_kolmafia87.use)($item(_templateObject3919 || (_templateObject3919 = _taggedTemplateLiteral79(["envyfish egg"]))));
    }, true);
    return get("_envyfishEggUsed");
  },
  spendsTurn: true,
  sobriety: Sobriety.EITHER
}, {
  name: "Cheese Wizard Fondeluge",
  available: function() {
    return have($skill(_templateObject4019 || (_templateObject4019 = _taggedTemplateLiteral79(["Fondeluge"])))) && !have($effect(_templateObject4136 || (_templateObject4136 = _taggedTemplateLiteral79(["Everything Looks Yellow"])))) && romanticMonsterImpossible();
  },
  execute: function() {
    var usingDuplicate = SourceTerminal_exports.have() && SourceTerminal_exports.duplicateUsesRemaining() > 0;
    propertyManager.setChoices(wanderer_default.getChoices("yellow ray"));
    var location = wanderer_default.getTarget("yellow ray");
    freeFightOutfit({}, {
      location: location,
      allowAttackFamiliars: !usingDuplicate
    }).dress();
    if (usingDuplicate) {
      SourceTerminal_exports.educate([$skill(_templateObject4221 || (_templateObject4221 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject4321 || (_templateObject4321 = _taggedTemplateLiteral79(["Duplicate"])))]);
    }
    var macro = Macro2.if_(embezzler3, Macro2.meatKill()).familiarActions().externalIf(usingDuplicate, Macro2.trySkill($skill(_templateObject4420 || (_templateObject4420 = _taggedTemplateLiteral79(["Duplicate"]))))).skill($skill(_templateObject4519 || (_templateObject4519 = _taggedTemplateLiteral79(["Fondeluge"]))));
    garboAdventureAuto(location, macro);
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject4617 || (_templateObject4617 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject4717 || (_templateObject4717 = _taggedTemplateLiteral79(["Digitize"])))]);
    }
    return have($effect(_templateObject4817 || (_templateObject4817 = _taggedTemplateLiteral79(["Everything Looks Yellow"]))));
  },
  spendsTurn: false,
  sobriety: Sobriety.SOBER
}, {
  name: "Spit Acid",
  available: function() {
    return have($item(_templateObject4917 || (_templateObject4917 = _taggedTemplateLiteral79(["Jurassic Parka"])))) && !have($effect(_templateObject5017 || (_templateObject5017 = _taggedTemplateLiteral79(["Everything Looks Yellow"])))) && romanticMonsterImpossible();
  },
  execute: function() {
    var usingDuplicate = SourceTerminal_exports.have() && SourceTerminal_exports.duplicateUsesRemaining() > 0;
    propertyManager.setChoices(wanderer_default.getChoices("yellow ray"));
    var location = wanderer_default.getTarget("yellow ray");
    freeFightOutfit({
      shirt: $items(_templateObject5130 || (_templateObject5130 = _taggedTemplateLiteral79(["Jurassic Parka"])))
    }, {
      location: location,
      allowAttackFamiliars: !usingDuplicate
    }).dress();
    (0, import_kolmafia87.cliExecute)("parka dilophosaur");
    if (usingDuplicate) {
      SourceTerminal_exports.educate([$skill(_templateObject5221 || (_templateObject5221 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject5321 || (_templateObject5321 = _taggedTemplateLiteral79(["Duplicate"])))]);
    }
    var macro = Macro2.if_(embezzler3, Macro2.meatKill()).familiarActions().externalIf(usingDuplicate, Macro2.trySkill($skill(_templateObject5419 || (_templateObject5419 = _taggedTemplateLiteral79(["Duplicate"]))))).skill($skill(_templateObject5518 || (_templateObject5518 = _taggedTemplateLiteral79(["Spit jurassic acid"]))));
    garboAdventureAuto(location, macro);
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject5617 || (_templateObject5617 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject5716 || (_templateObject5716 = _taggedTemplateLiteral79(["Digitize"])))]);
    }
    return have($effect(_templateObject5816 || (_templateObject5816 = _taggedTemplateLiteral79(["Everything Looks Yellow"]))));
  },
  spendsTurn: false,
  sobriety: Sobriety.SOBER
}, {
  name: "Pig Skinner Free-For-All",
  available: function() {
    return have($skill(_templateObject5916 || (_templateObject5916 = _taggedTemplateLiteral79(["Free-For-All"])))) && !have($effect(_templateObject6015 || (_templateObject6015 = _taggedTemplateLiteral79(["Everything Looks Red"])))) && romanticMonsterImpossible();
  },
  execute: function() {
    propertyManager.setChoices(wanderer_default.getChoices("freefight"));
    var location = wanderer_default.getTarget("freefight");
    freeFightOutfit({}, {
      location: location
    }).dress();
    var macro = Macro2.if_(embezzler3, Macro2.meatKill()).familiarActions().skill($skill(_templateObject6119 || (_templateObject6119 = _taggedTemplateLiteral79(["Free-For-All"]))));
    garboAdventureAuto(location, macro);
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject6219 || (_templateObject6219 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject6318 || (_templateObject6318 = _taggedTemplateLiteral79(["Digitize"])))]);
    }
    return have($effect(_templateObject6415 || (_templateObject6415 = _taggedTemplateLiteral79(["Everything Looks Red"]))));
  },
  spendsTurn: false,
  sobriety: Sobriety.SOBER
}, {
  name: "Shocking Lick",
  available: function() {
    return get("shockingLickCharges") > 0 && romanticMonsterImpossible();
  },
  execute: function() {
    var curLicks = get("shockingLickCharges");
    var usingDuplicate = SourceTerminal_exports.have() && SourceTerminal_exports.duplicateUsesRemaining() > 0;
    propertyManager.setChoices(wanderer_default.getChoices("yellow ray"));
    var location = wanderer_default.getTarget("yellow ray");
    if (usingDuplicate) {
      SourceTerminal_exports.educate([$skill(_templateObject6514 || (_templateObject6514 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject6614 || (_templateObject6614 = _taggedTemplateLiteral79(["Duplicate"])))]);
    }
    freeFightOutfit({}, {
      location: location,
      allowAttackFamiliars: !usingDuplicate
    }).dress();
    var macro = Macro2.if_(embezzler3, Macro2.meatKill()).familiarActions().externalIf(usingDuplicate, Macro2.trySkill($skill(_templateObject6714 || (_templateObject6714 = _taggedTemplateLiteral79(["Duplicate"]))))).skill($skill(_templateObject6813 || (_templateObject6813 = _taggedTemplateLiteral79(["Shocking Lick"]))));
    garboAdventureAuto(location, macro);
    if (SourceTerminal_exports.have()) {
      SourceTerminal_exports.educate([$skill(_templateObject6913 || (_templateObject6913 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject7012 || (_templateObject7012 = _taggedTemplateLiteral79(["Digitize"])))]);
    }
    return get("shockingLickCharges") === curLicks - 1;
  },
  spendsTurn: false,
  sobriety: Sobriety.SOBER
}, {
  name: "Map for Pills",
  available: function() {
    return globalOptions.ascend && clamp((0, import_kolmafia87.myAdventures)() - digitizedMonstersRemaining(), 1, (0, import_kolmafia87.myAdventures)()) <= (0, import_kolmafia87.availableAmount)($item(_templateObject7115 || (_templateObject7115 = _taggedTemplateLiteral79(["Map to Safety Shelter Grimace Prime"]))));
  },
  execute: function() {
    var choiceToSet = (0, import_kolmafia87.availableAmount)($item(_templateObject7215 || (_templateObject7215 = _taggedTemplateLiteral79(["distention pill"])))) < (0, import_kolmafia87.availableAmount)($item(_templateObject7315 || (_templateObject7315 = _taggedTemplateLiteral79(["synthetic dog hair pill"])))) + (0, import_kolmafia87.availableAmount)($item(_templateObject7414 || (_templateObject7414 = _taggedTemplateLiteral79(["Map to Safety Shelter Grimace Prime"])))) ? 1 : 2;
    setChoice(536, choiceToSet);
    ensureEffect($effect(_templateObject7514 || (_templateObject7514 = _taggedTemplateLiteral79(["Transpondent"]))));
    (0, import_kolmafia87.use)($item(_templateObject7612 || (_templateObject7612 = _taggedTemplateLiteral79(["Map to Safety Shelter Grimace Prime"]))));
    return true;
  },
  spendsTurn: true,
  sobriety: Sobriety.DRUNK
}, {
  name: "Barf",
  available: function() {
    return true;
  },
  execute: function() {
    var lubing = get("dinseyRollercoasterNext") && have($item(_templateObject7711 || (_templateObject7711 = _taggedTemplateLiteral79(["lube-shoes"]))));
    barfOutfit(lubing ? {
      equip: $items(_templateObject789 || (_templateObject789 = _taggedTemplateLiteral79(["lube-shoes"])))
    } : {}).dress();
    garboAdventureAuto($location(_templateObject798 || (_templateObject798 = _taggedTemplateLiteral79(["Barf Mountain"]))), Macro2.meatKill(), Macro2.if_("(monsterid ".concat($monster(_templateObject808 || (_templateObject808 = _taggedTemplateLiteral79(["Knob Goblin Embezzler"]))).id, ") && !gotjump && !(pastround 2)"), Macro2.meatKill()).abort());
    completeBarfQuest();
    return true;
  },
  spendsTurn: true,
  sobriety: Sobriety.EITHER
}];
function runTurn() {
  var validSobrieties = [Sobriety.EITHER, sober() ? Sobriety.SOBER : Sobriety.DRUNK];
  var turn = turns.find(function(t) {
    return t.available() && validSobrieties.includes(t.sobriety);
  });
  if (!turn)
    throw new Error("Somehow failed to find anything to do!");
  var expectToSpendATurn = typeof turn.spendsTurn === "function" ? turn.spendsTurn() : turn.spendsTurn;
  (0, import_kolmafia87.print)("Now running barf-turn: ".concat(turn.name, "."));
  var startTurns = (0, import_kolmafia87.totalTurnsPlayed)();
  var success = turn.execute();
  var spentATurn = (0, import_kolmafia87.totalTurnsPlayed)() - startTurns === 1;
  if (spentATurn) {
    if (!expectToSpendATurn)
      (0, import_kolmafia87.print)("We unexpectedly spent a turn doing ".concat(turn.name, "!"), "red");
    var foughtAnEmbezzler = get("lastEncounter") === "Knob Goblin Embezzler";
    if (foughtAnEmbezzler)
      logEmbezzler(turn.name);
    var needTurns = (0, import_kolmafia87.myAdventures)() === 1 + globalOptions.saveTurns && sober();
    if (needTurns)
      generateTurnsAtEndOfDay();
  }
  return {
    success: success,
    spentATurn: spentATurn
  };
}
function barfTurn() {
  trackBarfSessionStatistics();
  if (SourceTerminal_exports.have())
    SourceTerminal_exports.educate([$skill(_templateObject8115 || (_templateObject8115 = _taggedTemplateLiteral79(["Extract"]))), $skill(_templateObject8215 || (_templateObject8215 = _taggedTemplateLiteral79(["Digitize"])))]);
  tryFillLatte();
  meatMood().execute(estimatedGarboTurns());
  safeRestore();
  var failures = 0;
  while (failures < 3) {
    var _runTurn = runTurn(), success = _runTurn.success, spentATurn = _runTurn.spentATurn;
    if (success)
      return;
    failures++;
    if (spentATurn)
      postCombatActions();
  }
  throw new Error("Tried thrice to adventure, and failed each time. Aborting.");
}
function generateTurnsAtEndOfDay() {
  deliverThesisIfAble();
  if (have($item(_templateObject8314 || (_templateObject8314 = _taggedTemplateLiteral79(["Kramco Sausage-o-Matic\u2122"])))) && (have($item(_templateObject8414 || (_templateObject8414 = _taggedTemplateLiteral79(["magical sausage"])))) || have($item(_templateObject8513 || (_templateObject8513 = _taggedTemplateLiteral79(["magical sausage casing"]))))) && get("_sausagesEaten") < 23) {
    var available3 = clamp(23 - get("_sausagesEaten"), 0, (0, import_kolmafia87.itemAmount)($item(_templateObject8611 || (_templateObject8611 = _taggedTemplateLiteral79(["magical sausage"])))) + (0, import_kolmafia87.itemAmount)($item(_templateObject877 || (_templateObject877 = _taggedTemplateLiteral79(["magical sausage casing"])))));
    (0, import_kolmafia87.maximize)("MP", false);
    (0, import_kolmafia87.eat)(available3, $item(_templateObject887 || (_templateObject887 = _taggedTemplateLiteral79(["magical sausage"]))));
  }
  if (have($item(_templateObject897 || (_templateObject897 = _taggedTemplateLiteral79(["designer sweatpants"])))) && (0, import_kolmafia87.myAdventures)() === 1 + globalOptions.saveTurns && !globalOptions.nodiet) {
    while (get("_sweatOutSomeBoozeUsed") < 3 && get("sweat") >= 25 && (0, import_kolmafia87.myInebriety)() > 0) {
      (0, import_kolmafia87.useSkill)($skill(_templateObject907 || (_templateObject907 = _taggedTemplateLiteral79(["Sweat Out Some Booze"]))));
    }
    consumeDiet(computeDiet().sweatpants(), "SWEATPANTS");
  }
}

// src/tasks/dailyItems.ts
var import_kolmafia88 = require("kolmafia");
var _templateObject790;
var _templateObject2176;
var _templateObject3151;
var _templateObject4137;
var _templateObject5131;
var _templateObject6108;
var _templateObject791;
var _templateObject878;
var _templateObject969;
var _templateObject1058;
var _templateObject1150;
var _templateObject1249;
var _templateObject1347;
var _templateObject1440;
var _templateObject1538;
var _templateObject1638;
var _templateObject1738;
var _templateObject1837;
var _templateObject1937;
var _templateObject2037;
var _templateObject2177;
var _templateObject2235;
var _templateObject2334;
var _templateObject2434;
var _templateObject2534;
var _templateObject2634;
var _templateObject2731;
var _templateObject2828;
var _templateObject2928;
var _templateObject3026;
var _templateObject3153;
var _templateObject3228;
var _templateObject3327;
var _templateObject3426;
var _templateObject3525;
var _templateObject3623;
var _templateObject3723;
var _templateObject3821;
var _templateObject3920;
var _templateObject4020;
var _templateObject4138;
var _templateObject4223;
var _templateObject4323;
var _templateObject4421;
var _templateObject4520;
var _templateObject4618;
var _templateObject4718;
var _templateObject4818;
var _templateObject4918;
var _templateObject5018;
var _templateObject5133;
var _templateObject5223;
var _templateObject5323;
var _templateObject5420;
var _templateObject5519;
var _templateObject5618;
var _templateObject5717;
var _templateObject5817;
var _templateObject5917;
var _templateObject6016;
var _templateObject6120;
var _templateObject6220;
var _templateObject6319;
var _templateObject6416;
var _templateObject6515;
var _templateObject6615;
var _templateObject6715;
var _templateObject6814;
var _templateObject6914;
var _templateObject7013;
var _templateObject7116;
var _templateObject7216;
var _templateObject7316;
var _templateObject7415;
var _templateObject7515;
var _templateObject7613;
var _templateObject7712;
var _templateObject7810;
var _templateObject799;
var _templateObject809;
var _templateObject8116;
var _templateObject8216;
var _templateObject8315;
var _templateObject8415;
var _templateObject8514;
var _templateObject8612;
var _templateObject879;
function _toConsumableArray47(arr) {
  return _arrayWithoutHoles47(arr) || _iterableToArray47(arr) || _unsupportedIterableToArray61(arr) || _nonIterableSpread47();
}
function _nonIterableSpread47() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray47(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles47(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray61(arr);
}
function _slicedToArray27(arr, i) {
  return _arrayWithHoles27(arr) || _iterableToArrayLimit27(arr, i) || _unsupportedIterableToArray61(arr, i) || _nonIterableRest27();
}
function _nonIterableRest27() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit27(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles27(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper34(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray61(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray61(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray61(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray61(o, minLen);
}
function _arrayLikeToArray61(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral80(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var SummonTomes = $skills(_templateObject790 || (_templateObject790 = _taggedTemplateLiteral80(["Summon Snowcones, Summon Stickers, Summon Sugar Sheets, Summon Rad Libs, Summon Smithsness"])));
var Wads = $items(_templateObject2176 || (_templateObject2176 = _taggedTemplateLiteral80(["twinkly wad, cold wad, stench wad, hot wad, sleaze wad, spooky wad"])));
var _shouldClearRufusQuest = null;
function drawBestCards() {
  var cardsLeft = Math.floor(3 - get("_deckCardsDrawn") / 5);
  var cardsSeen = get("_deckCardsSeen").toLowerCase();
  var bestCards = [{
    card: "Island",
    item: $item(_templateObject3151 || (_templateObject3151 = _taggedTemplateLiteral80(["blue mana"])))
  }, {
    card: "Ancestral Recall",
    item: $item(_templateObject4137 || (_templateObject4137 = _taggedTemplateLiteral80(["blue mana"])))
  }, {
    card: "Plains",
    item: $item(_templateObject5131 || (_templateObject5131 = _taggedTemplateLiteral80(["white mana"])))
  }, {
    card: "Healing Salve",
    item: $item(_templateObject6108 || (_templateObject6108 = _taggedTemplateLiteral80(["white mana"])))
  }, {
    card: "Swamp",
    item: $item(_templateObject791 || (_templateObject791 = _taggedTemplateLiteral80(["black mana"])))
  }, {
    card: "Dark Ritual",
    item: $item(_templateObject878 || (_templateObject878 = _taggedTemplateLiteral80(["black mana"])))
  }, {
    card: "Mountain",
    item: $item(_templateObject969 || (_templateObject969 = _taggedTemplateLiteral80(["red mana"])))
  }, {
    card: "Lightning bolt",
    item: $item(_templateObject1058 || (_templateObject1058 = _taggedTemplateLiteral80(["red mana"])))
  }, {
    card: "Forest",
    item: $item(_templateObject1150 || (_templateObject1150 = _taggedTemplateLiteral80(["green mana"])))
  }, {
    card: "Giant Growth",
    item: $item(_templateObject1249 || (_templateObject1249 = _taggedTemplateLiteral80(["green mana"])))
  }, {
    card: "Gift Card",
    item: $item(_templateObject1347 || (_templateObject1347 = _taggedTemplateLiteral80(["gift card"])))
  }, {
    card: "Mickey",
    item: $item(_templateObject1440 || (_templateObject1440 = _taggedTemplateLiteral80(["1952 Mickey Mantle card"])))
  }].filter(function(_ref) {
    var card2 = _ref.card;
    return !cardsSeen.includes(card2.toLowerCase());
  }).sort(function(a, b) {
    return garboValue(b.item) - garboValue(a.item);
  }).splice(0, cardsLeft).map(function(_ref2) {
    var card2 = _ref2.card;
    return card2;
  });
  var _iterator = _createForOfIteratorHelper34(bestCards), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var card = _step.value;
      (0, import_kolmafia88.cliExecute)("cheat ".concat(card));
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
function bestExtrude() {
  return maxBy($items(_templateObject1538 || (_templateObject1538 = _taggedTemplateLiteral80(["browser cookie, hacked gibson"]))), garboValue);
}
function pickCargoPocket() {
  var picked = (0, import_kolmafia88.pickedPockets)();
  var items = (0, import_kolmafia88.itemPockets)();
  var meats = (0, import_kolmafia88.meatPockets)();
  var scraps = (0, import_kolmafia88.scrapPockets)();
  function pocketValue(pocket) {
    var value2 = 0;
    if (pocket in picked) {
      return value2;
    }
    if (pocket in items) {
      value2 += sum(Object.entries((0, import_kolmafia88.pocketItems)(pocket)), function(_ref3) {
        var _ref4 = _slicedToArray27(_ref3, 2), item9 = _ref4[0], count = _ref4[1];
        return garboValue((0, import_kolmafia88.toItem)(item9), true) * count;
      });
    }
    if (pocket in meats) {
      value2 += sum(Object.values((0, import_kolmafia88.pocketMeat)(pocket)), function(x) {
        return parseInt(x);
      });
    }
    if (pocket in scraps) {
      value2 += 200;
    }
    return value2;
  }
  var pockets = [];
  for (var i = 1; i <= 666; i++) {
    var value = pocketValue(i);
    if (value > 0) {
      pockets.push([i, value]);
    }
  }
  if (pockets.length > 0) {
    (0, import_kolmafia88.cliExecute)("cargo ".concat(Math.trunc(maxBy(pockets, 1)[0])));
  }
}
var triedForest = false;
var DailyItemTasks = [].concat(_toConsumableArray47(SummonTomes.map(function(skill) {
  return {
    name: "{skill}",
    ready: function() {
      return have(skill);
    },
    completed: function() {
      return skill.dailylimit === 0;
    },
    do: function() {
      return (0, import_kolmafia88.useSkill)(skill, skill.dailylimit);
    }
  };
})), [{
  name: "Summon Clip Art",
  ready: function() {
    return have($skill(_templateObject1638 || (_templateObject1638 = _taggedTemplateLiteral80(["Summon Clip Art"]))));
  },
  completed: function() {
    return $skill(_templateObject1738 || (_templateObject1738 = _taggedTemplateLiteral80(["Summon Clip Art"]))).dailylimit === 0;
  },
  do: function() {
    var best = $item.none;
    for (var itemId = 5224; itemId <= 5283; itemId++) {
      var current = import_kolmafia88.Item.get("[".concat(itemId, "]"));
      if (garboValue(current) > garboValue(best)) {
        best = current;
      }
    }
    if (best !== $item.none) {
      (0, import_kolmafia88.cliExecute)("try; create ".concat($skill(_templateObject1837 || (_templateObject1837 = _taggedTemplateLiteral80(["Summon Clip Art"]))).dailylimit, " ").concat(best));
    }
  }
}, {
  name: "2002 Mr. Store",
  ready: function() {
    return have($item(_templateObject1937 || (_templateObject1937 = _taggedTemplateLiteral80(["2002 Mr. Store Catalog"]))));
  },
  completed: function() {
    return get("availableMrStore2002Credits", 0) === 0 && get("_2002MrStoreCreditsCollected", true);
  },
  do: function() {
    var bestItem = maxBy(import_kolmafia88.Item.all().filter(function(i) {
      return (0, import_kolmafia88.sellsItem)($coinmaster(_templateObject2037 || (_templateObject2037 = _taggedTemplateLiteral80(["Mr. Store 2002"]))), i);
    }), garboValue);
    (0, import_kolmafia88.buy)($coinmaster(_templateObject2177 || (_templateObject2177 = _taggedTemplateLiteral80(["Mr. Store 2002"]))), get("availableMrStore2002Credits", 0), bestItem);
  }
}, {
  name: "Chateau Mantegna Desk",
  ready: function() {
    return ChateauMantegna_exports.have();
  },
  completed: function() {
    return get("_chateauDeskHarvested");
  },
  do: function() {
    return (0, import_kolmafia88.visitUrl)("place.php?whichplace=chateau&action=chateau_desk2", false);
  }
}, {
  name: "Kremlin's Greatest Briefcase Collect",
  ready: function() {
    return have($item(_templateObject2235 || (_templateObject2235 = _taggedTemplateLiteral80(["Kremlin's Greatest Briefcase"]))));
  },
  completed: function() {
    return get("_kgbClicksUsed") > 17 || get("_kgbDispenserUses") >= 3;
  },
  do: function() {
    return (0, import_kolmafia88.cliExecute)("Briefcase collect");
  }
}, {
  name: "Ice Cold April Shower",
  ready: function() {
    return have($item(_templateObject2334 || (_templateObject2334 = _taggedTemplateLiteral80(["Clan VIP Lounge key"])))) && (0, import_kolmafia88.getClanLounge)()["Clan shower"] !== void 0;
  },
  completed: function() {
    return get("_aprilShower");
  },
  do: function() {
    return (0, import_kolmafia88.cliExecute)("try; shower ice");
  }
}, {
  name: "Swimming Pool Item",
  ready: function() {
    return have($item(_templateObject2434 || (_templateObject2434 = _taggedTemplateLiteral80(["Clan VIP Lounge key"])))) && (0, import_kolmafia88.getClanLounge)()["Olympic-sized Clan crate"] !== void 0;
  },
  completed: function() {
    return get("_olympicSwimmingPoolItemFound");
  },
  do: function() {
    return (0, import_kolmafia88.cliExecute)("swim item");
  }
}, {
  name: "Cheat Deck of Every Card",
  ready: function() {
    return have($item(_templateObject2534 || (_templateObject2534 = _taggedTemplateLiteral80(["Deck of Every Card"]))));
  },
  completed: function() {
    return Math.floor(3 - get("_deckCardsDrawn") / 5) === 0;
  },
  do: drawBestCards
}, {
  name: "Source Terminal Extrude",
  ready: function() {
    return SourceTerminal_exports.have();
  },
  completed: function() {
    return get("_sourceTerminalExtrudes") === 3 || garboValue(bestExtrude()) < garboValue($item(_templateObject2634 || (_templateObject2634 = _taggedTemplateLiteral80(["Source essence"])))) * 10;
  },
  do: function() {
    return SourceTerminal_exports.extrude(bestExtrude());
  },
  acquire: [{
    item: $item(_templateObject2731 || (_templateObject2731 = _taggedTemplateLiteral80(["Source essence"]))),
    num: 10
  }],
  limit: {
    skip: 3
  }
}, {
  name: "Internet Meme Shop viral video",
  completed: function() {
    return get("_internetViralVideoBought") || garboValue($item(_templateObject2828 || (_templateObject2828 = _taggedTemplateLiteral80(["viral video"])))) < garboValue($item(_templateObject2928 || (_templateObject2928 = _taggedTemplateLiteral80(["BACON"])))) * coinmasterPrice($item(_templateObject3026 || (_templateObject3026 = _taggedTemplateLiteral80(["viral video"]))));
  },
  do: function() {
    return (0, import_kolmafia88.buy)($coinmaster(_templateObject3153 || (_templateObject3153 = _taggedTemplateLiteral80(["Internet Meme Shop"]))), 1, $item(_templateObject3228 || (_templateObject3228 = _taggedTemplateLiteral80(["viral video"]))));
  },
  acquire: [{
    item: $item(_templateObject3327 || (_templateObject3327 = _taggedTemplateLiteral80(["BACON"]))),
    num: coinmasterPrice($item(_templateObject3426 || (_templateObject3426 = _taggedTemplateLiteral80(["viral video"]))))
  }]
}, {
  name: "Internet Meme Shop plus one",
  completed: function() {
    return get("_internetPlusOneBought") || garboValue($item(_templateObject3525 || (_templateObject3525 = _taggedTemplateLiteral80(["plus one"])))) < garboValue($item(_templateObject3623 || (_templateObject3623 = _taggedTemplateLiteral80(["BACON"])))) * coinmasterPrice($item(_templateObject3723 || (_templateObject3723 = _taggedTemplateLiteral80(["plus one"]))));
  },
  do: function() {
    return (0, import_kolmafia88.buy)($coinmaster(_templateObject3821 || (_templateObject3821 = _taggedTemplateLiteral80(["Internet Meme Shop"]))), 1, $item(_templateObject3920 || (_templateObject3920 = _taggedTemplateLiteral80(["plus one"]))));
  },
  acquire: [{
    item: $item(_templateObject4020 || (_templateObject4020 = _taggedTemplateLiteral80(["BACON"]))),
    num: coinmasterPrice($item(_templateObject4138 || (_templateObject4138 = _taggedTemplateLiteral80(["plus one"]))))
  }]
}, {
  name: "Internet Meme Shop gallon of milk",
  completed: function() {
    return get("_internetGallonOfMilkBought") || garboValue($item(_templateObject4223 || (_templateObject4223 = _taggedTemplateLiteral80(["gallon of milk"])))) < garboValue($item(_templateObject4323 || (_templateObject4323 = _taggedTemplateLiteral80(["BACON"])))) * coinmasterPrice($item(_templateObject4421 || (_templateObject4421 = _taggedTemplateLiteral80(["gallon of milk"]))));
  },
  do: function() {
    return (0, import_kolmafia88.buy)($coinmaster(_templateObject4520 || (_templateObject4520 = _taggedTemplateLiteral80(["Internet Meme Shop"]))), 1, $item(_templateObject4618 || (_templateObject4618 = _taggedTemplateLiteral80(["gallon of milk"]))));
  },
  acquire: [{
    item: $item(_templateObject4718 || (_templateObject4718 = _taggedTemplateLiteral80(["BACON"]))),
    num: coinmasterPrice($item(_templateObject4818 || (_templateObject4818 = _taggedTemplateLiteral80(["gallon of milk"]))))
  }]
}, {
  name: "Internet Meme Shop print screen button",
  completed: function() {
    return get("_internetPrintScreenButtonBought") || garboValue($item(_templateObject4918 || (_templateObject4918 = _taggedTemplateLiteral80(["print screen button"])))) < garboValue($item(_templateObject5018 || (_templateObject5018 = _taggedTemplateLiteral80(["BACON"])))) * coinmasterPrice($item(_templateObject5133 || (_templateObject5133 = _taggedTemplateLiteral80(["print screen button"]))));
  },
  do: function() {
    return (0, import_kolmafia88.buy)($coinmaster(_templateObject5223 || (_templateObject5223 = _taggedTemplateLiteral80(["Internet Meme Shop"]))), 1, $item(_templateObject5323 || (_templateObject5323 = _taggedTemplateLiteral80(["print screen button"]))));
  },
  acquire: [{
    item: $item(_templateObject5420 || (_templateObject5420 = _taggedTemplateLiteral80(["BACON"]))),
    num: coinmasterPrice($item(_templateObject5519 || (_templateObject5519 = _taggedTemplateLiteral80(["print screen button"]))))
  }]
}, {
  name: "Internet Meme Shop daily dungeon malware",
  completed: function() {
    return get("_internetDailyDungeonMalwareBought") || garboValue($item(_templateObject5618 || (_templateObject5618 = _taggedTemplateLiteral80(["daily dungeon malware"])))) < garboValue($item(_templateObject5717 || (_templateObject5717 = _taggedTemplateLiteral80(["BACON"])))) * coinmasterPrice($item(_templateObject5817 || (_templateObject5817 = _taggedTemplateLiteral80(["daily dungeon malware"]))));
  },
  do: function() {
    return (0, import_kolmafia88.buy)($coinmaster(_templateObject5917 || (_templateObject5917 = _taggedTemplateLiteral80(["Internet Meme Shop"]))), 1, $item(_templateObject6016 || (_templateObject6016 = _taggedTemplateLiteral80(["daily dungeon malware"]))));
  },
  acquire: [{
    item: $item(_templateObject6120 || (_templateObject6120 = _taggedTemplateLiteral80(["BACON"]))),
    num: coinmasterPrice($item(_templateObject6220 || (_templateObject6220 = _taggedTemplateLiteral80(["daily dungeon malware"]))))
  }]
}, {
  name: "Rainbow Gravitation",
  ready: function() {
    return have($skill(_templateObject6319 || (_templateObject6319 = _taggedTemplateLiteral80(["Rainbow Gravitation"]))));
  },
  completed: function() {
    return get("prismaticSummons") === 3 || garboValue($item(_templateObject6416 || (_templateObject6416 = _taggedTemplateLiteral80(["prismatic wad"])))) < sum(Wads, garboValue);
  },
  do: function() {
    return (0, import_kolmafia88.useSkill)($skill(_templateObject6515 || (_templateObject6515 = _taggedTemplateLiteral80(["Rainbow Gravitation"]))), 3 - get("prismaticSummons"));
  },
  acquire: function() {
    return Wads.map(function(x) {
      return {
        item: x,
        num: 3 - get("prismaticSummons")
      };
    });
  }
}, {
  name: "Request Sandwich",
  ready: function() {
    return have($skill(_templateObject6615 || (_templateObject6615 = _taggedTemplateLiteral80(["Request Sandwich"]))));
  },
  completed: function() {
    return get("_requestSandwichSucceeded");
  },
  do: function() {
    return (0, import_kolmafia88.useSkill)($skill(_templateObject6715 || (_templateObject6715 = _taggedTemplateLiteral80(["Request Sandwich"]))));
  },
  limit: {
    skip: 10
  }
}, {
  name: "Demand Sandwich",
  ready: function() {
    return have($skill(_templateObject6814 || (_templateObject6814 = _taggedTemplateLiteral80(["Demand Sandwich"]))));
  },
  completed: function() {
    return get("_demandSandwich") > 0;
  },
  do: function() {
    return (0, import_kolmafia88.useSkill)($skill(_templateObject6914 || (_templateObject6914 = _taggedTemplateLiteral80(["Demand Sandwich"]))));
  }
}, {
  name: "Tea Tree",
  ready: function() {
    return (0, import_kolmafia88.getCampground)()["potted tea tree"] !== void 0;
  },
  completed: function() {
    return get("_pottedTeaTreeUsed");
  },
  do: function() {
    var teas = $items(_templateObject7013 || (_templateObject7013 = _taggedTemplateLiteral80(["cuppa Activi tea, cuppa Alacri tea, cuppa Boo tea, cuppa Chari tea, cuppa Craft tea, cuppa Cruel tea, cuppa Dexteri tea, cuppa Feroci tea, cuppa Flamibili tea, cuppa Flexibili tea, cuppa Frost tea, cuppa Gill tea, cuppa Impregnabili tea, cuppa Improprie tea, cuppa Insani tea, cuppa Irritabili tea, cuppa Loyal tea, cuppa Mana tea, cuppa Mediocri tea, cuppa Monstrosi tea, cuppa Morbidi tea, cuppa Nas tea, cuppa Net tea, cuppa Neuroplastici tea, cuppa Obscuri tea, cuppa Physicali tea, cuppa Proprie tea, cuppa Royal tea, cuppa Serendipi tea, cuppa Sobrie tea, cuppa Toast tea, cuppa Twen tea, cuppa Uncertain tea, cuppa Vitali tea, cuppa Voraci tea, cuppa Wit tea, cuppa Yet tea"])));
    var bestTea = maxBy(teas, garboValue);
    var shakeVal = 3 * garboAverageValue.apply(void 0, _toConsumableArray47(teas));
    var teaAction = shakeVal > garboValue(bestTea) ? "shake" : bestTea.name;
    (0, import_kolmafia88.cliExecute)("teatree ".concat(teaAction));
  }
}, {
  name: "Check Jick Jar",
  ready: function() {
    return have($item(_templateObject7116 || (_templateObject7116 = _taggedTemplateLiteral80(["psychoanalytic jar"]))));
  },
  completed: function() {
    return get("_jickJarAvailable") !== "unknown";
  },
  do: function() {
    return (0, import_kolmafia88.visitUrl)("showplayer.php?who=1");
  }
}, {
  name: "Acquire Jick Jar",
  ready: function() {
    return have($item(_templateObject7216 || (_templateObject7216 = _taggedTemplateLiteral80(["psychoanalytic jar"])))) && get("_jickJarAvailable") === "true";
  },
  completed: function() {
    return get("_psychoJarFilled");
  },
  do: function() {
    return (0, import_kolmafia88.visitUrl)("showplayer.php?who=1&action=jung&whichperson=jick");
  }
}, {
  name: "Cargo Shorts Pocket",
  ready: function() {
    return have($item(_templateObject7316 || (_templateObject7316 = _taggedTemplateLiteral80(["Cargo Cultist Shorts"]))));
  },
  completed: function() {
    return get("_cargoPocketEmptied");
  },
  do: pickCargoPocket
}, {
  name: "Time-Spinner Gin",
  ready: function() {
    return have($item(_templateObject7415 || (_templateObject7415 = _taggedTemplateLiteral80(["Time-Spinner"])))) && !doingGregFight() && get("timeSpinnerMedals") >= 5 && get("_timeSpinnerMinutesUsed") <= 8;
  },
  completed: function() {
    return get("_timeSpinnerReplicatorUsed");
  },
  do: function() {
    return (0, import_kolmafia88.cliExecute)("FarFuture drink");
  }
}, {
  name: "FantasyRealm Hat",
  ready: function() {
    return get("frAlways") || get("_frToday");
  },
  completed: function() {
    return have($item(_templateObject7515 || (_templateObject7515 = _taggedTemplateLiteral80(["FantasyRealm G. E. M."]))));
  },
  do: function() {
    (0, import_kolmafia88.visitUrl)("place.php?whichplace=realm_fantasy&action=fr_initcenter");
    (0, import_kolmafia88.runChoice)(-1);
  },
  choices: {
    1280: 1
  }
}, {
  name: "Lodestone",
  ready: function() {
    return have($item(_templateObject7613 || (_templateObject7613 = _taggedTemplateLiteral80(["lodestone"])))) && !get("_lodestoneUsed");
  },
  completed: function() {
    return get("_lodestoneUsed");
  },
  do: function() {
    return (0, import_kolmafia88.use)($item(_templateObject7712 || (_templateObject7712 = _taggedTemplateLiteral80(["lodestone"]))));
  }
}, {
  name: "Update Garbage Tote",
  ready: function() {
    return have($item(_templateObject7810 || (_templateObject7810 = _taggedTemplateLiteral80(["January's Garbage Tote"])))) && !get("_garbageItemChanged");
  },
  completed: function() {
    return get("_garbageItemChanged");
  },
  do: function() {
    return (0, import_kolmafia88.cliExecute)("fold broken champagne bottle");
  }
}, {
  name: "Learn About Bugs",
  ready: function() {
    return have($item(_templateObject799 || (_templateObject799 = _taggedTemplateLiteral80(["S.I.T. Course Completion Certificate"]))));
  },
  completed: function() {
    return get("_sitCourseCompleted") || have($skill(_templateObject809 || (_templateObject809 = _taggedTemplateLiteral80(["Insectologist"]))));
  },
  do: function() {
    return (0, import_kolmafia88.use)($item(_templateObject8116 || (_templateObject8116 = _taggedTemplateLiteral80(["S.I.T. Course Completion Certificate"]))));
  },
  choices: {
    1494: 2
  }
}, {
  name: "Clear Existing Rufus Quest",
  completed: function() {
    return get("_shadowAffinityToday") || _shouldClearRufusQuest !== null;
  },
  do: function() {
    var value = rufusPotion.value(embezzlerCount());
    var price2 = rufusPotion.price(false);
    _shouldClearRufusQuest = value.some(function(value2) {
      return (!globalOptions.nobarf || value2.name === "embezzler") && value2.value - price2 > 0;
    });
    if (_shouldClearRufusQuest) {
      var target = ClosedCircuitPayphone_exports.rufusTarget();
      if (get("rufusQuestType") === "items") {
        if (acquire(3, target, 2 * (0, import_kolmafia88.mallPrice)(target), false, 1e5)) {
          withChoice(1498, 1, function() {
            return (0, import_kolmafia88.use)($item(_templateObject8216 || (_templateObject8216 = _taggedTemplateLiteral80(["closed-circuit pay phone"]))));
          });
        }
      } else if (get("rufusQuestType") === "artifact") {
        if (have(target))
          withChoice(1498, 1, function() {
            return (0, import_kolmafia88.use)($item(_templateObject8315 || (_templateObject8315 = _taggedTemplateLiteral80(["closed-circuit pay phone"]))));
          });
      }
    }
  }
}, {
  name: "Accept Rufus Quest for Forest",
  ready: function() {
    return ClosedCircuitPayphone_exports.have() && !ClosedCircuitPayphone_exports.rufusTarget();
  },
  completed: function() {
    return get("_shadowForestLooted") || have($item(_templateObject8415 || (_templateObject8415 = _taggedTemplateLiteral80(["Rufus's shadow lodestone"]))));
  },
  do: function() {
    return ClosedCircuitPayphone_exports.chooseQuest(function() {
      return 3;
    });
  }
}, {
  name: "Acquire Rufus Items",
  ready: function() {
    if (!ClosedCircuitPayphone_exports.have())
      return false;
    var target = ClosedCircuitPayphone_exports.rufusTarget();
    return target instanceof import_kolmafia88.Item && target.tradeable;
  },
  completed: function() {
    return get("_shadowForestLooted") || have($item(_templateObject8514 || (_templateObject8514 = _taggedTemplateLiteral80(["Rufus's shadow lodestone"])))) || triedForest;
  },
  do: function() {
    var target = ClosedCircuitPayphone_exports.rufusTarget();
    var bestRift = ClosedCircuitPayphone_exports.chooseRift({
      canAdventure: true,
      sortBy: function(l) {
        return sum((0, import_kolmafia88.getMonsters)(l), function(m) {
          return sum((0, import_kolmafia88.itemDropsArray)(m), function(_ref5) {
            var drop = _ref5.drop;
            return garboValue(drop);
          });
        });
      }
    });
    if (!bestRift)
      (0, import_kolmafia88.abort)("Failed to choose rift for Shadow Forest");
    var value = (6 + 9) / 2 * sum((0, import_kolmafia88.getMonsters)(bestRift), function(m) {
      return sum((0, import_kolmafia88.itemDropsArray)(m), function(_ref6) {
        var drop = _ref6.drop;
        return garboValue(drop);
      });
    }) / 3;
    if (target instanceof import_kolmafia88.Item && target.tradeable) {
      if (acquire(3, target, value, false) < 3) {
        (0, import_kolmafia88.print)("Our Rufus quest is ".concat(target, ", which costs too much to do the Forest!"), "red");
      }
      triedForest = true;
    }
  }
}, {
  name: "Turn In Rufus Quest for Forest",
  ready: function() {
    return questStep("questRufus") === 1;
  },
  completed: function() {
    return get("_shadowForestLooted") || have($item(_templateObject8612 || (_templateObject8612 = _taggedTemplateLiteral80(["Rufus's shadow lodestone"]))));
  },
  do: function() {
    return ClosedCircuitPayphone_exports.submitQuest();
  }
}, {
  name: "Shadow Forest",
  ready: function() {
    return have($item(_templateObject879 || (_templateObject879 = _taggedTemplateLiteral80(["Rufus's shadow lodestone"]))));
  },
  completed: function() {
    return get("_shadowForestLooted");
  },
  do: function() {
    var _ClosedCircuitPayphon;
    return (_ClosedCircuitPayphon = ClosedCircuitPayphone_exports.chooseRift({
      canAdventure: true,
      sortBy: function(l) {
        return sum((0, import_kolmafia88.getMonsters)(l), function(m) {
          return sum((0, import_kolmafia88.itemDropsArray)(m), function(_ref7) {
            var drop = _ref7.drop;
            return garboValue(drop);
          });
        });
      }
    })) !== null && _ClosedCircuitPayphon !== void 0 ? _ClosedCircuitPayphon : (0, import_kolmafia88.abort)("Failed to find appropriate rift for Shadow Forest");
  },
  choices: {
    1500: 3
  }
}].concat(_toConsumableArray47(augustSummonTasks())));
var DailyItemsQuest = {
  name: "Daily Items",
  tasks: DailyItemTasks
};

// src/tasks/dailyVolcano.ts
var import_kolmafia89 = require("kolmafia");
var _templateObject800;
var _templateObject2178;
var _templateObject3154;
var _templateObject4139;
var _templateObject5134;
var _templateObject6109;
var _templateObject7100;
var _templateObject880;
var _templateObject970;
function _taggedTemplateLiteral81(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function volcanoItemValue(_ref) {
  var quantity = _ref.quantity, item9 = _ref.item;
  if (item9 === $item(_templateObject800 || (_templateObject800 = _taggedTemplateLiteral81(["fused fuse"])))) {
    if (!have($item(_templateObject2178 || (_templateObject2178 = _taggedTemplateLiteral81(["Clara's bell"])))) || globalOptions.clarasBellClaimed)
      return Infinity;
    if (realmAvailable("sleaze") && have($item(_templateObject3154 || (_templateObject3154 = _taggedTemplateLiteral81(["fishy pipe"])))) && !get("_fishyPipeUsed")) {
      return quantity * 4e4;
    } else {
      return quantity * get("valueOfAdventure");
    }
  }
  if (!item9.tradeable)
    return Infinity;
  return quantity * (0, import_kolmafia89.retrievePrice)(item9);
}
function checkVolcanoQuest() {
  var _property$getItem, _property$getItem2, _property$getItem3;
  (0, import_kolmafia89.print)("Checking volcano quest", HIGHLIGHT);
  (0, import_kolmafia89.visitUrl)("place.php?whichplace=airport_hot&action=airport4_questhub");
  var volcoinoValue = garboValue($item(_templateObject4139 || (_templateObject4139 = _taggedTemplateLiteral81(["Volcoino"]))));
  var bestItem = maxBy([{
    item: (_property$getItem = property_exports.getItem("_volcanoItem1")) !== null && _property$getItem !== void 0 ? _property$getItem : $item.none,
    quantity: get("_volcanoItemCount1"),
    choice: 1
  }, {
    item: (_property$getItem2 = property_exports.getItem("_volcanoItem2")) !== null && _property$getItem2 !== void 0 ? _property$getItem2 : $item.none,
    quantity: get("_volcanoItemCount2"),
    choice: 2
  }, {
    item: (_property$getItem3 = property_exports.getItem("_volcanoItem3")) !== null && _property$getItem3 !== void 0 ? _property$getItem3 : $item.none,
    quantity: get("_volcanoItemCount3"),
    choice: 3
  }], volcanoItemValue, true);
  if (bestItem.item === $item(_templateObject5134 || (_templateObject5134 = _taggedTemplateLiteral81(["fused fuse"])))) {
    globalOptions.clarasBellClaimed = true;
    logMessage("Grab a fused fused with your clara's bell charge while overdrunk!");
  } else if (volcanoItemValue(bestItem) < volcoinoValue) {
    withProperty("autoBuyPriceLimit", volcoinoValue, function() {
      return (0, import_kolmafia89.retrieveItem)(bestItem.item, bestItem.quantity);
    });
    (0, import_kolmafia89.visitUrl)("place.php?whichplace=airport_hot&action=airport4_questhub");
    (0, import_kolmafia89.runChoice)(bestItem.choice);
  }
}
var DailyVolcanoTasks = [{
  name: "Quest",
  ready: function() {
    return realmAvailable("hot");
  },
  completed: function() {
    return get("_volcanoItemRedeemed");
  },
  do: checkVolcanoQuest
}, {
  name: "Free Volcoino",
  ready: function() {
    return realmAvailable("hot");
  },
  completed: function() {
    return get("_infernoDiscoVisited");
  },
  do: function() {
    (0, import_kolmafia89.visitUrl)("place.php?whichplace=airport_hot&action=airport4_zone1");
    (0, import_kolmafia89.runChoice)(7);
  },
  acquire: function() {
    return $items(_templateObject6109 || (_templateObject6109 = _taggedTemplateLiteral81(["smooth velvet pocket square, smooth velvet socks, smooth velvet hat, smooth velvet shirt, smooth velvet hanky, smooth velvet pants"]))).map(function(x) {
      return {
        item: x
      };
    });
  },
  outfit: {
    modifier: "disco style"
  }
}, {
  name: "Free Mining",
  ready: function() {
    return realmAvailable("hot") && have($skill(_templateObject7100 || (_templateObject7100 = _taggedTemplateLiteral81(["Unaccompanied Miner"]))));
  },
  completed: function() {
    return get("_unaccompaniedMinerUsed") >= 5;
  },
  do: function() {
    return (0, import_kolmafia89.cliExecute)("minevolcano.ash ".concat(5 - get("_unaccompaniedMinerUsed")));
  },
  prepare: function() {
    return (0, import_kolmafia89.restoreHp)((0, import_kolmafia89.myMaxhp)() * 0.9);
  },
  post: function() {
    if (have($effect(_templateObject880 || (_templateObject880 = _taggedTemplateLiteral81(["Beaten Up"]))))) {
      uneffect($effect(_templateObject970 || (_templateObject970 = _taggedTemplateLiteral81(["Beaten Up"]))));
    }
    if ((0, import_kolmafia89.myHp)() < (0, import_kolmafia89.myMaxhp)() * 0.5) {
      (0, import_kolmafia89.restoreHp)((0, import_kolmafia89.myMaxhp)() * 0.9);
    }
  }
}];
var VolcanoQuest = {
  name: "Volcano",
  tasks: DailyVolcanoTasks
};

// src/tasks/dailyFamiliars.ts
var import_kolmafia90 = require("kolmafia");
var _templateObject801;
var _templateObject2179;
var _templateObject3155;
var _templateObject4140;
var _templateObject5135;
var _templateObject6121;
var _templateObject7101;
var _templateObject881;
var _templateObject971;
var _templateObject1059;
var _templateObject1151;
var _templateObject1250;
var _templateObject1348;
var _templateObject1441;
var _templateObject1539;
var _templateObject1639;
var _templateObject1739;
var _templateObject1838;
var _templateObject1938;
var _templateObject2038;
var _templateObject2180;
var _templateObject2236;
var _templateObject2335;
var _templateObject2435;
var _templateObject2535;
var _templateObject2635;
var _templateObject2733;
var _templateObject2829;
var _templateObject2929;
var _templateObject3027;
var _templateObject3156;
var _templateObject3229;
var _templateObject3328;
var _templateObject3427;
function _toConsumableArray48(arr) {
  return _arrayWithoutHoles48(arr) || _iterableToArray48(arr) || _unsupportedIterableToArray62(arr) || _nonIterableSpread48();
}
function _nonIterableSpread48() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray48(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles48(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray62(arr);
}
function _slicedToArray28(arr, i) {
  return _arrayWithHoles28(arr) || _iterableToArrayLimit28(arr, i) || _unsupportedIterableToArray62(arr, i) || _nonIterableRest28();
}
function _nonIterableRest28() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray62(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray62(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray62(o, minLen);
}
function _arrayLikeToArray62(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _iterableToArrayLimit28(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles28(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _taggedTemplateLiteral82(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function newarkValue() {
  var lastCalculated = get("garbo_newarkValueDate", 0);
  if (!get("garbo_newarkValue", 0) || today2 - lastCalculated > 7 * 24 * 60 * 60 * 1e3) {
    var newarkDrops = JSON.parse((0, import_kolmafia90.fileToBuffer)("garbo_item_lists.json"))["Newark"];
    _set("garbo_newarkValue", (sum(newarkDrops, function(name) {
      return garboValue((0, import_kolmafia90.toItem)(name));
    }) / newarkDrops.length).toFixed(0));
    _set("garbo_newarkValueDate", today2);
  }
  return get("garbo_newarkValue", 0) * 0.25 * estimatedGarboTurns();
}
function felizValue() {
  var lastCalculated = get("garbo_felizValueDate", 0);
  if (!get("garbo_felizValue", 0) || today2 - lastCalculated > 7 * 24 * 60 * 60 * 1e3) {
    var felizDrops = JSON.parse((0, import_kolmafia90.fileToBuffer)("garbo_item_lists.json"))["Feliz Navidad"];
    _set("garbo_felizValue", (sum(felizDrops, function(name) {
      return garboValue((0, import_kolmafia90.toItem)(name));
    }) / felizDrops.length).toFixed(0));
    _set("garbo_felizValueDate", today2);
  }
  return get("garbo_felizValue", 0) * 0.25 * estimatedGarboTurns();
}
function drivebyValue() {
  var embezzlers = embezzlerCount();
  var tourists = (estimatedGarboTurns() - embezzlers) * turnsToNC / (turnsToNC + 1);
  var marginalRoboWeight = 50;
  var meatPercentDelta = Math.sqrt(220 * 2 * marginalRoboWeight) - Math.sqrt(220 * 2 * marginalRoboWeight) + 2 * marginalRoboWeight;
  return meatPercentDelta / 100 * ((750 + baseMeat) * embezzlers + baseMeat * tourists);
}
function entendreValue() {
  var embezzlers = embezzlerCount();
  var tourists = (estimatedGarboTurns() - embezzlers) * turnsToNC / (turnsToNC + 1);
  var marginalRoboWeight = 50;
  var itemPercent = Math.sqrt(55 * marginalRoboWeight) + marginalRoboWeight - 3;
  var garbageBagsDropRate = 0.15 * 3;
  var meatStackDropRate = 0.3 * 4;
  return itemPercent / 100 * (meatStackDropRate * embezzlers + garbageBagsDropRate * tourists * garbageTouristRatio);
}
function prepRobortender() {
  if (!have($familiar(_templateObject801 || (_templateObject801 = _taggedTemplateLiteral82(["Robortender"])))))
    return;
  var roboDrinks = {
    "Drive-by shooting": {
      priceCap: drivebyValue(),
      mandatory: true
    },
    Newark: {
      priceCap: newarkValue(),
      mandatory: false
    },
    "Feliz Navidad": {
      priceCap: felizValue(),
      mandatory: false
    },
    "Bloody Nora": {
      priceCap: get("_envyfishEggUsed") ? (750 + baseMeat) * (0.5 + (4 + Math.sqrt(110 / 100)) * 30 / 100) : 0,
      mandatory: false
    },
    "Single entendre": {
      priceCap: entendreValue(),
      mandatory: false
    }
  };
  var _loop = function _loop2() {
    var _Object$entries$_i = _slicedToArray28(_Object$entries[_i], 2), drinkName = _Object$entries$_i[0], _Object$entries$_i$ = _Object$entries$_i[1], priceCap = _Object$entries$_i$.priceCap, mandatory = _Object$entries$_i$.mandatory;
    if (get("_roboDrinks").toLowerCase().includes(drinkName.toLowerCase()))
      return "continue";
    (0, import_kolmafia90.useFamiliar)($familiar(_templateObject2179 || (_templateObject2179 = _taggedTemplateLiteral82(["Robortender"]))));
    var drink3 = (0, import_kolmafia90.toItem)(drinkName);
    if ((0, import_kolmafia90.retrievePrice)(drink3) > priceCap) {
      if (mandatory) {
        setBestLeprechaunAsMeatFamiliar();
        if (!userConfirmDialog("Garbo cannot find a reasonably priced drive-by-shooting (price cap: ".concat(priceCap, "), and will not be using your robortender. Is that cool with you?"), true)) {
          (0, import_kolmafia90.abort)("Alright, then, I guess you should try to find a reasonbly priced drive-by-shooting. Or do different things with your day.");
        }
        return "break";
      }
      return "continue";
    }
    withProperty("autoBuyPriceLimit", priceCap, function() {
      return (0, import_kolmafia90.retrieveItem)(1, drink3);
    });
    if (have(drink3))
      Robortender_exports.feed(drink3);
  };
  for (var _i = 0, _Object$entries = Object.entries(roboDrinks); _i < _Object$entries.length; _i++) {
    var _ret = _loop();
    if (_ret === "continue")
      continue;
    if (_ret === "break")
      break;
  }
}
var DailyFamiliarTasks = [{
  name: "Prepare Shorter-Order Cook",
  ready: function() {
    return have($familiar(_templateObject3155 || (_templateObject3155 = _taggedTemplateLiteral82(["Shorter-Order Cook"])))) && have($item(_templateObject4140 || (_templateObject4140 = _taggedTemplateLiteral82(["blue plate"]))));
  },
  completed: function() {
    return (0, import_kolmafia90.familiarEquippedEquipment)($familiar(_templateObject5135 || (_templateObject5135 = _taggedTemplateLiteral82(["Shorter-Order Cook"])))) === $item(_templateObject6121 || (_templateObject6121 = _taggedTemplateLiteral82(["blue plate"])));
  },
  do: function() {
    return (0, import_kolmafia90.equip)($familiar(_templateObject7101 || (_templateObject7101 = _taggedTemplateLiteral82(["Shorter-Order Cook"]))), $item(_templateObject881 || (_templateObject881 = _taggedTemplateLiteral82(["blue plate"]))));
  }
}, {
  name: "Prepare Robortender",
  ready: function() {
    return have($familiar(_templateObject971 || (_templateObject971 = _taggedTemplateLiteral82(["Robortender"]))));
  },
  completed: function() {
    return get("_roboDrinks").toLowerCase().includes("drive-by shooting");
  },
  do: prepRobortender
}, {
  name: "Acquire amulet coin",
  ready: function() {
    return have($familiar(_templateObject1059 || (_templateObject1059 = _taggedTemplateLiteral82(["Cornbeefadon"]))));
  },
  completed: function() {
    return have($item(_templateObject1151 || (_templateObject1151 = _taggedTemplateLiteral82(["amulet coin"]))));
  },
  do: function() {
    return (0, import_kolmafia90.use)($item(_templateObject1250 || (_templateObject1250 = _taggedTemplateLiteral82(["box of Familiar Jacks"]))));
  },
  acquire: [{
    item: $item(_templateObject1348 || (_templateObject1348 = _taggedTemplateLiteral82(["box of Familiar Jacks"])))
  }],
  outfit: {
    familiar: $familiar(_templateObject1441 || (_templateObject1441 = _taggedTemplateLiteral82(["Cornbeefadon"])))
  }
}, {
  // TODO: Consider other familiars?
  name: "Equip tiny stillsuit",
  ready: function() {
    return (0, import_kolmafia90.itemAmount)($item(_templateObject1539 || (_templateObject1539 = _taggedTemplateLiteral82(["tiny stillsuit"])))) > 0 && have($familiar(_templateObject1639 || (_templateObject1639 = _taggedTemplateLiteral82(["Cornbeefadon"]))));
  },
  completed: function() {
    return (0, import_kolmafia90.familiarEquippedEquipment)($familiar(_templateObject1739 || (_templateObject1739 = _taggedTemplateLiteral82(["Cornbeefadon"])))) === $item(_templateObject1838 || (_templateObject1838 = _taggedTemplateLiteral82(["tiny stillsuit"])));
  },
  do: function() {
    return (0, import_kolmafia90.equip)($familiar(_templateObject1938 || (_templateObject1938 = _taggedTemplateLiteral82(["Cornbeefadon"]))), $item(_templateObject2038 || (_templateObject2038 = _taggedTemplateLiteral82(["tiny stillsuit"]))));
  }
}, {
  name: "Acquire box of old Crimbo decorations",
  ready: function() {
    return have($familiar(_templateObject2180 || (_templateObject2180 = _taggedTemplateLiteral82(["Crimbo Shrub"]))));
  },
  completed: function() {
    return have($item(_templateObject2236 || (_templateObject2236 = _taggedTemplateLiteral82(["box of old Crimbo decorations"]))));
  },
  do: function() {
    (0, import_kolmafia90.useFamiliar)($familiar(_templateObject2335 || (_templateObject2335 = _taggedTemplateLiteral82(["Crimbo Shrub"]))));
  },
  outfit: {
    familiar: $familiar(_templateObject2435 || (_templateObject2435 = _taggedTemplateLiteral82(["Crimbo Shrub"])))
  }
}, {
  name: "Decorate Crimbo Shrub",
  ready: function() {
    return have($item(_templateObject2535 || (_templateObject2535 = _taggedTemplateLiteral82(["box of old Crimbo decorations"]))));
  },
  completed: function() {
    return get("_shrubDecorated");
  },
  do: function() {
    return CrimboShrub_exports.decorate((0, import_kolmafia90.myPrimestat)().toString(), "Stench Damage", (0, import_kolmafia90.hippyStoneBroken)() ? "PvP Fights" : "HP Regen", "Red Ray");
  },
  outfit: {
    familiar: $familiar(_templateObject2635 || (_templateObject2635 = _taggedTemplateLiteral82(["Crimbo Shrub"])))
  }
}, {
  name: "Mummery Meat",
  ready: function() {
    return have($item(_templateObject2733 || (_templateObject2733 = _taggedTemplateLiteral82(["mumming trunk"]))));
  },
  completed: function() {
    return get("_mummeryMods").includes("Meat Drop");
  },
  do: function() {
    return (0, import_kolmafia90.cliExecute)("mummery meat");
  },
  outfit: {
    familiar: meatFamiliar()
  }
}, {
  name: "Mummery Item",
  ready: function() {
    return have($item(_templateObject2829 || (_templateObject2829 = _taggedTemplateLiteral82(["mumming trunk"])))) && have($familiar(_templateObject2929 || (_templateObject2929 = _taggedTemplateLiteral82(["Trick-or-Treating Tot"]))));
  },
  completed: function() {
    return get("_mummeryMods").includes("Item Drop");
  },
  do: function() {
    return (0, import_kolmafia90.cliExecute)("mummery item");
  },
  outfit: {
    familiar: $familiar(_templateObject3027 || (_templateObject3027 = _taggedTemplateLiteral82(["Trick-or-Treating Tot"])))
  }
}, {
  name: "Moveable feast",
  ready: function() {
    return have($item(_templateObject3156 || (_templateObject3156 = _taggedTemplateLiteral82(["moveable feast"])))) || globalOptions.prefs.stashClan !== "none";
  },
  completed: function() {
    return get("_feastUsed") > 0;
  },
  do: function() {
    withStash($items(_templateObject3229 || (_templateObject3229 = _taggedTemplateLiteral82(["moveable feast"]))), function() {
      if (have($item(_templateObject3328 || (_templateObject3328 = _taggedTemplateLiteral82(["moveable feast"]))))) {
        [].concat(_toConsumableArray48($familiars(_templateObject3427 || (_templateObject3427 = _taggedTemplateLiteral82(["Pocket Professor, Frumious Bandersnatch, Pair of Stomping Boots"])))), [meatFamiliar()]).forEach(tryFeast);
      }
    });
  }
}];
var DailyFamiliarsQuest = {
  name: "Daily Familiars",
  tasks: DailyFamiliarTasks
};

// src/tasks/ascending.ts
var import_kolmafia91 = require("kolmafia");
var _templateObject888;
var _templateObject2181;
var _templateObject3157;
var _templateObject4141;
var _templateObject5136;
var _templateObject6123;
var _templateObject7102;
var _templateObject889;
var _templateObject977;
var _templateObject1060;
var _templateObject1156;
var _templateObject1251;
var _templateObject1349;
var _templateObject1445;
function _toConsumableArray49(arr) {
  return _arrayWithoutHoles49(arr) || _iterableToArray49(arr) || _unsupportedIterableToArray63(arr) || _nonIterableSpread49();
}
function _nonIterableSpread49() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray63(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray63(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray63(o, minLen);
}
function _iterableToArray49(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles49(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray63(arr);
}
function _arrayLikeToArray63(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral83(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function bestLockPickChoice() {
  return 1 + (0, import_kolmafia91.toInt)(maxBy($items(_templateObject888 || (_templateObject888 = _taggedTemplateLiteral83(["Boris's key lime, Jarlsberg's key lime, Sneaky Pete's key lime"]))), garboValue)) - (0, import_kolmafia91.toInt)($item(_templateObject2181 || (_templateObject2181 = _taggedTemplateLiteral83(["Boris's key lime"]))));
}
var AscendingTasks = [{
  name: "Lock Picking",
  ready: function() {
    return have($skill(_templateObject3157 || (_templateObject3157 = _taggedTemplateLiteral83(["Lock Picking"])))) && globalOptions.ascend;
  },
  completed: function() {
    return get("lockPicked");
  },
  do: function() {
    (0, import_kolmafia91.useSkill)($skill(_templateObject4141 || (_templateObject4141 = _taggedTemplateLiteral83(["Lock Picking"]))));
    if ((0, import_kolmafia91.handlingChoice)())
      (0, import_kolmafia91.runChoice)(-1);
  },
  choices: {
    1414: bestLockPickChoice
  }
}].concat(_toConsumableArray49([{
  key: $item(_templateObject5136 || (_templateObject5136 = _taggedTemplateLiteral83(["Boris's key"]))),
  lime: $item(_templateObject6123 || (_templateObject6123 = _taggedTemplateLiteral83(["Boris's key lime"])))
}, {
  key: $item(_templateObject7102 || (_templateObject7102 = _taggedTemplateLiteral83(["Jarlsberg's key"]))),
  lime: $item(_templateObject889 || (_templateObject889 = _taggedTemplateLiteral83(["Jarlsberg's key lime"])))
}, {
  key: $item(_templateObject977 || (_templateObject977 = _taggedTemplateLiteral83(["Sneaky Pete's key"]))),
  lime: $item(_templateObject1060 || (_templateObject1060 = _taggedTemplateLiteral83(["Sneaky Pete's key lime"])))
}, {
  key: $item(_templateObject1156 || (_templateObject1156 = _taggedTemplateLiteral83(["Richard's star key"]))),
  lime: $item(_templateObject1251 || (_templateObject1251 = _taggedTemplateLiteral83(["star key lime"])))
}].map(function(_ref) {
  var key = _ref.key, lime = _ref.lime;
  return {
    name: "Cook ".concat(lime),
    completed: function() {
      return !have(key) || garboValue(lime) < garboValue($item(_templateObject1349 || (_templateObject1349 = _taggedTemplateLiteral83(["lime"]))));
    },
    do: function() {
      return (0, import_kolmafia91.create)(lime);
    },
    ready: function() {
      return globalOptions.ascend && (freeCrafts() > 0 || have($familiar(_templateObject1445 || (_templateObject1445 = _taggedTemplateLiteral83(["Cookbookbat"])))) && get("_cookbookbatCrafting") < 5) || get("hasChef");
    }
  };
})));
var AscendingQuest = {
  name: "Ascend",
  tasks: AscendingTasks
};

// src/dailies.ts
function dailySetup() {
  runSafeGarboQuests([DailyFamiliarsQuest, DailyItemsQuest, VolcanoQuest, DailyQuest, AscendingQuest]);
}

// src/yachtzee/index.ts
var import_kolmafia98 = require("kolmafia");

// src/yachtzee/buffs.ts
var import_kolmafia97 = require("kolmafia");

// src/yachtzee/diet.ts
var import_kolmafia96 = require("kolmafia");

// src/yachtzee/fishy.ts
var import_kolmafia95 = require("kolmafia");

// src/yachtzee/lib.ts
var import_kolmafia92 = require("kolmafia");
var _templateObject890;
var _templateObject2183;
var _templateObject3158;
var _templateObject4143;
var _templateObject5137;
var _templateObject6124;
var _templateObject7103;
var _templateObject891;
var _templateObject978;
var _templateObject1061;
var _templateObject1157;
var _templateObject1256;
var _templateObject1350;
var _templateObject1446;
var _templateObject1540;
function ownKeys15(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread15(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys15(Object(source), true).forEach(function(key) {
      _defineProperty32(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys15(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty32(obj, key, value) {
  key = _toPropertyKey37(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey37(arg) {
  var key = _toPrimitive37(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive37(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _createForOfIteratorHelper35(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray64(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray64(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray64(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray64(o, minLen);
}
function _arrayLikeToArray64(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral84(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var ignoredSources = ["Orb Prediction", "Pillkeeper Semirare", "Lucky!", "11-leaf clover (untapped potential)"];
var expectedEmbezzlers = sum(embezzlerSources.filter(function(source) {
  return !ignoredSources.includes(source.name);
}), function(source) {
  return source.potential();
});
function pyecAvailable() {
  if (get("_PYECAvailable") === "") {
    _set("_PYECAvailable", get("expressCardUsed") ? false : have($item(_templateObject890 || (_templateObject890 = _taggedTemplateLiteral84(["Platinum Yendorian Express Card"])))) ? true : withStash($items(_templateObject2183 || (_templateObject2183 = _taggedTemplateLiteral84(["Platinum Yendorian Express Card"]))), function() {
      return have($item(_templateObject3158 || (_templateObject3158 = _taggedTemplateLiteral84(["Platinum Yendorian Express Card"]))));
    }));
  }
  return get("_PYECAvailable", false);
}
function shrugIrrelevantSongs() {
  var _iterator = _createForOfIteratorHelper35(getActiveSongs()), _step;
  try {
    var _loop = function _loop2() {
      var song2 = _step.value;
      var slot = Mood.defaultOptions.songSlots.find(function(slot2) {
        return slot2.includes(song2);
      });
      if (!slot && song2 !== $effect(_templateObject4143 || (_templateObject4143 = _taggedTemplateLiteral84(["Ode to Booze"]))) && song2 !== $effect(_templateObject5137 || (_templateObject5137 = _taggedTemplateLiteral84(["Polka of Plenty"]))) && song2 !== $effect(_templateObject6124 || (_templateObject6124 = _taggedTemplateLiteral84(["Chorale of Companionship"]))) && song2 !== $effect(_templateObject7103 || (_templateObject7103 = _taggedTemplateLiteral84(["The Ballad of Richie Thingfinder"])))) {
        (0, import_kolmafia92.cliExecute)("shrug ".concat(song2));
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  (0, import_kolmafia92.cliExecute)("shrug ur-kel");
  (0, import_kolmafia92.cliExecute)("shrug phat loot");
}
function cinchNCs() {
  return CinchoDeMayo_exports.have() ? Math.floor(CinchoDeMayo_exports.totalAvailableCinch() / 60) : 0;
}
var freeNCs = function() {
  return (have($item(_templateObject891 || (_templateObject891 = _taggedTemplateLiteral84(["Clara's bell"])))) && !globalOptions.clarasBellClaimed ? 1 : 0) + (have($item(_templateObject978 || (_templateObject978 = _taggedTemplateLiteral84(["Jurassic Parka"])))) ? 5 - get("_spikolodonSpikeUses") : 0) + cinchNCs();
};
function yachtzeeBuffValue(obj) {
  return 2e3 * (get2("Meat Drop", obj) + get2("Familiar Weight", obj) * 2.5) / 100;
}
function useSpikolodonSpikes() {
  var _tryFindFreeRun, _run$constraints$fami, _run$constraints$fami2, _run$constraints, _run$constraints$prep, _run$constraints2;
  if (get("_spikolodonSpikeUses") >= 5)
    return;
  var run = (_tryFindFreeRun = tryFindFreeRun()) !== null && _tryFindFreeRun !== void 0 ? _tryFindFreeRun : ltbRun();
  var canJelly = have($familiar(_templateObject1061 || (_templateObject1061 = _taggedTemplateLiteral84(["Space Jellyfish"])))) && !run.constraints.familiar && realmAvailable("stench");
  var familiar4 = (_run$constraints$fami = (_run$constraints$fami2 = (_run$constraints = run.constraints).familiar) === null || _run$constraints$fami2 === void 0 ? void 0 : _run$constraints$fami2.call(_run$constraints)) !== null && _run$constraints$fami !== void 0 ? _run$constraints$fami : canJelly ? $familiar(_templateObject1157 || (_templateObject1157 = _taggedTemplateLiteral84(["Space Jellyfish"]))) : freeFightFamiliar({
    allowAttackFamiliars: false
  });
  (_run$constraints$prep = (_run$constraints2 = run.constraints).preparation) === null || _run$constraints$prep === void 0 ? void 0 : _run$constraints$prep.call(_run$constraints2);
  freeFightOutfit(_objectSpread15(_objectSpread15({
    shirt: $item(_templateObject1256 || (_templateObject1256 = _taggedTemplateLiteral84(["Jurassic Parka"])))
  }, toSpec(run)), {}, {
    familiar: familiar4
  })).dress();
  (0, import_kolmafia92.cliExecute)("parka spikolodon");
  var targetZone = canJelly ? $location(_templateObject1350 || (_templateObject1350 = _taggedTemplateLiteral84(["Pirates of the Garbage Barges"]))) : $location(_templateObject1446 || (_templateObject1446 = _taggedTemplateLiteral84(["Sloppy Seconds Diner"])));
  var macro = Macro2.familiarActions().skill($skill(_templateObject1540 || (_templateObject1540 = _taggedTemplateLiteral84(["Launch spikolodon spikes"])))).step(run.macro);
  var startingSpikes = get("_spikolodonSpikeUses");
  var ncSkipper = wanderer_default.unsupportedChoices.get(targetZone);
  if (ncSkipper)
    propertyManager.setChoices(ncSkipper);
  do {
    garboAdventureAuto(targetZone, macro);
  } while (get("_spikolodonSpikeUses") === startingSpikes);
  postCombatActions();
}

// src/yachtzee/outfit.ts
var import_kolmafia94 = require("kolmafia");

// src/yachtzee/familiar.ts
var import_kolmafia93 = require("kolmafia");
var _templateObject898;
var _templateObject2184;
var _templateObject3159;
var _templateObject4144;
var _templateObject5138;
var _templateObject6125;
var _templateObject7104;
var _templateObject899;
var _templateObject979;
var _templateObject1066;
var _templateObject1158;
function _taggedTemplateLiteral85(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function bestFamUnderwaterGear(fam2) {
  return fam2.underwater || have($effect(_templateObject898 || (_templateObject898 = _taggedTemplateLiteral85(["Driving Waterproofly"])))) || have($effect(_templateObject2184 || (_templateObject2184 = _taggedTemplateLiteral85(["Wet Willied"])))) ? have($item(_templateObject3159 || (_templateObject3159 = _taggedTemplateLiteral85(["amulet coin"])))) ? $item(_templateObject4144 || (_templateObject4144 = _taggedTemplateLiteral85(["amulet coin"]))) : $item(_templateObject5138 || (_templateObject5138 = _taggedTemplateLiteral85(["filthy child leash"]))) : have($item(_templateObject6125 || (_templateObject6125 = _taggedTemplateLiteral85(["das boot"])))) ? $item(_templateObject7104 || (_templateObject7104 = _taggedTemplateLiteral85(["das boot"]))) : $item(_templateObject899 || (_templateObject899 = _taggedTemplateLiteral85(["little bitty bathysphere"])));
}
function getBuffedFamiliarWeight(fam2) {
  var weight = (0, import_kolmafia93.familiarWeight)(fam2) + (0, import_kolmafia93.weightAdjustment)() - (0, import_kolmafia93.numericModifier)((0, import_kolmafia93.equippedItem)($slot(_templateObject979 || (_templateObject979 = _taggedTemplateLiteral85(["familiar"])))), "Familiar Weight");
  return fam2.feasted ? weight + 10 : weight;
}
function bestYachtzeeFamiliar() {
  var haveUnderwaterFamEquipment = familiarWaterBreathingEquipment.some(function(item9) {
    return have(item9);
  });
  var sortedUnderwaterFamiliars = import_kolmafia93.Familiar.all().filter(function(fam2) {
    return have(fam2) && findLeprechaunMultiplier(fam2) > 0 && fam2 !== $familiar(_templateObject1066 || (_templateObject1066 = _taggedTemplateLiteral85(["Ghost of Crimbo Commerce"]))) && fam2 !== $familiar(_templateObject1158 || (_templateObject1158 = _taggedTemplateLiteral85(["Robortender"]))) && (fam2.underwater || haveUnderwaterFamEquipment);
  }).sort(function(left, right) {
    return (0, import_kolmafia93.numericModifier)(right, "Meat Drop", getBuffedFamiliarWeight(right), bestFamUnderwaterGear(right)) - (0, import_kolmafia93.numericModifier)(left, "Meat Drop", getBuffedFamiliarWeight(left), bestFamUnderwaterGear(left));
  });
  (0, import_kolmafia93.print)("Familiar bonus meat%:", "blue");
  sortedUnderwaterFamiliars.forEach(function(fam2) {
    (0, import_kolmafia93.print)("".concat(fam2, " (").concat((0, import_kolmafia93.numericModifier)(fam2, "Meat Drop", getBuffedFamiliarWeight(fam2), bestFamUnderwaterGear(fam2)).toFixed(2), "%)"), "blue");
  });
  if (sortedUnderwaterFamiliars.length === 0)
    return $familiar.none;
  (0, import_kolmafia93.print)("Best Familiar: ".concat(sortedUnderwaterFamiliars[0]), "blue");
  return sortedUnderwaterFamiliars[0];
}

// src/yachtzee/outfit.ts
var _templateObject900;
var _templateObject2185;
var _templateObject3160;
var _templateObject4145;
var _templateObject5139;
var _templateObject6126;
var _templateObject7105;
var _templateObject8100;
function _taggedTemplateLiteral86(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _toConsumableArray50(arr) {
  return _arrayWithoutHoles50(arr) || _iterableToArray50(arr) || _unsupportedIterableToArray65(arr) || _nonIterableSpread50();
}
function _nonIterableSpread50() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray65(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray65(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray65(o, minLen);
}
function _iterableToArray50(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles50(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray65(arr);
}
function _arrayLikeToArray65(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
var maximizeMeat = function() {
  return new Requirement(["meat"].concat(_toConsumableArray50((0, import_kolmafia94.myFamiliar)().underwater || have($effect(_templateObject900 || (_templateObject900 = _taggedTemplateLiteral86(["Driving Waterproofly"])))) || have($effect(_templateObject2185 || (_templateObject2185 = _taggedTemplateLiteral86(["Wet Willied"])))) ? [] : ["underwater familiar"])), {
    preventEquip: $items(_templateObject3160 || (_templateObject3160 = _taggedTemplateLiteral86(["anemoney clip, cursed magnifying glass, Kramco Sausage-o-Matic\u2122, cheap sunglasses"])))
  }).maximize();
};
function getBestWaterBreathingEquipment(yachtzeeTurns) {
  var waterBreathingEquipmentCosts = waterBreathingEquipment.map(function(it) {
    return {
      item: it,
      cost: have(it) && (0, import_kolmafia94.canEquip)(it) ? yachtzeeTurns * yachtzeeBuffValue((0, import_kolmafia94.equippedItem)((0, import_kolmafia94.toSlot)(it))) : Infinity
    };
  });
  var bestWaterBreathingEquipment = waterBreathingEquipment.some(function(item9) {
    return (0, import_kolmafia94.haveEquipped)(item9);
  }) ? {
    item: $item.none,
    cost: 0
  } : maxBy(waterBreathingEquipmentCosts, "cost", true);
  return bestWaterBreathingEquipment;
}
function prepareOutfitAndFamiliar() {
  (0, import_kolmafia94.useFamiliar)(bestYachtzeeFamiliar());
  if (!get("_feastedFamiliars").includes((0, import_kolmafia94.myFamiliar)().toString()) && get("_feastedFamiliars").split(";").length < 5) {
    withStash($items(_templateObject4145 || (_templateObject4145 = _taggedTemplateLiteral86(["moveable feast"]))), function() {
      return (0, import_kolmafia94.use)($item(_templateObject5139 || (_templateObject5139 = _taggedTemplateLiteral86(["moveable feast"]))));
    });
  }
  maximizeMeat();
  if (!(0, import_kolmafia94.myFamiliar)().underwater) {
    (0, import_kolmafia94.equip)($slot(_templateObject6126 || (_templateObject6126 = _taggedTemplateLiteral86(["familiar"]))), maxBy(familiarWaterBreathingEquipment.filter(function(it) {
      return have(it);
    }), function(eq) {
      return get2("Familiar Weight", eq);
    }));
  }
}
function stickerSetup(expectedYachts) {
  var currentStickers = $slots(_templateObject7105 || (_templateObject7105 = _taggedTemplateLiteral86(["sticker1, sticker2, sticker3"]))).map(function(s) {
    return (0, import_kolmafia94.equippedItem)(s);
  });
  var UPC2 = $item(_templateObject8100 || (_templateObject8100 = _taggedTemplateLiteral86(["scratch 'n' sniff UPC sticker"])));
  if (currentStickers.every(function(sticker) {
    return sticker === UPC2;
  }))
    return;
  var yachtOpportunityCost = 25 * findLeprechaunMultiplier(bestYachtzeeFamiliar());
  var embezzlerOpportunityCost = 25 * findLeprechaunMultiplier(meatFamiliar());
  var addedValueOfFullSword = (75 - yachtOpportunityCost) * expectedYachts * 2e3 / 100 + (75 - embezzlerOpportunityCost) * Math.min(20, expectedEmbezzlers) * (750 + baseMeat) / 100;
  if ((0, import_kolmafia94.mallPrice)(UPC2) < addedValueOfFullSword / 3) {
    var needed = 3 - currentStickers.filter(function(sticker) {
      return sticker === UPC2;
    }).length;
    if (needed)
      acquire(needed, UPC2, addedValueOfFullSword / 3, false);
    useUPCs();
  }
}

// src/yachtzee/fishy.ts
var _templateObject901;
var _templateObject2186;
var _templateObject3161;
var _templateObject4146;
var _templateObject5140;
var _templateObject6127;
var _templateObject7106;
var _templateObject8101;
var _templateObject980;
var _templateObject1067;
var _templateObject1159;
var _templateObject1257;
var _templateObject1351;
var _templateObject1447;
var _templateObject1541;
var _templateObject1640;
var _templateObject1740;
var _templateObject1839;
var _templateObject1939;
var _templateObject2039;
var _templateObject2187;
var _templateObject2237;
var _templateObject2336;
var _templateObject2436;
var _templateObject2536;
var _templateObject2636;
var _templateObject2734;
var _templateObject2830;
var _templateObject2930;
var _templateObject3028;
var _templateObject3163;
var _templateObject3230;
var _templateObject3329;
var _templateObject3428;
var _templateObject3526;
var _templateObject3624;
var _templateObject3724;
var _templateObject3823;
var _templateObject3921;
var _templateObject4021;
var _templateObject4147;
var _templateObject4224;
var _templateObject4324;
var _templateObject4423;
var _templateObject4521;
var _templateObject4619;
var _templateObject4719;
var _templateObject4819;
var _templateObject4919;
var _templateObject5019;
var _templateObject5141;
var _templateObject5224;
var _templateObject5324;
var _templateObject5421;
var _templateObject5520;
var _templateObject5619;
var _templateObject5718;
var _templateObject5818;
var _templateObject5918;
var _templateObject6017;
var _templateObject6128;
var _templateObject6221;
var _templateObject6320;
var _templateObject6417;
var _templateObject6516;
var _templateObject6616;
var _templateObject6716;
var _templateObject6815;
var _templateObject6915;
var _templateObject7014;
var _templateObject7117;
var _templateObject7217;
var _templateObject7317;
var _templateObject7416;
var _templateObject7516;
var _templateObject7614;
var _templateObject7713;
var _templateObject7811;
var _templateObject7910;
var _templateObject8010;
var _templateObject8117;
var _templateObject8217;
var _templateObject8316;
var _templateObject8416;
var _templateObject8515;
var _templateObject8613;
function _taggedTemplateLiteral87(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function fishyCloverAdventureOpportunityCost(pipe) {
  var willBeFishy = pipe || have($effect(_templateObject901 || (_templateObject901 = _taggedTemplateLiteral87(["Fishy"]))));
  var fishyCloverAdventureCost = willBeFishy ? 1 : 2;
  var adventureExtensionBonus = pyecAvailable() ? 5 : 0;
  return sum(getActiveEffects(), function(currentBuff) {
    var buffValue = yachtzeeBuffValue(currentBuff);
    if (buffValue <= 0)
      return 0;
    var currentBuffTurns = (0, import_kolmafia95.haveEffect)(currentBuff);
    if (currentBuffTurns <= fishyCloverAdventureCost) {
      return (currentBuffTurns + adventureExtensionBonus) * buffValue;
    }
    return fishyCloverAdventureCost * buffValue;
  });
}
function optimizeForFishy(yachtzeeTurns, setup) {
  var bestWaterBreathingEquipment = getBestWaterBreathingEquipment(yachtzeeTurns);
  if (setup && !have($effect(_templateObject2186 || (_templateObject2186 = _taggedTemplateLiteral87(["Really Deep Breath"])))) && bestWaterBreathingEquipment.item !== $item.none) {
    (0, import_kolmafia95.equip)(bestWaterBreathingEquipment.item);
  }
  if ((0, import_kolmafia95.haveEquipped)($item(_templateObject3161 || (_templateObject3161 = _taggedTemplateLiteral87(["The Crown of Ed the Undying"])))) && !(0, import_kolmafia95.booleanModifier)("Adventure Underwater")) {
    (0, import_kolmafia95.cliExecute)("edpiece fish");
  }
  if ((0, import_kolmafia95.haveEffect)($effect(_templateObject4146 || (_templateObject4146 = _taggedTemplateLiteral87(["Fishy"])))) >= yachtzeeTurns)
    return 0;
  if ((0, import_kolmafia95.haveEffect)($effect(_templateObject5140 || (_templateObject5140 = _taggedTemplateLiteral87(["Beaten Up"]))))) {
    uneffect($effect(_templateObject6127 || (_templateObject6127 = _taggedTemplateLiteral87(["Beaten Up"]))));
  }
  safeRestore();
  var haveFishyPipe = have($item(_templateObject7106 || (_templateObject7106 = _taggedTemplateLiteral87(["fishy pipe"])))) && !get("_fishyPipeUsed");
  var adventureExtensionBonus = pyecAvailable() ? 5 : 0;
  var fishySources = [{
    name: "fish juice box",
    turns: 20 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.mallPrice)($item(_templateObject8101 || (_templateObject8101 = _taggedTemplateLiteral87(["fish juice box"])))),
    action: function() {
      acquire(1, $item(_templateObject980 || (_templateObject980 = _taggedTemplateLiteral87(["fish juice box"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject1067 || (_templateObject1067 = _taggedTemplateLiteral87(["fish juice box"])))));
      if (!have($item(_templateObject1159 || (_templateObject1159 = _taggedTemplateLiteral87(["fish juice box"])))))
        throw new Error("Unable to obtain fish juice box");
      (0, import_kolmafia95.use)(1, $item(_templateObject1257 || (_templateObject1257 = _taggedTemplateLiteral87(["fish juice box"]))));
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject1351 || (_templateObject1351 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject1447 || (_templateObject1447 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "2x fish juice box",
    turns: 40 + (haveFishyPipe ? 10 : 0),
    cost: 2 * (0, import_kolmafia95.mallPrice)($item(_templateObject1541 || (_templateObject1541 = _taggedTemplateLiteral87(["fish juice box"])))),
    action: function() {
      acquire(2, $item(_templateObject1640 || (_templateObject1640 = _taggedTemplateLiteral87(["fish juice box"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject1740 || (_templateObject1740 = _taggedTemplateLiteral87(["fish juice box"])))));
      if ((0, import_kolmafia95.availableAmount)($item(_templateObject1839 || (_templateObject1839 = _taggedTemplateLiteral87(["fish juice box"])))) < 2) {
        throw new Error("Unable to obtain sufficient fish juice boxes");
      }
      (0, import_kolmafia95.use)(2, $item(_templateObject1939 || (_templateObject1939 = _taggedTemplateLiteral87(["fish juice box"]))));
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject2039 || (_templateObject2039 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject2187 || (_templateObject2187 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "cuppa Gill tea",
    turns: 30 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.mallPrice)($item(_templateObject2237 || (_templateObject2237 = _taggedTemplateLiteral87(["cuppa Gill tea"])))) + bestWaterBreathingEquipment.cost,
    action: function() {
      acquire(1, $item(_templateObject2336 || (_templateObject2336 = _taggedTemplateLiteral87(["cuppa Gill tea"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject2436 || (_templateObject2436 = _taggedTemplateLiteral87(["cuppa Gill tea"])))));
      if (!have($item(_templateObject2536 || (_templateObject2536 = _taggedTemplateLiteral87(["cuppa Gill tea"])))))
        throw new Error("Unable to obtain cuppa Gill tea");
      (0, import_kolmafia95.use)(1, $item(_templateObject2636 || (_templateObject2636 = _taggedTemplateLiteral87(["cuppa Gill tea"]))));
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject2734 || (_templateObject2734 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject2830 || (_templateObject2830 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "powdered candy sushi set",
    turns: 30 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.mallPrice)($item(_templateObject2930 || (_templateObject2930 = _taggedTemplateLiteral87(["powdered candy sushi set"])))) + bestWaterBreathingEquipment.cost,
    action: function() {
      acquire(1, $item(_templateObject3028 || (_templateObject3028 = _taggedTemplateLiteral87(["powdered candy sushi set"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject3163 || (_templateObject3163 = _taggedTemplateLiteral87(["powdered candy sushi set"])))));
      if (!have($item(_templateObject3230 || (_templateObject3230 = _taggedTemplateLiteral87(["powdered candy sushi set"]))))) {
        throw new Error("Unable to obtain powdered candy sushi set");
      }
      (0, import_kolmafia95.use)(1, $item(_templateObject3329 || (_templateObject3329 = _taggedTemplateLiteral87(["powdered candy sushi set"]))));
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject3428 || (_templateObject3428 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject3526 || (_templateObject3526 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "concentrated fish broth",
    turns: 30 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.mallPrice)($item(_templateObject3624 || (_templateObject3624 = _taggedTemplateLiteral87(["concentrated fish broth"])))) + bestWaterBreathingEquipment.cost,
    action: function() {
      acquire(1, $item(_templateObject3724 || (_templateObject3724 = _taggedTemplateLiteral87(["concentrated fish broth"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject3823 || (_templateObject3823 = _taggedTemplateLiteral87(["concentrated fish broth"])))));
      if (!have($item(_templateObject3921 || (_templateObject3921 = _taggedTemplateLiteral87(["concentrated fish broth"]))))) {
        throw new Error("Unable to obtain concentrated fish broth");
      }
      (0, import_kolmafia95.use)(1, $item(_templateObject4021 || (_templateObject4021 = _taggedTemplateLiteral87(["concentrated fish broth"]))));
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject4147 || (_templateObject4147 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject4224 || (_templateObject4224 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "Lutz, the Ice Skate",
    turns: 30 + (haveFishyPipe ? 10 : 0),
    cost: get("_skateBuff1") || get("skateParkStatus") !== "ice" ? Infinity : bestWaterBreathingEquipment.cost,
    action: function() {
      (0, import_kolmafia95.cliExecute)("skate lutz");
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject4324 || (_templateObject4324 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject4423 || (_templateObject4423 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "Pocket Wish",
    turns: 20 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.mallPrice)($item(_templateObject4521 || (_templateObject4521 = _taggedTemplateLiteral87(["pocket wish"])))) + bestWaterBreathingEquipment.cost,
    action: function() {
      acquire(1, $item(_templateObject4619 || (_templateObject4619 = _taggedTemplateLiteral87(["pocket wish"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject4719 || (_templateObject4719 = _taggedTemplateLiteral87(["pocket wish"])))));
      if (!have($item(_templateObject4819 || (_templateObject4819 = _taggedTemplateLiteral87(["pocket wish"]))))) {
        throw new Error("Unable to obtain Pocket Wish");
      }
      (0, import_kolmafia95.cliExecute)("genie effect Fishy");
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject4919 || (_templateObject4919 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject5019 || (_templateObject5019 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "2x Pocket Wish",
    turns: 40 + (haveFishyPipe ? 10 : 0),
    cost: 2 * (0, import_kolmafia95.mallPrice)($item(_templateObject5141 || (_templateObject5141 = _taggedTemplateLiteral87(["pocket wish"])))) + bestWaterBreathingEquipment.cost,
    action: function() {
      acquire(2, $item(_templateObject5224 || (_templateObject5224 = _taggedTemplateLiteral87(["pocket wish"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject5324 || (_templateObject5324 = _taggedTemplateLiteral87(["pocket wish"])))));
      if ((0, import_kolmafia95.availableAmount)($item(_templateObject5421 || (_templateObject5421 = _taggedTemplateLiteral87(["pocket wish"])))) < 2) {
        throw new Error("Unable to obtain Pocket Wish");
      }
      (0, import_kolmafia95.cliExecute)("genie effect Fishy");
      (0, import_kolmafia95.cliExecute)("genie effect Fishy");
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject5520 || (_templateObject5520 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject5619 || (_templateObject5619 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
    }
  }, {
    name: "The Haggling (August Scepter)",
    turns: 50 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.canAdventure)($location(_templateObject5718 || (_templateObject5718 = _taggedTemplateLiteral87(["The Brinier Deepers"])))) ? (have($effect(_templateObject5818 || (_templateObject5818 = _taggedTemplateLiteral87(["Lucky!"])))) ? 0 : shouldAugustCast($skill(_templateObject5918 || (_templateObject5918 = _taggedTemplateLiteral87(["Aug. 2nd: Find an Eleven-Leaf Clover Day"])))) ? 0 : Infinity) + get("valueOfAdventure") + bestWaterBreathingEquipment.cost + fishyCloverAdventureOpportunityCost(haveFishyPipe) : Infinity,
    action: function() {
      if (!have($effect(_templateObject6017 || (_templateObject6017 = _taggedTemplateLiteral87(["Lucky!"]))))) {
        if (have($familiar(_templateObject6128 || (_templateObject6128 = _taggedTemplateLiteral87(["Left-Hand Man"]))))) {
          (0, import_kolmafia95.equip)($familiar(_templateObject6221 || (_templateObject6221 = _taggedTemplateLiteral87(["Left-Hand Man"]))), $item.none);
        }
        (0, import_kolmafia95.useSkill)($skill(_templateObject6320 || (_templateObject6320 = _taggedTemplateLiteral87(["Aug. 2nd: Find an Eleven-Leaf Clover Day"]))));
        if (!have($effect(_templateObject6417 || (_templateObject6417 = _taggedTemplateLiteral87(["Lucky!"]))))) {
          throw new Error("Failed to acquire Lucky! from August Scepter");
        }
      }
      if (haveFishyPipe)
        (0, import_kolmafia95.use)(1, $item(_templateObject6516 || (_templateObject6516 = _taggedTemplateLiteral87(["fishy pipe"]))));
      garboAdventure($location(_templateObject6616 || (_templateObject6616 = _taggedTemplateLiteral87(["The Brinier Deepers"]))), Macro2.abort());
      if (get("lastAdventure") !== "The Brinier Deepers") {
        (0, import_kolmafia95.print)("We failed to adventure in The Brinier Deepers, even though we thought we could. Try manually adventuring there for a lucky adventure.", "red");
      }
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject6716 || (_templateObject6716 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject6815 || (_templateObject6815 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
      if ((0, import_kolmafia95.haveEffect)($effect(_templateObject6915 || (_templateObject6915 = _taggedTemplateLiteral87(["Fishy"])))) < yachtzeeTurns) {
        throw new Error("Failed to get fishy from clover adv");
      }
    }
  }, {
    name: "The Haggling (Clover)",
    turns: 50 + (haveFishyPipe ? 10 : 0),
    cost: (0, import_kolmafia95.canAdventure)($location(_templateObject7014 || (_templateObject7014 = _taggedTemplateLiteral87(["The Brinier Deepers"])))) ? (have($effect(_templateObject7117 || (_templateObject7117 = _taggedTemplateLiteral87(["Lucky!"])))) ? 0 : (0, import_kolmafia95.mallPrice)($item(_templateObject7217 || (_templateObject7217 = _taggedTemplateLiteral87(["11-leaf clover"]))))) + get("valueOfAdventure") + bestWaterBreathingEquipment.cost + fishyCloverAdventureOpportunityCost(haveFishyPipe) : Infinity,
    action: function() {
      if (!have($effect(_templateObject7317 || (_templateObject7317 = _taggedTemplateLiteral87(["Lucky!"]))))) {
        acquire(1, $item(_templateObject7416 || (_templateObject7416 = _taggedTemplateLiteral87(["11-leaf clover"]))), 1.2 * (0, import_kolmafia95.mallPrice)($item(_templateObject7516 || (_templateObject7516 = _taggedTemplateLiteral87(["11-leaf clover"])))));
        if (!have($item(_templateObject7614 || (_templateObject7614 = _taggedTemplateLiteral87(["11-leaf clover"]))))) {
          throw new Error("Unable to get 11-leaf clover for fishy!");
        }
        (0, import_kolmafia95.use)(1, $item(_templateObject7713 || (_templateObject7713 = _taggedTemplateLiteral87(["11-leaf clover"]))));
      }
      if (haveFishyPipe)
        (0, import_kolmafia95.use)(1, $item(_templateObject7811 || (_templateObject7811 = _taggedTemplateLiteral87(["fishy pipe"]))));
      garboAdventure($location(_templateObject7910 || (_templateObject7910 = _taggedTemplateLiteral87(["The Brinier Deepers"]))), Macro2.abort());
      if (get("lastAdventure") !== "The Brinier Deepers") {
        (0, import_kolmafia95.print)("We failed to adventure in The Brinier Deepers, even though we thought we could. Try manually adventuring there for a lucky adventure.", "red");
      }
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject8010 || (_templateObject8010 = _taggedTemplateLiteral87(["Fishy"])))) + adventureExtensionBonus < yachtzeeTurns) {
        (0, import_kolmafia95.use)(1, $item(_templateObject8117 || (_templateObject8117 = _taggedTemplateLiteral87(["fishy pipe"]))));
      }
      if ((0, import_kolmafia95.haveEffect)($effect(_templateObject8217 || (_templateObject8217 = _taggedTemplateLiteral87(["Fishy"])))) < yachtzeeTurns) {
        throw new Error("Failed to get fishy from clover adv");
      }
    }
  }, {
    name: "Just Fishy Pipe",
    turns: 10,
    cost: haveFishyPipe ? bestWaterBreathingEquipment.cost : Infinity,
    action: function() {
      if (haveFishyPipe && (0, import_kolmafia95.haveEffect)($effect(_templateObject8316 || (_templateObject8316 = _taggedTemplateLiteral87(["Fishy"])))) < yachtzeeTurns)
        (0, import_kolmafia95.use)(1, $item(_templateObject8416 || (_templateObject8416 = _taggedTemplateLiteral87(["fishy pipe"]))));
    }
  }];
  var bestFishySource = maxBy(fishySources.filter(function(source) {
    return source.turns + (0, import_kolmafia95.haveEffect)($effect(_templateObject8515 || (_templateObject8515 = _taggedTemplateLiteral87(["Fishy"])))) >= yachtzeeTurns;
  }), "cost", true);
  (0, import_kolmafia95.print)("Cost of viable Fishy sources:", "blue");
  fishySources.filter(function(source) {
    return source.turns + (0, import_kolmafia95.haveEffect)($effect(_templateObject8613 || (_templateObject8613 = _taggedTemplateLiteral87(["Fishy"])))) >= yachtzeeTurns;
  }).forEach(function(source) {
    (0, import_kolmafia95.print)("".concat(source.name, " (").concat(source.cost, ")"), "blue");
  });
  if (setup) {
    (0, import_kolmafia95.print)("Taking best fishy source: ".concat(bestFishySource.name), "blue");
    bestFishySource.action();
  }
  return bestFishySource.cost;
}

// src/yachtzee/diet.ts
var _templateObject908;
var _templateObject2188;
var _templateObject3164;
var _templateObject4148;
var _templateObject5143;
var _templateObject6129;
var _templateObject7107;
var _templateObject8102;
var _templateObject981;
var _templateObject1068;
var _templateObject1160;
var _templateObject1258;
var _templateObject1356;
var _templateObject1448;
var _templateObject1545;
var _templateObject1641;
var _templateObject1741;
var _templateObject1840;
var _templateObject1940;
var _templateObject2040;
var _templateObject2189;
var _templateObject2238;
var _templateObject2337;
var _templateObject2437;
var _templateObject2537;
var _templateObject2637;
var _templateObject2735;
var _templateObject2831;
var _templateObject2931;
var _templateObject3029;
var _templateObject3165;
var _templateObject3231;
var _templateObject3330;
var _templateObject3429;
var _templateObject3527;
var _templateObject3625;
var _templateObject3725;
var _templateObject3824;
var _templateObject3923;
var _templateObject4023;
var _templateObject4149;
var _templateObject4225;
var _templateObject4325;
var _templateObject4424;
var _templateObject4523;
var _templateObject4620;
var _templateObject4720;
var _templateObject4820;
var _templateObject4920;
var _templateObject5020;
var _templateObject5144;
var _templateObject5225;
var _templateObject5325;
var _templateObject5423;
var _templateObject5521;
var _templateObject5620;
var _templateObject5719;
var _templateObject5819;
var _templateObject5919;
var _templateObject6018;
var _templateObject6130;
var _templateObject6223;
var _templateObject6321;
var _templateObject6418;
var _templateObject6517;
var _templateObject6617;
var _templateObject6717;
var _templateObject6816;
var _templateObject6916;
var _templateObject7015;
var _templateObject7118;
var _templateObject7218;
var _templateObject7318;
var _templateObject7417;
var _templateObject7517;
var _templateObject7615;
var _templateObject7714;
var _templateObject7812;
var _templateObject7911;
var _templateObject8011;
var _templateObject8118;
var _templateObject8218;
var _templateObject8317;
var _templateObject8417;
var _templateObject8516;
var _templateObject8614;
var _templateObject8710;
var _templateObject8810;
var _templateObject8910;
var _templateObject909;
var _templateObject9115;
function _toConsumableArray51(arr) {
  return _arrayWithoutHoles51(arr) || _iterableToArray51(arr) || _unsupportedIterableToArray66(arr) || _nonIterableSpread51();
}
function _nonIterableSpread51() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArray51(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles51(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray66(arr);
}
function _slicedToArray29(arr, i) {
  return _arrayWithHoles29(arr) || _iterableToArrayLimit29(arr, i) || _unsupportedIterableToArray66(arr, i) || _nonIterableRest29();
}
function _nonIterableRest29() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit29(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles29(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _createForOfIteratorHelper36(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray66(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e2) {
        throw _e2;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e3) {
    didErr = true;
    err = _e3;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray66(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray66(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray66(o, minLen);
}
function _arrayLikeToArray66(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral88(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _defineProperties29(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey38(descriptor.key), descriptor);
  }
}
function _createClass29(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties29(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties29(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
function _classCallCheck29(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperty33(obj, key, value) {
  key = _toPropertyKey38(key);
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _toPropertyKey38(arg) {
  var key = _toPrimitive38(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}
function _toPrimitive38(input, hint) {
  if (typeof input !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
var YachtzeeDietEntry = /* @__PURE__ */ _createClass29(function YachtzeeDietEntry2(name, quantity, fullness, drunkenness, spleen, action) {
  _classCallCheck29(this, YachtzeeDietEntry2);
  _defineProperty33(this, "name", void 0);
  _defineProperty33(this, "quantity", void 0);
  _defineProperty33(this, "fullness", void 0);
  _defineProperty33(this, "drunkenness", void 0);
  _defineProperty33(this, "spleen", void 0);
  _defineProperty33(this, "action", void 0);
  this.name = name;
  this.quantity = quantity;
  this.fullness = fullness;
  this.drunkenness = drunkenness;
  this.spleen = spleen;
  this.action = action;
});
function ensureConsumable(name, n, fullness, inebriety, spleenUse) {
  if ((0, import_kolmafia96.myFullness)() + n * fullness > (0, import_kolmafia96.fullnessLimit)()) {
    throw new Error("Eating ".concat(n, " ").concat(name, " exceeds our stomach capacity!"));
  } else if ((0, import_kolmafia96.myInebriety)() + n * inebriety > (0, import_kolmafia96.inebrietyLimit)()) {
    throw new Error("Drinking ".concat(n, " ").concat(name, " exceeds our liver capacity!"));
  } else if ((0, import_kolmafia96.mySpleenUse)() + n * spleenUse > (0, import_kolmafia96.spleenLimit)()) {
    throw new Error("Using ".concat(n, " ").concat(name, " exceeds our spleen capacity!"));
  }
}
var YachtzeeDietUtils = /* @__PURE__ */ function() {
  function YachtzeeDietUtils2(action) {
    _classCallCheck29(this, YachtzeeDietUtils2);
    _defineProperty33(this, "dietArray", void 0);
    _defineProperty33(this, "pref", void 0);
    _defineProperty33(this, "originalPref", void 0);
    this.originalPref = !get("_garboYachtzeeChainDiet") ? "" : get("_garboYachtzeeChainDiet");
    this.pref = "";
    this.dietArray = [new YachtzeeDietEntry("extra-greasy slider", 0, 5, 0, -5, function(n) {
      ensureConsumable("extra-greasy slider", n, 5, 0, -5);
      (0, import_kolmafia96.eat)(n, $item(_templateObject908 || (_templateObject908 = _taggedTemplateLiteral88(["extra-greasy slider"]))));
    }), new YachtzeeDietEntry("jar of fermented pickle juice", 0, 0, 5, -5, function(n) {
      ensureConsumable("jar of fermented pickle juice", n, 0, 5, -5);
      castOde(5 * n);
      (0, import_kolmafia96.drink)(n, $item(_templateObject2188 || (_templateObject2188 = _taggedTemplateLiteral88(["jar of fermented pickle juice"]))));
    }), new YachtzeeDietEntry("Extrovermectin\u2122", 0, 0, 0, 2, function(n) {
      ensureConsumable("Extrovermectin\u2122", n, 0, 0, 2);
      (0, import_kolmafia96.chew)(n, $item(_templateObject3164 || (_templateObject3164 = _taggedTemplateLiteral88(["Extrovermectin\u2122"]))));
    }), new YachtzeeDietEntry("synthesis", 0, 0, 0, 1, function(n) {
      ensureConsumable("synthesis", n, 0, 0, 1);
      synthesize(n, $effect(_templateObject4148 || (_templateObject4148 = _taggedTemplateLiteral88(["Synthesis: Greed"]))));
    }), new YachtzeeDietEntry("mojo filter", 0, 0, 0, -1, function(n) {
      (0, import_kolmafia96.use)(n, $item(_templateObject5143 || (_templateObject5143 = _taggedTemplateLiteral88(["mojo filter"]))));
    }), new YachtzeeDietEntry("beggin' cologne", 0, 0, 0, 1, function(n) {
      ensureConsumable("beggin' cologne", n, 0, 0, 1);
      (0, import_kolmafia96.chew)(n, $item(_templateObject6129 || (_templateObject6129 = _taggedTemplateLiteral88(["beggin' cologne"]))));
    }), new YachtzeeDietEntry("stench jelly", 0, 0, 0, 1, function(n) {
      ensureConsumable("stench jelly", n, 0, 0, 1);
      (0, import_kolmafia96.chew)(n, $item(_templateObject7107 || (_templateObject7107 = _taggedTemplateLiteral88(["stench jelly"]))));
    }), new YachtzeeDietEntry("toast with stench jelly", 0, 1, 0, 0, function(n) {
      ensureConsumable("toast with stench jelly", n, 1, 0, 0);
      var VOA = get("valueOfAdventure");
      if (garboValue($item(_templateObject8102 || (_templateObject8102 = _taggedTemplateLiteral88(["munchies pill"])))) < 2.66 * VOA) {
        acquire(n, $item(_templateObject981 || (_templateObject981 = _taggedTemplateLiteral88(["munchies pill"]))), 2.66 * VOA, false);
        (0, import_kolmafia96.use)(Math.min(n, (0, import_kolmafia96.itemAmount)($item(_templateObject1068 || (_templateObject1068 = _taggedTemplateLiteral88(["munchies pill"]))))), $item(_templateObject1160 || (_templateObject1160 = _taggedTemplateLiteral88(["munchies pill"]))));
      }
      (0, import_kolmafia96.eat)(n, $item(_templateObject1258 || (_templateObject1258 = _taggedTemplateLiteral88(["toast with stench jelly"]))));
    }), new YachtzeeDietEntry("jumping horseradish", 0, 1, 0, 0, function(n) {
      ensureConsumable("jumping horseradish", n, 1, 0, 0);
      (0, import_kolmafia96.eat)(n, $item(_templateObject1356 || (_templateObject1356 = _taggedTemplateLiteral88(["jumping horseradish"]))));
    }), new YachtzeeDietEntry("Boris's bread", 0, 1, 0, 0, function(n) {
      ensureConsumable("Boris's bread", n, 1, 0, 0);
      (0, import_kolmafia96.eat)(n, $item(_templateObject1448 || (_templateObject1448 = _taggedTemplateLiteral88(["Boris's bread"]))));
    }), new YachtzeeDietEntry("bottle of Greedy Dog", 0, 0, 3, 0, function(n) {
      ensureConsumable("bottle of Greedy Dog", n, 0, 3, 0);
      (0, import_kolmafia96.drink)(n, $item(_templateObject1545 || (_templateObject1545 = _taggedTemplateLiteral88(["bottle of Greedy Dog"]))));
    }), new YachtzeeDietEntry("clara's bell", 0, 0, 0, 0, function() {
      (0, import_kolmafia96.use)($item(_templateObject1641 || (_templateObject1641 = _taggedTemplateLiteral88(["Clara's bell"]))));
      globalOptions.clarasBellClaimed = true;
    }), new YachtzeeDietEntry("Deep Dish of Legend", 0, 2, 0, 0, function(n) {
      ensureConsumable("Deep Dish of Legend", n, 2, 0, 0);
      (0, import_kolmafia96.eat)(n, $item(_templateObject1741 || (_templateObject1741 = _taggedTemplateLiteral88(["Deep Dish of Legend"]))));
    }), new YachtzeeDietEntry("jurassic parka", 0, 0, 0, 0, useSpikolodonSpikes), new YachtzeeDietEntry("cinch fiesta", 0, 0, 0, 0, function() {
      (0, import_kolmafia96.equip)($slot(_templateObject1840 || (_templateObject1840 = _taggedTemplateLiteral88(["acc3"]))), $item(_templateObject1940 || (_templateObject1940 = _taggedTemplateLiteral88(["Cincho de Mayo"]))));
      while (CinchoDeMayo_exports.currentCinch() < 60) {
        if (!freeRest())
          throw new Error("We are out of free rests!");
      }
      (0, import_kolmafia96.useSkill)($skill(_templateObject2040 || (_templateObject2040 = _taggedTemplateLiteral88(["Cincho: Fiesta Exit"]))));
    })];
    if (action)
      this.dietArray.forEach(function(entry) {
        return entry.action = action;
      });
  }
  _createClass29(YachtzeeDietUtils2, [{
    key: "setDietEntry",
    value: function setDietEntry(name, qty, action) {
      this.dietArray.forEach(function(entry) {
        if (entry.name === name) {
          if (qty)
            entry.quantity = qty;
          if (action)
            entry.action = action;
        }
      });
    }
  }, {
    key: "resetDietPref",
    value: function resetDietPref() {
      this.originalPref = "";
      this.pref = "";
    }
  }, {
    key: "addToPref",
    value: function addToPref(n, name) {
      if (!name)
        throw new Error("Diet pref must have a name");
      for (var i = 0; i < n; i++) {
        this.pref = this.pref.concat(name !== null && name !== void 0 ? name : "").concat(",");
      }
    }
  }, {
    key: "setDietPref",
    value: function setDietPref() {
      _set("_garboYachtzeeChainDiet", this.originalPref.concat(this.pref));
    }
  }]);
  return YachtzeeDietUtils2;
}();
function splitDietEntry(entry) {
  var entries = new Array();
  for (var i = 0; i < entry.quantity; i++) {
    entries.push(new YachtzeeDietEntry(entry.name, 1, entry.fullness, entry.drunkenness, entry.spleen, entry.action));
  }
  return entries;
}
function combineDietEntries(left, right) {
  return new YachtzeeDietEntry(left.name, left.quantity + right.quantity, left.fullness, left.drunkenness, left.spleen, left.action);
}
function castOde(turns2) {
  if (!have($skill(_templateObject2189 || (_templateObject2189 = _taggedTemplateLiteral88(["The Ode to Booze"])))))
    return false;
  shrugIrrelevantSongs();
  if (getSongCount() - (0, import_kolmafia96.toInt)(have($effect(_templateObject2238 || (_templateObject2238 = _taggedTemplateLiteral88(["Ode to Booze"]))))) >= getSongLimit()) {
    if (have($skill(_templateObject2337 || (_templateObject2337 = _taggedTemplateLiteral88(["The Polka of Plenty"])))))
      (0, import_kolmafia96.cliExecute)("shrug ".concat($effect(_templateObject2437 || (_templateObject2437 = _taggedTemplateLiteral88(["Polka of Plenty"])))));
    else
      (0, import_kolmafia96.cliExecute)("shrug ".concat($effect(_templateObject2537 || (_templateObject2537 = _taggedTemplateLiteral88(["Chorale of Companionship"])))));
  }
  while ((0, import_kolmafia96.haveEffect)($effect(_templateObject2637 || (_templateObject2637 = _taggedTemplateLiteral88(["Ode to Booze"])))) < turns2) {
    (0, import_kolmafia96.useSkill)($skill(_templateObject2735 || (_templateObject2735 = _taggedTemplateLiteral88(["The Ode to Booze"]))));
  }
  return true;
}
function executeNextDietStep(stopBeforeJellies) {
  if (get("noncombatForcerActive"))
    return;
  (0, import_kolmafia96.print)("Executing next diet steps", "blue");
  var dietUtil = new YachtzeeDietUtils();
  dietUtil.resetDietPref();
  var VOA = get("valueOfAdventure");
  var dietString = get("_garboYachtzeeChainDiet").split(",");
  var stenchJellyConsumed = false;
  var _iterator = _createForOfIteratorHelper36(dietString), _step;
  try {
    var _loop = function _loop2() {
      var name = _step.value;
      if (name.length === 0)
        return "continue";
      else if (!stenchJellyConsumed && (name.includes("stench jelly") || ["clara's bell", "jurassic parka", "cinch fiesta"].includes(name))) {
        if (stopBeforeJellies)
          dietUtil.addToPref(1, name);
        else {
          var entry = dietUtil.dietArray.find(function(entry2) {
            return entry2.name === name;
          });
          if (entry) {
            if (entry.fullness > 0) {
              if (shouldAugustCast($skill(_templateObject2831 || (_templateObject2831 = _taggedTemplateLiteral88(["Aug. 16th: Roller Coaster Day!"])))) && (0, import_kolmafia96.myFullness)() > 0) {
                (0, import_kolmafia96.useSkill)($skill(_templateObject2931 || (_templateObject2931 = _taggedTemplateLiteral88(["Aug. 16th: Roller Coaster Day!"]))));
              }
              if (!get("_milkOfMagnesiumUsed")) {
                acquire(1, $item(_templateObject3029 || (_templateObject3029 = _taggedTemplateLiteral88(["milk of magnesium"]))), 5 * VOA);
                (0, import_kolmafia96.use)(1, $item(_templateObject3165 || (_templateObject3165 = _taggedTemplateLiteral88(["milk of magnesium"]))));
              }
              if (!get("_distentionPillUsed") && have($item(_templateObject3231 || (_templateObject3231 = _taggedTemplateLiteral88(["distention pill"]))))) {
                (0, import_kolmafia96.use)(1, $item(_templateObject3330 || (_templateObject3330 = _taggedTemplateLiteral88(["distention pill"]))));
              }
            }
            entry.action(1);
          } else {
            throw new Error("Could not find ".concat(name, " in dietArray"));
          }
        }
        stenchJellyConsumed = true;
      } else if (!stenchJellyConsumed) {
        dietUtil.dietArray.forEach(function(entry2) {
          if (entry2.name === name) {
            if (entry2.drunkenness > 0) {
              while (get("sweat") >= 25 && get("_sweatOutSomeBoozeUsed") < 3 && (0, import_kolmafia96.myInebriety)() > 0) {
                (0, import_kolmafia96.useSkill)($skill(_templateObject3429 || (_templateObject3429 = _taggedTemplateLiteral88(["Sweat Out Some Booze"]))));
              }
              if (!get("_syntheticDogHairPillUsed") && have($item(_templateObject3527 || (_templateObject3527 = _taggedTemplateLiteral88(["synthetic dog hair pill"]))))) {
                (0, import_kolmafia96.use)(1, $item(_templateObject3625 || (_templateObject3625 = _taggedTemplateLiteral88(["synthetic dog hair pill"]))));
              }
            }
            if ((0, import_kolmafia96.myFullness)() + entry2.fullness > (0, import_kolmafia96.fullnessLimit)() + (!get("_distentionPillUsed") && have($item(_templateObject3725 || (_templateObject3725 = _taggedTemplateLiteral88(["distention pill"])))) ? 1 : 0)) {
              throw new Error("consuming ".concat(entry2.name, " will exceed our fullness limit"));
            } else if ((0, import_kolmafia96.myInebriety)() + entry2.drunkenness > (0, import_kolmafia96.inebrietyLimit)()) {
              throw new Error("consuming ".concat(entry2.name, " will exceed our inebriety limit"));
            } else if ((0, import_kolmafia96.mySpleenUse)() + entry2.spleen > (0, import_kolmafia96.spleenLimit)()) {
              throw new Error("consuming ".concat(entry2.name, " will exceed our spleen limit"));
            }
            if (entry2.fullness > 0) {
              if (!get("_milkOfMagnesiumUsed")) {
                acquire(1, $item(_templateObject3824 || (_templateObject3824 = _taggedTemplateLiteral88(["milk of magnesium"]))), 5 * VOA);
                (0, import_kolmafia96.use)(1, $item(_templateObject3923 || (_templateObject3923 = _taggedTemplateLiteral88(["milk of magnesium"]))));
              }
              if (!get("_distentionPillUsed") && have($item(_templateObject4023 || (_templateObject4023 = _taggedTemplateLiteral88(["distention pill"]))))) {
                (0, import_kolmafia96.use)(1, $item(_templateObject4149 || (_templateObject4149 = _taggedTemplateLiteral88(["distention pill"]))));
              }
            }
            entry2.action(1);
          }
        });
      } else {
        dietUtil.addToPref(1, name);
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _ret = _loop();
      if (_ret === "continue")
        continue;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  dietUtil.setDietPref();
  if (!stenchJellyConsumed) {
    throw new Error("We completed our entire diet but failed to get a stench jelly charge");
  }
}
function yachtzeeDietScheduler(menu3) {
  var dietSchedule = new Array();
  var remainingMenu = new Array();
  var jellies = new Array();
  var haveDistentionPill = !get("_distentionPillUsed") && have($item(_templateObject4225 || (_templateObject4225 = _taggedTemplateLiteral88(["distention pill"]))));
  var toasts = new Array();
  var freeNCs2 = new Array();
  var _iterator2 = _createForOfIteratorHelper36(menu3), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var _entry3 = _step2.value;
      if (_entry3.spleen < 0) {
        var _iterator6 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step6;
        try {
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done; ) {
            var splitEntry = _step6.value;
            dietSchedule.push(splitEntry);
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
      } else if (_entry3.name === "stench jelly") {
        var _iterator7 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step7;
        try {
          for (_iterator7.s(); !(_step7 = _iterator7.n()).done; ) {
            var _splitEntry = _step7.value;
            jellies.push(_splitEntry);
          }
        } catch (err) {
          _iterator7.e(err);
        } finally {
          _iterator7.f();
        }
      } else if (_entry3.name === "toast with stench jelly") {
        var _iterator8 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step8;
        try {
          for (_iterator8.s(); !(_step8 = _iterator8.n()).done; ) {
            var _splitEntry2 = _step8.value;
            toasts.push(_splitEntry2);
          }
        } catch (err) {
          _iterator8.e(err);
        } finally {
          _iterator8.f();
        }
      } else if (_entry3.name === "jurassic parka") {
        var _iterator9 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step9;
        try {
          for (_iterator9.s(); !(_step9 = _iterator9.n()).done; ) {
            var _splitEntry3 = _step9.value;
            freeNCs2.push(_splitEntry3);
          }
        } catch (err) {
          _iterator9.e(err);
        } finally {
          _iterator9.f();
        }
      } else if (_entry3.name === "clara's bell") {
        var _iterator10 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step10;
        try {
          for (_iterator10.s(); !(_step10 = _iterator10.n()).done; ) {
            var _splitEntry4 = _step10.value;
            freeNCs2.splice(0, 0, _splitEntry4);
          }
        } catch (err) {
          _iterator10.e(err);
        } finally {
          _iterator10.f();
        }
      } else if (_entry3.fullness > 0 || _entry3.drunkenness > 0) {
        var _iterator11 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step11;
        try {
          for (_iterator11.s(); !(_step11 = _iterator11.n()).done; ) {
            var _splitEntry5 = _step11.value;
            dietSchedule.splice(0, 0, _splitEntry5);
          }
        } catch (err) {
          _iterator11.e(err);
        } finally {
          _iterator11.f();
        }
      } else {
        var _iterator12 = _createForOfIteratorHelper36(splitDietEntry(_entry3)), _step12;
        try {
          for (_iterator12.s(); !(_step12 = _iterator12.n()).done; ) {
            var _splitEntry6 = _step12.value;
            remainingMenu.push(_splitEntry6);
          }
        } catch (err) {
          _iterator12.e(err);
        } finally {
          _iterator12.f();
        }
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  for (var _i = 0, _toasts = toasts; _i < _toasts.length; _i++) {
    var toast = _toasts[_i];
    dietSchedule.push(toast);
  }
  remainingMenu.sort(function(left, right) {
    return right.spleen - left.spleen;
  });
  for (var _i2 = 0, _arr = [remainingMenu, jellies]; _i2 < _arr.length; _i2++) {
    var spleeners = _arr[_i2];
    var _iterator3 = _createForOfIteratorHelper36(spleeners), _step3;
    try {
      for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
        var entry = _step3.value;
        var _idx = 0;
        var _spleenUse = (0, import_kolmafia96.mySpleenUse)();
        while (_idx < dietSchedule.length && (dietSchedule[_idx].spleen >= 0 && // We only insert if there's a cleanser immediately after where we want to insert
        (entry.spleen >= 0 || _spleenUse + dietSchedule[_idx].spleen <= (0, import_kolmafia96.spleenLimit)()) || _spleenUse + entry.spleen > (0, import_kolmafia96.spleenLimit)() || // But don't insert if we will overshoot our spleen limit
        _idx > 0 && dietSchedule[_idx - 1].spleen < 0 && _spleenUse + dietSchedule[_idx].spleen >= 0)) {
          var _dietSchedule$_idx$sp;
          _spleenUse += (_dietSchedule$_idx$sp = dietSchedule[_idx++].spleen) !== null && _dietSchedule$_idx$sp !== void 0 ? _dietSchedule$_idx$sp : 0;
        }
        dietSchedule.splice(_idx, 0, entry);
      }
    } catch (err) {
      _iterator3.e(err);
    } finally {
      _iterator3.f();
    }
  }
  for (var _idx2 = 0; _idx2 <= dietSchedule.length; _idx2++) {
    if (_idx2 === dietSchedule.length) {
      var _iterator4 = _createForOfIteratorHelper36(freeNCs2), _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
          var freeNCSource = _step4.value;
          dietSchedule.push(freeNCSource);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      break;
    } else if (dietSchedule[_idx2].name.includes("jelly")) {
      var _iterator5 = _createForOfIteratorHelper36(freeNCs2), _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
          var _freeNCSource = _step5.value;
          dietSchedule.splice(_idx2, 0, _freeNCSource);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      break;
    }
  }
  var idx = 0;
  while (idx < dietSchedule.length - 1) {
    if (dietSchedule[idx].name === dietSchedule[idx + 1].name) {
      dietSchedule.splice(idx, 2, combineDietEntries(dietSchedule[idx], dietSchedule[idx + 1]));
    } else
      idx++;
  }
  (0, import_kolmafia96.print)("Diet schedule:", "blue");
  for (var _i3 = 0, _dietSchedule = dietSchedule; _i3 < _dietSchedule.length; _i3++) {
    var _entry = _dietSchedule[_i3];
    (0, import_kolmafia96.print)("Use ".concat(_entry.quantity, " ").concat(_entry.name), "blue");
  }
  var fullness = (0, import_kolmafia96.myFullness)();
  var drunkenness = (0, import_kolmafia96.myInebriety)();
  var spleenUse = (0, import_kolmafia96.mySpleenUse)();
  var sweatOutsAvailable = clamp(Math.floor(get("sweat") / 25), 0, 3 - get("_sweatOutSomeBoozeUsed"));
  var syntheticPillsAvailable = !get("_syntheticDogHairPillUsed") && have($item(_templateObject4325 || (_templateObject4325 = _taggedTemplateLiteral88(["synthetic dog hair pill"])))) ? 1 : 0;
  for (var _i4 = 0, _dietSchedule2 = dietSchedule; _i4 < _dietSchedule2.length; _i4++) {
    var _entry2 = _dietSchedule2[_i4];
    fullness += _entry2.quantity * _entry2.fullness;
    for (var i = 0; i < _entry2.quantity; i++) {
      while (drunkenness > 0 && sweatOutsAvailable > 0) {
        drunkenness -= 1;
        sweatOutsAvailable -= 1;
      }
      if (drunkenness > 0 && syntheticPillsAvailable > 0) {
        drunkenness -= 1;
        syntheticPillsAvailable -= 1;
      }
      drunkenness += _entry2.drunkenness;
    }
    spleenUse += _entry2.quantity * _entry2.spleen;
    if (fullness > (0, import_kolmafia96.fullnessLimit)() + (0, import_kolmafia96.toInt)(haveDistentionPill)) {
      throw new Error("Error in diet schedule: Overeating ".concat(_entry2.quantity, " ").concat(_entry2.name, " to ").concat(fullness, "/").concat((0, import_kolmafia96.fullnessLimit)() + (0, import_kolmafia96.toInt)(haveDistentionPill)));
    } else if (drunkenness > (0, import_kolmafia96.inebrietyLimit)()) {
      throw new Error("Error in diet schedule: Overdrinking ".concat(_entry2.quantity, " ").concat(_entry2.name, " to ").concat(drunkenness, "/").concat((0, import_kolmafia96.inebrietyLimit)()));
    } else if (spleenUse > (0, import_kolmafia96.spleenLimit)()) {
      throw new Error("Error in diet schedule: Overspleening ".concat(_entry2.quantity, " ").concat(_entry2.name, " to ").concat(spleenUse, "/").concat((0, import_kolmafia96.spleenLimit)()));
    }
  }
  (0, import_kolmafia96.print)("Expected Organs Post-Yachtzee:");
  (0, import_kolmafia96.print)("Fullness:   ".concat((0, import_kolmafia96.myFullness)(), "/").concat((0, import_kolmafia96.fullnessLimit)() + (0, import_kolmafia96.toInt)(haveDistentionPill), " -> ").concat(fullness, "/").concat((0, import_kolmafia96.fullnessLimit)() + (0, import_kolmafia96.toInt)(haveDistentionPill)), "blue");
  (0, import_kolmafia96.print)("Inebriety:  ".concat((0, import_kolmafia96.myInebriety)(), "/").concat((0, import_kolmafia96.inebrietyLimit)(), " -> ").concat(drunkenness, "/").concat((0, import_kolmafia96.inebrietyLimit)()), "blue");
  (0, import_kolmafia96.print)("Spleen Use: ".concat((0, import_kolmafia96.mySpleenUse)(), "/").concat((0, import_kolmafia96.spleenLimit)(), " -> ").concat(spleenUse, "/").concat((0, import_kolmafia96.spleenLimit)()), "blue");
  return dietSchedule;
}
function yachtzeeChainDiet(simOnly) {
  var _possibleJellyYachtze;
  if (get("_garboYachtzeeChainDietPlanned", false))
    return true;
  _set("_garboYachtzeeChainDiet", "");
  var havePYECCharge = pyecAvailable();
  var haveDistentionPill = !get("_distentionPillUsed") && have($item(_templateObject4424 || (_templateObject4424 = _taggedTemplateLiteral88(["distention pill"]))));
  (0, import_kolmafia96.visitUrl)("desc_item.php?whichitem=".concat($item(_templateObject4523 || (_templateObject4523 = _taggedTemplateLiteral88(["designer sweatpants"]))).descid));
  var sweatOutsAvailable = clamp(Math.floor(get("sweat") / 25), 0, 3 - get("_sweatOutSomeBoozeUsed"));
  var syntheticPillsAvailable = !get("_syntheticDogHairPillUsed") && have($item(_templateObject4620 || (_templateObject4620 = _taggedTemplateLiteral88(["synthetic dog hair pill"])))) ? 1 : 0;
  var lostStomachAvailable = shouldAugustCast($skill(_templateObject4720 || (_templateObject4720 = _taggedTemplateLiteral88(["Aug. 16th: Roller Coaster Day!"])))) ? 1 : 0;
  var currentSpleenLeft = (0, import_kolmafia96.spleenLimit)() - (0, import_kolmafia96.mySpleenUse)();
  var filters = 3 - get("currentMojoFilters");
  var extroSpleenSpace = hasMonsterReplacers() && !have($skill(_templateObject4820 || (_templateObject4820 = _taggedTemplateLiteral88(["Recall Facts: Monster Habitats"])))) ? 6 - Math.min(6, 2 * get("beGregariousCharges")) : 0;
  var synthCastsToCoverRun = globalOptions.nobarf || !have($skill(_templateObject4920 || (_templateObject4920 = _taggedTemplateLiteral88(["Sweet Synthesis"])))) ? 0 : Math.max(0, Math.ceil((estimatedGarboTurns() - (0, import_kolmafia96.haveEffect)($effect(_templateObject5020 || (_templateObject5020 = _taggedTemplateLiteral88(["Synthesis: Greed"]))))) / 30));
  var reservedFullness = 2 * (0, import_kolmafia96.toInt)(!get("deepDishOfLegendEaten")) + // to be consumed in yachtzee
  2 * (0, import_kolmafia96.toInt)(!get("calzoneOfLegendEaten")) + // to be consumed post-yachtzee
  2 * (0, import_kolmafia96.toInt)(!get("pizzaOfLegendEaten")) + // to be consumed post-yachtzee
  2;
  var fullnessAvailable = (0, import_kolmafia96.myLevel)() >= 13 ? Math.max(0, (0, import_kolmafia96.fullnessLimit)() - (0, import_kolmafia96.myFullness)() + (0, import_kolmafia96.toInt)(haveDistentionPill) + lostStomachAvailable - reservedFullness) : 0;
  var reservedInebriety = Math.max(0, (0, import_kolmafia96.itemAmount)($item(_templateObject5144 || (_templateObject5144 = _taggedTemplateLiteral88(["astral pilsner"])))) - (0, import_kolmafia96.toInt)(get("_mimeArmyShotglassUsed")));
  var inebrietyAvailable = (0, import_kolmafia96.myLevel)() >= 13 ? Math.max(0, (0, import_kolmafia96.inebrietyLimit)() - (0, import_kolmafia96.myInebriety)() + syntheticPillsAvailable + sweatOutsAvailable - reservedInebriety) : 0;
  var spleenAvailable = currentSpleenLeft + filters;
  var organsAvailable = Math.floor(fullnessAvailable / 5) * 5 + // can only clean stomach in multiples of 5
  Math.floor(inebrietyAvailable / 5) * 5 + // can only clean liver in multiples of 5
  spleenAvailable;
  var cleanableSpleen = organsAvailable - synthCastsToCoverRun - extroSpleenSpace;
  var sufficientOrgansFor = function(yachtzees) {
    return cleanableSpleen >= yachtzees && // We can actually hit this many yachtzees
    Math.floor((organsAvailable - extroSpleenSpace - yachtzees) / 5) * 5 >= synthCastsToCoverRun;
  };
  var possibleJellyYachtzeeTurns = Array(15).fill(0).map(function(_, i) {
    return 2 * (i + 1);
  }).reverse();
  var jellyYachtzeeTurns = (_possibleJellyYachtze = possibleJellyYachtzeeTurns.find(sufficientOrgansFor)) !== null && _possibleJellyYachtze !== void 0 ? _possibleJellyYachtze : 0;
  var canNCChain = freeNCs() > 0;
  if (jellyYachtzeeTurns === 0 && !canNCChain) {
    (0, import_kolmafia96.print)("Determined that there are no suitable number of turns to chain yachtzees", "red");
    return false;
  }
  (0, import_kolmafia96.print)("Synth Casts Wanted: ".concat(synthCastsToCoverRun), "blue");
  (0, import_kolmafia96.print)("Organs Available: ".concat(organsAvailable), "blue");
  (0, import_kolmafia96.print)("Jelly Yachtzee Turns: ".concat(jellyYachtzeeTurns), "blue");
  var sliders = Math.floor(fullnessAvailable / 5);
  var pickleJuice = (0, import_kolmafia96.myLevel)() >= 13 ? Math.floor(inebrietyAvailable / 5) : 0;
  var reqSynthTurns = 30;
  var synthTurnsWanted = reqSynthTurns - (0, import_kolmafia96.haveEffect)($effect(_templateObject5225 || (_templateObject5225 = _taggedTemplateLiteral88(["Synthesis: Greed"]))));
  var synthCastsWanted = Math.ceil(synthTurnsWanted / 30);
  var synthCasts = have($skill(_templateObject5325 || (_templateObject5325 = _taggedTemplateLiteral88(["Sweet Synthesis"])))) ? Math.max(synthCastsWanted, 0) : 0;
  var cologne = 0;
  var potentialSpleen = currentSpleenLeft + 5 * sliders + 5 * pickleJuice + filters;
  var availableSpleen = potentialSpleen - synthCasts - extroSpleenSpace;
  _set("_stenchJellyChargeTarget", 0);
  if (availableSpleen < jellyYachtzeeTurns) {
    (0, import_kolmafia96.print)("We were unable to generate enough organ space for optimal yachtzee chaining", "red");
    return false;
  }
  var yachtzeeTurns = freeNCs() + jellyYachtzeeTurns;
  if (availableSpleen + freeNCs() > yachtzeeTurns)
    cologne = 1;
  if (simOnly)
    (0, import_kolmafia96.print)("We can potentially run ".concat(yachtzeeTurns, " for yachtzee"), "purple");
  else
    (0, import_kolmafia96.print)("Trying to run ".concat(yachtzeeTurns, " turns of Yachtzee"), "purple");
  var fishyCost = optimizeForFishy(yachtzeeTurns);
  var extroPrice = (0, import_kolmafia96.mallPrice)($item(_templateObject5423 || (_templateObject5423 = _taggedTemplateLiteral88(["Extrovermectin\u2122"]))));
  var VOA = get("valueOfAdventure");
  var slidersPrice = (0, import_kolmafia96.mallPrice)($item(_templateObject5521 || (_templateObject5521 = _taggedTemplateLiteral88(["extra-greasy slider"]))));
  var pickleJuicePrice = (0, import_kolmafia96.mallPrice)($item(_templateObject5620 || (_templateObject5620 = _taggedTemplateLiteral88(["jar of fermented pickle juice"]))));
  var colognePrice = (0, import_kolmafia96.mallPrice)($item(_templateObject5719 || (_templateObject5719 = _taggedTemplateLiteral88(["beggin' cologne"]))));
  var spleenNeeded = Math.max(0, yachtzeeTurns - freeNCs()) + synthCasts + extroSpleenSpace + cologne;
  var spleenToClean = spleenNeeded - currentSpleenLeft - filters;
  var pickleJuiceToDrink = clamp(Math.ceil(spleenToClean / 5), 0, pickleJuice);
  var slidersToEat = clamp(Math.ceil(spleenToClean / 5) - pickleJuiceToDrink, 0, sliders);
  var jelliesToChew = Math.max(0, yachtzeeTurns - freeNCs());
  var synthToUse = synthCasts;
  var cologneToChew = cologne;
  var jellyPrice = (0, import_kolmafia96.mallPrice)($item(_templateObject5819 || (_templateObject5819 = _taggedTemplateLiteral88(["stench jelly"]))));
  var jellySlidersCosts = jellyPrice + slidersPrice / 5;
  var jellyPickleCosts = jellyPrice + pickleJuicePrice / 5;
  var toastPrice = Math.min((0, import_kolmafia96.mallPrice)($item(_templateObject5919 || (_templateObject5919 = _taggedTemplateLiteral88(["toast with stench jelly"])))), jellyPrice + (0, import_kolmafia96.mallPrice)($item(_templateObject6018 || (_templateObject6018 = _taggedTemplateLiteral88(["toast"])))));
  var sliderAdventuresPerFull = getAverageAdventures($item(_templateObject6130 || (_templateObject6130 = _taggedTemplateLiteral88(["extra-greasy slider"])))) / 5;
  var toastAdventuresPerFull = getAverageAdventures($item(_templateObject6223 || (_templateObject6223 = _taggedTemplateLiteral88(["toast with stench jelly"])))) / 1;
  var toastOpportunityCost = toastPrice + (sliderAdventuresPerFull - toastAdventuresPerFull) * VOA;
  var toastsToEat = 0;
  if (toastOpportunityCost < jellySlidersCosts || (0, import_kolmafia96.myLevel)() < 13) {
    toastsToEat = 5 * slidersToEat;
    jelliesToChew -= 5 * slidersToEat;
    slidersToEat = 0;
  }
  if (toastOpportunityCost < jellyPickleCosts) {
    while (pickleJuiceToDrink > 0 && jelliesToChew >= 5 && slidersToEat * 5 + toastsToEat + 5 <= fullnessAvailable - 1) {
      toastsToEat += 5;
      jelliesToChew -= 5;
      pickleJuiceToDrink -= 1;
    }
  }
  var jelliesBulkPrice = (0, import_kolmafia96.retrievePrice)($item(_templateObject6321 || (_templateObject6321 = _taggedTemplateLiteral88(["stench jelly"]))), jelliesToChew);
  var maxSliderPrice = 15e4, maxPickleJuicePrice = 15e4;
  if (slidersToEat > 0 && (0, import_kolmafia96.mallPrice)($item(_templateObject6418 || (_templateObject6418 = _taggedTemplateLiteral88(["extra-greasy slider"])))) > maxSliderPrice) {
    (0, import_kolmafia96.print)("Sliders are way too overpriced for us to clean spleens for jellies", "red");
    return false;
  } else if (pickleJuiceToDrink > 0 && (0, import_kolmafia96.mallPrice)($item(_templateObject6517 || (_templateObject6517 = _taggedTemplateLiteral88(["jar of fermented pickle juice"])))) > maxPickleJuicePrice) {
    (0, import_kolmafia96.print)("Pickle juices are way too overpriced for us to clean spleens for jellies", "red");
    return false;
  }
  var horseradishes = (0, import_kolmafia96.mallPrice)($item(_templateObject6617 || (_templateObject6617 = _taggedTemplateLiteral88(["jumping horseradish"])))) <= 6e4 && (0, import_kolmafia96.haveEffect)($effect(_templateObject6717 || (_templateObject6717 = _taggedTemplateLiteral88(["Kicked in the Sinuses"])))) < yachtzeeTurns && 1 + slidersToEat * 5 + toastsToEat <= fullnessAvailable ? 1 : 0;
  var borisBreads = !get("unknownRecipe10978") && (0, import_kolmafia96.retrievePrice)($item(_templateObject6816 || (_templateObject6816 = _taggedTemplateLiteral88(["Boris's bread"])))) <= 6e4 && (0, import_kolmafia96.haveEffect)($effect(_templateObject6916 || (_templateObject6916 = _taggedTemplateLiteral88(["Inspired Chef"])))) < yachtzeeTurns && 1 + slidersToEat * 5 + toastsToEat + horseradishes <= fullnessAvailable ? 1 : 0;
  var greedyDogs = (0, import_kolmafia96.mallPrice)($item(_templateObject7015 || (_templateObject7015 = _taggedTemplateLiteral88(["bottle of Greedy Dog"])))) <= 6e4 && (0, import_kolmafia96.haveEffect)($effect(_templateObject7118 || (_templateObject7118 = _taggedTemplateLiteral88(["Covetin' Drunk"])))) < yachtzeeTurns && 3 + pickleJuiceToDrink * 5 <= inebrietyAvailable ? 1 : 0;
  var pizzaAdditionalAdvPerFullness = 24 / 2 - 31.5 / 5;
  var deepDishValue = yachtzeePotionProfits(new Potion($item(_templateObject7218 || (_templateObject7218 = _taggedTemplateLiteral88(["Deep Dish of Legend"])))), yachtzeeTurns) + pizzaAdditionalAdvPerFullness * 2 * VOA;
  var deepDishPizzas = !get("deepDishOfLegendEaten") && deepDishValue > (0, import_kolmafia96.retrievePrice)($item(_templateObject7318 || (_templateObject7318 = _taggedTemplateLiteral88(["Deep Dish of Legend"])))) && !get("unknownRecipe11000") && !get("unknownRecipe10988") && !get("unknownRecipe10978") && 2 + slidersToEat * 5 + toastsToEat + horseradishes + borisBreads <= fullnessAvailable ? 1 : 0;
  var earlyMeatDropsEstimate = (0, import_kolmafia96.numericModifier)("Meat Drop") + (!have($effect(_templateObject7417 || (_templateObject7417 = _taggedTemplateLiteral88(["Synthesis: Greed"])))) && have($skill(_templateObject7517 || (_templateObject7517 = _taggedTemplateLiteral88(["Sweet Synthesis"])))) ? 300 : 0) + ((0, import_kolmafia96.visitUrl)("forestvillage.php").includes("friarcottage.gif") ? 60 : 0);
  var slidersExcessCost = slidersPrice > 7e4 ? slidersPrice - 7e4 : 0;
  var pickleJuiceExcessCost = pickleJuicePrice > 6e4 ? pickleJuicePrice - 6e4 : 0;
  var higherBaseMeatProfits = yachtzeePotionSetup(yachtzeeTurns, true) + cologneToChew * ((yachtzeeTurns + 60 + 5 * (0, import_kolmafia96.toInt)(havePYECCharge)) * 1e3 - colognePrice) + (horseradishes > 0 ? yachtzeeTurns * 1e3 : 0) + (borisBreads > 0 ? yachtzeeTurns * 1e3 : 0) + (greedyDogs > 0 ? yachtzeeTurns * 2e3 : 0);
  var extroValuePerSpleen = 6 * VOA - extroPrice / 2;
  var jellyValuePerSpleen = earlyMeatDropsEstimate * 2e3 / 100 - fishyCost / yachtzeeTurns - (jelliesBulkPrice + toastsToEat * toastPrice + slidersToEat * slidersExcessCost + pickleJuiceToDrink * pickleJuiceExcessCost - higherBaseMeatProfits) / jelliesToChew;
  (0, import_kolmafia96.print)("Early Meat Drop Modifier: ".concat(earlyMeatDropsEstimate, "%"));
  (0, import_kolmafia96.print)("Extro value per spleen: ".concat(extroValuePerSpleen));
  (0, import_kolmafia96.print)("Jelly value per spleen: ".concat(jellyValuePerSpleen));
  if (simOnly) {
    (0, import_kolmafia96.print)("Jelly value estimates are wildly off for simulations because we have not properly buffed up yet", "orange");
  }
  if (jellyValuePerSpleen < extroValuePerSpleen && !simOnly && jellyYachtzeeTurns > 0) {
    if (!canNCChain) {
      (0, import_kolmafia96.print)("Running extros is more profitable than chaining yachtzees", "red");
      return false;
    }
    yachtzeeTurns = freeNCs();
    slidersToEat = 0;
    pickleJuiceToDrink = 0;
    toastsToEat = 0;
    jelliesToChew = 0;
    filters = Math.min((0, import_kolmafia96.mySpleenUse)(), filters);
  }
  var addPref = function(n, name) {
    dietUtil.addToPref(n, name);
  };
  var dietUtil = new YachtzeeDietUtils(addPref);
  var regularEntries = [["extra-greasy slider", slidersToEat], ["jar of fermented pickle juice", pickleJuiceToDrink], ["synthesis", synthToUse], ["mojo filter", filters], ["beggin' cologne", cologneToChew], ["jumping horseradish", horseradishes], ["Boris's bread", borisBreads], ["bottle of Greedy Dog", greedyDogs], ["Deep Dish of Legend", deepDishPizzas]];
  var specialEntries = [["stench jelly", jelliesToChew], ["toast with stench jelly", toastsToEat], ["clara's bell", have($item(_templateObject7615 || (_templateObject7615 = _taggedTemplateLiteral88(["Clara's bell"])))) && !globalOptions.clarasBellClaimed ? 1 : 0], ["jurassic parka", have($item(_templateObject7714 || (_templateObject7714 = _taggedTemplateLiteral88(["Jurassic Parka"])))) ? 5 - get("_spikolodonSpikeUses") : 0], ["cinch fiesta", cinchNCs()]].map(function(_ref) {
    var _ref2 = _slicedToArray29(_ref, 2), name = _ref2[0], qty = _ref2[1];
    return [name, qty, function(n, name2) {
      dietUtil.addToPref(n, name2);
      if (!simOnly) {
        _set("_stenchJellyChargeTarget", get("_stenchJellyChargeTarget", 0) + n);
      }
    }];
  });
  for (var _i5 = 0, _regularEntries = regularEntries; _i5 < _regularEntries.length; _i5++) {
    var entry = _regularEntries[_i5];
    dietUtil.setDietEntry.apply(dietUtil, _toConsumableArray51(entry));
  }
  var _iterator13 = _createForOfIteratorHelper36(specialEntries), _step13;
  try {
    for (_iterator13.s(); !(_step13 = _iterator13.n()).done; ) {
      var _entry4 = _step13.value;
      dietUtil.setDietEntry.apply(dietUtil, _toConsumableArray51(_entry4));
    }
  } catch (err) {
    _iterator13.e(err);
  } finally {
    _iterator13.f();
  }
  (0, import_kolmafia96.print)("Scheduling diet", "purple");
  var dietSchedule = yachtzeeDietScheduler(dietUtil.dietArray);
  var _iterator14 = _createForOfIteratorHelper36(dietSchedule), _step14;
  try {
    for (_iterator14.s(); !(_step14 = _iterator14.n()).done; ) {
      var _entry5 = _step14.value;
      _entry5.action(_entry5.quantity, _entry5.name);
    }
  } catch (err) {
    _iterator14.e(err);
  } finally {
    _iterator14.f();
  }
  dietUtil.setDietPref();
  if (simOnly)
    return true;
  if (get("_stenchJellyChargeTarget", 0) < yachtzeeTurns) {
    throw new Error("We are only able to obtain up to ".concat(get("_stenchJellyChargeTarget", 0), "/").concat(yachtzeeTurns, " turns of jelly charges!"));
  }
  acquire(
    jelliesToChew,
    $item(_templateObject7812 || (_templateObject7812 = _taggedTemplateLiteral88(["stench jelly"]))),
    2 * jelliesBulkPrice / jelliesToChew,
    true,
    1.2 * jelliesBulkPrice
    // Bulk jelly purchases may cost > 1m in the future
  );
  acquire(toastsToEat, $item(_templateObject7911 || (_templateObject7911 = _taggedTemplateLiteral88(["toast with stench jelly"]))), 2 * toastPrice, true, 1.2 * toastPrice * toastsToEat);
  acquire(toastsToEat, $item(_templateObject8011 || (_templateObject8011 = _taggedTemplateLiteral88(["munchies pill"]))), 2.66 * VOA, false);
  acquire(pickleJuiceToDrink, $item(_templateObject8118 || (_templateObject8118 = _taggedTemplateLiteral88(["jar of fermented pickle juice"]))), maxPickleJuicePrice);
  acquire(slidersToEat, $item(_templateObject8218 || (_templateObject8218 = _taggedTemplateLiteral88(["extra-greasy slider"]))), maxSliderPrice);
  acquire(cologneToChew, $item(_templateObject8317 || (_templateObject8317 = _taggedTemplateLiteral88(["beggin' cologne"]))), 2 * colognePrice);
  acquire(filters, $item(_templateObject8417 || (_templateObject8417 = _taggedTemplateLiteral88(["mojo filter"]))), 2 * (0, import_kolmafia96.mallPrice)($item(_templateObject8516 || (_templateObject8516 = _taggedTemplateLiteral88(["mojo filter"])))));
  acquire(horseradishes, $item(_templateObject8614 || (_templateObject8614 = _taggedTemplateLiteral88(["jumping horseradish"]))), 6e4);
  acquire(borisBreads, $item(_templateObject8710 || (_templateObject8710 = _taggedTemplateLiteral88(["Boris's bread"]))), 6e4);
  acquire(greedyDogs, $item(_templateObject8810 || (_templateObject8810 = _taggedTemplateLiteral88(["bottle of Greedy Dog"]))), 6e4);
  acquire(deepDishPizzas, $item(_templateObject8910 || (_templateObject8910 = _taggedTemplateLiteral88(["Deep Dish of Legend"]))), 1.2 * deepDishValue);
  (0, import_kolmafia96.print)("Getting fishy turns", "purple");
  optimizeForFishy(yachtzeeTurns, true);
  if ((0, import_kolmafia96.haveEffect)($effect(_templateObject909 || (_templateObject909 = _taggedTemplateLiteral88(["Fishy"])))) + 5 * (0, import_kolmafia96.toInt)(havePYECCharge) < yachtzeeTurns) {
    throw new Error("We only got ".concat((0, import_kolmafia96.haveEffect)($effect(_templateObject9115 || (_templateObject9115 = _taggedTemplateLiteral88(["Fishy"])))), "/").concat(yachtzeeTurns, " turns of fishy!"));
  }
  _set("_garboYachtzeeChainDietPlanned", true);
  return true;
}

// src/yachtzee/buffs.ts
var _templateObject987;
var _templateObject2190;
var _templateObject3166;
var _templateObject4150;
var _templateObject5145;
var _templateObject6131;
var _templateObject7108;
var _templateObject8103;
var _templateObject988;
var _templateObject1069;
var _templateObject1161;
var _templateObject1259;
var _templateObject1357;
var _templateObject1449;
var _templateObject1546;
var _templateObject1645;
function _createForOfIteratorHelper37(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray67(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it)
        o = it;
      var i = 0;
      var F = function F2() {
      };
      return { s: F, n: function n() {
        if (i >= o.length)
          return { done: true };
        return { done: false, value: o[i++] };
      }, e: function e(_e) {
        throw _e;
      }, f: F };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true, didErr = false, err;
  return { s: function s() {
    it = it.call(o);
  }, n: function n() {
    var step = it.next();
    normalCompletion = step.done;
    return step;
  }, e: function e(_e2) {
    didErr = true;
    err = _e2;
  }, f: function f() {
    try {
      if (!normalCompletion && it.return != null)
        it.return();
    } finally {
      if (didErr)
        throw err;
    }
  } };
}
function _unsupportedIterableToArray67(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray67(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray67(o, minLen);
}
function _arrayLikeToArray67(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral89(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function yachtzeePotionProfits(potion, yachtzeeTurns) {
  var PYECOffset = pyecAvailable() ? 5 : 0;
  var existingOffset = (0, import_kolmafia97.haveEffect)(potion.effect()) ? PYECOffset : 0;
  var extraOffset = PYECOffset - existingOffset;
  var effectiveYachtzeeTurns = Math.max(Math.min(yachtzeeTurns - (0, import_kolmafia97.haveEffect)(potion.effect()) - existingOffset, potion.effectDuration() + extraOffset), 0);
  var embezzlerTurns = Math.min(expectedEmbezzlers, Math.max(potion.effectDuration() + extraOffset - effectiveYachtzeeTurns, 0));
  var barfTurns = Math.max(potion.effectDuration() + extraOffset - effectiveYachtzeeTurns - embezzlerTurns, 0);
  var embezzlerValue = embezzlerTurns > 0 ? potion.gross(embezzlerTurns) : 0;
  var yachtzeeValue = effectiveYachtzeeTurns * 2e3 * (potion.meatDrop() + 2.5 * potion.familiarWeight()) / 100;
  var barfValue = barfTurns * baseMeat * turnsToNC / (turnsToNC + 1);
  return yachtzeeValue + embezzlerValue + barfValue - potion.price(true);
}
var doublingValue = function(potion, yachtzeeTurns) {
  return Math.min(potion.price(false), yachtzeePotionProfits(potion.doubleDuration(), yachtzeeTurns) - Math.max(0, yachtzeePotionProfits(potion, yachtzeeTurns)));
};
function yachtzeePotionSetup(yachtzeeTurns, simOnly) {
  (0, import_kolmafia97.setLocation)($location.none);
  var totalProfits = 0;
  var PYECOffset = pyecAvailable() ? 5 : 0;
  var excludedEffects = /* @__PURE__ */ new Set();
  shrugIrrelevantSongs();
  if (have($item(_templateObject987 || (_templateObject987 = _taggedTemplateLiteral89(["Eight Days a Week Pill Keeper"])))) && !get("_freePillKeeperUsed")) {
    var doublingPotions2 = farmingPotions.filter(function(potion2) {
      return potion2.canDouble && (0, import_kolmafia97.haveEffect)(potion2.effect()) + PYECOffset * (have(potion2.effect()) ? 1 : 0) < yachtzeeTurns && yachtzeePotionProfits(potion2.doubleDuration(), yachtzeeTurns) > 0 && potion2.price(true) < (0, import_kolmafia97.myMeat)();
    });
    var bestPotion = doublingPotions2.length > 0 ? maxBy(doublingPotions2, function(potion2) {
      return doublingValue(potion2, yachtzeeTurns);
    }) : void 0;
    if (bestPotion) {
      var profit = yachtzeePotionProfits(bestPotion.doubleDuration(), yachtzeeTurns);
      var price2 = bestPotion.price(true);
      totalProfits += profit;
      (0, import_kolmafia97.print)("Determined that ".concat(bestPotion.potion, " was the best potion to double"), "blue");
      (0, import_kolmafia97.print)("Expected to profit ".concat(profit, " meat from doubling 1 ").concat(bestPotion.potion, " @ price ").concat(price2, " meat"), "blue");
      if (!simOnly) {
        (0, import_kolmafia97.cliExecute)("pillkeeper extend");
        acquire(1, bestPotion.potion, profit + price2);
        bestPotion.use(1);
      } else
        excludedEffects.add(bestPotion.effect());
    }
  }
  var _iterator = _createForOfIteratorHelper37(getActiveEffects()), _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done; ) {
      var _mutuallyExclusive$ge;
      var effect2 = _step.value;
      var _iterator3 = _createForOfIteratorHelper37((_mutuallyExclusive$ge = mutuallyExclusive.get(effect2)) !== null && _mutuallyExclusive$ge !== void 0 ? _mutuallyExclusive$ge : []), _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done; ) {
          var excluded = _step3.value;
          excludedEffects.add(excluded);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var testPotions = farmingPotions.filter(function(potion2) {
    return (0, import_kolmafia97.haveEffect)(potion2.effect()) + PYECOffset * (0, import_kolmafia97.toInt)((0, import_kolmafia97.haveEffect)(potion2.effect()) > 0) < yachtzeeTurns && yachtzeePotionProfits(potion2, yachtzeeTurns) > 0;
  }).sort(function(a, b) {
    return yachtzeePotionProfits(b, yachtzeeTurns) - yachtzeePotionProfits(a, yachtzeeTurns);
  });
  var _iterator2 = _createForOfIteratorHelper37(testPotions), _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
      var potion = _step2.value;
      var _effect = potion.effect();
      var _price2 = potion.price(true);
      if ((0, import_kolmafia97.haveEffect)(_effect) + PYECOffset * (0, import_kolmafia97.toInt)((0, import_kolmafia97.haveEffect)(_effect) > 0) >= yachtzeeTurns || _price2 > (0, import_kolmafia97.myMeat)()) {
        continue;
      }
      if (!excludedEffects.has(_effect)) {
        var tries = 0;
        while ((0, import_kolmafia97.haveEffect)(_effect) + PYECOffset * (0, import_kolmafia97.toInt)((0, import_kolmafia97.haveEffect)(_effect) > 0) < yachtzeeTurns) {
          tries++;
          (0, import_kolmafia97.print)("Considering effect ".concat(_effect, " from source ").concat(potion.potion), "blue");
          var _profit2 = yachtzeePotionProfits(potion, yachtzeeTurns);
          if (_profit2 < 0)
            break;
          var nPotions = have(_effect) ? clamp(Math.floor((yachtzeeTurns - (0, import_kolmafia97.haveEffect)(_effect) - PYECOffset) / potion.effectDuration()), 1, Math.max(1, yachtzeeTurns - PYECOffset)) : 1;
          totalProfits += nPotions * _profit2;
          (0, import_kolmafia97.print)("Expected to profit ".concat(nPotions * _profit2, " meat from using ").concat(nPotions, " ").concat(potion.potion, " @ price ").concat(_price2, " meat each"), "blue");
          if (!simOnly) {
            acquire(nPotions, potion.potion, _profit2 + _price2, false);
            if ((0, import_kolmafia97.itemAmount)(potion.potion) < 1)
              break;
            if (isSong(_effect) && !have(_effect)) {
              var _iterator4 = _createForOfIteratorHelper37(getActiveSongs()), _step4;
              try {
                var _loop = function _loop2() {
                  var song2 = _step4.value;
                  var slot = Mood.defaultOptions.songSlots.find(function(slot2) {
                    return slot2.includes(song2);
                  });
                  if (!slot || slot.includes(_effect)) {
                    (0, import_kolmafia97.cliExecute)("shrug ".concat(song2));
                  }
                };
                for (_iterator4.s(); !(_step4 = _iterator4.n()).done; ) {
                  _loop();
                }
              } catch (err) {
                _iterator4.e(err);
              } finally {
                _iterator4.f();
              }
            }
            if (!potion.use(Math.min((0, import_kolmafia97.itemAmount)(potion.potion), nPotions)) || tries >= 5 * Math.ceil(yachtzeeTurns / potion.effectDuration())) {
              break;
            } else if (potion.potion === $item(_templateObject1645 || (_templateObject1645 = _taggedTemplateLiteral89(["pocket wish"]))) && failedWishes.includes(potion.effect())) {
              break;
            }
          } else
            break;
        }
        if (have(_effect) || simOnly) {
          var _mutuallyExclusive$ge2;
          var _iterator5 = _createForOfIteratorHelper37((_mutuallyExclusive$ge2 = mutuallyExclusive.get(_effect)) !== null && _mutuallyExclusive$ge2 !== void 0 ? _mutuallyExclusive$ge2 : []), _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done; ) {
              var _excluded = _step5.value;
              excludedEffects.add(_excluded);
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
        }
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  if (!simOnly) {
    variableMeatPotionsSetup(yachtzeeTurns, expectedEmbezzlers);
    executeNextDietStep(true);
    if (pyecAvailable()) {
      (0, import_kolmafia97.maximize)("MP", false);
      if (have($item(_templateObject2190 || (_templateObject2190 = _taggedTemplateLiteral89(["Platinum Yendorian Express Card"]))))) {
        burnLibrams(200);
        (0, import_kolmafia97.use)($item(_templateObject3166 || (_templateObject3166 = _taggedTemplateLiteral89(["Platinum Yendorian Express Card"]))));
      } else {
        withStash($items(_templateObject4150 || (_templateObject4150 = _taggedTemplateLiteral89(["Platinum Yendorian Express Card"]))), function() {
          if (have($item(_templateObject5145 || (_templateObject5145 = _taggedTemplateLiteral89(["Platinum Yendorian Express Card"]))))) {
            burnLibrams(200);
            (0, import_kolmafia97.use)($item(_templateObject6131 || (_templateObject6131 = _taggedTemplateLiteral89(["Platinum Yendorian Express Card"]))));
          }
        });
      }
    }
    if (have($item(_templateObject7108 || (_templateObject7108 = _taggedTemplateLiteral89(["License to Chill"])))) && !get("_licenseToChillUsed")) {
      burnLibrams(200);
      (0, import_kolmafia97.use)($item(_templateObject8103 || (_templateObject8103 = _taggedTemplateLiteral89(["License to Chill"]))));
    }
    if (!get("_bagOTricksUsed")) {
      withStash($items(_templateObject988 || (_templateObject988 = _taggedTemplateLiteral89(["Bag o' Tricks"]))), function() {
        burnLibrams(200);
        (0, import_kolmafia97.use)($item(_templateObject1069 || (_templateObject1069 = _taggedTemplateLiteral89(["Bag o' Tricks"]))));
      });
    }
    burnLibrams(200);
    _set("_PYECAvailable", false);
  }
  if (!simOnly && !have($effect(_templateObject1161 || (_templateObject1161 = _taggedTemplateLiteral89(["Buy!  Sell!  Buy!  Sell!"]))))) {
    var yachtzeeFactor = yachtzeeTurns * (yachtzeeTurns + 1);
    var embezzlerFactor = Math.min(100, expectedEmbezzlers + yachtzeeTurns) * (Math.min(100, expectedEmbezzlers + yachtzeeTurns) + 1);
    var greenspanValue = (2e3 * yachtzeeFactor + (baseMeat + 750) * (embezzlerFactor - yachtzeeFactor) + baseMeat * (10100 - embezzlerFactor)) / 100;
    var _price = garboValue($item(_templateObject1259 || (_templateObject1259 = _taggedTemplateLiteral89(["Uncle Greenspan's Bathroom Finance Guide"]))));
    var _profit = greenspanValue - _price;
    if (_profit > 0) {
      (0, import_kolmafia97.print)("Expected to profit ".concat(_profit, " meat from using 1 Uncle Greenspan's Bathroom Finance Guide @ price ").concat(_price, " meat"), "blue");
      acquire(1, $item(_templateObject1357 || (_templateObject1357 = _taggedTemplateLiteral89(["Uncle Greenspan's Bathroom Finance Guide"]))), greenspanValue, false);
      if (have($item(_templateObject1449 || (_templateObject1449 = _taggedTemplateLiteral89(["Uncle Greenspan's Bathroom Finance Guide"]))))) {
        (0, import_kolmafia97.use)(1, $item(_templateObject1546 || (_templateObject1546 = _taggedTemplateLiteral89(["Uncle Greenspan's Bathroom Finance Guide"]))));
      }
    }
  }
  return totalProfits;
}

// src/yachtzee/index.ts
var _templateObject989;
var _templateObject2191;
var _templateObject3167;
var _templateObject4151;
var _templateObject5146;
var _templateObject6133;
var _templateObject7109;
var _templateObject8104;
var _templateObject990;
var _templateObject1070;
var _templateObject1166;
var _templateObject1260;
var _templateObject1358;
function _taggedTemplateLiteral90(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
function _yachtzeeChain() {
  if (!(0, import_kolmafia98.canInteract)())
    return;
  if (!realmAvailable("sleaze"))
    return;
  (0, import_kolmafia98.maximize)("MP", false);
  meatMood(false, 750 + baseMeat).execute(embezzlerCount());
  potionSetup(globalOptions.nobarf);
  maximizeMeat();
  prepareOutfitAndFamiliar();
  var meatLimit = 5e6;
  if ((0, import_kolmafia98.myMeat)() > meatLimit) {
    var meatToCloset = (0, import_kolmafia98.myMeat)() - meatLimit;
    (0, import_kolmafia98.print)("");
    (0, import_kolmafia98.print)("");
    (0, import_kolmafia98.print)("We are going to closet all-but-5million meat for your safety!", "blue");
    (0, import_kolmafia98.print)("");
    (0, import_kolmafia98.print)("");
    if (!get("_yachtzeeChainClosetedMeat")) {
      _set("_yachtzeeChainClosetedMeat", meatToCloset);
    } else {
      _set("_yachtzeeChainClosetedMeat", meatToCloset + get("_yachtzeeChainClosetedMeat"));
    }
    (0, import_kolmafia98.cliExecute)("closet put ".concat(meatToCloset, " meat"));
  }
  if (!yachtzeeChainDiet()) {
    (0, import_kolmafia98.cliExecute)("closet take ".concat(get("_yachtzeeChainClosetedMeat"), " meat"));
    _set("_yachtzeeChainClosetedMeat", 0);
    return;
  }
  var jellyTurns = get("_stenchJellyChargeTarget", 0);
  var fishyTurns = (0, import_kolmafia98.haveEffect)($effect(_templateObject989 || (_templateObject989 = _taggedTemplateLiteral90(["Fishy"])))) + (pyecAvailable() ? 5 : 0);
  var turncount = (0, import_kolmafia98.myTurncount)();
  yachtzeePotionSetup(Math.min(jellyTurns, fishyTurns));
  stickerSetup(Math.min(jellyTurns, fishyTurns));
  (0, import_kolmafia98.cliExecute)("closet take ".concat(get("_yachtzeeChainClosetedMeat"), " meat"));
  _set("_yachtzeeChainClosetedMeat", 0);
  if ((0, import_kolmafia98.haveEffect)($effect(_templateObject2191 || (_templateObject2191 = _taggedTemplateLiteral90(["Beaten Up"]))))) {
    uneffect($effect(_templateObject3167 || (_templateObject3167 = _taggedTemplateLiteral90(["Beaten Up"]))));
  }
  meatMood(false, 2e3).execute(Math.min(jellyTurns, fishyTurns));
  safeRestore();
  propertyManager.setChoice(918, 2);
  var plantCrookweed = true;
  while (Math.min(jellyTurns, fishyTurns) > 0) {
    executeNextDietStep();
    if (!get("noncombatForcerActive"))
      throw new Error("We did not use stench jellies");
    prepareOutfitAndFamiliar();
    if (!have($effect(_templateObject4151 || (_templateObject4151 = _taggedTemplateLiteral90(["Really Deep Breath"]))))) {
      var bestWaterBreathingEquipment = getBestWaterBreathingEquipment(Math.min(jellyTurns, fishyTurns));
      if (bestWaterBreathingEquipment.item !== $item.none) {
        (0, import_kolmafia98.equip)(bestWaterBreathingEquipment.item);
      }
      if ((0, import_kolmafia98.haveEquipped)($item(_templateObject5146 || (_templateObject5146 = _taggedTemplateLiteral90(["The Crown of Ed the Undying"])))) && !(0, import_kolmafia98.booleanModifier)("Adventure Underwater")) {
        (0, import_kolmafia98.cliExecute)("edpiece fish");
      }
    }
    if (!have($effect(_templateObject6133 || (_templateObject6133 = _taggedTemplateLiteral90(["Polka of Plenty"]))))) {
      if (have($effect(_templateObject7109 || (_templateObject7109 = _taggedTemplateLiteral90(["Ode to Booze"])))))
        (0, import_kolmafia98.cliExecute)("shrug ".concat($effect(_templateObject8104 || (_templateObject8104 = _taggedTemplateLiteral90(["Ode to Booze"])))));
      if (getActiveSongs().length < (have($skill(_templateObject990 || (_templateObject990 = _taggedTemplateLiteral90(["Mariachi Memory"])))) ? 4 : 3) && have($skill(_templateObject1070 || (_templateObject1070 = _taggedTemplateLiteral90(["The Polka of Plenty"]))))) {
        (0, import_kolmafia98.useSkill)($skill(_templateObject1166 || (_templateObject1166 = _taggedTemplateLiteral90(["The Polka of Plenty"]))));
      }
    }
    garboAdventure($location(_templateObject1260 || (_templateObject1260 = _taggedTemplateLiteral90(["The Sunken Party Yacht"]))), Macro2.abort());
    if (get("lastEncounter") === "Yachtzee!")
      eventLog.yachtzees += 1;
    if ((0, import_kolmafia98.myTurncount)() > turncount || (0, import_kolmafia98.haveEffect)($effect(_templateObject1358 || (_templateObject1358 = _taggedTemplateLiteral90(["Fishy"])))) < fishyTurns) {
      fishyTurns -= 1;
      jellyTurns -= 1;
      turncount = (0, import_kolmafia98.myTurncount)();
      _set("_stenchJellyChargeTarget", get("_stenchJellyChargeTarget", 0) - 1);
    }
    if (plantCrookweed && Florist_exports.have() && Florist_exports.Crookweed.available()) {
      Florist_exports.Crookweed.plant();
    }
    plantCrookweed = false;
    postCombatActions();
    doSausage();
  }
}
function yachtzeeChain() {
  if (!globalOptions.prefs.yachtzeechain)
    return;
  if (get("_garboYachtzeeChainCompleted", false))
    return;
  (0, import_kolmafia98.print)("Running Yachtzee Chain", "purple");
  _yachtzeeChain();
  _set("_garboYachtzeeChainCompleted", true);
  globalOptions.prefs.yachtzeechain = false;
  if (!globalOptions.nodiet) {
    shrugIrrelevantSongs();
    runDiet();
    prepRobortender();
  }
  freeRunFights();
  postFreeFightDailySetup();
}

// src/index.ts
var _templateObject991;
var _templateObject2193;
var _templateObject3168;
var _templateObject4153;
var _templateObject5147;
var _templateObject6134;
var _templateObject7119;
var _templateObject8105;
var _templateObject996;
var _templateObject1071;
var _templateObject1167;
var _templateObject1261;
var _templateObject1359;
var _templateObject1450;
var _templateObject1547;
var _templateObject1646;
var _templateObject1745;
var _templateObject1841;
var _templateObject1941;
var _templateObject2041;
var _templateObject2194;
var _templateObject2239;
var _templateObject2338;
var _templateObject2438;
var _templateObject2538;
var _templateObject2638;
var _templateObject2736;
var _templateObject2833;
var _templateObject2933;
var _templateObject3030;
var _templateObject3169;
var _templateObject3233;
var _templateObject3331;
var _templateObject3430;
var _templateObject3528;
var _templateObject3626;
function _slicedToArray30(arr, i) {
  return _arrayWithHoles30(arr) || _iterableToArrayLimit30(arr, i) || _unsupportedIterableToArray68(arr, i) || _nonIterableRest30();
}
function _nonIterableRest30() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit30(arr, i) {
  var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
  if (null != _i) {
    var _s, _e, _x, _r, _arr = [], _n = true, _d = false;
    try {
      if (_x = (_i = _i.call(arr)).next, 0 === i) {
        if (Object(_i) !== _i)
          return;
        _n = false;
      } else
        for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = true)
          ;
    } catch (err) {
      _d = true, _e = err;
    } finally {
      try {
        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r))
          return;
      } finally {
        if (_d)
          throw _e;
      }
    }
    return _arr;
  }
}
function _arrayWithHoles30(arr) {
  if (Array.isArray(arr))
    return arr;
}
function _toConsumableArray52(arr) {
  return _arrayWithoutHoles52(arr) || _iterableToArray52(arr) || _unsupportedIterableToArray68(arr) || _nonIterableSpread52();
}
function _nonIterableSpread52() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray68(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray68(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray68(o, minLen);
}
function _iterableToArray52(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
    return Array.from(iter);
}
function _arrayWithoutHoles52(arr) {
  if (Array.isArray(arr))
    return _arrayLikeToArray68(arr);
}
function _arrayLikeToArray68(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++)
    arr2[i] = arr[i];
  return arr2;
}
function _taggedTemplateLiteral91(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));
}
var TICKET_MAX_PRICE = 5e5;
function ensureBarfAccess() {
  if (!(get("stenchAirportAlways") || get("_stenchAirportToday"))) {
    var ticket = $item(_templateObject991 || (_templateObject991 = _taggedTemplateLiteral91(["one-day ticket to Dinseylandfill"])));
    if (!have(ticket))
      (0, import_kolmafia99.buy)(1, ticket, TICKET_MAX_PRICE);
    (0, import_kolmafia99.use)(ticket);
  }
  if (!get("_dinseyGarbageDisposed")) {
    (0, import_kolmafia99.print)("Disposing of garbage.", HIGHLIGHT);
    (0, import_kolmafia99.retrieveItem)($item(_templateObject2193 || (_templateObject2193 = _taggedTemplateLiteral91(["bag of park garbage"]))));
    (0, import_kolmafia99.visitUrl)("place.php?whichplace=airport_stench&action=airport3_tunnels");
    (0, import_kolmafia99.runChoice)(6);
    (0, import_kolmafia99.cliExecute)("refresh inv");
  }
}
function canContinue() {
  return (0, import_kolmafia99.myAdventures)() > globalOptions.saveTurns && (globalOptions.stopTurncount === null || (0, import_kolmafia99.myTurncount)() < globalOptions.stopTurncount);
}
function main() {
  var argString = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  sinceKolmafiaRevision(27567);
  checkGithubVersion();
  (0, import_kolmafia99.visitUrl)("main.php");
  if ((0, import_kolmafia99.currentRound)() > 0) {
    (0, import_kolmafia99.abort)("It seems like you're a bit busy right now. Don't run garbo when you're in combat!");
  }
  if ((0, import_kolmafia99.handlingChoice)()) {
    (0, import_kolmafia99.abort)("It seems like you're a bit busy right now. Don't run garbo when you're in the middle of a choice adventure.");
  }
  Args.fill(globalOptions, argString);
  if (globalOptions.version)
    return;
  if (globalOptions.help) {
    Args.showHelp(globalOptions);
    return;
  }
  if (globalOptions.turns) {
    if (globalOptions.turns >= 0) {
      globalOptions.stopTurncount = (0, import_kolmafia99.myTurncount)() + globalOptions.turns;
    } else {
      globalOptions.saveTurns = -globalOptions.turns;
    }
  }
  if (globalOptions.prefs.autoUserConfirm) {
    (0, import_kolmafia99.print)("I have set auto-confirm to true and accept all ramifications that come with that.", "red");
  }
  if (stashItems.length > 0) {
    if (globalOptions.returnstash || userConfirmDialog("Garbo has detected that you have the following items still out of the stash from a previous run of garbo: ".concat(stashItems.map(function(item9) {
      return item9.name;
    }).join(", "), ". Would you like us to return these to the stash now?"), true)) {
      startSession();
      try {
        var clanIdOrName = globalOptions.prefs.stashClan;
        var parsedClanIdOrName = clanIdOrName !== "none" ? clanIdOrName.match(/^\d+$/) ? parseInt(clanIdOrName) : clanIdOrName : null;
        if (parsedClanIdOrName) {
          Clan.with(parsedClanIdOrName, function() {
            for (var _i = 0, _arr = _toConsumableArray52(stashItems); _i < _arr.length; _i++) {
              var item9 = _arr[_i];
              if (getFoldGroup(item9).some(function(item10) {
                return have(item10);
              })) {
                (0, import_kolmafia99.cliExecute)("fold ".concat(item9));
              }
              var retrieved = (0, import_kolmafia99.retrieveItem)(item9);
              if (item9 === $item(_templateObject3168 || (_templateObject3168 = _taggedTemplateLiteral91(["Spooky Putty sheet"]))) && !retrieved && have($item(_templateObject4153 || (_templateObject4153 = _taggedTemplateLiteral91(["Spooky Putty monster"]))))) {
                continue;
              }
              (0, import_kolmafia99.print)("Returning ".concat(item9, " to ").concat((0, import_kolmafia99.getClanName)(), " stash."), HIGHLIGHT);
              if ((0, import_kolmafia99.putStash)(item9, 1)) {
                stashItems.splice(stashItems.indexOf(item9), 1);
              }
            }
          });
        } else
          throw new Error("Error: No garbo_stashClan set.");
      } finally {
        endSession(false);
      }
    } else {
      if (userConfirmDialog("Are you a responsible friend who has already returned their stash clan items, or promise to do so manually at a later time?", true)) {
        stashItems.splice(0);
      }
    }
  }
  if (globalOptions.returnstash) {
    _set("garboStashItems", stashItems.map(function(item9) {
      return (0, import_kolmafia99.toInt)(item9).toFixed(0);
    }).join(","));
    return;
  }
  if (!$classes(_templateObject5147 || (_templateObject5147 = _taggedTemplateLiteral91(["Seal Clubber, Turtle Tamer, Pastamancer, Sauceror, Disco Bandit, Accordion Thief, Cow Puncher, Snake Oiler, Beanslinger, Pig Skinner, Cheese Wizard, Jazz Agent"]))).includes((0, import_kolmafia99.myClass)())) {
    throw new Error("Garbo does not support this class. It barely supports WOL/SOL avatar classes");
  }
  if (!get("kingLiberated") || (0, import_kolmafia99.myLevel)() < 13 || import_kolmafia99.Stat.all().some(function(s) {
    return (0, import_kolmafia99.myBasestat)(s) < 75;
  })) {
    if (globalOptions.prefs.skipAscensionCheck) {
      (0, import_kolmafia99.logprint)("This player is a silly goose, who ignored our warnings about being underleveled.");
    } else {
      var proceedRegardless = userConfirmDialog("Looks like your ascension may not be done, or you may be severely underleveled. Running garbo in an unintended character state can result in serious injury and even death. Are you sure you want to garbologize?", true);
      if (!proceedRegardless) {
        throw new Error("User interrupt requested. Stopping Garbage Collector.");
      } else {
        (0, import_kolmafia99.logprint)("This player is a silly goose, who ignored our warnings about being underleveled.");
      }
    }
  }
  if (globalOptions.prefs.valueOfAdventure && globalOptions.prefs.valueOfAdventure <= 3500) {
    throw "Your valueOfAdventure is set to ".concat(globalOptions.prefs.valueOfAdventure, ', which is too low for barf farming to be worthwhile. If you forgot to set it, use "set valueOfAdventure = XXXX" to set it to your marginal turn meat value.');
  }
  if (globalOptions.prefs.valueOfAdventure && globalOptions.prefs.valueOfAdventure >= 1e4) {
    throw "Your valueOfAdventure is set to ".concat(globalOptions.prefs.valueOfAdventure, ", which is definitely incorrect. Please set it to your reliable marginal turn value.");
  }
  if ((0, import_kolmafia99.myInebriety)() > (0, import_kolmafia99.inebrietyLimit)() && (!have($item(_templateObject6134 || (_templateObject6134 = _taggedTemplateLiteral91(["Drunkula's wineglass"])))) || !(0, import_kolmafia99.canEquip)($item(_templateObject7119 || (_templateObject7119 = _taggedTemplateLiteral91(["Drunkula's wineglass"])))))) {
    throw new Error("Go home, you're drunk. And don't own (or can't equip) Drunkula's wineglass. Consider either being sober or owning Drunkula's wineglass and being able to equip it.");
  }
  var completedProperty = "_garboCompleted";
  _set(completedProperty, "");
  examine($item(_templateObject8105 || (_templateObject8105 = _taggedTemplateLiteral91(["designer sweatpants"]))));
  startSession();
  if (!globalOptions.nobarf && !globalOptions.simdiet) {
    ensureBarfAccess();
  }
  if (globalOptions.simdiet) {
    propertyManager.set({
      logPreferenceChange: true,
      autoSatisfyWithMall: true,
      autoSatisfyWithNPCs: true,
      autoSatisfyWithCoinmasters: true,
      autoSatisfyWithStash: false,
      maximizerFoldables: true,
      autoTuxedo: true,
      autoPinkyRing: true,
      autoGarish: true,
      valueOfInventory: 2,
      suppressMallPriceCacheMessages: true,
      shadowLabyrinthGoal: "effects"
    });
    runDiet();
    propertyManager.resetAll();
    return;
  }
  var gardens = $items(_templateObject996 || (_templateObject996 = _taggedTemplateLiteral91(["packet of pumpkin seeds, Peppermint Pip Packet, packet of dragon's teeth, packet of beer seeds, packet of winter seeds, packet of thanksgarden seeds, packet of tall grass seeds, packet of mushroom spores, packet of rock seeds"])));
  var startingGarden = gardens.find(function(garden) {
    return Object.getOwnPropertyNames((0, import_kolmafia99.getCampground)()).includes(garden.name);
  });
  if (startingGarden && !$items(_templateObject1071 || (_templateObject1071 = _taggedTemplateLiteral91(["packet of tall grass seeds, packet of mushroom spores"]))).includes(startingGarden) && (0, import_kolmafia99.getCampground)()[startingGarden.name] && $items(_templateObject1167 || (_templateObject1167 = _taggedTemplateLiteral91(["packet of tall grass seeds, packet of mushroom spores"]))).some(function(gardenSeed) {
    return have(gardenSeed);
  })) {
    if (startingGarden === $item(_templateObject1261 || (_templateObject1261 = _taggedTemplateLiteral91(["packet of rock seeds"])))) {
      (0, import_kolmafia99.visitUrl)("campground.php?action=rgarden1&pwd");
      (0, import_kolmafia99.visitUrl)("campground.php?action=rgarden2&pwd");
      (0, import_kolmafia99.visitUrl)("campground.php?action=rgarden3&pwd");
    } else {
      (0, import_kolmafia99.visitUrl)("campground.php?action=garden&pwd");
    }
  }
  var aaBossFlag = (0, import_kolmafia99.xpath)((0, import_kolmafia99.visitUrl)("account.php?tab=combat"), "//*[@id=\"opt_flag_aabosses\"]/label/input[@type='checkbox']@checked")[0] === "checked" ? 1 : 0;
  try {
    (0, import_kolmafia99.print)("Collecting garbage!", HIGHLIGHT);
    if (globalOptions.stopTurncount !== null) {
      (0, import_kolmafia99.print)("Stopping in ".concat(globalOptions.stopTurncount - (0, import_kolmafia99.myTurncount)()), HIGHLIGHT);
    }
    (0, import_kolmafia99.print)();
    if (have($item(_templateObject1359 || (_templateObject1359 = _taggedTemplateLiteral91(["packet of tall grass seeds"])))) && (0, import_kolmafia99.myGardenType)() !== "grass" && (0, import_kolmafia99.myGardenType)() !== "mushroom") {
      (0, import_kolmafia99.use)($item(_templateObject1450 || (_templateObject1450 = _taggedTemplateLiteral91(["packet of tall grass seeds"]))));
    }
    (0, import_kolmafia99.setAutoAttack)(0);
    (0, import_kolmafia99.visitUrl)("account.php?actions[]=flag_aabosses&flag_aabosses=1&action=Update", true);
    var maximizerCombinationLimit = globalOptions.quick ? 1e5 : get("maximizerCombinationLimit");
    var bannedAutoRestorers = have($item(_templateObject1547 || (_templateObject1547 = _taggedTemplateLiteral91(["Cincho de Mayo"])))) ? ["sleep on your clan sofa", "rest in your campaway tent", "rest at the chateau", "rest at your campground", "free rest"] : [];
    var hpItems = get("hpAutoRecoveryItems").split(";").filter(function(s) {
      return !bannedAutoRestorers.includes(s);
    }).join(";");
    var mpItems = get("mpAutoRecoveryItems").split(";").filter(function(s) {
      return !bannedAutoRestorers.includes(s);
    }).join(";");
    propertyManager.set({
      logPreferenceChange: true,
      logPreferenceChangeFilter: _toConsumableArray52(new Set([].concat(_toConsumableArray52(get("logPreferenceChangeFilter").split(",")), ["libram_savedMacro", "maximizerMRUList", "testudinalTeachings", "garboEmbezzlerDate", "garboEmbezzlerCount", "garboEmbezzlerSources", "spadingData"]))).sort().filter(function(a) {
        return a;
      }).join(","),
      battleAction: "custom combat script",
      customCombatScript: "garbo",
      autoSatisfyWithMall: true,
      autoSatisfyWithNPCs: true,
      autoSatisfyWithCoinmasters: true,
      autoSatisfyWithStash: false,
      dontStopForCounters: true,
      maximizerFoldables: true,
      hpAutoRecovery: -0.05,
      hpAutoRecoveryTarget: 0,
      mpAutoRecovery: -0.05,
      mpAutoRecoveryTarget: 0,
      hpAutoRecoveryItems: hpItems,
      mpAutoRecoveryItems: mpItems,
      afterAdventureScript: "",
      betweenBattleScript: "",
      choiceAdventureScript: "",
      counterScript: "",
      familiarScript: "",
      currentMood: "apathetic",
      autoTuxedo: true,
      autoPinkyRing: true,
      autoGarish: true,
      allowNonMoodBurning: !globalOptions.ascend,
      allowSummonBurning: true,
      libramSkillsSoftcore: "none",
      // Don't cast librams when mana burning, handled manually based on sale price
      valueOfInventory: 2,
      suppressMallPriceCacheMessages: true,
      maximizerCombinationLimit: maximizerCombinationLimit,
      allowNegativeTally: true
    });
    var bestHalloweiner = 0;
    if (haveInCampground($item(_templateObject1646 || (_templateObject1646 = _taggedTemplateLiteral91(["haunted doghouse"]))))) {
      var halloweinerOptions = [[$items(_templateObject1745 || (_templateObject1745 = _taggedTemplateLiteral91(["bowl of eyeballs, bowl of mummy guts, bowl of maggots"]))), 1], [$items(_templateObject1841 || (_templateObject1841 = _taggedTemplateLiteral91(["blood and blood, Jack-O-Lantern beer, zombie"]))), 2], [$items(_templateObject1941 || (_templateObject1941 = _taggedTemplateLiteral91(["wind-up spider, plastic nightmare troll, Telltale\u2122 rubber heart"]))), 3]].map(function(_ref) {
        var _ref2 = _slicedToArray30(_ref, 2), halloweinerOption = _ref2[0], choiceId = _ref2[1];
        return {
          price: garboAverageValue.apply(void 0, _toConsumableArray52(halloweinerOption)),
          choiceId: choiceId
        };
      });
      bestHalloweiner = maxBy(halloweinerOptions, "price").choiceId;
    }
    propertyManager.setChoices({
      1106: 3,
      // Ghost Dog Chow
      1107: 1,
      // tennis ball
      1108: bestHalloweiner,
      1340: 1,
      // Accept the doctor quest
      1341: 1
      // Cure her poison
    });
    if (JuneCleaver_exports.have()) {
      propertyManager.setChoices(Object.fromEntries(JuneCleaver_exports.choices.map(function(choice) {
        return [choice, bestJuneCleaverOption(choice)];
      })));
    }
    propertyManager.set({
      shadowLabyrinthGoal: "effects"
    });
    safeRestore();
    if (questStep2("questM23Meatsmith") === -1) {
      (0, import_kolmafia99.visitUrl)("shop.php?whichshop=meatsmith&action=talk");
      (0, import_kolmafia99.runChoice)(1);
    }
    if (questStep2("questM24Doc") === -1) {
      (0, import_kolmafia99.visitUrl)("shop.php?whichshop=doc&action=talk");
      (0, import_kolmafia99.runChoice)(1);
    }
    if (questStep2("questM25Armorer") === -1) {
      (0, import_kolmafia99.visitUrl)("shop.php?whichshop=armory&action=talk");
      (0, import_kolmafia99.runChoice)(1);
    }
    if ((0, import_kolmafia99.myLevel)() >= 11 && questStep2("questS01OldGuy") === -1) {
      (0, import_kolmafia99.visitUrl)("place.php?whichplace=sea_oldman&action=oldman_oldman");
    }
    if ((0, import_kolmafia99.myClass)() === $class(_templateObject2041 || (_templateObject2041 = _taggedTemplateLiteral91(["Seal Clubber"]))) && !have($skill(_templateObject2194 || (_templateObject2194 = _taggedTemplateLiteral91(["Furious Wallop"])))) && (0, import_kolmafia99.guildStoreAvailable)()) {
      (0, import_kolmafia99.visitUrl)("guild.php?action=buyskill&skillid=32", true);
    }
    var _stashItems = $items(_templateObject2239 || (_templateObject2239 = _taggedTemplateLiteral91(["repaid diaper, Buddy Bjorn, Crown of Thrones, Pantsgiving, mafia pointer finger ring"])));
    if ((0, import_kolmafia99.myInebriety)() <= (0, import_kolmafia99.inebrietyLimit)() && ((0, import_kolmafia99.myClass)() !== $class(_templateObject2338 || (_templateObject2338 = _taggedTemplateLiteral91(["Seal Clubber"]))) || !have($skill(_templateObject2438 || (_templateObject2438 = _taggedTemplateLiteral91(["Furious Wallop"]))))) && !have($skill(_templateObject2538 || (_templateObject2538 = _taggedTemplateLiteral91(["Head in the Game"]))))) {
      _stashItems.push.apply(_stashItems, _toConsumableArray52($items(_templateObject2638 || (_templateObject2638 = _taggedTemplateLiteral91(["haiku katana, Operation Patriot Shield"])))));
    }
    if (!have($item(_templateObject2736 || (_templateObject2736 = _taggedTemplateLiteral91(["Jurassic Parka"])))) && have($skill(_templateObject2833 || (_templateObject2833 = _taggedTemplateLiteral91(["Torso Awareness"]))))) {
      _stashItems.push($item(_templateObject2933 || (_templateObject2933 = _taggedTemplateLiteral91(["origami pasties"]))));
    }
    withStash(_stashItems, function() {
      withVIPClan(function() {
        if (globalOptions.nodiet || get("_garboYachtzeeChainCompleted", false)) {
          (0, import_kolmafia99.print)("We should not be yachtzee chaining", "red");
          globalOptions.prefs.yachtzeechain = false;
        }
        if (!globalOptions.nodiet && (!globalOptions.prefs.yachtzeechain || get("_garboYachtzeeChainCompleted", false))) {
          runDiet();
        } else if (!globalOptions.simdiet) {
          nonOrganAdventures();
        }
        dailySetup();
        var preventEquip = $items(_templateObject3030 || (_templateObject3030 = _taggedTemplateLiteral91(["broken champagne bottle, Spooky Putty snake, Spooky Putty mitre, Spooky Putty leotard, Spooky Putty ball, papier-mitre, papier-m\xE2ch\xE9te, papier-m\xE2chine gun, papier-masque, papier-m\xE2churidars, smoke ball, stinky fannypack, dice-shaped backpack, Amulet of Perpetual Darkness"])));
        if (globalOptions.quick) {
          preventEquip.push.apply(preventEquip, _toConsumableArray52($items(_templateObject3169 || (_templateObject3169 = _taggedTemplateLiteral91(["Brimstone Bludgeon, Brimstone Bunker, Brimstone Brooch, Brimstone Bracelet, Brimstone Boxers, Brimstone Beret"])))));
        }
        setDefaultMaximizeOptions({
          preventEquip: preventEquip,
          preventSlot: $slots(_templateObject3233 || (_templateObject3233 = _taggedTemplateLiteral91(["buddy-bjorn, crown-of-thrones"])))
        });
        freeFights();
        yachtzeeChain();
        dailyFights();
        if (!globalOptions.nobarf) {
          potionSetup(false);
          (0, import_kolmafia99.maximize)("MP", false);
          meatMood().execute(estimatedGarboTurns());
          useBuffExtenders();
          try {
            while (canContinue()) {
              barfTurn();
              postCombatActions();
            }
            if (globalOptions.prefs.buyPass && (0, import_kolmafia99.availableAmount)($item(_templateObject3331 || (_templateObject3331 = _taggedTemplateLiteral91(["FunFunds\u2122"])))) >= 20 && !have($item(_templateObject3430 || (_templateObject3430 = _taggedTemplateLiteral91(["one-day ticket to Dinseylandfill"]))))) {
              (0, import_kolmafia99.print)("Buying a one-day ticket", HIGHLIGHT);
              (0, import_kolmafia99.buy)($coinmaster(_templateObject3528 || (_templateObject3528 = _taggedTemplateLiteral91(["The Dinsey Company Store"]))), 1, $item(_templateObject3626 || (_templateObject3626 = _taggedTemplateLiteral91(["one-day ticket to Dinseylandfill"]))));
            }
          } finally {
            (0, import_kolmafia99.setAutoAttack)(0);
          }
        } else
          (0, import_kolmafia99.setAutoAttack)(0);
      });
    });
  } finally {
    propertyManager.resetAll();
    _set("garboStashItems", stashItems.map(function(item9) {
      return (0, import_kolmafia99.toInt)(item9).toFixed(0);
    }).join(","));
    (0, import_kolmafia99.visitUrl)("account.php?actions[]=flag_aabosses&flag_aabosses=".concat(aaBossFlag, "&action=Update"), true);
    if (startingGarden && have(startingGarden))
      (0, import_kolmafia99.use)(startingGarden);
    printEventLog();
    endSession();
    printLog(HIGHLIGHT);
  }
  _set(completedProperty, ["garbo", argString].filter(Boolean).join(" "));
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  canContinue,
  main
});
